package org.telegram.p023ui;

import android.R;
import android.animation.Animator;
import android.animation.AnimatorListenerAdapter;
import android.animation.AnimatorSet;
import android.animation.ObjectAnimator;
import android.animation.ValueAnimator;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.ClipData;
import android.content.ClipboardManager;
import android.content.ContentValues;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapShader;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorFilter;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.LinearGradient;
import android.graphics.Matrix;
import android.graphics.Outline;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff;
import android.graphics.PorterDuffColorFilter;
import android.graphics.RecordingCanvas;
import android.graphics.Rect;
import android.graphics.RectF;
import android.graphics.Region;
import android.graphics.Shader;
import android.graphics.Typeface;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.ColorDrawable;
import android.graphics.drawable.Drawable;
import android.media.AudioManager;
import android.net.Uri;
import android.os.Build;
import android.os.Bundle;
import android.os.Looper;
import android.os.Parcelable;
import android.os.SystemClock;
import android.telephony.TelephonyManager;
import android.text.Layout;
import android.text.Spannable;
import android.text.SpannableString;
import android.text.SpannableStringBuilder;
import android.text.StaticLayout;
import android.text.TextPaint;
import android.text.TextUtils;
import android.text.style.CharacterStyle;
import android.text.style.ForegroundColorSpan;
import android.text.style.ImageSpan;
import android.text.style.URLSpan;
import android.util.Pair;
import android.util.Property;
import android.util.SparseArray;
import android.util.SparseIntArray;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.TextureView;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewOutlineProvider;
import android.view.ViewParent;
import android.view.ViewPropertyAnimator;
import android.view.ViewTreeObserver;
import android.view.accessibility.AccessibilityNodeInfo;
import android.view.animation.DecelerateInterpolator;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.HorizontalScrollView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.PopupWindow;
import android.widget.TextView;
import androidx.collection.LongSparseArray;
import androidx.core.content.ContextCompat;
import androidx.core.content.FileProvider;
import androidx.core.graphics.ColorUtils;
import androidx.core.math.MathUtils;
import androidx.core.view.ViewCompat;
import androidx.core.view.WindowInsetsCompat;
import androidx.dynamicanimation.animation.DynamicAnimation;
import androidx.dynamicanimation.animation.FloatValueHolder;
import androidx.dynamicanimation.animation.SpringAnimation;
import androidx.dynamicanimation.animation.SpringForce;
import androidx.recyclerview.widget.ChatListItemAnimator;
import androidx.recyclerview.widget.GridLayoutManagerFixed;
import androidx.recyclerview.widget.LinearSmoothScrollerCustom;
import androidx.recyclerview.widget.RecyclerView;
import androidx.viewpager.widget.PagerAdapter;
import androidx.viewpager.widget.ViewPager;
import com.exteragram.messenger.ExteraConfig;
import com.exteragram.messenger.api.dto.BadgeDTO;
import com.exteragram.messenger.backup.PreferencesUtils;
import com.exteragram.messenger.badges.BadgesController;
import com.exteragram.messenger.components.SupporterBottomSheet;
import com.exteragram.messenger.export.p006ui.ExportMapper$$ExternalSyntheticLambda2;
import com.exteragram.messenger.p003ai.AiConfig;
import com.exteragram.messenger.p003ai.network.Client;
import com.exteragram.messenger.p003ai.p004ui.GenerateFromMessageBottomSheet;
import com.exteragram.messenger.p003ai.p004ui.ResponseAlert;
import com.exteragram.messenger.plugins.PluginsConstants;
import com.exteragram.messenger.plugins.p009ui.components.PluginsMenuWrapper;
import com.exteragram.messenger.plugins.utils.MenuContextBuilder;
import com.exteragram.messenger.speech.VoiceRecognitionController;
import com.exteragram.messenger.utils.ChatUtils;
import com.exteragram.messenger.utils.system.SystemUtils;
import com.exteragram.messenger.utils.system.VibratorUtils;
import com.exteragram.messenger.utils.text.LocaleUtils;
import com.exteragram.messenger.utils.text.TranslatorUtils;
import com.google.android.exoplayer2.p013ui.AspectRatioFrameLayout;
import com.google.android.exoplayer2.util.Consumer;
import com.radolyn.ayugram.AyuConfig;
import com.radolyn.ayugram.AyuConstants;
import com.radolyn.ayugram.AyuForward;
import com.radolyn.ayugram.AyuInAppHandlers;
import com.radolyn.ayugram.AyuState;
import com.radolyn.ayugram.components.DummyView;
import com.radolyn.ayugram.controllers.messages.SaveMessageRequest;
import com.radolyn.ayugram.p015ui.ActionsPopupWrapper;
import com.radolyn.ayugram.p015ui.RunnableC1500x164780ca;
import com.radolyn.ayugram.p015ui.RunnableC1517x113c1cf4;
import com.radolyn.ayugram.utils.AyuHistoryHook;
import com.radolyn.ayugram.utils.AyuMessageUtils;
import de.robv.android.xposed.callbacks.XCallback;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileOutputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.lang.ref.WeakReference;
import java.net.URLDecoder;
import java.util.AbstractMap;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Stack;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.concurrent.atomic.AtomicReference;
import java.util.function.Predicate;
import java.util.function.ToIntFunction;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import me.vkryl.android.animator.BoolAnimator;
import me.vkryl.android.animator.FactorAnimator;
import me.vkryl.core.BitwiseUtils;
import me.vkryl.core.reference.ReferenceList;
import org.mvel2.DataTypes;
import org.mvel2.MVEL;
import org.mvel2.asm.Opcodes;
import org.telegram.PhoneFormat.PhoneFormat;
import org.telegram.messenger.AccountInstance;
import org.telegram.messenger.AndroidUtilities;
import org.telegram.messenger.ApplicationLoader;
import org.telegram.messenger.BotForumHelper;
import org.telegram.messenger.BotInlineKeyboard;
import org.telegram.messenger.BotWebViewVibrationEffect;
import org.telegram.messenger.BuildVars;
import org.telegram.messenger.C2369R;
import org.telegram.messenger.ChannelBoostsController;
import org.telegram.messenger.ChatMessageSharedResources;
import org.telegram.messenger.ChatMessagesMetadataController;
import org.telegram.messenger.ChatObject;
import org.telegram.messenger.ChatThemeController;
import org.telegram.messenger.CodeHighlighting;
import org.telegram.messenger.ContactsController;
import org.telegram.messenger.DialogObject;
import org.telegram.messenger.DocumentObject;
import org.telegram.messenger.Emoji;
import org.telegram.messenger.EmojiData;
import org.telegram.messenger.FileLoader;
import org.telegram.messenger.FileLog;
import org.telegram.messenger.FlagSecureReason;
import org.telegram.messenger.HashtagSearchController;
import org.telegram.messenger.ImageLoader;
import org.telegram.messenger.ImageLocation;
import org.telegram.messenger.ImageReceiver;
import org.telegram.messenger.LanguageDetector;
import org.telegram.messenger.LiteMode;
import org.telegram.messenger.LocaleController;
import org.telegram.messenger.MediaController;
import org.telegram.messenger.MediaDataController;
import org.telegram.messenger.MessageObject;
import org.telegram.messenger.MessagePreviewParams;
import org.telegram.messenger.MessageSuggestionParams;
import org.telegram.messenger.MessagesController;
import org.telegram.messenger.MessagesStorage;
import org.telegram.messenger.NotificationCenter;
import org.telegram.messenger.SendMessagesHelper;
import org.telegram.messenger.SharedConfig;
import org.telegram.messenger.SvgHelper;
import org.telegram.messenger.TopicsController;
import org.telegram.messenger.TranslateController;
import org.telegram.messenger.UserConfig;
import org.telegram.messenger.UserObject;
import org.telegram.messenger.Utilities;
import org.telegram.messenger.VideoEditedInfo;
import org.telegram.messenger.browser.Browser;
import org.telegram.messenger.camera.CameraView;
import org.telegram.messenger.support.LongSparseIntArray;
import org.telegram.messenger.utils.OnPostDrawView;
import org.telegram.messenger.utils.PhotoUtilities;
import org.telegram.messenger.utils.RectFMergeBounding;
import org.telegram.messenger.utils.tlutils.AmountUtils$Amount;
import org.telegram.messenger.utils.tlutils.AmountUtils$Currency;
import org.telegram.messenger.wallpaper.WallpaperBitmapHolder;
import org.telegram.p023ui.ActionBar.ActionBar;
import org.telegram.p023ui.ActionBar.ActionBarMenu;
import org.telegram.p023ui.ActionBar.ActionBarMenuItem;
import org.telegram.p023ui.ActionBar.ActionBarMenuSubItem;
import org.telegram.p023ui.ActionBar.ActionBarPopupWindow;
import org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper;
import org.telegram.p023ui.ActionBar.AlertDialog;
import org.telegram.p023ui.ActionBar.BackDrawable;
import org.telegram.p023ui.ActionBar.BaseFragment;
import org.telegram.p023ui.ActionBar.BottomSheet;
import org.telegram.p023ui.ActionBar.EmojiThemes;
import org.telegram.p023ui.ActionBar.INavigationLayout;
import org.telegram.p023ui.ActionBar.SimpleTextView;
import org.telegram.p023ui.ActionBar.Theme;
import org.telegram.p023ui.ActionBar.ThemeDescription;
import org.telegram.p023ui.ActionBar.theme.ThemeKey;
import org.telegram.p023ui.Adapters.FiltersView;
import org.telegram.p023ui.Adapters.MessagesSearchAdapter;
import org.telegram.p023ui.AvatarPreviewer;
import org.telegram.p023ui.Business.BusinessBotButton;
import org.telegram.p023ui.Business.BusinessLinksActivity;
import org.telegram.p023ui.Business.BusinessLinksEmptyView;
import org.telegram.p023ui.Business.QuickRepliesActivity;
import org.telegram.p023ui.Business.QuickRepliesController;
import org.telegram.p023ui.Business.QuickRepliesEmptyView;
import org.telegram.p023ui.Cells.BaseCell;
import org.telegram.p023ui.Cells.BotHelpCell;
import org.telegram.p023ui.Cells.BotSwitchCell;
import org.telegram.p023ui.Cells.ChatActionCell;
import org.telegram.p023ui.Cells.ChatLoadingCell;
import org.telegram.p023ui.Cells.ChatMessageCell;
import org.telegram.p023ui.Cells.ChatUnreadCell;
import org.telegram.p023ui.Cells.CheckBoxCell;
import org.telegram.p023ui.Cells.ContextLinkCell;
import org.telegram.p023ui.Cells.DialogCell;
import org.telegram.p023ui.Cells.MentionCell;
import org.telegram.p023ui.Cells.ProfileChannelCell;
import org.telegram.p023ui.Cells.ShareDialogCell;
import org.telegram.p023ui.Cells.StickerCell;
import org.telegram.p023ui.Cells.TextSelectionHelper;
import org.telegram.p023ui.Cells.UserInfoCell;
import org.telegram.p023ui.ChatActivity;
import org.telegram.p023ui.Components.AlertsCreator;
import org.telegram.p023ui.Components.AnimatedEmojiDrawable;
import org.telegram.p023ui.Components.AnimatedEmojiSpan;
import org.telegram.p023ui.Components.AnimatedFileDrawable;
import org.telegram.p023ui.Components.AnimatedTextView;
import org.telegram.p023ui.Components.AnimationProperties;
import org.telegram.p023ui.Components.AttachBotIntroTopView;
import org.telegram.p023ui.Components.BackButtonMenu;
import org.telegram.p023ui.Components.BackupImageView;
import org.telegram.p023ui.Components.BluredView;
import org.telegram.p023ui.Components.BlurredFrameLayout;
import org.telegram.p023ui.Components.Bulletin;
import org.telegram.p023ui.Components.BulletinFactory;
import org.telegram.p023ui.Components.ChatActivityEnterTopView;
import org.telegram.p023ui.Components.ChatActivityEnterView;
import org.telegram.p023ui.Components.ChatActivityInterface;
import org.telegram.p023ui.Components.ChatAttachAlert;
import org.telegram.p023ui.Components.ChatAttachAlertDocumentLayout;
import org.telegram.p023ui.Components.ChatAvatarContainer;
import org.telegram.p023ui.Components.ChatBigEmptyView;
import org.telegram.p023ui.Components.ChatGreetingsView;
import org.telegram.p023ui.Components.ChatNotificationsPopupWrapper;
import org.telegram.p023ui.Components.ChatSearchTabs;
import org.telegram.p023ui.Components.ChatThemeBottomSheet;
import org.telegram.p023ui.Components.ChecksHintView;
import org.telegram.p023ui.Components.ClippingImageView;
import org.telegram.p023ui.Components.CrossfadeDrawable;
import org.telegram.p023ui.Components.CubicBezierInterpolator;
import org.telegram.p023ui.Components.EditTextCaption;
import org.telegram.p023ui.Components.EmbedBottomSheet;
import org.telegram.p023ui.Components.EmojiPacksAlert;
import org.telegram.p023ui.Components.EmojiView;
import org.telegram.p023ui.Components.FireworksOverlay;
import org.telegram.p023ui.Components.FlickerLoadingView;
import org.telegram.p023ui.Components.FloatingDebug.FloatingDebugController;
import org.telegram.p023ui.Components.FloatingDebug.FloatingDebugProvider;
import org.telegram.p023ui.Components.Forum.ForumUtilities;
import org.telegram.p023ui.Components.FragmentContextView;
import org.telegram.p023ui.Components.GigagroupConvertAlert;
import org.telegram.p023ui.Components.HashtagActivity;
import org.telegram.p023ui.Components.HashtagHistoryView;
import org.telegram.p023ui.Components.HideViewAfterAnimation;
import org.telegram.p023ui.Components.HintView;
import org.telegram.p023ui.Components.ImageUpdater;
import org.telegram.p023ui.Components.ImportingAlert;
import org.telegram.p023ui.Components.InstantCameraView;
import org.telegram.p023ui.Components.InviteMembersBottomSheet;
import org.telegram.p023ui.Components.ItemOptions;
import org.telegram.p023ui.Components.JoinGroupAlert;
import org.telegram.p023ui.Components.LayoutHelper;
import org.telegram.p023ui.Components.LinkSpanDrawable;
import org.telegram.p023ui.Components.MediaActivity;
import org.telegram.p023ui.Components.MentionsContainerView;
import org.telegram.p023ui.Components.MessagePreviewView;
import org.telegram.p023ui.Components.MotionBackgroundDrawable;
import org.telegram.p023ui.Components.NumberTextView;
import org.telegram.p023ui.Components.PhonebookShareAlert;
import org.telegram.p023ui.Components.PinnedLineView;
import org.telegram.p023ui.Components.PipRoundVideoView;
import org.telegram.p023ui.Components.PollVotesAlert;
import org.telegram.p023ui.Components.Premium.GiftPremiumBottomSheet$GiftTier;
import org.telegram.p023ui.Components.Premium.LimitReachedBottomSheet;
import org.telegram.p023ui.Components.Premium.PremiumFeatureBottomSheet;
import org.telegram.p023ui.Components.Premium.PremiumPreviewBottomSheet;
import org.telegram.p023ui.Components.Premium.boosts.BoostDialogs;
import org.telegram.p023ui.Components.Premium.boosts.GiftInfoBottomSheet;
import org.telegram.p023ui.Components.Premium.boosts.PremiumPreviewGiftLinkBottomSheet;
import org.telegram.p023ui.Components.QuoteSpan;
import org.telegram.p023ui.Components.RLottieDrawable;
import org.telegram.p023ui.Components.RLottieImageView;
import org.telegram.p023ui.Components.RadialProgressView;
import org.telegram.p023ui.Components.ReactedHeaderView;
import org.telegram.p023ui.Components.ReactedUsersListView;
import org.telegram.p023ui.Components.ReactionTabHolderView;
import org.telegram.p023ui.Components.Reactions.ChatSelectionReactionMenuOverlay;
import org.telegram.p023ui.Components.Reactions.ReactionsEffectOverlay;
import org.telegram.p023ui.Components.Reactions.ReactionsLayoutInBubble;
import org.telegram.p023ui.Components.ReactionsContainerLayout;
import org.telegram.p023ui.Components.RecyclerAnimationScrollHelper;
import org.telegram.p023ui.Components.RecyclerListView;
import org.telegram.p023ui.Components.ScaleStateListAnimator;
import org.telegram.p023ui.Components.ScrimOptions;
import org.telegram.p023ui.Components.SearchTagsList;
import org.telegram.p023ui.Components.ShareAlert;
import org.telegram.p023ui.Components.SizeNotifierFrameLayout;
import org.telegram.p023ui.Components.StickerEmptyView;
import org.telegram.p023ui.Components.StickersAlert;
import org.telegram.p023ui.Components.SuggestEmojiView;
import org.telegram.p023ui.Components.TextSelectionHint;
import org.telegram.p023ui.Components.TextStyleSpan;
import org.telegram.p023ui.Components.ThanosEffect;
import org.telegram.p023ui.Components.TopicSeparator;
import org.telegram.p023ui.Components.TopicsTabsView;
import org.telegram.p023ui.Components.TranscribeButton;
import org.telegram.p023ui.Components.TranslateAlert2;
import org.telegram.p023ui.Components.TranslateButton;
import org.telegram.p023ui.Components.TrendingStickersAlert;
import org.telegram.p023ui.Components.TypefaceSpan;
import org.telegram.p023ui.Components.URLSpanBotCommand;
import org.telegram.p023ui.Components.URLSpanReplacement;
import org.telegram.p023ui.Components.URLSpanUserMention;
import org.telegram.p023ui.Components.UndoView;
import org.telegram.p023ui.Components.UnreadCounterTextView;
import org.telegram.p023ui.Components.VideoPlayer;
import org.telegram.p023ui.Components.ViewPagerFixed;
import org.telegram.p023ui.Components.blur3.BlurredBackgroundDrawableViewFactory;
import org.telegram.p023ui.Components.blur3.DownscaleScrollableNoiseSuppressor;
import org.telegram.p023ui.Components.blur3.drawable.BlurredBackgroundDrawable;
import org.telegram.p023ui.Components.blur3.drawable.color.BlurredBackgroundColorProviderThemed;
import org.telegram.p023ui.Components.blur3.source.BlurredBackgroundSource;
import org.telegram.p023ui.Components.blur3.source.BlurredBackgroundSourceRenderNode;
import org.telegram.p023ui.Components.blur3.source.BlurredBackgroundSourceWrapped;
import org.telegram.p023ui.Components.chat.ChatActivityBottomViewsVisibilityController;
import org.telegram.p023ui.Components.chat.ChatInputViewsContainer;
import org.telegram.p023ui.Components.chat.ChatListViewPaddingsAnimator;
import org.telegram.p023ui.Components.chat.WallpaperBitmapProvider;
import org.telegram.p023ui.Components.chat.layouts.ChatActivityActionsButtonsLayout;
import org.telegram.p023ui.Components.chat.layouts.ChatActivityChannelButtonsLayout;
import org.telegram.p023ui.Components.chat.layouts.ChatActivitySideControlsButtonsLayout;
import org.telegram.p023ui.Components.inset.WindowInsetsStateHolder;
import org.telegram.p023ui.Components.quickforward.QuickShareSelectorOverlayLayout;
import org.telegram.p023ui.Components.voip.VoIPHelper;
import org.telegram.p023ui.ContactAddActivity;
import org.telegram.p023ui.ContentPreviewViewer;
import org.telegram.p023ui.CountrySelectActivity;
import org.telegram.p023ui.Delegates.ChatActivityMemberRequestsDelegate;
import org.telegram.p023ui.DialogsActivity;
import org.telegram.p023ui.Gifts.GiftSheet;
import org.telegram.p023ui.GroupCreateActivity;
import org.telegram.p023ui.LocationActivity;
import org.telegram.p023ui.PhotoAlbumPickerActivity;
import org.telegram.p023ui.PhotoViewer;
import org.telegram.p023ui.PollCreateActivity;
import org.telegram.p023ui.ProfileActivity;
import org.telegram.p023ui.ProfileBirthdayEffect;
import org.telegram.p023ui.Stars.MessageSuggestionOfferSheet;
import org.telegram.p023ui.Stars.StarReactionsOverlay;
import org.telegram.p023ui.Stars.StarsController;
import org.telegram.p023ui.Stars.StarsIntroActivity;
import org.telegram.p023ui.Stars.StarsReactionsSheet;
import org.telegram.p023ui.Stories.StoriesListPlaceProvider;
import org.telegram.p023ui.Stories.StoryViewer;
import org.telegram.p023ui.Stories.recorder.HintView2;
import org.telegram.p023ui.Stories.recorder.PreviewView;
import org.telegram.p023ui.Stories.recorder.StoryEntry;
import org.telegram.p023ui.Stories.recorder.StoryRecorder;
import org.telegram.p023ui.TON.TONIntroActivity;
import org.telegram.p023ui.bots.AffiliateProgramFragment;
import org.telegram.p023ui.bots.BotAdView;
import org.telegram.p023ui.bots.BotCommandsMenuContainer;
import org.telegram.p023ui.bots.BotCommandsMenuView;
import org.telegram.p023ui.bots.BotWebViewSheet;
import org.telegram.p023ui.bots.WebViewRequestProps;
import org.telegram.tgnet.ConnectionsManager;
import org.telegram.tgnet.RequestDelegate;
import org.telegram.tgnet.ResultCallback;
import org.telegram.tgnet.TLObject;
import org.telegram.tgnet.TLRPC;
import org.telegram.tgnet.p022tl.TL_account;
import org.telegram.tgnet.p022tl.TL_bots;
import org.telegram.tgnet.p022tl.TL_phone;
import org.telegram.tgnet.p022tl.TL_stories;
import org.webrtc.MediaStreamTrack;
import p017j$.util.Collection;
import p017j$.util.Comparator;
import p017j$.util.Objects;
import p017j$.util.function.Predicate$CC;
import p017j$.util.stream.Collectors;

/* loaded from: classes.dex */
public class ChatActivity extends BaseFragment implements NotificationCenter.NotificationCenterDelegate, DialogsActivity.DialogsActivityDelegate, LocationActivity.LocationActivityDelegate, ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate, ChatActivityInterface, FloatingDebugProvider, InstantCameraView.Delegate, FactorAnimator.Target {
    private static int SKELETON_LIGHT_OVERLAY_ALPHA = 22;
    private static float SKELETON_SATURATION = 1.4f;
    public static int lastStableId = 10;
    public static Pattern privateMsgUrlPattern;
    public static Pattern publicMsgUrlPattern;
    public static boolean scrolling;
    private static ArrayList textSelectionHelpersCache;
    public static Pattern voiceChatUrlPattern;
    private static long wallpaperRandomSeed;
    private final Paint actionBarBackgroundPaint;
    public SearchTagsList actionBarSearchTags;
    private final ArrayList actionModeViews;
    private ChatActivityActionsButtonsLayout actionsButtonsLayout;
    private ActionsPopupWrapper actionsPopupWrapper;
    private long activityResumeTime;
    private ActionBarMenuItem.Item addContactItem;
    private TextView addToContactsButton;
    private boolean addToContactsButtonArchive;
    private ActionBarMenuItem.Item adminItemsGap;
    private TextView alertNameTextView;
    private TextView alertTextView;
    private FrameLayout alertView;
    private AnimatorSet alertViewAnimator;
    private float alertViewEnterProgress;
    private boolean allowContextBotPanel;
    private boolean allowContextBotPanelSecond;
    public boolean allowExpandPreviewByClick;
    private boolean allowStickersPanel;
    private final HashMap alreadyPlayedStickers;
    boolean animateProgressViewTo;
    private final ArrayList animateSendingViews;
    private final HashMap animatingDocuments;
    private ClippingImageView animatingImageView;
    public ArrayList animatingMessageObjects;
    private final BoolAnimator animatorPullingDownContainerVisibility;
    private final BoolAnimator animatorRoundMessageCameraVisibility;
    private int appliedDraftDate;
    private boolean approved;
    private AspectRatioFrameLayout aspectRatioFrameLayout;
    private ActionBarMenu.LazyItem attachItem;
    private String attachMenuBotStartCommand;
    private String attachMenuBotToOpen;
    private ActionBarMenu.LazyItem audioCallIconItem;
    public ChatAvatarContainer avatarContainer;
    private ActionBarMenuItem.Item ayugramItem;
    private ChatActivity backToPreviousFragment;
    private ChatBigEmptyView bigEmptyView;
    public ProfileBirthdayEffect.BirthdayEffectFetcher birthdayAssetsFetcher;
    private BusinessBotButton bizBotButton;
    private boolean bizbothint;
    private BlurredBackgroundColorProviderThemed blurredBackgroundColorProvider;
    private BlurredBackgroundColorProviderThemed blurredBackgroundColorProviderWhite;
    private BluredView blurredView;
    public int blurredViewBottomOffset;
    public int blurredViewTopOffset;
    private TL_stories.TL_premium_boostsStatus boostsStatus;
    private BotAdView botAdView;
    private MessageObject botButtons;
    private final PhotoViewer.PhotoViewerProvider botContextProvider;
    private ArrayList botContextResults;
    private final BotForumHelper.BotDraftAnimationsPool botDraftAnimationsPool;
    private LongSparseArray botInfo;
    private HintView2 botMessageHint;
    private MessageObject botReplyButtons;
    private MessageObject botSponsoredMessage;
    private String botUser;
    private int botsCount;
    private ChatActivityChannelButtonsLayout bottomChannelButtonsLayout;
    private HintView2 bottomGiftHintView;
    private FrameLayout bottomOverlay;
    private AnimatorSet bottomOverlayAnimation;
    private UnreadCounterTextView bottomOverlayChatText;
    private boolean bottomOverlayChatWaitsReply;
    private boolean bottomOverlayLinks;
    private LinkSpanDrawable.LinksTextView bottomOverlayLinksText;
    private RadialProgressView bottomOverlayProgress;
    private TextView bottomOverlayStartButton;
    private TextView bottomOverlayText;
    private HintView2 bottomSuggestHintView;
    private final ChatActivityBottomViewsVisibilityController bottomViewsVisibilityController;
    Bulletin.Delegate bulletinDelegate;
    public TL_account.TL_businessChatLink businessLink;
    private BusinessLinksEmptyView businessLinksEmptyView;
    private boolean[] cacheEndReached;
    private ChannelBoostsController.CanApplyBoost canApplyBoosts;
    private int canEditMessagesCount;
    private int canForwardMessagesCount;
    private int canSaveDocumentsCount;
    private int canSaveMusicCount;
    private boolean canShowPagedownButton;
    private Runnable cancelFixedPositionRunnable;
    private int cantDeleteMessagesCount;
    private int cantForwardMessagesCount;
    private int cantSaveMessagesCount;
    private ValueAnimator changeBoundAnimator;
    private ChatActivityDelegate chatActivityDelegate;
    private ChatActivityEnterTopView chatActivityEnterTopView;
    protected ChatActivityEnterView chatActivityEnterView;
    private boolean chatActivityEnterViewAnimateBeforeSending;
    private int chatActivityEnterViewAnimateFromTop;
    private ChatActivityAdapter chatAdapter;
    public ChatAttachAlert chatAttachAlert;
    private int chatEmojiViewPadding;
    private long chatEnterTime;
    protected TLRPC.ChatFull chatInfo;
    private FrameLayout chatInputBubbleContainer;
    private FrameLayout chatInputInAppContainer;
    private ChatInputViewsContainer chatInputViewsContainer;
    private TLRPC.ChatInvite chatInvite;
    private Runnable chatInviteRunnable;
    private long chatInviterId;
    private GridLayoutManagerFixed chatLayoutManager;
    private long chatLeaveTime;
    private ChatListItemAnimator chatListItemAnimator;
    private ThanosEffect chatListThanosEffect;
    private ChatListRecyclerView chatListView;
    public float chatListViewPaddingTop;
    public int chatListViewPaddingVisibleOffset;
    private ChatListViewPaddingsAnimator chatListViewPaddingsAnimator;
    private MenuContextBuilder chatMenuContextData;
    private final LongSparseArray chatMessageCellsCache;
    private final ChatMessagesMetadataController chatMessagesMetadataController;
    private int chatMode;
    private ChatNotificationsPopupWrapper chatNotificationsPopupWrapper;
    private RecyclerAnimationScrollHelper chatScrollHelper;
    private final ChatScrollCallback chatScrollHelperCallback;
    private ChatThemeBottomSheet chatThemeBottomSheet;
    private boolean chatWasReset;
    private TextView chatWithAdminTextView;
    private Runnable checkPaddingsRunnable;
    private boolean checkTextureViewPosition;
    private Runnable checkTranslationRunnable;
    private boolean checkedSavedMessagesHint;
    private ChecksHintView checksHintView;
    private ActionBarMenuItem.Item clearHistoryItem;
    private boolean clearOnLoad;
    private int clearOnLoadAndScrollMessageId;
    private int clearOnLoadAndScrollOffset;
    private boolean clearOnLoadButIsNewTopic;
    private LongSparseIntArray clearingHistoryArr;
    private final Client client;
    private final Rect clipBoundsTmp;
    private Dialog closeChatDialog;
    private Runnable closeInstantCameraAnimation;
    private ImageView closePinned;
    private ImageView closeReportSpam;
    private ActionBarMenuItem.Item closeTopicItem;
    private int commentLoadingGuid;
    private int commentLoadingMessageId;
    private long commentLoadingStartedAt;
    private int commentMessagesLoadingGuid;
    private int commentMessagesRequestId;
    private int commentRequestId;
    private int contentPaddingTop;
    private float contentPanTranslation;
    private float contentPanTranslationT;
    ContentPreviewViewer.ContentPreviewViewerDelegate contentPreviewViewerDelegate;
    public ChatActivityFragmentView contentView;
    private LongSparseArray conversionMessages;
    SparseIntArray conversionObjectsStableIds;
    private boolean convertingToast;
    private int convertingToastMessageId;
    private boolean convertingToastShown;
    private boolean createGroupCall;
    private int createUnreadMessageAfterId;
    private boolean createUnreadMessageAfterIdLoading;
    protected TLRPC.Chat currentChat;
    protected TLRPC.EncryptedChat currentEncryptedChat;
    private boolean currentFloatingDateOnScreen;
    private boolean currentFloatingTopIsNotMessage;
    private boolean currentFloatingTopicOnScreen;
    private String currentPicturePath;
    private int currentPinnedMessageId;
    private final int[] currentPinnedMessageIndex;
    protected TLRPC.User currentUser;
    SparseIntArray dateObjectsStableIds;
    private int defaultSearchPage;
    private Runnable delayedReadRunnable;
    private final Runnable destroyTextureViewRunnable;
    int dialogFilterId;
    int dialogFolderId;
    private long dialog_id;
    private Long dialog_id_Long;
    private ChatMessageCell drawLaterRoundProgressCell;
    public float drawingChatListViewYoffset;
    private ChatMessageCell dummyMessageCell;
    private AnimatorSet editButtonAnimation;
    private int editTextEnd;
    private ActionBarMenu.LazyItem editTextItem;
    private int editTextStart;
    public MessageObject editingMessageObject;
    private int editingMessageObjectReqId;
    public EmojiAnimationsOverlay emojiAnimationsOverlay;
    private View emojiButtonRed;
    private HintView emojiHintTextView;
    private LinkSpanDrawable.LinksTextView emojiStatusSpamHint;
    private TextView emptyView;
    private FrameLayout emptyViewContainer;
    private LinearLayout emptyViewContent;
    private boolean[] endReached;
    private HintView2 factCheckHint;
    private boolean fakePostponedScroll;
    private ActionBarMenuItem.Item feeItemGap;
    private ActionBarMenuItem.Item feeItemText;
    private int fieldPanelShown;
    private boolean filledEditTextItemMenu;
    private LongSparseArray filteredMessagesByDays;
    private LongSparseArray filteredMessagesDict;
    protected FireworksOverlay fireworksOverlay;
    private boolean first;
    private boolean firstLoading;
    private boolean firstMessagesLoaded;
    boolean firstOpen;
    private boolean firstUnreadSent;
    private int first_unread_id;
    private boolean fixPaddingsInLayout;
    private int fixedKeyboardHeight;
    private FlagSecureReason flagSecure;
    private AnimatorSet floatingDateAnimation;
    private ChatActionCell floatingDateView;
    private float floatingDateViewOffset;
    private ValueAnimator floatingTopicAnimation;
    private TopicSeparator.Cell floatingTopicSeparator;
    private float floatingTopicViewAlpha;
    private float floatingTopicViewOffset;
    private boolean forbidForwardingWithDismiss;
    public boolean forceDisallowApplyWallpeper;
    public boolean forceDisallowRedrawThemeDescriptions;
    private boolean forceHistoryEmpty;
    private int forceNextPinnedMessageId;
    private boolean forceScrollToFirst;
    private boolean forceScrollToTop;
    private CharSequence formwardingNameText;
    private TLRPC.TL_forumTopic forumTopic;
    private AnimatorSet forwardButtonAnimation;
    private boolean[] forwardEndReached;
    private HintView forwardHintView;
    public MessageObject forwardingMessage;
    private MessageObject.GroupedMessages forwardingMessageGroup;
    MessagePreviewView forwardingPreviewView;
    private ArrayList foundUrls;
    public TLRPC.WebPage foundWebPage;
    private FragmentContextView fragmentContextView;
    private FragmentContextView fragmentLocationContextView;
    public boolean fragmentOpened;
    private AnimatorSet fragmentTransition;
    private final Runnable fragmentTransitionRunnable;
    private boolean fromPullingDownTransition;
    private HintView fwdRestrictedBottomHint;
    private HintView fwdRestrictedTopHint;
    private HintView gifHintTextView;
    private final ReferenceList glassAttachedViews;
    private final BlurredBackgroundDrawableViewFactory glassBackgroundDrawableFactory;
    private final BlurredBackgroundDrawableViewFactory glassBackgroundDrawableFactoryFrosted;
    private final BlurredBackgroundSourceRenderNode glassBackgroundSourceFrostedRenderNode;
    private final BlurredBackgroundSourceRenderNode glassBackgroundSourceRenderNode;
    private final ArrayList glassDrawablesPositions;
    private int glassDrawablesPositionsCount;
    private final ArrayList glassDrawablesPositionsMerged;
    private boolean glassSourcesInvalidated;
    private boolean globalIgnoreLayout;
    private ChatActionCell greetingsInfo;
    private ChatGreetingsView greetingsViewContainer;
    private ChatObject.Call groupCall;
    private HintView2 groupEmojiPackHint;
    private LongSparseArray groupedMessagesMap;
    private boolean hasAllMentionsLocal;
    private boolean hasBotWebView;
    private boolean hasBotsCommands;
    private boolean hasQuickReplies;
    private boolean hasUnfavedSelected;
    private HashtagHistoryView hashtagHistoryView;
    private FlickerLoadingView hashtagLoadingView;
    private StickerEmptyView hashtagSearchEmptyView;
    private int hashtagSearchSelectedIndex;
    public ChatSearchTabs hashtagSearchTabs;
    private ActionBarMenuItem headerItem;
    private Runnable hideAlertViewRunnable;
    private boolean hideCommentLoading;
    private int hideDateDelay;
    private boolean hideFilteredMessages;
    private boolean hideForwardEndReached;
    public int highlightMessageId;
    public String highlightMessageQuote;
    public boolean highlightMessageQuoteFirst;
    private long highlightMessageQuoteFirstTime;
    public int highlightMessageQuoteOffset;
    public Integer highlightTaskId;
    private MessageObject hint2MessageObject;
    private MessageObject hintMessageObject;
    private int hintMessageType;
    private boolean historyPreloaded;
    private boolean ignoreAttachOnPause;
    private boolean ignoreDraft;
    private ChatActionCell infoTopView;
    private Animator infoTopViewAnimator;
    private int initialMessagesSize;
    private long inlineReturn;
    private float inputIslandHeightCurrent;
    private float inputIslandHeightTarget;
    public InstantCameraView instantCameraView;
    private OnPostDrawView invalidateBlurredSourcesView;
    private boolean invalidateChatListViewTopPadding;
    private boolean invalidateMessagesVisiblePart;
    public boolean isComments;
    public boolean isFullyVisible;
    public boolean isInsideContainer;
    private boolean isPauseOnThemePreview;
    public boolean isSubscriberSuggestions;
    public boolean isTopic;
    public boolean justCreatedChat;
    public boolean justCreatedTopic;
    private boolean keyboardWasVisible;
    private boolean lastCallCheckFromServer;
    private boolean lastImeVisible;
    private boolean lastInAppInputVisible;
    private HashMap lastLinkPreviewResults;
    private int lastLoadIndex;
    private long lastScrollTime;
    private int lastSkeletonCount;
    private int lastSkeletonMessageCount;
    private float lastTouchY;
    private long lastTranslationCheck;
    private int last_message_id;
    private int linkSearchRequestId;
    private Boolean liteModeChat;
    private boolean livestream;
    private boolean loadInfo;
    private int loadedPinnedMessagesCount;
    private boolean loading;
    private boolean loadingForward;
    private boolean loadingFromOldPosition;
    private final SparseArray loadingPinnedMessages;
    public boolean loadingPinnedMessagesList;
    private int loadsCount;
    private boolean locationAlertShown;
    private int[] maxDate;
    private int[] maxMessageId;
    private int maxPinnedMessageId;
    private boolean maybeStartTrackingSlidingView;
    private HintView mediaBanTooltip;
    private MentionsContainerView mentionContainer;
    private AnimatorSet mentionListAnimation;
    private RecyclerListView.OnItemClickListener mentionsOnItemClickListener;
    private ActionBarMenuSubItem menuDeleteItem;
    private long mergeDialogId;
    private Animator messageEditTextAnimator;
    public MessageEnterTransitionContainer messageEnterTransitionContainer;
    public MessagePreviewParams messagePreviewParams;
    public Bulletin messageSeenPrivacyBulletin;
    private List messageSkeletons;
    public MessageSuggestionParams messageSuggestionParams;
    public ArrayList messages;
    private HashMap messagesByDays;
    private SparseArray messagesByDaysSorted;
    public SparseArray[] messagesDict;
    private MessagesSearchAdapter messagesSearchAdapter;
    private FrameLayout messagesSearchListContainer;
    public RecyclerListView messagesSearchListView;
    private AnimatorSet messagesSearchListViewAnimation;
    private int migrated_to;
    private int[] minDate;
    private int[] minMessageId;
    private ActionBarMenuItem.Item muteItem;
    private ActionBarMenuItem.Item muteItemGap;
    private final BlurredBackgroundDrawableViewFactory navbarContentDrawableFactory;
    private final BlurredBackgroundSourceRenderNode navbarContentSourceMessages;
    private final BlurredBackgroundDrawable navbarContentSourceMessagesDrawable;
    private final BlurredBackgroundSourceWrapped navbarContentSourceWallpaper;
    private final BlurredBackgroundSourceRenderNode navbarContentSourceWallpaperAndMessagesRenderNode;
    private MessageObject needAnimateToMessage;
    private boolean needRemovePreviousSameChatActivity;
    private boolean needSelectFromMessageId;
    private int newMentionsCount;
    private int newUnreadMessageCount;
    private ArrayList nextChannels;
    private boolean nextScrollForce;
    private int nextScrollForcePinnedMessageId;
    private int nextScrollFromMessageId;
    private int nextScrollLoadIndex;
    private boolean nextScrollSelect;
    private int nextScrollToMessageId;
    private HintView noSoundHintView;
    private ArrayList notPushedSponsoredMessages;
    private Runnable onChatMessagesLoaded;
    private Runnable onHideFieldPanelRunnable;
    RecyclerListView.OnItemClickListenerExtended onItemClickListener;
    RecyclerListView.OnItemLongClickListenerExtended onItemLongClickListener;
    public Runnable onThemeChange;
    public boolean openAnimationEnded;
    private long openAnimationStartTime;
    private ActionBarMenuItem.Item openForumItem;
    private boolean openImport;
    protected boolean openKeyboardOnAttachMenuClose;
    private boolean openSearchKeyboard;
    private boolean openVideoChat;
    private View overlayView;
    public float paddingTopHeight;
    private boolean pagedownButtonShowedByScroll;
    private ChatActivity parentChatActivity;
    private ThemeDelegate parentThemeDelegate;
    private boolean paused;
    private boolean pausedOnLastMessage;
    private String pendingLinkSearchString;
    private ChatActivityMemberRequestsDelegate pendingRequestsDelegate;
    private final ArrayList pendingSendMessages;
    private final SparseArray pendingSendMessagesDict;
    private PhotoViewer.PhotoViewerProvider photoViewerPaidMediaProvider;
    private final PhotoViewer.PhotoViewerProvider photoViewerProvider;
    private int pinBullerinTag;
    private Bulletin pinBulletin;
    private PinchToZoomHelper pinchToZoomHelper;
    private NumberTextView pinnedCounterTextView;
    private int pinnedCounterTextViewX;
    private boolean pinnedEndReached;
    private int pinnedImageCacheType;
    private boolean pinnedImageHasBlur;
    private TLRPC.PhotoSize pinnedImageLocation;
    private TLObject pinnedImageLocationObject;
    private int pinnedImageSize;
    private TLRPC.PhotoSize pinnedImageThumbLocation;
    private PinnedLineView pinnedLineView;
    private AnimatorSet pinnedListAnimator;
    private ImageView pinnedListButton;
    private final PinnedMessageButton[] pinnedMessageButton;
    private boolean pinnedMessageButtonShown;
    private float pinnedMessageEnterOffset;
    private ArrayList pinnedMessageIds;
    private final BackupImageView[] pinnedMessageImageView;
    private HashMap pinnedMessageObjects;
    private final SimpleTextView[] pinnedMessageTextView;
    private BlurredFrameLayout pinnedMessageView;
    private AnimatorSet pinnedMessageViewAnimator;
    private final TrackingWidthSimpleTextView[] pinnedNameTextView;
    private final AnimatorSet[] pinnedNextAnimation;
    private RadialProgressView pinnedProgress;
    private boolean pinnedProgressIsShowing;
    private List pluginsContextMenuItems;
    private ActionBarMenuItem.Item pluginsMenuItem;
    private PluginsMenuWrapper pluginsMenuWrapper;
    private ChatMessageCell pollHintCell;
    private HintView pollHintView;
    private int pollHintX;
    private int pollHintY;
    private LongSparseArray polls;
    private final ArrayList pollsToCheck;
    private int popupAnimationIndex;
    private final NotificationCenter.PostponeNotificationCallback postponeNotificationsWhileLoadingCallback;
    private final DialogInterface.OnCancelListener postponedScrollCancelListener;
    private boolean postponedScrollIsCanceled;
    private int postponedScrollMessageId;
    private int postponedScrollMinMessageId;
    private int postponedScrollToLastMessageQueryIndex;
    private TLRPC.Document preloadedGreetingsSticker;
    private boolean premiumInvoiceBot;
    private int prevSetUnreadCount;
    boolean preventReopenSearchWithText;
    public ProfileChannelCell.ChannelMessageFetcher profileChannelMessageFetcher;
    private RadialProgressView progressBar;
    private AlertDialog progressDialog;
    private int progressDialogAtMessageId;
    private int progressDialogAtMessageType;
    private String progressDialogBotButtonUrl;
    private Browser.Progress progressDialogCurrent;
    private CharacterStyle progressDialogLinkSpan;
    private FrameLayout progressView;
    private View progressView2;
    boolean pulled;
    private float pullingBottomOffset;
    private float pullingDownAnimateProgress;
    private ChatActivity pullingDownAnimateToActivity;
    private Animator pullingDownBackAnimator;
    private ChatPullingDownDrawable pullingDownDrawable;
    private float pullingDownOffset;
    private QuickRepliesEmptyView quickRepliesEmptyView;
    private MessageObject quickReplyMessage;
    public String quickReplyShortcut;
    private QuickShareSelectorOverlayLayout quickShareSelectorOverlay;
    private AlertDialog quoteMessageUpdateAlert;
    private int reactionsMentionCount;
    private final int recommendedAdditionalSizeY;
    private boolean removingFromParent;
    private SparseArray repliesMessagesDict;
    private ImageView replyCloseImageView;
    private ImageView replyIconImageView;
    private int replyImageCacheType;
    private boolean replyImageHasMediaSpoiler;
    private TLRPC.PhotoSize replyImageLocation;
    private TLObject replyImageLocationObject;
    private int replyImageSize;
    private TLRPC.PhotoSize replyImageThumbLocation;
    private BackupImageView replyImageView;
    private int replyMaxReadId;
    private MessageObject replyMessageHeaderObject;
    private SparseArray replyMessageOwners;
    private SimpleTextView replyNameTextView;
    private SimpleTextView replyObjectHintTextView;
    private SimpleTextView replyObjectTextView;
    public TLRPC.Chat replyOriginalChat;
    private int replyOriginalMessageId;
    private MessageObject replyingMessageObject;
    private ReplyQuote replyingQuote;
    private MessageObject.GroupedMessages replyingQuoteGroup;
    public MessageObject replyingTopMessage;
    private String reportMessage;
    private byte[] reportOption;
    private TextView reportSpamButton;
    private AnimatorSet reportSpamViewAnimator;
    private String reportTitle;
    private boolean requestClearSearchPages;
    private TL_account.resolvedBusinessChatLinks resolvedChatLink;
    private TextView restartTopicButton;
    private int returnToLoadIndex;
    private final Stack returnToMessageIdStack;
    public boolean reversed;
    private ActionBarMenuItem.Item savedChatsGap;
    private ActionBarMenuItem.Item savedChatsItem;
    private TLRPC.TL_messages_discussionMessage savedDiscussionMessage;
    private TLRPC.messages_Messages savedHistory;
    private HintView2 savedMessagesHint;
    private boolean savedMessagesHintShown;
    private HintView2 savedMessagesSearchHint;
    private HintView2 savedMessagesTagHint;
    private boolean savedMessagesTagHintShown;
    private boolean savedNoDiscussion;
    private boolean savedNoHistory;
    private AlertDialog scheduleNowDialog;
    private HintView scheduledHint;
    private boolean scheduledHintShown;
    private int scheduledMessagesCount;
    private HintView scheduledOrNoSoundHint;
    private boolean scheduledOrNoSoundHintShown;
    private AnimatorSet scrimAnimatorSet;
    private Bitmap scrimBlurBitmap;
    private Paint scrimBlurBitmapPaint;
    private BitmapShader scrimBlurBitmapShader;
    private Matrix scrimBlurMatrix;
    private Paint scrimPaint;
    private float scrimPaintAlpha;
    public ActionBarPopupWindow scrimPopupWindow;
    private boolean scrimPopupWindowHideDimOnDismiss;
    private ActionBarMenuSubItem[] scrimPopupWindowItems;
    private boolean scrimProgressDirection;
    private View scrimView;
    private float scrimViewAlpha;
    private ValueAnimator scrimViewAlphaAnimator;
    private float scrimViewProgress;
    private Integer scrimViewReaction;
    private boolean scrimViewReactionAnimated;
    private int scrimViewReactionOffset;
    private Integer scrimViewTask;
    private int scrollAnimationIndex;
    private boolean scrollByTouch;
    private int scrollCallbackAnimationIndex;
    private MessageObject scrollToMessage;
    private int scrollToMessagePosition;
    private int scrollToOffsetOnRecreate;
    private int scrollToPositionOnRecreate;
    private boolean scrollToThreadMessage;
    private boolean scrollToTopOnResume;
    private boolean scrollToTopUnReadOnResume;
    private boolean scrollToVideo;
    private final DownscaleScrollableNoiseSuppressor scrollableViewNoiseSuppressor;
    private boolean scrollingChatListView;
    private boolean scrollingFloatingDate;
    private boolean scrollingFloatingTopic;
    private ImageView searchCalendarButton;
    private FrameLayout searchContainer;
    private final int searchContainerHeight;
    private AnimatedTextView searchCountText;
    private ValueAnimator searchExpandAnimator;
    private AnimatedTextView searchExpandList;
    private float searchExpandProgress;
    private ActionBarMenuItem searchIconItem;
    protected ActionBarMenuItem searchItem;
    private SearchItemListener searchItemListener;
    private boolean searchItemVisible;
    private int searchLastCount;
    private int searchLastIndex;
    private AnimatedTextView searchOtherButton;
    private int searchType;
    private ImageView searchUserButton;
    private ViewPagerFixed searchViewPager;
    boolean searchWas;
    private boolean searching;
    private TLRPC.Chat searchingChatMessages;
    private boolean searchingFiltered;
    private boolean searchingForUser;
    private String searchingHashtag;
    private String searchingQuery;
    public ReactionsLayoutInBubble.VisibleReaction searchingReaction;
    private TLRPC.User searchingUserMessages;
    private SecretVoicePlayer secretVoicePlayer;
    private final SparseArray[] selectedMessagesCanCopyIds;
    private final SparseArray[] selectedMessagesCanStarIds;
    private NumberTextView selectedMessagesCountTextView;
    private final SparseArrayWithTouch[] selectedMessagesIds;
    private MessageObject selectedObject;
    private MessageObject.GroupedMessages selectedObjectGroup;
    private MessageObject selectedObjectToEditCaption;
    private ChatSelectionReactionMenuOverlay selectionReactionsOverlay;
    private TLRPC.TL_channels_sendAsPeers sendAsPeersObj;
    private boolean sentBotStart;
    private boolean setPinnedTextTranslationX;
    public int shareAlertDebugMode;
    public boolean shareAlertDebugTopicsSlowMotion;
    public ChatMessageSharedResources sharedResources;
    private boolean shouldHaveLightNavigationBarIcons;
    private boolean showAudioCallAsIcon;
    private boolean showCloseChatDialogLater;
    public boolean showNoQuoteAlert;
    private boolean showPinBulletin;
    private final Runnable showScheduledHintRunnable;
    private final Runnable showScheduledOrNoSoundRunnable;
    private boolean showScrollToMessageError;
    private boolean showSearchAsIcon;
    private boolean showTapForForwardingOptionsHit;
    private boolean shownBotVerification;
    private boolean shownConversionDateTimeToast;
    private boolean shownRestartTopic;
    private boolean shownTranslateTopic;
    private ChatActivitySideControlsButtonsLayout sideControlsButtonsLayout;
    private Theme.MessageDrawable.PathDrawParams skeletonBackgroundCacheParams;
    private Theme.MessageDrawable skeletonBackgroundDrawable;
    private int skeletonColor0;
    private int skeletonColor1;
    private ColorMatrix skeletonColorMatrix;
    private LinearGradient skeletonGradient;
    private int skeletonGradientWidth;
    private long skeletonLastUpdateTime;
    private Matrix skeletonMatrix;
    private LinearGradient skeletonOutlineGradient;
    private Matrix skeletonOutlineMatrix;
    private Paint skeletonOutlinePaint;
    private Paint skeletonPaint;
    private Paint skeletonServicePaint;
    private int skeletonTotalTranslation;
    private ChatMessageCell slidingView;
    private HintView slowModeHint;
    private boolean sponsoredMessagesAdded;
    private int sponsoredMessagesPostsBetween;
    private Pattern sponsoredUrlPattern;
    private StarReactionsOverlay starReactionsOverlay;
    private int startFromVideoMessageId;
    private int startFromVideoTimestamp;
    private int startLoadFromDate;
    private int startLoadFromMessageId;
    private int startLoadFromMessageIdSaved;
    private int startLoadFromMessageOffset;
    private long startMessageAppearTransitionMs;
    long startMs;
    private int startReplyTo;
    private String startVideoEdit;
    private boolean startedTrackingSlidingView;
    private SuggestEmojiView suggestEmojiPanel;
    private boolean swipeBackEnabled;
    private boolean switchFromTopics;
    private boolean switchingFromTopics;
    private float switchingFromTopicsProgress;
    private ReactionsContainerLayout tagSelector;
    private Runnable tapForForwardingOptionsHitRunnable;
    private ChatActivityTextSelectionHelper textSelectionHelper;
    private TextSelectionHint textSelectionHint;
    private boolean textSelectionHintWasShowed;
    private String textToSet;
    public ThemeDelegate themeDelegate;
    private int threadMaxInboxReadId;
    private int threadMaxOutboxReadId;
    private boolean threadMessageAdded;
    private long threadMessageId;
    private MessageObject threadMessageObject;
    private ArrayList threadMessageObjects;
    private boolean threadMessageVisible;
    private int threadUnreadMessagesCount;
    private ActionBarMenuItem.Item timeItem2;
    private HintView timerHintView;
    private boolean toPullingDownTransition;
    private BlurredFrameLayout topChatPanelView;
    private BlurredFrameLayout topChatPanelView2;
    private AnimatorSet topChatPanelView2Animator;
    private float topChatPanelView2Offset;
    private float topChatPanelViewOffset;
    private UndoView topUndoView;
    private float topViewOffset;
    private View topViewSeparator1;
    private View topViewSeparator2;
    private View topViewSeparator3;
    private int topViewWasVisible;
    private boolean topicChangedFromMessage;
    private MessageObject topicStarterMessageObject;
    public TopicsTabsView topicsTabs;
    private int totalPinnedMessagesCount;
    private int transitionAnimationGlobalIndex;
    private int transitionAnimationIndex;
    private TranslateButton translateButton;
    private ActionBarMenuItem.Item translateItem;
    private UndoView undoView;
    private MessageObject unreadMessageObject;
    private Runnable unselectRunnable;
    private final Runnable updateDeleteItemRunnable;
    Runnable updatePinnedProgressRunnable;
    Runnable updateReactionRunnable;
    private boolean userBlocked;
    protected TLRPC.UserFull userInfo;
    private HintView2 videoConversionTimeHint;
    private float videoConversionTimeHintY;
    private FrameLayout videoPlayerContainer;
    private TextureView videoTextureView;
    private ActionBarMenuItem.Item viewAsTopics;
    private String voiceChatHash;
    private HintView voiceHintTextView;
    private Runnable waitingForCharaterEnterRunnable;
    private boolean waitingForGetDifference;
    private final ArrayList waitingForLoad;
    private SparseArray waitingForReplies;
    private boolean waitingForReplyMessageLoad;
    private boolean waitingForSendingMessageLoad;
    int waitingForWebpageId;
    private WallpaperBitmapProvider wallpaperBitmapProvider;
    private boolean wasManualScroll;
    private boolean wasPaused;
    TextView webBotTitle;
    private final WindowInsetsStateHolder windowInsetsStateHolder;
    private static final int[] allowedNotificationsDuringChatListAnimations = {AyuConstants.MESSAGES_DELETED_NOTIFICATION, AyuConstants.FIX_SCHEDULED_BAR, AyuConstants.UPDATE_CHAT_RESTRICTION, NotificationCenter.messagesRead, NotificationCenter.threadMessagesRead, NotificationCenter.monoForumMessagesRead, NotificationCenter.commentsRead, NotificationCenter.messagesReadEncrypted, NotificationCenter.messagesReadContent, NotificationCenter.didLoadPinnedMessages, NotificationCenter.newDraftReceived, NotificationCenter.updateMentionsCount, NotificationCenter.didUpdateConnectionState, NotificationCenter.updateDefaultSendAsPeer, NotificationCenter.closeChats, NotificationCenter.chatInfoCantLoad, NotificationCenter.userInfoDidLoad, NotificationCenter.pinnedInfoDidLoad, NotificationCenter.didSetNewWallpapper, NotificationCenter.savedMessagesDialogsUpdate, NotificationCenter.didApplyNewTheme, NotificationCenter.messageReceivedByServer2};
    private static boolean replacingChatActivity = false;
    private static final Rect clipBoundsRect = new Rect();

    public static /* synthetic */ void $r8$lambda$ruS_3VNQZ8HYHzLbjynav7GbSe8() {
    }

    private void showMultipleReactionsPromo(View view, ReactionsLayoutInBubble.VisibleReaction visibleReaction, int i) {
    }

    @Override // org.telegram.ui.DialogsActivity.DialogsActivityDelegate
    public /* synthetic */ boolean canSelectStories() {
        return DialogsActivity.DialogsActivityDelegate.CC.$default$canSelectStories(this);
    }

    @Override // org.telegram.ui.DialogsActivity.DialogsActivityDelegate
    public /* synthetic */ boolean didSelectStories(DialogsActivity dialogsActivity) {
        return DialogsActivity.DialogsActivityDelegate.CC.$default$didSelectStories(this, dialogsActivity);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean isSupportEdgeToEdge() {
        return true;
    }

    @Override // me.vkryl.android.animator.FactorAnimator.Target
    public /* synthetic */ void onFactorChangeFinished(int i, float f, FactorAnimator factorAnimator) {
        FactorAnimator.Target.CC.$default$onFactorChangeFinished(this, i, f, factorAnimator);
    }

    protected void onSearchLoadingUpdate(boolean z) {
    }

    @Override // org.telegram.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public /* synthetic */ void startMusicSelectActivity() {
        ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate.CC.$default$startMusicSelectActivity(this);
    }

    public ReactionsLayoutInBubble.VisibleReaction getFilterTag() {
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter == null || !chatActivityAdapter.isFiltered) {
            return null;
        }
        return this.searchingReaction;
    }

    public String getFilterQuery() {
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter == null || !chatActivityAdapter.isFiltered) {
            return null;
        }
        return this.searchingQuery;
    }

    public boolean isFiltered() {
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        return chatActivityAdapter != null && chatActivityAdapter.isFiltered;
    }

    public ArrayList getFilteredMessages() {
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            return chatActivityAdapter.filteredMessages;
        }
        return null;
    }

    public boolean isReport() {
        return !TextUtils.isEmpty(this.reportTitle);
    }

    public void reloadPinnedMessages() {
        this.pinnedMessageIds.clear();
        this.pinnedMessageObjects.clear();
        this.currentPinnedMessageId = 0;
        this.loadedPinnedMessagesCount = 0;
        this.totalPinnedMessagesCount = 0;
        updatePinnedMessageView(true);
        MediaDataController mediaDataController = getMediaDataController();
        long dialogId = getDialogId();
        TLRPC.ChatFull chatFull = this.chatInfo;
        mediaDataController.loadPinnedMessages(dialogId, 0, chatFull == null ? 0 : chatFull.pinned_msg_id);
        this.loadingPinnedMessagesList = true;
        updatePinnedTopicStarterMessage();
    }

    boolean isClearingHistory() {
        return this.clearingHistoryArr.get(getThreadId(), 0) != 0;
    }

    void setClearingHistory(long j, boolean z) {
        this.clearingHistoryArr.put(j, z ? 1 : 0);
    }

    public boolean isHideFilteredMessages() {
        return this.hideFilteredMessages;
    }

    public void switchHideFilteredMessages() {
        this.hideFilteredMessages = !this.hideFilteredMessages;
        this.chatAdapter.updateRowsSafe();
        this.chatAdapter.notifyDataSetChanged(true);
    }

    public Client getClient() {
        return this.client;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$new$0(DialogInterface dialogInterface) {
        this.postponedScrollIsCanceled = true;
        this.postponedScrollMessageId = 0;
        this.nextScrollToMessageId = 0;
        this.forceNextPinnedMessageId = 0;
        invalidateMessagesVisiblePart();
        showPinnedProgress(false);
    }

    /* renamed from: of */
    public static ChatActivity m1258of(long j) {
        Bundle bundle = new Bundle();
        if (j >= 0) {
            bundle.putLong("user_id", j);
        } else {
            bundle.putLong("chat_id", -j);
        }
        return new ChatActivity(bundle);
    }

    /* renamed from: of */
    public static ChatActivity m1259of(long j, int i) {
        Bundle bundle = new Bundle();
        if (j >= 0) {
            bundle.putLong("user_id", j);
        } else {
            bundle.putLong("chat_id", -j);
        }
        bundle.putInt("message_id", i);
        return new ChatActivity(bundle);
    }

    public void deleteHistory(final int i, final int i2, final boolean z) {
        this.chatAdapter.frozenMessages.clear();
        for (int i3 = 0; i3 < this.messages.size(); i3++) {
            MessageObject messageObject = (MessageObject) this.messages.get(i3);
            int i4 = messageObject.messageOwner.date;
            if (i4 <= i || i4 >= i2) {
                this.chatAdapter.frozenMessages.add(messageObject);
            }
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            chatListRecyclerView.setEmptyView(null);
        }
        if (this.chatAdapter.frozenMessages.isEmpty()) {
            showProgressView(true);
        }
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        chatActivityAdapter.isFrozen = true;
        chatActivityAdapter.notifyDataSetChanged(true);
        UndoView undoView = getUndoView();
        if (undoView == null) {
            return;
        }
        undoView.showWithAction(this.dialog_id, 81, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda473
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteHistory$2(i, i2, z);
            }
        }, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda474
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteHistory$3();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteHistory$2(int i, int i2, boolean z) {
        getMessagesController().deleteMessagesRange(this.dialog_id, ChatObject.isChannel(this.currentChat) ? this.dialog_id : 0L, i, i2, z, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda483
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$deleteHistory$1();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteHistory$1() {
        this.chatAdapter.frozenMessages.clear();
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        chatActivityAdapter.isFrozen = false;
        chatActivityAdapter.notifyDataSetChanged(true);
        showProgressView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$deleteHistory$3() {
        this.chatAdapter.frozenMessages.clear();
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        chatActivityAdapter.isFrozen = false;
        chatActivityAdapter.notifyDataSetChanged(true);
        showProgressView(false);
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public long getTopicId() {
        int i;
        if (this.isTopic || (i = this.chatMode) == 3 || i == 5 || i == 8) {
            return this.threadMessageId;
        }
        return 0L;
    }

    public int getQuickReplyId() {
        if (this.chatMode == 5) {
            return (int) this.threadMessageId;
        }
        return 0;
    }

    public long getSavedDialogId() {
        if (this.chatMode == 3) {
            return this.threadMessageId;
        }
        return 0L;
    }

    public boolean isForumInViewAsMessagesMode() {
        if (!ChatObject.isForum(this.currentChat) || this.isTopic) {
            return ChatObject.isMonoForum(this.currentChat) && getTopicId() == 0 && !this.isSubscriberSuggestions;
        }
        return true;
    }

    @Override // org.telegram.p023ui.Components.FloatingDebug.FloatingDebugProvider
    public List onGetDebugItems() {
        String string;
        ArrayList arrayList = new ArrayList();
        if (ChatObject.isChannel(this.currentChat)) {
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.getString(C2369R.string.DebugShareAlert)));
            int i = this.shareAlertDebugMode;
            if (i == 1) {
                string = LocaleController.getString(C2369R.string.DebugShareAlertDialogsModeLess);
            } else if (i != 2) {
                string = LocaleController.getString(C2369R.string.DebugShareAlertDialogsModeNormal);
            } else {
                string = LocaleController.getString(C2369R.string.DebugShareAlertDialogsModeMore);
            }
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.formatString(C2369R.string.DebugShareAlertSwitchDialogsMode, string), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda447
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onGetDebugItems$4();
                }
            }));
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.getString(C2369R.string.DebugShareAlertTopicsSlowMotion), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda448
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onGetDebugItems$5();
                }
            }));
        }
        if (this.currentUser == null) {
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.getString(C2369R.string.DebugMessageSkeletons)));
            String str = "";
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.getString(C2369R.string.DebugMessageSkeletonsLightOverlayAlpha), 0.0f, 255.0f, new AnimationProperties.FloatProperty(str) { // from class: org.telegram.ui.ChatActivity.5
                @Override // org.telegram.ui.Components.AnimationProperties.FloatProperty
                public void setValue(Object obj, float f) {
                    ChatActivity.SKELETON_LIGHT_OVERLAY_ALPHA = (int) f;
                }

                @Override // android.util.Property
                public Object get(Object obj) {
                    return Float.valueOf(ChatActivity.SKELETON_LIGHT_OVERLAY_ALPHA);
                }
            }));
            arrayList.add(new FloatingDebugController.DebugItem(LocaleController.getString(C2369R.string.DebugMessageSkeletonsSaturation), 1.0f, 10.0f, new AnimationProperties.FloatProperty(str) { // from class: org.telegram.ui.ChatActivity.6
                @Override // org.telegram.ui.Components.AnimationProperties.FloatProperty
                public void setValue(Object obj, float f) {
                    ChatActivity.SKELETON_SATURATION = f;
                    ChatActivity.this.skeletonColorMatrix.setSaturation(f);
                    ChatActivity.this.skeletonServicePaint.setColorFilter(new ColorMatrixColorFilter(ChatActivity.this.skeletonColorMatrix));
                }

                @Override // android.util.Property
                public Object get(Object obj) {
                    return Float.valueOf(ChatActivity.SKELETON_SATURATION);
                }
            }));
        }
        return arrayList;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onGetDebugItems$4() {
        this.shareAlertDebugMode = (this.shareAlertDebugMode + 1) % 3;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onGetDebugItems$5() {
        this.shareAlertDebugTopicsSlowMotion = !this.shareAlertDebugTopicsSlowMotion;
    }

    public void updateMessages(ArrayList arrayList, boolean z) {
        for (int i = 0; i < arrayList.size(); i++) {
            this.chatAdapter.updateRowWithMessageObject((MessageObject) arrayList.get(i), false, z);
        }
    }

    /* loaded from: classes5.dex */
    private interface ChatActivityDelegate {
        void onUnpin(boolean z, boolean z2);

        void openHashtagSearch(String str);

        void openReplyMessage(int i);

        /* renamed from: org.telegram.ui.ChatActivity$ChatActivityDelegate$-CC, reason: invalid class name */
        public abstract /* synthetic */ class CC {
            public static void $default$openReplyMessage(ChatActivityDelegate chatActivityDelegate, int i) {
            }

            public static void $default$onUnpin(ChatActivityDelegate chatActivityDelegate, boolean z, boolean z2) {
            }
        }
    }

    public static class SparseArrayWithTouch extends SparseArray {
        public ArrayList withTouch = new ArrayList();

        @Override // android.util.SparseArray
        public void clear() {
            this.withTouch.clear();
            super.clear();
        }
    }

    public RecyclerListView getChatListView() {
        return this.chatListView;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startMultiselect(int i) {
        int i2;
        if (!this.isInsideContainer && (i2 = i - this.chatAdapter.messagesStartRow) >= 0 && i2 < this.messages.size()) {
            MessageObject messageObject = (MessageObject) this.messages.get(i2);
            final boolean z = this.selectedMessagesIds[0].get(messageObject.getId(), null) == null && this.selectedMessagesIds[1].get(messageObject.getId(), null) == null;
            final SparseArray sparseArray = new SparseArray();
            for (int i3 = 0; i3 < this.selectedMessagesIds[0].size(); i3++) {
                sparseArray.put(this.selectedMessagesIds[0].keyAt(i3), (MessageObject) this.selectedMessagesIds[0].valueAt(i3));
            }
            for (int i4 = 0; i4 < this.selectedMessagesIds[1].size(); i4++) {
                sparseArray.put(this.selectedMessagesIds[1].keyAt(i4), (MessageObject) this.selectedMessagesIds[1].valueAt(i4));
            }
            this.chatListView.startMultiselect(i, false, new RecyclerListView.onMultiSelectionChanged() { // from class: org.telegram.ui.ChatActivity.11
                boolean limitReached;

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public void onSelectionChanged(int i5, boolean z2, float f, float f2) {
                    int i6 = i5 - ChatActivity.this.chatAdapter.messagesStartRow;
                    if (z) {
                        z2 = !z2;
                    }
                    if (i6 < 0 || i6 >= ChatActivity.this.messages.size()) {
                        return;
                    }
                    MessageObject messageObject2 = (MessageObject) ChatActivity.this.messages.get(i6);
                    if (!z2 || (ChatActivity.this.selectedMessagesIds[0].indexOfKey(messageObject2.getId()) < 0 && ChatActivity.this.selectedMessagesIds[1].indexOfKey(messageObject2.getId()) < 0)) {
                        if ((z2 || ChatActivity.this.selectedMessagesIds[0].indexOfKey(messageObject2.getId()) >= 0 || ChatActivity.this.selectedMessagesIds[1].indexOfKey(messageObject2.getId()) >= 0) && messageObject2.contentType == 0) {
                            this.limitReached = z2 && ChatActivity.this.selectedMessagesIds[0].size() + ChatActivity.this.selectedMessagesIds[1].size() >= 100;
                            RecyclerView.ViewHolder viewHolderFindViewHolderForAdapterPosition = ChatActivity.this.chatListView.findViewHolderForAdapterPosition(i5);
                            if (viewHolderFindViewHolderForAdapterPosition != null) {
                                View view = viewHolderFindViewHolderForAdapterPosition.itemView;
                                if (view instanceof ChatMessageCell) {
                                    ChatActivity.this.processRowSelect(view, false, f, f2);
                                    return;
                                }
                            }
                            ChatActivity.this.addToSelectedMessages(messageObject2, false);
                            ChatActivity.this.updateActionModeTitle();
                            ChatActivity.this.updateVisibleRows();
                        }
                    }
                }

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public boolean canSelect(int i5) {
                    int i6 = i5 - ChatActivity.this.chatAdapter.messagesStartRow;
                    if (i6 >= 0 && i6 < ChatActivity.this.messages.size()) {
                        MessageObject messageObject2 = (MessageObject) ChatActivity.this.messages.get(i6);
                        if (messageObject2.contentType == 0) {
                            if (!z && sparseArray.get(messageObject2.getId(), null) == null) {
                                return true;
                            }
                            if (z && sparseArray.get(messageObject2.getId(), null) != null) {
                                return true;
                            }
                        }
                    }
                    return false;
                }

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public int checkPosition(int i5, boolean z2) {
                    MessageObject.GroupedMessages groupedMessages;
                    int i6 = i5 - ChatActivity.this.chatAdapter.messagesStartRow;
                    if (i6 >= 0 && i6 < ChatActivity.this.messages.size()) {
                        MessageObject messageObject2 = (MessageObject) ChatActivity.this.messages.get(i6);
                        if (messageObject2.contentType == 0 && messageObject2.hasValidGroupId() && (groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(messageObject2.getGroupId())) != null) {
                            return ChatActivity.this.chatAdapter.messagesStartRow + ChatActivity.this.messages.indexOf(groupedMessages.messages.get(z2 ? 0 : r5.size() - 1));
                        }
                    }
                    return i5;
                }

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public boolean limitReached() {
                    return this.limitReached;
                }

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public void getPaddings(int[] iArr) {
                    ChatActivity chatActivity = ChatActivity.this;
                    iArr[0] = (int) chatActivity.chatListViewPaddingTop;
                    iArr[1] = chatActivity.blurredViewBottomOffset;
                }

                @Override // org.telegram.ui.Components.RecyclerListView.onMultiSelectionChanged
                public void scrollBy(int i5) {
                    ChatActivity.this.chatListView.scrollBy(0, i5);
                }
            });
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$12 */
    class C305612 implements RecyclerListView.OnItemClickListenerExtended {
        C305612() {
        }

        @Override // org.telegram.ui.Components.RecyclerListView.OnItemClickListenerExtended
        public void onItemClick(View view, int i, float f, float f2) {
            ChatMessageCell chatMessageCell;
            MessageObject messageObject;
            if (((BaseFragment) ChatActivity.this).inPreviewMode) {
                return;
            }
            ChatActivity.this.wasManualScroll = true;
            boolean z = view instanceof ChatActionCell;
            boolean z2 = false;
            if (z) {
                ChatActionCell chatActionCell = (ChatActionCell) view;
                if (chatActionCell.getMessageObject().isDateObject) {
                    if (ChatActivity.this.isInsideContainer) {
                        return;
                    }
                    Bundle bundle = new Bundle();
                    int i2 = chatActionCell.getMessageObject().messageOwner.date;
                    bundle.putLong("dialog_id", ChatActivity.this.dialog_id);
                    bundle.putLong("topic_id", ChatActivity.this.getTopicId());
                    bundle.putInt(PluginsConstants.Settings.TYPE, 0);
                    CalendarActivity calendarActivity = new CalendarActivity(bundle, 0, i2);
                    calendarActivity.setChatActivity(ChatActivity.this);
                    ChatActivity.this.presentFragment(calendarActivity);
                    return;
                }
            }
            if (z) {
                ChatActionCell chatActionCell2 = (ChatActionCell) view;
                if (chatActionCell2.getMessageObject() != null && (chatActionCell2.getMessageObject().messageOwner.action instanceof TLRPC.TL_messageActionBoostApply)) {
                    ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.openBoostForUsersDialog, Long.valueOf(ChatActivity.this.dialog_id));
                    return;
                }
            }
            if (z) {
                ChatActionCell chatActionCell3 = (ChatActionCell) view;
                if (chatActionCell3.getMessageObject() != null && (chatActionCell3.getMessageObject().messageOwner.action instanceof TLRPC.TL_messageActionSetSameChatWallPaper)) {
                    final int replyMsgId = chatActionCell3.getMessageObject().getReplyMsgId();
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$12$$ExternalSyntheticLambda0
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$onItemClick$0(replyMsgId);
                        }
                    }, 16L);
                    return;
                }
            }
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport()) {
                if (view instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell2 = (ChatMessageCell) view;
                    if (ChatActivity.this.textSelectionHelper.isSelected(chatMessageCell2.getMessageObject())) {
                        return;
                    } else {
                        z2 = !chatMessageCell2.isInsideBackground(f, f2);
                    }
                }
                ChatActivity.this.processRowSelect(view, z2, f, f2);
                return;
            }
            if ((view instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) view).getMessageObject()) != null && messageObject.type == 27) {
                messageObject.toggleChannelRecommendations();
                messageObject.forceUpdate = true;
                chatMessageCell.forceResetMessageObject();
                view.requestLayout();
                if (i >= 0) {
                    ChatActivity.this.chatAdapter.notifyItemChanged(i);
                    return;
                }
                return;
            }
            ChatActivity.this.createMenu(view, true, false, f, f2, false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$0(int i) {
            ChatActivity.this.scrollToMessageId(i, 0, true, 0, true, 0);
        }

        @Override // org.telegram.ui.Components.RecyclerListView.OnItemClickListenerExtended
        public boolean hasDoubleTap(View view, int i) {
            MessageObject messageObject;
            TLRPC.Message message;
            int i2;
            TLRPC.Chat chat;
            TLRPC.ChatFull chatFull;
            TLRPC.Chat chat2;
            if ((ChatActivity.this.actionsButtonsLayout != null && ChatActivity.this.actionsButtonsLayout.getVisibility() == 0) || ChatActivity.this.chatMode == 5) {
                return false;
            }
            if (view instanceof ChatMessageCell) {
                messageObject = ((ChatMessageCell) view).getPrimaryMessageObject();
            } else if (view instanceof ChatActionCell) {
                messageObject = ((ChatActionCell) view).getMessageObject();
            }
            boolean z = messageObject.isOutOwner() || (ChatActivity.this.isChannel() && (chat2 = ChatActivity.this.currentChat) != null && ChatObject.canSendMessages(chat2));
            if ((ExteraConfig.doubleTapAction == 0 && !z) || (ExteraConfig.doubleTapActionOutOwner == 0 && z)) {
                return false;
            }
            if ((ExteraConfig.doubleTapAction == 1 && !z) || (ExteraConfig.doubleTapActionOutOwner == 1 && z)) {
                String doubleTapReaction = ChatActivity.this.getMediaDataController().getDoubleTapReaction();
                TLRPC.TL_availableReaction tL_availableReaction = ChatActivity.this.getMediaDataController().getReactionsMap().get(doubleTapReaction);
                if (tL_availableReaction == null && (doubleTapReaction == null || !doubleTapReaction.startsWith("animated_"))) {
                    return false;
                }
                boolean zReactionIsAvailable = ChatActivity.this.dialog_id >= 0;
                if (!zReactionIsAvailable && (chatFull = ChatActivity.this.chatInfo) != null) {
                    if (tL_availableReaction != null) {
                        doubleTapReaction = tL_availableReaction.reaction;
                    }
                    zReactionIsAvailable = ChatObject.reactionIsAvailable(chatFull, doubleTapReaction);
                }
                return (!zReactionIsAvailable || AyuMessageUtils.isAyuDeleted(messageObject) || messageObject.isDateObject || messageObject.isSending() || !messageObject.canSetReaction() || messageObject.isEditing() || ((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isSecretChat() || ChatActivity.this.isInScheduleMode() || messageObject.isSponsored()) ? false : true;
            }
            MessageObject.GroupedMessages validGroupedMessage = ChatActivity.this.getValidGroupedMessage(messageObject);
            boolean z2 = ChatActivity.this.getMessagesController().isChatNoForwards(ChatActivity.this.currentChat) || messageObject.messageOwner.noforwards || ChatActivity.this.getDialogId() == UserObject.VERIFY;
            boolean z3 = (messageObject.isExpiredStory() || ChatActivity.this.chatMode == 1 || (ChatActivity.this.threadMessageObjects != null && ChatActivity.this.threadMessageObjects.contains(messageObject)) || messageObject.isSponsored() || ((ChatActivity.this.getMessageType(messageObject) == 1 && messageObject.getDialogId() == ChatActivity.this.mergeDialogId) || (messageObject.messageOwner.action instanceof TLRPC.TL_messageActionSecureValuesSent) || ((ChatActivity.this.currentEncryptedChat == null && messageObject.getId() < 0) || ((ChatActivity.this.bottomChannelButtonsLayout != null && ChatActivity.this.bottomChannelButtonsLayout.getVisibility() == 0 && (!ChatActivity.this.bottomOverlayChatWaitsReply || ChatActivity.this.selectedObject == null || (MessageObject.getTopicId(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.selectedObject.messageOwner, ChatObject.isForum(ChatActivity.this.currentChat)) == 0 && !ChatActivity.this.selectedObject.wasJustSent))) || ((chat = ChatActivity.this.currentChat) != null && ((ChatObject.isNotInChat(chat) && !ChatActivity.this.isThreadChat()) || ((ChatObject.isChannel(ChatActivity.this.currentChat) && !ChatObject.canPost(ChatActivity.this.currentChat) && !ChatActivity.this.currentChat.megagroup) || !ChatObject.canSendMessages(ChatActivity.this.currentChat)))))))) ? false : true;
            boolean z4 = (!messageObject.canEditMessage(ChatActivity.this.currentChat) || ChatActivity.this.chatActivityEnterView.hasAudioToSend() || messageObject.getDialogId() == ChatActivity.this.mergeDialogId || messageObject.type == 23) ? false : true;
            if (z4 && validGroupedMessage != null) {
                int size = validGroupedMessage.messages.size();
                int i3 = 0;
                for (int i4 = 0; i4 < size; i4++) {
                    MessageObject messageObject2 = validGroupedMessage.messages.get(i4);
                    if (i4 == 0 || !TextUtils.isEmpty(messageObject2.caption)) {
                        ChatActivity.this.selectedObjectToEditCaption = messageObject2;
                        if (!TextUtils.isEmpty(messageObject2.caption)) {
                            i3++;
                        }
                    }
                }
                z4 = i3 < 2;
            }
            boolean z5 = (messageObject.isSponsored() || ChatActivity.this.chatMode == 1 || (messageObject.needDrawBluredPreview() && !messageObject.hasExtendedMediaPreview()) || messageObject.isLiveLocation() || (i2 = messageObject.type) == 16 || z2 || i2 == 18 || i2 == 21) ? false : true;
            boolean z6 = z5 && !UserObject.isUserSelf(ChatActivity.this.currentUser);
            switch (z ? ExteraConfig.doubleTapActionOutOwner : ExteraConfig.doubleTapAction) {
                case 2:
                    return messageObject.getId() > 0 && z3 && !ChatActivity.this.isInsideContainer;
                case 3:
                    return (messageObject.type == 0 || messageObject.isAnimatedEmoji() || messageObject.isAnimatedEmojiStickers() || ChatActivity.this.getMessageCaption(messageObject, validGroupedMessage) != null) && !z2;
                case 4:
                    return z5;
                case 5:
                    return z4;
                case 6:
                    return z6;
                case 7:
                    return messageObject.canDeleteMessage(ChatActivity.this.chatMode == 1, ChatActivity.this.currentChat) && (ChatActivity.this.threadMessageObjects == null || !ChatActivity.this.threadMessageObjects.contains(messageObject)) && ((message = messageObject.messageOwner) == null || !(message.action instanceof TLRPC.TL_messageActionTopicCreate));
                case 8:
                    return (ChatUtils.getInstance().getMessageText(messageObject, validGroupedMessage) == null || messageObject.isAnimatedEmoji() || messageObject.isDice()) ? false : true;
                case 9:
                    return !messageObject.isOut();
                default:
                    return false;
            }
        }

        @Override // org.telegram.ui.Components.RecyclerListView.OnItemClickListenerExtended
        public void onDoubleTap(View view, int i, float f, float f2) throws Resources.NotFoundException {
            MessageObject messageObject;
            boolean zReactionIsAvailable;
            TLRPC.ChatFull chatFull;
            TLRPC.ChatFull chatFull2;
            TLRPC.Chat chat;
            if (ChatActivity.this.getParentActivity() == null || ChatActivity.this.isSecretChat() || ChatActivity.this.isInScheduleMode() || ChatActivity.this.isInPreviewMode() || ChatActivity.this.chatMode == 5) {
                return;
            }
            if (view instanceof ChatMessageCell) {
                messageObject = ((ChatMessageCell) view).getPrimaryMessageObject();
            } else {
                if (!(view instanceof ChatActionCell)) {
                    return;
                }
                messageObject = ((ChatActionCell) view).getMessageObject();
                if (messageObject.isDateObject) {
                    return;
                }
            }
            boolean z = messageObject.isOutOwner() || (ChatActivity.this.isChannel() && (chat = ChatActivity.this.currentChat) != null && ChatObject.canSendMessages(chat));
            if (ExteraConfig.doubleTapAction != 0 || z) {
                if ((ExteraConfig.doubleTapActionOutOwner == 0 && z) || messageObject.isSecretMedia() || messageObject.isExpiredStory() || messageObject.type == 27) {
                    return;
                }
                if ((ExteraConfig.doubleTapAction == 1 && !z) || (ExteraConfig.doubleTapActionOutOwner == 1 && z)) {
                    if (messageObject.isSecret() || !messageObject.canSetReaction() || messageObject.isExpiredStory() || messageObject.type == 27) {
                        return;
                    }
                    ReactionsEffectOverlay.removeCurrent(false);
                    String doubleTapReaction = ChatActivity.this.getMediaDataController().getDoubleTapReaction();
                    if (doubleTapReaction.startsWith("animated_")) {
                        zReactionIsAvailable = ChatActivity.this.dialog_id >= 0;
                        if (!zReactionIsAvailable && (chatFull2 = ChatActivity.this.chatInfo) != null) {
                            zReactionIsAvailable = ChatObject.reactionIsAvailable(chatFull2, doubleTapReaction);
                        }
                        if (zReactionIsAvailable) {
                            ChatActivity.this.selectReaction(view, messageObject, null, null, f, f2, ReactionsLayoutInBubble.VisibleReaction.fromEmojicon(doubleTapReaction), true, false, false, false);
                        }
                        return;
                    }
                    MessageObject messageObject2 = messageObject;
                    TLRPC.TL_availableReaction tL_availableReaction = ChatActivity.this.getMediaDataController().getReactionsMap().get(doubleTapReaction);
                    if (tL_availableReaction == null || messageObject2.isSponsored()) {
                        return;
                    }
                    zReactionIsAvailable = ChatActivity.this.dialog_id >= 0;
                    if (!zReactionIsAvailable && (chatFull = ChatActivity.this.chatInfo) != null) {
                        zReactionIsAvailable = ChatObject.reactionIsAvailable(chatFull, tL_availableReaction.reaction);
                    }
                    if (zReactionIsAvailable) {
                        ChatActivity.this.selectReaction(view, messageObject2, null, null, f, f2, ReactionsLayoutInBubble.VisibleReaction.fromEmojicon(tL_availableReaction), true, false, false, false);
                        return;
                    }
                    return;
                }
                ChatActivity.this.selectedObject = messageObject;
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.selectedObjectGroup = chatActivity.getValidGroupedMessage(chatActivity.selectedObject);
                switch (z ? ExteraConfig.doubleTapActionOutOwner : ExteraConfig.doubleTapAction) {
                    case 2:
                        ChatActivity.this.processSelectedOption(8);
                        break;
                    case 3:
                        ChatActivity.this.processSelectedOption(3);
                        break;
                    case 4:
                        ChatActivity.this.processSelectedOption(2);
                        break;
                    case 5:
                        ChatActivity.this.processSelectedOption(12);
                        break;
                    case 6:
                        ChatActivity.this.processSelectedOption(DataTypes.EMPTY);
                        break;
                    case 7:
                        ChatActivity.this.processSelectedOption(1);
                        break;
                    case 8:
                        TranslatorUtils.translateWithAlert(ChatActivity.this.selectedObject, ChatActivity.this.selectedObjectGroup, (ChatActivity.this.selectedObject == null || !(ChatActivity.this.selectedObject.isPoll() || ChatActivity.this.selectedObject.isVoiceTranscriptionOpen() || ChatActivity.this.selectedObject.isSponsored() || ChatActivity.this.selectedObject.scheduled || ChatActivity.this.chatMode == 5)) ? ChatActivity.this.getMessagesController().getInputPeer(ChatActivity.this.dialog_id) : null, ChatActivity.this.selectedObject.getId(), ChatActivity.this);
                        break;
                    case 9:
                        ChatActivity.this.processSelectedOption(133803);
                        break;
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    class ChatActivityEnterViewDelegate implements ChatActivityEnterView.ChatActivityEnterViewDelegate {
        boolean isEditTextItemVisibilitySuppressed;
        int lastSize;

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public /* synthetic */ TLRPC.Peer getDefaultSendAs() {
            return ChatActivityEnterView.ChatActivityEnterViewDelegate.CC.$default$getDefaultSendAs(this);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public /* synthetic */ TL_stories.StoryItem getReplyToStory() {
            return ChatActivityEnterView.ChatActivityEnterViewDelegate.CC.$default$getReplyToStory(this);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public /* synthetic */ boolean setDefaultSendAs(long j, long j2) {
            return ChatActivityEnterView.ChatActivityEnterViewDelegate.CC.$default$setDefaultSendAs(this, j, j2);
        }

        private ChatActivityEnterViewDelegate() {
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public int getContentViewHeight() {
            return ChatActivity.this.contentView.getHeight();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public int measureKeyboardHeight() {
            return ChatActivity.this.contentView.measureKeyboardHeight();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public TLRPC.TL_channels_sendAsPeers getSendAsPeers() {
            return ChatActivity.this.sendAsPeersObj;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onMessageSend(CharSequence charSequence, boolean z, int i, int i2, long j) throws Resources.NotFoundException, NumberFormatException {
            MessagePreviewParams messagePreviewParams;
            MessagePreviewParams.Messages messages;
            TLRPC.Message message;
            MessagePreviewParams.Messages messages2;
            if (ChatActivity.this.chatListItemAnimator != null) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.chatActivityEnterViewAnimateFromTop = chatActivity.chatActivityEnterView.getBackgroundTop();
                if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0) {
                    ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = true;
                }
            }
            if (ChatActivity.this.mentionContainer != null && ChatActivity.this.mentionContainer.getAdapter() != null) {
                ChatActivity.this.mentionContainer.getAdapter().addHashtagsFromMessage(charSequence);
            }
            boolean z2 = false;
            if (i != 0) {
                if (ChatActivity.this.scheduledMessagesCount == -1) {
                    ChatActivity.this.scheduledMessagesCount = 0;
                }
                if (charSequence != null) {
                    ChatActivity.this.scheduledMessagesCount++;
                }
                MessagePreviewParams messagePreviewParams2 = ChatActivity.this.messagePreviewParams;
                if (messagePreviewParams2 != null && (messages2 = messagePreviewParams2.forwardMessages) != null && !messages2.messages.isEmpty()) {
                    ChatActivity.this.scheduledMessagesCount += ChatActivity.this.messagePreviewParams.forwardMessages.messages.size();
                }
                ChatActivity.this.updateScheduledInterface(false);
            }
            if (!TextUtils.isEmpty(charSequence) && (messagePreviewParams = ChatActivity.this.messagePreviewParams) != null && (messages = messagePreviewParams.forwardMessages) != null && !messages.messages.isEmpty() && ChatActivity.this.messagePreviewParams.quote == null && j <= 0) {
                ArrayList<MessageObject> arrayList = new ArrayList<>();
                ChatActivity.this.messagePreviewParams.forwardMessages.getSelectedMessages(arrayList);
                boolean z3 = arrayList.size() > 0;
                TLRPC.Peer peer = ChatActivity.this.getMessagesController().getPeer(ChatActivity.this.dialog_id);
                int i3 = 0;
                while (true) {
                    if (i3 >= arrayList.size()) {
                        z2 = z3;
                        break;
                    }
                    MessageObject messageObject = arrayList.get(i3);
                    if (messageObject != null && (message = messageObject.messageOwner) != null && !MessageObject.peersEqual(message.peer_id, peer)) {
                        break;
                    } else {
                        i3++;
                    }
                }
                if (z2) {
                    Bulletin bulletinCreateSimpleBulletin = BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.hint_swipe_reply, LocaleController.getString(C2369R.string.SwipeToReplyHint), LocaleController.getString(C2369R.string.SwipeToReplyHintMessage));
                    RLottieImageView rLottieImageView = ((Bulletin.TwoLineLottieLayout) bulletinCreateSimpleBulletin.getLayout()).imageView;
                    rLottieImageView.setScaleX(1.8f);
                    rLottieImageView.setScaleY(1.8f);
                    bulletinCreateSimpleBulletin.show(true);
                }
            }
            if (ChatObject.isForum(ChatActivity.this.currentChat)) {
                ChatActivity chatActivity2 = ChatActivity.this;
                if (!chatActivity2.isTopic && chatActivity2.replyingMessageObject != null) {
                    long topicId = ChatActivity.this.replyingMessageObject.replyToForumTopic != null ? ChatActivity.this.replyingMessageObject.replyToForumTopic.f1631id : MessageObject.getTopicId(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.replyingMessageObject.messageOwner, true);
                    if (topicId != 0) {
                        ChatActivity.this.getMediaDataController().cleanDraft(ChatActivity.this.dialog_id, topicId, false);
                    }
                }
            }
            ChatActivity.this.hideFieldPanel(z, i, j, true);
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null && chatActivityEnterView.getEmojiView() != null) {
                ChatActivity.this.chatActivityEnterView.getEmojiView().onMessageSend();
            }
            if (ChatActivity.this.getMessagesController().premiumFeaturesBlocked() || ChatActivity.this.getMessagesController().transcribeAudioTrialWeeklyNumber > 0 || ChatActivity.this.getMessagesController().didPressTranscribeButtonEnough() || ChatActivity.this.getUserConfig().isPremium() || TextUtils.isEmpty(charSequence) || ChatActivity.this.messages == null || VoiceRecognitionController.isCustomRecognitionEnabled()) {
                return;
            }
            for (int i4 = 1; i4 < Math.min(5, ChatActivity.this.messages.size()); i4++) {
                MessageObject messageObject2 = (MessageObject) ChatActivity.this.messages.get(i4);
                if (messageObject2 != null && !messageObject2.isOutOwner() && ((messageObject2.isVoice() || messageObject2.isRoundVideo()) && messageObject2.isContentUnread())) {
                    TranscribeButton.showOffTranscribe(messageObject2);
                }
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onEditTextScroll() {
            if (ChatActivity.this.suggestEmojiPanel != null) {
                ChatActivity.this.suggestEmojiPanel.forceClose();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onContextMenuOpen() {
            if (ChatActivity.this.suggestEmojiPanel != null) {
                ChatActivity.this.suggestEmojiPanel.forceClose();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onContextMenuClose() {
            if (ChatActivity.this.suggestEmojiPanel != null) {
                ChatActivity.this.suggestEmojiPanel.fireUpdate();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onSwitchRecordMode(boolean z) {
            ChatActivity.this.showVoiceHint(false, z);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onPreAudioVideoRecord() {
            ChatActivity.this.showVoiceHint(true, false);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onUpdateSlowModeButton(View view, boolean z, CharSequence charSequence) {
            ChatActivity.this.showSlowModeHint(view, z, charSequence);
            if (ChatActivity.this.headerItem == null || ChatActivity.this.headerItem.getVisibility() == 0) {
                return;
            }
            ChatActivity.this.headerItem.setVisibility(0);
            if (ChatActivity.this.attachItem != null) {
                ChatActivity.this.attachItem.setVisibility(8);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean checkCanRemoveRestrictionsByBoosts() {
            return ChatActivity.this.checkCanRemoveRestrictionsByBoosts();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextSelectionChanged(int i, int i2) {
            if (ChatActivity.this.editTextItem == null) {
                return;
            }
            final ActionBarMenu actionBarMenuCreateMenu = ((BaseFragment) ChatActivity.this).actionBar.createMenu();
            if (ChatActivity.this.suggestEmojiPanel != null) {
                ChatActivity.this.suggestEmojiPanel.onTextSelectionChanged(i, i2);
            }
            if (i2 - i > 0) {
                if (ChatActivity.this.editTextItem.getTag() == null) {
                    ChatActivity.this.editTextItem.setTag(1);
                    if (ChatActivity.this.editTextItem.getVisibility() != 0) {
                        if ((ChatActivity.this.chatMode == 3 && ChatActivity.this.getSavedDialogId() == ChatActivity.this.getUserConfig().getClientUserId()) || (ChatActivity.this.chatMode == 0 && ((ChatActivity.this.threadMessageId == 0 || ChatActivity.this.isTopic) && !UserObject.isReplyUser(ChatActivity.this.currentUser) && !ChatActivity.this.isReport()))) {
                            ChatActivity.this.editTextItem.setVisibility(0);
                            ChatActivity.this.checkEditTextItemMenu();
                            if (ChatActivity.this.headerItem != null) {
                                ChatActivity.this.headerItem.setVisibility(8);
                            }
                            if (ChatActivity.this.attachItem != null) {
                                ChatActivity.this.attachItem.setVisibility(8);
                            }
                        } else {
                            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(AndroidUtilities.m1146dp(48.0f), 0.0f);
                            valueAnimatorOfFloat.setDuration(220L);
                            valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.DEFAULT);
                            valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ChatActivityEnterViewDelegate.1
                                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                                public void onAnimationStart(Animator animator) {
                                    ((BaseFragment) ChatActivity.this).actionBar.setMenuOffsetSuppressed(true);
                                    ChatActivity.this.checkEditTextItemMenu();
                                    ChatActivity.this.editTextItem.setVisibility(0);
                                    actionBarMenuCreateMenu.translateXItems(AndroidUtilities.m1146dp(48.0f));
                                }

                                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                                public void onAnimationEnd(Animator animator) {
                                    ((BaseFragment) ChatActivity.this).actionBar.setMenuOffsetSuppressed(false);
                                }
                            });
                            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$ChatActivityEnterViewDelegate$$ExternalSyntheticLambda1
                                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                    actionBarMenuCreateMenu.translateXItems(((Float) valueAnimator.getAnimatedValue()).floatValue());
                                }
                            });
                            valueAnimatorOfFloat.start();
                        }
                    }
                }
                ChatActivity.this.editTextStart = i;
                ChatActivity.this.editTextEnd = i2;
                return;
            }
            if (ChatActivity.this.editTextItem.getTag() != null) {
                ChatActivity.this.editTextItem.setTag(null);
                if (ChatActivity.this.editTextItem.getVisibility() != 8) {
                    if ((ChatActivity.this.chatMode == 3 && ChatActivity.this.getSavedDialogId() == ChatActivity.this.getUserConfig().getClientUserId()) || (ChatActivity.this.chatMode == 0 && ((ChatActivity.this.threadMessageId == 0 || ChatActivity.this.isTopic) && !UserObject.isReplyUser(ChatActivity.this.currentUser) && !ChatActivity.this.isReport()))) {
                        ChatActivity.this.editTextItem.setVisibility(8);
                        if (ChatActivity.this.chatActivityEnterView.hasText() && TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer())) {
                            if (ChatActivity.this.headerItem != null) {
                                ChatActivity.this.headerItem.setVisibility(8);
                            }
                            if (ChatActivity.this.attachItem != null) {
                                ChatActivity.this.attachItem.setVisibility(0);
                                return;
                            }
                            return;
                        }
                        if (ChatActivity.this.headerItem != null) {
                            ChatActivity.this.headerItem.setVisibility(0);
                        }
                        if (ChatActivity.this.attachItem != null) {
                            ChatActivity.this.attachItem.setVisibility(8);
                            return;
                        }
                        return;
                    }
                    ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(0.0f, AndroidUtilities.m1146dp(48.0f));
                    valueAnimatorOfFloat2.setDuration(220L);
                    valueAnimatorOfFloat2.setInterpolator(CubicBezierInterpolator.DEFAULT);
                    valueAnimatorOfFloat2.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ChatActivityEnterViewDelegate.2
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationStart(Animator animator) {
                            ((BaseFragment) ChatActivity.this).actionBar.setMenuOffsetSuppressed(true);
                            ChatActivityEnterViewDelegate.this.isEditTextItemVisibilitySuppressed = true;
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animator) {
                            ChatActivity.this.editTextItem.setVisibility(8);
                            actionBarMenuCreateMenu.translateXItems(0.0f);
                            ((BaseFragment) ChatActivity.this).actionBar.setMenuOffsetSuppressed(false);
                            ChatActivityEnterViewDelegate.this.isEditTextItemVisibilitySuppressed = false;
                        }
                    });
                    valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$ChatActivityEnterViewDelegate$$ExternalSyntheticLambda2
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            actionBarMenuCreateMenu.translateXItems(((Float) valueAnimator.getAnimatedValue()).floatValue());
                        }
                    });
                    valueAnimatorOfFloat2.start();
                }
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextChanged(CharSequence charSequence, boolean z, boolean z2) throws Resources.NotFoundException {
            final CharSequence charSequence2;
            MediaController.getInstance().setInputFieldHasText(!TextUtils.isEmpty(charSequence) || ChatActivity.this.chatActivityEnterView.isEditingMessage());
            if (ChatActivity.this.mentionContainer == null || ChatActivity.this.mentionContainer.getAdapter() == null) {
                charSequence2 = charSequence;
            } else {
                charSequence2 = charSequence;
                ChatActivity.this.mentionContainer.getAdapter().lambda$searchUsernameOrHashtag$7(charSequence2, ChatActivity.this.chatActivityEnterView.getCursorPosition(), ChatActivity.this.messages, false, false);
            }
            if (ChatActivity.this.waitingForCharaterEnterRunnable != null) {
                AndroidUtilities.cancelRunOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable);
                ChatActivity.this.waitingForCharaterEnterRunnable = null;
            }
            TLRPC.Chat chat = ChatActivity.this.currentChat;
            if ((chat == null || ChatObject.canSendEmbed(chat)) && ChatActivity.this.chatActivityEnterView.isMessageWebPageSearchEnabled() && (!ChatActivity.this.chatActivityEnterView.isEditingMessage() || !ChatActivity.this.chatActivityEnterView.isEditingCaption())) {
                if (z) {
                    ChatActivity.this.searchLinks(charSequence2, true);
                } else {
                    ChatActivity.this.checkEditLinkRemoved(charSequence2);
                    ChatActivity.this.waitingForCharaterEnterRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity.ChatActivityEnterViewDelegate.3
                        @Override // java.lang.Runnable
                        public void run() throws Resources.NotFoundException {
                            if (this == ChatActivity.this.waitingForCharaterEnterRunnable) {
                                ChatActivity.this.searchLinks(charSequence2, false);
                                ChatActivity.this.waitingForCharaterEnterRunnable = null;
                            }
                        }
                    };
                    AndroidUtilities.runOnUIThread(ChatActivity.this.waitingForCharaterEnterRunnable, AndroidUtilities.WEB_URL == null ? 3000L : 1000L);
                }
            }
            EmojiAnimationsOverlay emojiAnimationsOverlay = ChatActivity.this.emojiAnimationsOverlay;
            if (emojiAnimationsOverlay != null) {
                emojiAnimationsOverlay.cancelAllAnimations();
            }
            ReactionsEffectOverlay.dismissAll();
            if (z2) {
                return;
            }
            if ((ChatActivity.this.scheduledOrNoSoundHint != null && ChatActivity.this.scheduledOrNoSoundHint.getVisibility() == 0) || (ChatActivity.this.scheduledHint != null && ChatActivity.this.scheduledHint.getVisibility() == 0)) {
                ChatActivity.this.hideSendButtonHints();
            } else {
                ChatActivity.this.showScheduledHint();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTextSpansChanged(CharSequence charSequence) throws Resources.NotFoundException {
            ChatActivity.this.searchLinks(charSequence, true);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needSendTyping() {
            if (ChatActivity.this.chatMode == 5 || ChatActivity.this.chatMode == 6 || ChatActivity.this.chatMode == 8) {
                return;
            }
            ChatActivity.this.getMessagesController().sendTyping(ChatActivity.this.dialog_id, ChatActivity.this.threadMessageId, 0, ((BaseFragment) ChatActivity.this).classGuid);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAttachButtonHidden() {
            if (((BaseFragment) ChatActivity.this).actionBar.isSearchFieldVisible()) {
                return;
            }
            if (ChatActivity.this.editTextItem != null && !this.isEditTextItemVisibilitySuppressed) {
                ChatActivity.this.editTextItem.setVisibility(8);
            }
            if (TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer())) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(0);
                }
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAttachButtonShow() {
            if (((BaseFragment) ChatActivity.this).actionBar.isSearchFieldVisible()) {
                return;
            }
            if (ChatActivity.this.headerItem != null) {
                ChatActivity.this.headerItem.setVisibility(0);
            }
            if (ChatActivity.this.editTextItem != null && !this.isEditTextItemVisibilitySuppressed) {
                ChatActivity.this.editTextItem.setVisibility(8);
            }
            if (ChatActivity.this.attachItem != null) {
                ChatActivity.this.attachItem.setVisibility(8);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onMessageEditEnd(boolean z) throws Resources.NotFoundException {
            boolean z2;
            if (ChatActivity.this.chatListItemAnimator != null) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.chatActivityEnterViewAnimateFromTop = chatActivity.chatActivityEnterView.getBackgroundTop();
                if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0) {
                    ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = true;
                }
            }
            if (z) {
                return;
            }
            if (ChatActivity.this.mentionContainer != null) {
                ChatActivity.this.mentionContainer.getAdapter().setNeedBotContext(true);
            }
            if (ChatActivity.this.editingMessageObject != null) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityEnterViewDelegate$$ExternalSyntheticLambda3
                    @Override // java.lang.Runnable
                    public final void run() throws Resources.NotFoundException, NumberFormatException {
                        this.f$0.lambda$onMessageEditEnd$2();
                    }
                }, 30L);
            }
            if (ChatActivity.this.chatActivityEnterView.isPopupShowing()) {
                ChatActivity.this.chatActivityEnterView.setFieldFocused();
                z2 = true;
            } else {
                z2 = false;
            }
            ChatActivity.this.chatActivityEnterView.setAllowStickersAndGifs(true, true, true, z2);
            if (ChatActivity.this.editingMessageObjectReqId != 0) {
                ChatActivity.this.getConnectionsManager().cancelRequest(ChatActivity.this.editingMessageObjectReqId, true);
                ChatActivity.this.editingMessageObjectReqId = 0;
            }
            ChatActivity.this.updatePinnedMessageView(true);
            ChatActivity.this.updateBottomOverlay();
            ChatActivity.this.updateVisibleRows();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onMessageEditEnd$2() throws Resources.NotFoundException, NumberFormatException {
            ChatActivity.this.hideFieldPanel(true);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onWindowSizeChanged(int i) {
            if (i < AndroidUtilities.m1146dp(72.0f) + ActionBar.getCurrentActionBarHeight()) {
                ChatActivity.this.allowStickersPanel = false;
                if (ChatActivity.this.suggestEmojiPanel.getVisibility() == 0) {
                    ChatActivity.this.suggestEmojiPanel.setVisibility(4);
                }
            } else {
                ChatActivity.this.allowStickersPanel = true;
                if (ChatActivity.this.suggestEmojiPanel.getVisibility() == 4 && !ChatActivity.this.isInPreviewMode()) {
                    ChatActivity.this.suggestEmojiPanel.setVisibility(0);
                }
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.allowContextBotPanel = true ^ chatActivity.chatActivityEnterView.isPopupShowing();
            int i2 = i + (ChatActivity.this.chatActivityEnterView.isPopupShowing() ? 65536 : 0);
            if (this.lastSize != i2) {
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
                ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = false;
            }
            this.lastSize = i2;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onStickersTab(boolean z) {
            if (ChatActivity.this.emojiButtonRed != null) {
                ChatActivity.this.emojiButtonRed.setVisibility(8);
            }
            ChatActivity.this.allowContextBotPanelSecond = !z;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void didPressAttachButton() {
            ChatAttachAlert chatAttachAlert = ChatActivity.this.chatAttachAlert;
            if (chatAttachAlert != null) {
                chatAttachAlert.setEditingMessageObject(0, null);
            }
            ChatActivity.this.openAttachMenu();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void setFrontface(boolean z) {
            ChatActivity.this.checkInstantCameraView();
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            if (instantCameraView != null) {
                instantCameraView.setFrontface(z);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void didPressSuggestionButton() {
            Context context = ChatActivity.this.getContext();
            int i = ((BaseFragment) ChatActivity.this).currentAccount;
            long j = ChatActivity.this.dialog_id;
            MessageSuggestionParams messageSuggestionParamsEmpty = ChatActivity.this.messageSuggestionParams;
            if (messageSuggestionParamsEmpty == null) {
                messageSuggestionParamsEmpty = MessageSuggestionParams.empty();
            }
            ChatActivity chatActivity = ChatActivity.this;
            new MessageSuggestionOfferSheet(context, i, j, messageSuggestionParamsEmpty, chatActivity, chatActivity.getResourceProvider(), 0, new ChatActivity$$ExternalSyntheticLambda186(ChatActivity.this)).show();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void toggleVideoRecordingPause() {
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            if (instantCameraView != null) {
                instantCameraView.togglePause();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean isVideoRecordingPaused() {
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            return instantCameraView != null && instantCameraView.isPaused();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needStartRecordVideo(int i, boolean z, int i2, int i3, int i4, long j, long j2) {
            ChatActivity.this.checkInstantCameraView();
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            if (instantCameraView != null) {
                if (i == 0) {
                    instantCameraView.showCamera(false);
                    ChatActivity.this.chatListView.stopScroll();
                    ChatActivity.this.chatAdapter.updateRowsSafe();
                } else if (i == 1 || i == 3 || i == 4) {
                    instantCameraView.send(i, z, i2, 0, i4, j, j2);
                } else if (i == 2 || i == 5) {
                    instantCameraView.cancel(i == 2);
                }
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needChangeVideoPreviewState(int i, float f) {
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            if (instantCameraView != null) {
                instantCameraView.changeVideoPreviewState(i, f);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needStartRecordAudio(int i) {
            int i2 = i == 0 ? 8 : 0;
            if (ChatActivity.this.overlayView.getVisibility() != i2) {
                ChatActivity.this.overlayView.setVisibility(i2);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void needShowMediaBanHint() {
            ChatActivity.this.showMediaBannedHint();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onStickersExpandedChange() {
            ChatActivity.this.checkRaiseSensors();
            if (ChatActivity.this.chatActivityEnterView.isStickersExpanded()) {
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                if (Bulletin.getVisibleBulletin() != null && Bulletin.getVisibleBulletin().isShowing()) {
                    Bulletin.getVisibleBulletin().hide();
                }
            } else {
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
            }
            float f = 0.0f;
            if (ChatActivity.this.mentionContainer != null) {
                ChatActivity.this.mentionContainer.animate().alpha((ChatActivity.this.chatActivityEnterView.isStickersExpanded() || ChatActivity.this.isInPreviewMode()) ? 0.0f : 1.0f).setInterpolator(CubicBezierInterpolator.DEFAULT).start();
            }
            if (ChatActivity.this.suggestEmojiPanel != null) {
                ChatActivity.this.suggestEmojiPanel.setVisibility(0);
                ViewPropertyAnimator viewPropertyAnimatorAnimate = ChatActivity.this.suggestEmojiPanel.animate();
                if (!ChatActivity.this.chatActivityEnterView.isStickersExpanded() && !ChatActivity.this.isInPreviewMode()) {
                    f = 1.0f;
                }
                viewPropertyAnimatorAnimate.alpha(f).setInterpolator(CubicBezierInterpolator.DEFAULT).withEndAction(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityEnterViewDelegate$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onStickersExpandedChange$3();
                    }
                }).start();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onStickersExpandedChange$3() {
            if (ChatActivity.this.suggestEmojiPanel == null || !ChatActivity.this.chatActivityEnterView.isStickersExpanded()) {
                return;
            }
            ChatActivity.this.suggestEmojiPanel.setVisibility(8);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void scrollToSendingMessage() {
            int sendingMessageId = ChatActivity.this.getSendMessagesHelper().getSendingMessageId(ChatActivity.this.dialog_id);
            if (sendingMessageId != 0) {
                ChatActivity.this.scrollToMessageId(sendingMessageId, 0, true, 0, true, 0);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean hasScheduledMessages() {
            if ((!ChatActivity.this.getMessagesController().isForum(ChatActivity.this.getDialogId()) || ChatActivity.this.isTopic) && ChatActivity.this.scheduledMessagesCount > 0) {
                if (ChatActivity.this.chatMode == 0) {
                    return true;
                }
                if (ChatActivity.this.chatMode == 3 && ChatActivity.this.getSavedDialogId() == ChatActivity.this.getUserConfig().getClientUserId()) {
                    return true;
                }
            }
            return false;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onSendLongClick() {
            if (ChatActivity.this.scheduledOrNoSoundHint != null) {
                ChatActivity.this.scheduledOrNoSoundHint.hide();
            }
            if (ChatActivity.this.scheduledHint != null) {
                ChatActivity.this.scheduledHint.hide();
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void openScheduledMessages() {
            ChatActivity.this.openScheduledMessages();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onAudioVideoInterfaceUpdated() {
            ChatActivity.this.updatePagedownButtonVisibility(true);
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void bottomPanelTranslationYChanged(float f) {
            if (f != 0.0f) {
                ChatActivity.this.wasManualScroll = true;
            }
            ChatActivity.this.invalidateChatListViewTopPadding();
            ChatActivity.this.invalidateMessagesVisiblePart();
            ChatActivity.this.updateTextureViewPosition(false, false);
            ChatActivity.this.contentView.invalidate();
            ChatActivity.this.updateBulletinLayout();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void prepareMessageSending() {
            ChatActivity.this.waitingForSendingMessageLoad = true;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onTrendingStickersShowed(boolean z) {
            if (z) {
                AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                ChatActivity.this.fragmentView.requestLayout();
            } else {
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
            }
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean hasForwardingMessages() {
            MessagePreviewParams.Messages messages;
            MessagePreviewParams messagePreviewParams = ChatActivity.this.messagePreviewParams;
            return (messagePreviewParams == null || (messages = messagePreviewParams.forwardMessages) == null || messages.messages.isEmpty()) ? false : true;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public void onKeyboardRequested() {
            ChatActivity.this.checkAdjustResize();
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public boolean onceVoiceAvailable() {
            TLRPC.User user = ChatActivity.this.currentUser;
            if (user == null || UserObject.isUserSelf(user)) {
                return false;
            }
            ChatActivity chatActivity = ChatActivity.this;
            return !chatActivity.currentUser.bot && chatActivity.currentEncryptedChat == null && chatActivity.chatMode == 0;
        }

        @Override // org.telegram.ui.Components.ChatActivityEnterView.ChatActivityEnterViewDelegate
        public ReplyQuote getReplyQuote() {
            return ChatActivity.this.replyingQuote;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$new$6() {
        ChatActivityEnterView chatActivityEnterView;
        View sendButton;
        if (getParentActivity() == null || this.fragmentView == null || (chatActivityEnterView = this.chatActivityEnterView) == null || (sendButton = chatActivityEnterView.getSendButton()) == null || this.chatActivityEnterView.getEditField() == null || this.chatActivityEnterView.getEditField().getText().length() < 5) {
            return;
        }
        SharedConfig.increaseScheduledOrNoSoundHintShowed();
        if (this.scheduledOrNoSoundHint == null) {
            HintView hintView = new HintView(getParentActivity(), 4, this.themeDelegate);
            this.scheduledOrNoSoundHint = hintView;
            hintView.createCloseButton();
            this.scheduledOrNoSoundHint.setAlpha(0.0f);
            this.scheduledOrNoSoundHint.setVisibility(4);
            this.scheduledOrNoSoundHint.setText(LocaleController.getString(C2369R.string.ScheduledOrNoSoundHint));
            this.contentView.addView(this.scheduledOrNoSoundHint, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
        }
        this.scheduledOrNoSoundHint.showForView(sendButton, true);
        this.scheduledOrNoSoundHintShown = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$new$7() {
        View sendButton;
        if (getParentActivity() == null || this.fragmentView == null || this.chatActivityEnterView == null || this.forwardingPreviewView != null || getMessagesController().getSendPaidMessagesStars(getDialogId()) > 0 || (sendButton = this.chatActivityEnterView.getSendButton()) == null || this.chatActivityEnterView.getEditField() == null || this.chatActivityEnterView.getEditField().getText().length() == 0) {
            return;
        }
        SharedConfig.increaseScheduledHintShowed();
        if (this.scheduledHint == null) {
            HintView hintView = new HintView(getParentActivity(), 4, this.themeDelegate);
            this.scheduledHint = hintView;
            hintView.createCloseButton();
            this.scheduledHint.setAlpha(0.0f);
            this.scheduledHint.setVisibility(4);
            this.scheduledHint.setText(LocaleController.getString(C2369R.string.ScheduledHint));
            this.contentView.addView(this.scheduledHint, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
        }
        this.scheduledHint.showForView(sendButton, true);
        this.scheduledHintShown = true;
    }

    public ChatActivity(Bundle bundle) {
        super(bundle);
        this.shareAlertDebugMode = 0;
        this.justCreatedTopic = false;
        this.justCreatedChat = false;
        this.chatMessageCellsCache = new LongSparseArray();
        this.alreadyPlayedStickers = new HashMap();
        this.windowInsetsStateHolder = new WindowInsetsStateHolder(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda37
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.checkInsets();
            }
        });
        ReferenceList referenceList = new ReferenceList();
        this.glassAttachedViews = referenceList;
        this.wallpaperBitmapProvider = new WallpaperBitmapProvider();
        this.actionModeViews = new ArrayList();
        this.pinnedMessageImageView = new BackupImageView[2];
        this.pinnedNameTextView = new TrackingWidthSimpleTextView[2];
        this.pinnedMessageTextView = new SimpleTextView[2];
        this.pinnedMessageButton = new PinnedMessageButton[2];
        this.pinnedNextAnimation = new AnimatorSet[2];
        this.pinnedMessageButtonShown = false;
        this.searchContainerHeight = 48;
        this.hideDateDelay = 500;
        this.businessLink = null;
        this.scheduledMessagesCount = -1;
        this.threadMessageVisible = true;
        this.pendingSendMessagesDict = new SparseArray();
        this.pendingSendMessages = new ArrayList();
        this.animatingMessageObjects = new ArrayList();
        this.animatingDocuments = new HashMap();
        this.scrollToPositionOnRecreate = -1;
        this.scrollToOffsetOnRecreate = 0;
        this.pollsToCheck = new ArrayList(10);
        this.pinnedMessageIds = new ArrayList();
        this.pinnedMessageObjects = new HashMap();
        this.loadingPinnedMessages = new SparseArray();
        this.currentPinnedMessageIndex = new int[1];
        this.dateObjectsStableIds = new SparseIntArray();
        this.conversionObjectsStableIds = new SparseIntArray();
        this.allowStickersPanel = true;
        this.allowContextBotPanelSecond = true;
        this.paused = true;
        this.firstOpen = true;
        this.clearingHistoryArr = new LongSparseIntArray();
        this.lastLoadIndex = 1;
        this.selectedMessagesIds = new SparseArrayWithTouch[]{new SparseArrayWithTouch(), new SparseArrayWithTouch()};
        this.selectedMessagesCanCopyIds = new SparseArray[]{new SparseArray(), new SparseArray()};
        this.selectedMessagesCanStarIds = new SparseArray[]{new SparseArray(), new SparseArray()};
        this.waitingForLoad = new ArrayList();
        this.needRemovePreviousSameChatActivity = true;
        this.prevSetUnreadCount = TLObject.FLAG_31;
        this.animateSendingViews = new ArrayList();
        this.messagesDict = new SparseArray[]{new SparseArray(), new SparseArray()};
        this.repliesMessagesDict = new SparseArray();
        this.replyMessageOwners = new SparseArray();
        this.messagesByDays = new HashMap();
        this.messagesByDaysSorted = new SparseArray();
        this.conversionMessages = new LongSparseArray();
        this.messages = new ArrayList();
        this.waitingForReplies = new SparseArray();
        this.polls = new LongSparseArray();
        this.groupedMessagesMap = new LongSparseArray();
        this.maxMessageId = new int[]{ConnectionsManager.DEFAULT_DATACENTER_ID, ConnectionsManager.DEFAULT_DATACENTER_ID};
        this.minMessageId = new int[]{TLObject.FLAG_31, TLObject.FLAG_31};
        this.maxDate = new int[]{TLObject.FLAG_31, TLObject.FLAG_31};
        this.minDate = new int[2];
        this.endReached = new boolean[2];
        this.cacheEndReached = new boolean[2];
        this.forwardEndReached = new boolean[]{true, true};
        this.loading = true;
        this.firstLoading = true;
        this.last_message_id = 0;
        this.messageSkeletons = new ArrayList();
        this.skeletonPaint = new Paint(1);
        this.skeletonServicePaint = new Paint(1);
        this.skeletonColorMatrix = new ColorMatrix();
        this.skeletonBackgroundCacheParams = new Theme.MessageDrawable.PathDrawParams();
        this.skeletonBackgroundDrawable = new Theme.MessageDrawable(0, false, false, new Theme.ResourcesProvider() { // from class: org.telegram.ui.ChatActivity.1
            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ void applyServiceShaderMatrix(int i, int i2, float f, float f2) {
                Theme.applyServiceShaderMatrix(i, i2, f, f2);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ ColorFilter getAnimatedEmojiColorFilter() {
                return Theme.chat_animatedEmojiTextColorFilter;
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ int getColorOrDefault(int i) {
                return getColor(i);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ int getCurrentColor(int i) {
                return getColor(i);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ Drawable getDrawable(String str) {
                return Theme.ResourcesProvider.CC.$default$getDrawable(this, str);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ Paint getPaint(String str) {
                return Theme.getThemePaint(str);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ boolean hasGradientService() {
                return Theme.ResourcesProvider.CC.$default$hasGradientService(this);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ boolean isDark() {
                return Theme.isCurrentThemeDark();
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public /* synthetic */ void setAnimatedColor(int i, int i2) {
                Theme.ResourcesProvider.CC.$default$setAnimatedColor(this, i, i2);
            }

            @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
            public int getColor(int i) {
                return ChatActivity.this.getThemedColor(i);
            }
        });
        this.skeletonMatrix = new Matrix();
        this.skeletonOutlinePaint = new Paint(1);
        this.skeletonOutlineMatrix = new Matrix();
        this.clearOnLoadAndScrollMessageId = -1;
        this.skeletonOutlinePaint.setStyle(Paint.Style.STROKE);
        this.skeletonOutlinePaint.setStrokeWidth(AndroidUtilities.m1146dp(1.0f));
        this.startLoadFromMessageOffset = ConnectionsManager.DEFAULT_DATACENTER_ID;
        this.startFromVideoTimestamp = -1;
        this.returnToMessageIdStack = new Stack();
        this.first = true;
        this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
        this.highlightMessageQuoteOffset = -1;
        this.scrollToMessagePosition = XCallback.PRIORITY_LOWEST;
        this.botInfo = new LongSparseArray();
        this.destroyTextureViewRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda39
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.destroyTextureView();
            }
        };
        this.actionBarBackgroundPaint = new Paint(1);
        this.scrimPaintAlpha = 0.0f;
        this.scrimViewAlpha = 1.0f;
        this.scrimViewProgress = 0.0f;
        this.popupAnimationIndex = -1;
        this.scrimPopupWindowHideDimOnDismiss = true;
        this.updateDeleteItemRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity.2
            @Override // java.lang.Runnable
            public void run() {
                String pluralString;
                if (ChatActivity.this.selectedObject == null || ChatActivity.this.menuDeleteItem == null) {
                    return;
                }
                int iMax = Math.max(0, ChatActivity.this.selectedObject.messageOwner.ttl_period - (ChatActivity.this.getConnectionsManager().getCurrentTime() - ChatActivity.this.selectedObject.messageOwner.date));
                if (iMax < 86400) {
                    pluralString = AndroidUtilities.formatDuration(iMax, false, true);
                } else {
                    pluralString = LocaleController.formatPluralString("Days", Math.round(iMax / 86400.0f), new Object[0]);
                }
                ChatActivity.this.menuDeleteItem.setSubtext(LocaleController.formatString(C2369R.string.AutoDeleteIn, pluralString));
                AndroidUtilities.runOnUIThread(ChatActivity.this.updateDeleteItemRunnable, 1000L);
            }
        };
        this.swipeBackEnabled = true;
        this.fragmentTransitionRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity.3
            /* JADX WARN: Type inference failed for: r0v3, types: [android.animation.AnimatorSet, java.lang.Object, java.lang.String, kotlin.jvm.internal.Intrinsics] */
            /* JADX WARN: Type inference failed for: r0v4, types: [void] */
            @Override // java.lang.Runnable
            public void run() {
                if (ChatActivity.this.fragmentTransition != null) {
                    ?? r0 = ChatActivity.this.fragmentTransition;
                    if (r0.checkNotNullParameter(r0, r0) == 0) {
                        ChatActivity.this.fragmentTransition.start();
                    }
                }
            }
        };
        this.chatMessagesMetadataController = new ChatMessagesMetadataController(this);
        this.hideFilteredMessages = true;
        this.client = new Client.Builder().build();
        this.postponedScrollCancelListener = new DialogInterface.OnCancelListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda40
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$new$0(dialogInterface);
            }
        };
        this.postponeNotificationsWhileLoadingCallback = new NotificationCenter.PostponeNotificationCallback() { // from class: org.telegram.ui.ChatActivity.4
            @Override // org.telegram.messenger.NotificationCenter.PostponeNotificationCallback
            public boolean needPostpone(int i, int i2, Object[] objArr) {
                if (i == NotificationCenter.didReceiveNewMessages) {
                    long jLongValue = ((Long) objArr[0]).longValue();
                    if (ChatActivity.this.firstLoading && jLongValue == ChatActivity.this.dialog_id) {
                        return true;
                    }
                }
                return false;
            }
        };
        this.fixedKeyboardHeight = -1;
        this.pulled = false;
        this.photoViewerProvider = new PhotoViewer.EmptyPhotoViewerProvider() { // from class: org.telegram.ui.ChatActivity.7
            @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
            public PhotoViewer.PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i, boolean z, boolean z2) {
                return ChatActivity.this.getPlaceForPhoto(messageObject, fileLocation, i, z, false);
            }
        };
        this.photoViewerPaidMediaProvider = new PhotoViewer.EmptyPhotoViewerProvider() { // from class: org.telegram.ui.ChatActivity.8
            @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
            public boolean forceAllInGroup() {
                return true;
            }

            @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
            public PhotoViewer.PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i, boolean z, boolean z2) {
                return ChatActivity.this.getPlaceForPhoto(messageObject, fileLocation, i, z, false);
            }
        };
        this.botContextProvider = new PhotoViewer.EmptyPhotoViewerProvider() { // from class: org.telegram.ui.ChatActivity.9
            /* JADX WARN: Removed duplicated region for block: B:18:0x0060  */
            @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
            /*
                Code decompiled incorrectly, please refer to instructions dump.
                To view partially-correct add '--show-bad-code' argument
            */
            public org.telegram.ui.PhotoViewer.PlaceProviderObject getPlaceForPhoto(org.telegram.messenger.MessageObject r4, org.telegram.tgnet.TLRPC.FileLocation r5, int r6, boolean r7, boolean r8) {
                /*
                    r3 = this;
                    r4 = 0
                    if (r6 < 0) goto L95
                    org.telegram.ui.ChatActivity r5 = org.telegram.p023ui.ChatActivity.this
                    java.util.ArrayList r5 = org.telegram.p023ui.ChatActivity.m6600$$Nest$fgetbotContextResults(r5)
                    int r5 = r5.size()
                    if (r6 >= r5) goto L95
                    org.telegram.ui.ChatActivity r5 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.Components.MentionsContainerView r5 = org.telegram.p023ui.ChatActivity.m6701$$Nest$fgetmentionContainer(r5)
                    if (r5 == 0) goto L95
                    org.telegram.ui.ChatActivity r5 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.Components.MentionsContainerView r5 = org.telegram.p023ui.ChatActivity.m6701$$Nest$fgetmentionContainer(r5)
                    org.telegram.ui.Components.MentionsContainerView$MentionsListView r5 = r5.getListView()
                    if (r5 != 0) goto L24
                    goto L95
                L24:
                    org.telegram.ui.ChatActivity r5 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.Components.MentionsContainerView r5 = org.telegram.p023ui.ChatActivity.m6701$$Nest$fgetmentionContainer(r5)
                    org.telegram.ui.Components.MentionsContainerView$MentionsListView r5 = r5.getListView()
                    int r5 = r5.getChildCount()
                    org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                    java.util.ArrayList r7 = org.telegram.p023ui.ChatActivity.m6600$$Nest$fgetbotContextResults(r7)
                    java.lang.Object r6 = r7.get(r6)
                    r7 = 0
                    r8 = 0
                L3e:
                    if (r8 >= r5) goto L95
                    org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.Components.MentionsContainerView r0 = org.telegram.p023ui.ChatActivity.m6701$$Nest$fgetmentionContainer(r0)
                    org.telegram.ui.Components.MentionsContainerView$MentionsListView r0 = r0.getListView()
                    android.view.View r0 = r0.getChildAt(r8)
                    boolean r1 = r0 instanceof org.telegram.p023ui.Cells.ContextLinkCell
                    if (r1 == 0) goto L60
                    r1 = r0
                    org.telegram.ui.Cells.ContextLinkCell r1 = (org.telegram.p023ui.Cells.ContextLinkCell) r1
                    org.telegram.tgnet.TLRPC$BotInlineResult r2 = r1.getResult()
                    if (r2 != r6) goto L60
                    org.telegram.messenger.ImageReceiver r1 = r1.getPhotoImage()
                    goto L61
                L60:
                    r1 = r4
                L61:
                    if (r1 == 0) goto L92
                    r4 = 2
                    int[] r4 = new int[r4]
                    r0.getLocationInWindow(r4)
                    org.telegram.ui.PhotoViewer$PlaceProviderObject r5 = new org.telegram.ui.PhotoViewer$PlaceProviderObject
                    r5.<init>()
                    r6 = r4[r7]
                    r5.viewX = r6
                    r6 = 1
                    r4 = r4[r6]
                    r5.viewY = r4
                    org.telegram.ui.ChatActivity r4 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.Components.MentionsContainerView r4 = org.telegram.p023ui.ChatActivity.m6701$$Nest$fgetmentionContainer(r4)
                    org.telegram.ui.Components.MentionsContainerView$MentionsListView r4 = r4.getListView()
                    r5.parentView = r4
                    r5.imageReceiver = r1
                    org.telegram.messenger.ImageReceiver$BitmapHolder r4 = r1.getBitmapSafe()
                    r5.thumb = r4
                    int[] r4 = r1.getRoundRadius(r6)
                    r5.radius = r4
                    return r5
                L92:
                    int r8 = r8 + 1
                    goto L3e
                L95:
                    return r4
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C31409.getPlaceForPhoto(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, int, boolean, boolean):org.telegram.ui.PhotoViewer$PlaceProviderObject");
            }

            @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
            public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, int i3, boolean z2) throws Resources.NotFoundException, NumberFormatException {
                if (i < 0 || i >= ChatActivity.this.botContextResults.size()) {
                    return;
                }
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.sendBotInlineResult((TLRPC.BotInlineResult) chatActivity.botContextResults.get(i), z, i2, 0L);
            }
        };
        this.onItemLongClickListener = new RecyclerListView.OnItemLongClickListenerExtended() { // from class: org.telegram.ui.ChatActivity.10
            @Override // org.telegram.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            public /* synthetic */ void onLongClickRelease() {
                RecyclerListView.OnItemLongClickListenerExtended.CC.$default$onLongClickRelease(this);
            }

            @Override // org.telegram.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            public /* synthetic */ void onMove(float f, float f2) {
                RecyclerListView.OnItemLongClickListenerExtended.CC.$default$onMove(this, f, f2);
            }

            /* JADX WARN: Removed duplicated region for block: B:26:0x0064  */
            @Override // org.telegram.ui.Components.RecyclerListView.OnItemLongClickListenerExtended
            /*
                Code decompiled incorrectly, please refer to instructions dump.
                To view partially-correct add '--show-bad-code' argument
            */
            public boolean onItemClick(android.view.View r12, int r13, float r14, float r15) {
                /*
                    r11 = this;
                    org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.ChatActivity$ChatActivityTextSelectionHelper r0 = org.telegram.p023ui.ChatActivity.m6848$$Nest$fgettextSelectionHelper(r0)
                    boolean r0 = r0.isTryingSelect()
                    r1 = 0
                    if (r0 != 0) goto Lbe
                    org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.ChatActivity$ChatActivityTextSelectionHelper r0 = org.telegram.p023ui.ChatActivity.m6848$$Nest$fgettextSelectionHelper(r0)
                    boolean r0 = r0.isInSelectionMode()
                    if (r0 != 0) goto Lbe
                    org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                    boolean r0 = org.telegram.p023ui.ChatActivity.access$000(r0)
                    if (r0 != 0) goto Lbe
                    org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                    boolean r2 = r0.isInsideContainer
                    if (r2 == 0) goto L29
                    goto Lbe
                L29:
                    r2 = 1
                    org.telegram.p023ui.ChatActivity.m7005$$Nest$fputwasManualScroll(r0, r2)
                    boolean r0 = r12 instanceof org.telegram.p023ui.Cells.ChatActionCell
                    if (r0 == 0) goto L64
                    r0 = r12
                    org.telegram.ui.Cells.ChatActionCell r0 = (org.telegram.p023ui.Cells.ChatActionCell) r0
                    org.telegram.messenger.MessageObject r3 = r0.getMessageObject()
                    if (r3 != 0) goto L3b
                    return r1
                L3b:
                    org.telegram.tgnet.TLRPC$Message r3 = r3.messageOwner
                    org.telegram.tgnet.TLRPC$MessageAction r3 = r3.action
                    boolean r3 = r3 instanceof org.telegram.tgnet.TLRPC.TL_messageActionSetMessagesTTL
                    if (r3 != 0) goto L64
                    org.telegram.messenger.MessageObject r3 = r0.getMessageObject()
                    int r3 = r3.type
                    r4 = 21
                    if (r3 == r4) goto L64
                    org.telegram.messenger.MessageObject r3 = r0.getMessageObject()
                    boolean r3 = r3.isWallpaperAction()
                    if (r3 != 0) goto L64
                    org.telegram.messenger.MessageObject r0 = r0.getMessageObject()
                    int r0 = r0.type
                    r3 = 30
                    if (r0 != r3) goto L62
                    goto L64
                L62:
                    r0 = 0
                    goto L65
                L64:
                    r0 = 1
                L65:
                    org.telegram.ui.ChatActivity r3 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.ui.ActionBar.ActionBar r3 = org.telegram.p023ui.ChatActivity.access$100(r3)
                    boolean r3 = r3.isActionModeShowed()
                    if (r3 != 0) goto L7c
                    org.telegram.ui.ChatActivity r3 = org.telegram.p023ui.ChatActivity.this
                    boolean r3 = r3.isReport()
                    if (r3 == 0) goto L80
                    if (r0 == 0) goto L7c
                    goto L80
                L7c:
                    r5 = r12
                    r8 = r14
                    r9 = r15
                    goto L8d
                L80:
                    org.telegram.ui.ChatActivity r4 = org.telegram.p023ui.ChatActivity.this
                    r7 = 1
                    r10 = 1
                    r6 = 0
                    r5 = r12
                    r8 = r14
                    r9 = r15
                    boolean r12 = org.telegram.p023ui.ChatActivity.m7028$$Nest$mcreateMenu(r4, r5, r6, r7, r8, r9, r10)
                    goto La0
                L8d:
                    boolean r12 = r5 instanceof org.telegram.p023ui.Cells.ChatMessageCell
                    if (r12 == 0) goto L9a
                    r12 = r5
                    org.telegram.ui.Cells.ChatMessageCell r12 = (org.telegram.p023ui.Cells.ChatMessageCell) r12
                    boolean r12 = r12.isInsideBackground(r8, r9)
                    r1 = r12 ^ 1
                L9a:
                    org.telegram.ui.ChatActivity r12 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.p023ui.ChatActivity.m7080$$Nest$mprocessRowSelect(r12, r5, r1, r8, r9)
                    r12 = 1
                La0:
                    boolean r14 = r5 instanceof org.telegram.p023ui.Cells.ChatMessageCell
                    if (r14 == 0) goto Lbd
                    r14 = r5
                    org.telegram.ui.Cells.ChatMessageCell r14 = (org.telegram.p023ui.Cells.ChatMessageCell) r14
                    org.telegram.messenger.MessageObject r15 = r14.getMessageObject()
                    if (r15 == 0) goto Lbd
                    org.telegram.messenger.MessageObject r14 = r14.getMessageObject()
                    int r14 = r14.type
                    r15 = 27
                    if (r14 == r15) goto Lbd
                    org.telegram.ui.ChatActivity r12 = org.telegram.p023ui.ChatActivity.this
                    org.telegram.p023ui.ChatActivity.m7114$$Nest$mstartMultiselect(r12, r13)
                    return r2
                Lbd:
                    return r12
                Lbe:
                    return r1
                */
                throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C305210.onItemClick(android.view.View, int, float, float):boolean");
            }
        };
        this.onItemClickListener = new C305612();
        this.chatScrollHelperCallback = new ChatScrollCallback();
        this.showScheduledOrNoSoundRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda41
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$new$6();
            }
        };
        this.showScheduledHintRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda42
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$new$7();
            }
        };
        this.filledEditTextItemMenu = false;
        this.checkTranslationRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda43
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$new$196();
            }
        };
        this.botDraftAnimationsPool = new BotForumHelper.BotDraftAnimationsPool();
        this.preventReopenSearchWithText = false;
        CubicBezierInterpolator cubicBezierInterpolator = CubicBezierInterpolator.EASE_OUT_QUINT;
        this.animatorPullingDownContainerVisibility = new BoolAnimator(0, this, cubicBezierInterpolator, 320L);
        this.animatorRoundMessageCameraVisibility = new BoolAnimator(1, this, cubicBezierInterpolator, 320L);
        this.bottomViewsVisibilityController = new ChatActivityBottomViewsVisibilityController(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda44
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.onBottomItemsVisibilityChanged();
            }
        });
        this.glassDrawablesPositions = new ArrayList();
        this.glassDrawablesPositionsMerged = new ArrayList();
        this.clipBoundsTmp = new Rect();
        BlurredBackgroundSourceWrapped blurredBackgroundSourceWrapped = new BlurredBackgroundSourceWrapped();
        this.navbarContentSourceWallpaper = blurredBackgroundSourceWrapped;
        if (Build.VERSION.SDK_INT >= 31 && SharedConfig.chatBlurEnabled()) {
            this.scrollableViewNoiseSuppressor = new DownscaleScrollableNoiseSuppressor();
            this.recommendedAdditionalSizeY = AndroidUtilities.m1146dp(48.0f);
            BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode = new BlurredBackgroundSourceRenderNode(blurredBackgroundSourceWrapped);
            this.glassBackgroundSourceFrostedRenderNode = blurredBackgroundSourceRenderNode;
            blurredBackgroundSourceRenderNode.setOnDrawablesRelativePositionChangeListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda38
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.invalidateMergedVisibleBlurredPositionsAndSourcesPositions();
                }
            });
            BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode2 = new BlurredBackgroundSourceRenderNode(null);
            this.navbarContentSourceMessages = blurredBackgroundSourceRenderNode2;
            blurredBackgroundSourceRenderNode2.setOnDrawablesRelativePositionChangeListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda38
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.invalidateMergedVisibleBlurredPositionsAndSourcesPositions();
                }
            });
            this.navbarContentSourceMessagesDrawable = blurredBackgroundSourceRenderNode2.createDrawable();
            BlurredBackgroundDrawableViewFactory blurredBackgroundDrawableViewFactory = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceRenderNode);
            this.glassBackgroundDrawableFactoryFrosted = blurredBackgroundDrawableViewFactory;
            blurredBackgroundDrawableViewFactory.setLiquidGlassEffectAllowed(LiteMode.isEnabled(262144));
            if (LiteMode.isEnabled(262144)) {
                BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode3 = new BlurredBackgroundSourceRenderNode(blurredBackgroundSourceWrapped);
                this.glassBackgroundSourceRenderNode = blurredBackgroundSourceRenderNode3;
                blurredBackgroundSourceRenderNode3.setOnDrawablesRelativePositionChangeListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda38
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.invalidateMergedVisibleBlurredPositionsAndSourcesPositions();
                    }
                });
                BlurredBackgroundDrawableViewFactory blurredBackgroundDrawableViewFactory2 = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceRenderNode3);
                this.glassBackgroundDrawableFactory = blurredBackgroundDrawableViewFactory2;
                blurredBackgroundDrawableViewFactory2.setLiquidGlassEffectAllowed(LiteMode.isEnabled(262144));
                this.navbarContentSourceWallpaperAndMessagesRenderNode = null;
                this.navbarContentDrawableFactory = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceWrapped);
            } else {
                this.glassBackgroundSourceRenderNode = null;
                this.glassBackgroundDrawableFactory = blurredBackgroundDrawableViewFactory;
                BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode4 = new BlurredBackgroundSourceRenderNode(null);
                this.navbarContentSourceWallpaperAndMessagesRenderNode = blurredBackgroundSourceRenderNode4;
                blurredBackgroundSourceRenderNode4.setOnDrawablesRelativePositionChangeListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda38
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.invalidateMergedVisibleBlurredPositionsAndSourcesPositions();
                    }
                });
                this.navbarContentDrawableFactory = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceRenderNode4);
            }
        } else {
            this.scrollableViewNoiseSuppressor = null;
            this.recommendedAdditionalSizeY = 0;
            this.glassBackgroundSourceRenderNode = null;
            this.glassBackgroundSourceFrostedRenderNode = null;
            this.navbarContentSourceMessages = null;
            this.navbarContentSourceMessagesDrawable = null;
            this.navbarContentSourceWallpaperAndMessagesRenderNode = null;
            this.glassBackgroundDrawableFactory = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceWrapped);
            this.glassBackgroundDrawableFactoryFrosted = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceWrapped);
            this.navbarContentDrawableFactory = new BlurredBackgroundDrawableViewFactory(blurredBackgroundSourceWrapped);
        }
        this.navbarContentDrawableFactory.setLinkedViewsRef(referenceList);
        this.glassBackgroundDrawableFactory.setLinkedViewsRef(referenceList);
        this.glassBackgroundDrawableFactoryFrosted.setLinkedViewsRef(referenceList);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$8(MessagesStorage messagesStorage, long j, CountDownLatch countDownLatch) {
        this.currentChat = messagesStorage.getChat(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$9(Boolean bool) {
        boolean zBooleanValue = bool.booleanValue();
        this.waitingForGetDifference = zBooleanValue;
        if (zBooleanValue) {
            return;
        }
        firstLoadMessages();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$10(MessagesStorage messagesStorage, long j, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(j);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$11(MessagesStorage messagesStorage, int i, CountDownLatch countDownLatch) {
        this.currentEncryptedChat = messagesStorage.getEncryptedChat(i);
        countDownLatch.countDown();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$12(MessagesStorage messagesStorage, CountDownLatch countDownLatch) {
        this.currentUser = messagesStorage.getUser(this.currentEncryptedChat.user_id);
        countDownLatch.countDown();
    }

    /* JADX WARN: Removed duplicated region for block: B:192:0x09cb  */
    /* JADX WARN: Removed duplicated region for block: B:218:0x0a69  */
    /* JADX WARN: Removed duplicated region for block: B:230:0x0a8c  */
    /* JADX WARN: Removed duplicated region for block: B:237:0x0aaf  */
    /* JADX WARN: Removed duplicated region for block: B:244:0x0ac1  */
    /* JADX WARN: Removed duplicated region for block: B:252:0x0ad3  */
    /* JADX WARN: Removed duplicated region for block: B:255:0x0ada  */
    /* JADX WARN: Removed duplicated region for block: B:309:0x0bec  */
    /* JADX WARN: Removed duplicated region for block: B:312:0x0bfa  */
    /* JADX WARN: Removed duplicated region for block: B:315:0x0c07  */
    /* JADX WARN: Removed duplicated region for block: B:322:0x0c2f  */
    /* JADX WARN: Removed duplicated region for block: B:329:0x0c50  */
    /* JADX WARN: Removed duplicated region for block: B:332:0x0c66  */
    /* JADX WARN: Removed duplicated region for block: B:335:0x0c77  */
    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public boolean onFragmentCreate() throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 3211
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.onFragmentCreate():boolean");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$13(long j) {
        getMediaDataController().loadBotInfo(j, j, true, this.classGuid);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$16() {
        this.chatInviteRunnable = null;
        if (getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        if (ChatObject.isChannel(this.currentChat) && !this.currentChat.megagroup) {
            builder.setMessage(LocaleController.getString(C2369R.string.JoinByPeekChannelText));
            builder.setTitle(LocaleController.getString(C2369R.string.JoinByPeekChannelTitle));
        } else {
            builder.setMessage(LocaleController.getString(C2369R.string.JoinByPeekGroupText));
            builder.setTitle(LocaleController.getString(C2369R.string.JoinByPeekGroupTitle));
        }
        builder.setPositiveButton(LocaleController.getString(C2369R.string.JoinByPeekJoin), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda191
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) {
                this.f$0.lambda$onFragmentCreate$14(alertDialog, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda192
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) {
                this.f$0.lambda$onFragmentCreate$15(alertDialog, i);
            }
        });
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$14(AlertDialog alertDialog, int i) {
        UnreadCounterTextView unreadCounterTextView = this.bottomOverlayChatText;
        if (unreadCounterTextView != null) {
            unreadCounterTextView.callOnClick();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onFragmentCreate$15(AlertDialog alertDialog, int i) {
        lambda$onBackPressed$371();
    }

    protected void updateSearchingHashtag(String str) {
        if (this.chatMode == 7 && !TextUtils.equals(this.searchingHashtag, str)) {
            showMessagesSearchListView(true);
            this.searchingHashtag = str;
            this.searchingQuery = str;
            checkHashtagStories(false);
            clearChatData(true);
            this.startMessageAppearTransitionMs = 0L;
            this.firstMessagesLoaded = false;
            HashtagSearchController.getInstance(this.currentAccount).clearSearchResults(this.searchType);
            this.messagesSearchAdapter.notifyDataSetChanged();
            this.messagesSearchListView.requestLayout();
            if (this.messagesSearchListView.getLayoutManager() != null) {
                this.messagesSearchListView.getLayoutManager().scrollToPosition(0);
            }
            updateSearchListEmptyView();
            this.hashtagSearchEmptyView.showProgress(true);
            firstLoadMessages();
        }
    }

    public void resetForReload() {
        getConnectionsManager().cancelRequestsForGuid(this.classGuid);
        getMessagesStorage().cancelTasksForGuid(this.classGuid);
        AyuHistoryHook.removeInstance(this);
        this.classGuid = ConnectionsManager.generateClassGuid();
        AyuHistoryHook.setInstance(this);
        this.startLoadFromMessageId = 0;
        this.firstMessagesLoaded = false;
        this.clearOnLoad = true;
        this.waitingForLoad.clear();
    }

    public void savePositionForTopicChange(long j) {
        GridLayoutManagerFixed gridLayoutManagerFixed;
        MessageObject messageObject;
        int scrollingOffsetForView;
        int iAbs;
        int id = -1;
        if (this.chatListView == null || (gridLayoutManagerFixed = this.chatLayoutManager) == null || gridLayoutManagerFixed.hasPendingScrollPosition()) {
            this.clearOnLoadAndScrollMessageId = -1;
            return;
        }
        int i = 0;
        int i2 = ConnectionsManager.DEFAULT_DATACENTER_ID;
        for (int childCount = this.chatListView.getChildCount() - 1; childCount >= 0; childCount--) {
            View childAt = this.chatListView.getChildAt(childCount);
            if (this.chatListView.getChildAdapterPosition(childAt) >= 0 && (childAt instanceof ChatMessageCell) && (messageObject = ((ChatMessageCell) childAt).getMessageObject()) != null && messageObject.getTopicId() == j && (iAbs = Math.abs((scrollingOffsetForView = getScrollingOffsetForView(childAt)))) < i2) {
                id = messageObject.getId();
                i = scrollingOffsetForView;
                i2 = iAbs;
            }
        }
        this.clearOnLoadAndScrollMessageId = id;
        this.clearOnLoadAndScrollOffset = i;
    }

    public void firstLoadMessages() {
        if (this.firstMessagesLoaded) {
            return;
        }
        this.firstMessagesLoaded = true;
        getMessagesController().checkSensitive(this, this.dialog_id, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda184
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$firstLoadMessages$17();
            }
        }, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda185
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onBackPressed$371();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$firstLoadMessages$17() {
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        if (this.chatMode == 7) {
            HashtagSearchController hashtagSearchController = HashtagSearchController.getInstance(this.currentAccount);
            String str = this.searchingHashtag;
            int i = this.classGuid;
            int i2 = this.searchType;
            int i3 = this.lastLoadIndex;
            this.lastLoadIndex = i3 + 1;
            hashtagSearchController.searchHashtag(str, i, i2, i3);
        } else if (this.startLoadFromDate != 0) {
            MessagesController messagesController = getMessagesController();
            long j = this.dialog_id;
            long j2 = this.mergeDialogId;
            int i4 = this.startLoadFromDate;
            int i5 = this.classGuid;
            int i6 = this.chatMode;
            long j3 = this.threadMessageId;
            int i7 = this.replyMaxReadId;
            int i8 = this.lastLoadIndex;
            this.lastLoadIndex = i8 + 1;
            messagesController.loadMessages(j, j2, false, 30, 0, i4, true, 0, i5, 4, 0, i6, j3, i7, i8, this.isTopic);
        } else if (this.startLoadFromMessageId != 0 && (!isThreadChat() || this.startLoadFromMessageId == this.highlightMessageId || this.isTopic)) {
            this.startLoadFromMessageIdSaved = this.startLoadFromMessageId;
            int i9 = this.migrated_to;
            if (i9 != 0) {
                this.mergeDialogId = i9;
                MessagesController messagesController2 = getMessagesController();
                long j4 = this.mergeDialogId;
                boolean z = this.loadInfo;
                int i10 = this.initialMessagesSize;
                int i11 = this.startLoadFromMessageId;
                int i12 = this.classGuid;
                int i13 = this.chatMode;
                long j5 = this.threadMessageId;
                int i14 = this.replyMaxReadId;
                int i15 = this.lastLoadIndex;
                this.lastLoadIndex = i15 + 1;
                messagesController2.loadMessages(j4, 0L, z, i10, i11, 0, true, 0, i12, 3, 0, i13, j5, i14, i15, this.isTopic);
            } else {
                MessagesController messagesController3 = getMessagesController();
                long j6 = this.dialog_id;
                long j7 = this.mergeDialogId;
                boolean z2 = this.loadInfo;
                int i16 = this.initialMessagesSize;
                int i17 = this.startLoadFromMessageId;
                int i18 = this.classGuid;
                int i19 = this.chatMode;
                long j8 = this.threadMessageId;
                int i20 = this.replyMaxReadId;
                int i21 = this.lastLoadIndex;
                this.lastLoadIndex = i21 + 1;
                messagesController3.loadMessages(j6, j7, z2, i16, i17, 0, true, 0, i18, 3, 0, i19, j8, i20, i21, this.isTopic);
            }
        } else if (this.historyPreloaded) {
            this.lastLoadIndex++;
        } else {
            MessagesController messagesController4 = getMessagesController();
            long j9 = this.dialog_id;
            long j10 = this.mergeDialogId;
            boolean z3 = this.loadInfo;
            int i22 = this.initialMessagesSize;
            int i23 = this.startLoadFromMessageId;
            int i24 = this.classGuid;
            int i25 = this.chatMode;
            long j11 = this.threadMessageId;
            int i26 = this.replyMaxReadId;
            int i27 = this.lastLoadIndex;
            this.lastLoadIndex = i27 + 1;
            messagesController4.loadMessages(j9, j10, z3, i22, i23, 0, true, 0, i24, 2, 0, i25, j11, i26, i27, this.isTopic);
        }
        int i28 = this.chatMode;
        if (i28 == 0 || (i28 == 3 && getSavedDialogId() == getUserConfig().getClientUserId())) {
            if (!isThreadChat() || this.isTopic) {
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                MessagesController messagesController5 = getMessagesController();
                long j12 = this.dialog_id;
                long j13 = this.mergeDialogId;
                int i29 = this.classGuid;
                long j14 = this.chatMode == 3 ? 0L : this.threadMessageId;
                int i30 = this.replyMaxReadId;
                int i31 = this.lastLoadIndex;
                this.lastLoadIndex = i31 + 1;
                messagesController5.loadMessages(j12, j13, false, 1, 0, 0, true, 0, i29, 2, 0, 1, j14, i30, i31, this.isTopic);
            }
        }
    }

    private void fillInviterId(boolean z) {
        TLRPC.Chat chat = this.currentChat;
        if (chat == null || this.chatInfo == null || ChatObject.isNotInChat(chat) || this.currentChat.creator) {
            return;
        }
        TLRPC.ChatFull chatFull = this.chatInfo;
        long j = chatFull.inviterId;
        if (j != 0) {
            this.chatInviterId = j;
            return;
        }
        TLRPC.ChatParticipants chatParticipants = chatFull.participants;
        if (chatParticipants != null) {
            TLRPC.ChatParticipant chatParticipant = chatParticipants.self_participant;
            if (chatParticipant != null) {
                this.chatInviterId = chatParticipant.inviter_id;
                return;
            }
            long clientUserId = getUserConfig().getClientUserId();
            int size = this.chatInfo.participants.participants.size();
            for (int i = 0; i < size; i++) {
                TLRPC.ChatParticipant chatParticipant2 = (TLRPC.ChatParticipant) this.chatInfo.participants.participants.get(i);
                if (chatParticipant2.user_id == clientUserId) {
                    this.chatInviterId = chatParticipant2.inviter_id;
                    return;
                }
            }
        }
        if (z && this.chatInviterId == 0) {
            getMessagesController().checkChatInviter(this.currentChat.f1571id, false);
        }
    }

    private void hideUndoViews() {
        UndoView undoView = this.undoView;
        if (undoView != null) {
            undoView.hide(true, 0);
        }
        Bulletin bulletin = this.pinBulletin;
        if (bulletin != null) {
            bulletin.hide(false, 0L);
        }
        UndoView undoView2 = this.topUndoView;
        if (undoView2 != null) {
            undoView2.hide(true, 0);
        }
    }

    public int getOtherSameChatsDiff() {
        INavigationLayout iNavigationLayout = this.parentLayout;
        int i = 0;
        if (iNavigationLayout == null || iNavigationLayout.getFragmentStack() == null) {
            return 0;
        }
        int iIndexOf = this.parentLayout.getFragmentStack().indexOf(this);
        if (iIndexOf == -1) {
            iIndexOf = this.parentLayout.getFragmentStack().size();
        }
        while (true) {
            if (i >= this.parentLayout.getFragmentStack().size()) {
                i = iIndexOf;
                break;
            }
            BaseFragment baseFragment = (BaseFragment) this.parentLayout.getFragmentStack().get(i);
            if (baseFragment != this && (baseFragment instanceof ChatActivity) && ((ChatActivity) baseFragment).dialog_id == this.dialog_id) {
                break;
            }
            i++;
        }
        return i - iIndexOf;
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onBeginSlide() {
        super.onBeginSlide();
        ChatSelectionReactionMenuOverlay chatSelectionReactionMenuOverlay = this.selectionReactionsOverlay;
        if (chatSelectionReactionMenuOverlay == null || !chatSelectionReactionMenuOverlay.isVisible()) {
            return;
        }
        this.selectionReactionsOverlay.setHiddenByScroll(true);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onFragmentDestroy() {
        super.onFragmentDestroy();
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.onDestroy();
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.onDestroy();
        }
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null && mentionsContainerView.getAdapter() != null) {
            this.mentionContainer.getAdapter().onDestroy();
        }
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.dismissInternal();
        }
        ContentPreviewViewer.getInstance().clearDelegate(this.contentPreviewViewerDelegate);
        getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
        NotificationCenter.getGlobalInstance().onAnimationFinish(this.transitionAnimationGlobalIndex);
        getNotificationCenter().onAnimationFinish(this.scrollAnimationIndex);
        getNotificationCenter().onAnimationFinish(this.scrollCallbackAnimationIndex);
        hideUndoViews();
        Runnable runnable = this.chatInviteRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
            this.chatInviteRunnable = null;
        }
        getNotificationCenter().removePostponeNotificationsCallback(this.postponeNotificationsWhileLoadingCallback);
        getMessagesController().setLastCreatedDialogId(this.dialog_id, this.chatMode == 1, false);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.loadingMessagesFailed);
        getNotificationCenter().removeObserver(this, NotificationCenter.premiumFloodWaitReceived);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.emojiLoaded);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.invalidateMotionBackground);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateConnectionState);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateInterfaces);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateDefaultSendAsPeer);
        getNotificationCenter().removeObserver(this, NotificationCenter.userIsPremiumBlockedUpadted);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceiveNewMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.closeChats);
        getNotificationCenter().removeObserver(this, NotificationCenter.closeChatActivity);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.threadMessagesRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.monoForumMessagesRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.commentsRead);
        getNotificationCenter().removeObserver(this, NotificationCenter.changeRepliesCounter);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesDeleted);
        getNotificationCenter().removeObserver(this, NotificationCenter.historyCleared);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageReceivedByServer);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageReceivedByAck);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageSendError);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.groupRestrictionsUnlockedByBoosts);
        getNotificationCenter().removeObserver(this, NotificationCenter.customStickerCreated);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadChatInviter);
        getNotificationCenter().removeObserver(this, NotificationCenter.groupCallUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.encryptedChatUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesReadEncrypted);
        getNotificationCenter().removeObserver(this, NotificationCenter.removeAllMessagesFromDialog);
        getNotificationCenter().removeObserver(this, NotificationCenter.contactsDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingProgressDidChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingDidReset);
        getNotificationCenter().removeObserver(this, NotificationCenter.screenshotTook);
        getNotificationCenter().removeObserver(this, NotificationCenter.blockedUsersDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.fileNewChunkAvailable);
        getNotificationCenter().removeObserver(this, NotificationCenter.didCreatedNewDeleteTask);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingDidStart);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingGoingToStop);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateMessageMedia);
        getNotificationCenter().removeObserver(this, NotificationCenter.voiceTranscriptionUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.animatedEmojiDocumentLoaded);
        getNotificationCenter().removeObserver(this, NotificationCenter.replaceMessagesObjects);
        getNotificationCenter().removeObserver(this, NotificationCenter.notificationsSettingsUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.replyMessagesDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceivedWebpages);
        getNotificationCenter().removeObserver(this, NotificationCenter.didReceivedWebpagesInUpdates);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesReadContent);
        getNotificationCenter().removeObserver(this, NotificationCenter.botInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.botKeyboardDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatSearchResultsAvailable);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatSearchResultsLoading);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagePlayingPlayStateChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateMessagesViews);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatInfoCantLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadPinnedMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.peerSettingsDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.newDraftReceived);
        getNotificationCenter().removeObserver(this, NotificationCenter.userInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.pinnedInfoDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.topicsDidLoaded);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatWasBoostedByUser);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.didSetNewWallpapper);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.didApplyNewTheme);
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.goingToPreviewTheme);
        getNotificationCenter().removeObserver(this, NotificationCenter.channelRightsUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateMentionsCount);
        getNotificationCenter().removeObserver(this, NotificationCenter.audioRecordTooShort);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdatePollResults);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateReactions);
        getNotificationCenter().removeObserver(this, NotificationCenter.savedReactionTagsUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateAllMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.didUpdateExtendedMedia);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatOnlineCountDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.videoLoadingStateChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.scheduledMessagesUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.diceStickersDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.dialogDeleted);
        getNotificationCenter().removeObserver(this, NotificationCenter.chatAvailableReactionsUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadSponsoredMessages);
        getNotificationCenter().removeObserver(this, NotificationCenter.didLoadSendAsPeers);
        getNotificationCenter().removeObserver(this, NotificationCenter.dialogsUnreadReactionsCounterChanged);
        getNotificationCenter().removeObserver(this, NotificationCenter.groupStickersDidLoad);
        getNotificationCenter().removeObserver(this, NotificationCenter.dialogTranslate);
        getNotificationCenter().removeObserver(this, NotificationCenter.dialogIsTranslatable);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageTranslated);
        getNotificationCenter().removeObserver(this, NotificationCenter.messageTranslating);
        getNotificationCenter().removeObserver(this, NotificationCenter.onReceivedChannelDifference);
        getNotificationCenter().removeObserver(this, NotificationCenter.storiesUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.channelRecommendationsLoaded);
        getNotificationCenter().removeObserver(this, NotificationCenter.updateTranscriptionLock);
        getNotificationCenter().removeObserver(this, NotificationCenter.savedMessagesDialogsUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.quickRepliesDeleted);
        getNotificationCenter().removeObserver(this, NotificationCenter.quickRepliesUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.availableEffectsUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.starReactionAnonymousUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.factCheckLoaded);
        getNotificationCenter().removeObserver(this, NotificationCenter.messagesFeeUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.starBalanceUpdated);
        getNotificationCenter().removeObserver(this, NotificationCenter.botForumTopicDidCreate);
        getNotificationCenter().removeObserver(this, NotificationCenter.botForumDraftUpdate);
        getNotificationCenter().removeObserver(this, NotificationCenter.botForumDraftDelete);
        if (this.chatMode == 6) {
            getNotificationCenter().removeObserver(this, NotificationCenter.businessLinksUpdated);
        }
        if (this.chatMode == 7) {
            getNotificationCenter().removeObserver(this, NotificationCenter.hashtagSearchUpdated);
        }
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.pluginMenuItemsUpdated);
        SearchTagsList searchTagsList = this.actionBarSearchTags;
        if (searchTagsList != null) {
            searchTagsList.detach();
        }
        getNotificationCenter().removeObserver(this, AyuConstants.MESSAGES_DELETED_NOTIFICATION);
        getNotificationCenter().removeObserver(this, AyuConstants.HISTORY_FLUSHED_NOTIFICATION);
        getNotificationCenter().removeObserver(this, AyuConstants.FIX_SCHEDULED_BAR);
        getNotificationCenter().removeObserver(this, AyuConstants.UPDATE_CHAT_RESTRICTION);
        getNotificationCenter().removeObserver(this, AyuConstants.FIX_FORWARD);
        getNotificationCenter().removeObserver(this, AyuConstants.FORCE_MESSAGES_UPDATE);
        if (this.currentEncryptedChat != null) {
            getNotificationCenter().removeObserver(this, NotificationCenter.didVerifyMessagesStickers);
        }
        NotificationCenter.getGlobalInstance().removeObserver(this, NotificationCenter.needSetDayNightTheme);
        if (this.chatMode == 0 && AndroidUtilities.isTablet()) {
            getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.openedChatChanged, Long.valueOf(this.dialog_id), Long.valueOf(getTopicId()), Boolean.TRUE);
        }
        if (this.currentUser != null) {
            MediaController.getInstance().stopMediaObserver();
        }
        FlagSecureReason flagSecureReason = this.flagSecure;
        if (flagSecureReason != null) {
            flagSecureReason.detach();
        }
        if (this.currentUser != null) {
            getMessagesController().cancelLoadFullUser(this.currentUser.f1734id);
        }
        AndroidUtilities.removeAdjustResize(getParentActivity(), this.classGuid);
        ChatAttachAlert chatAttachAlert2 = this.chatAttachAlert;
        if (chatAttachAlert2 != null) {
            chatAttachAlert2.onDestroy();
        }
        AndroidUtilities.unlockOrientation(getParentActivity());
        if (ChatObject.isChannel(this.currentChat)) {
            getMessagesController().startShortPoll(this.currentChat, this.classGuid, true);
            TLRPC.ChatFull chatFull = this.chatInfo;
            if (chatFull != null && chatFull.linked_chat_id != 0) {
                getMessagesController().startShortPoll(getMessagesController().getChat(Long.valueOf(this.chatInfo.linked_chat_id)), this.classGuid, true);
            }
        }
        ChatActivityTextSelectionHelper chatActivityTextSelectionHelper = this.textSelectionHelper;
        if (chatActivityTextSelectionHelper != null) {
            chatActivityTextSelectionHelper.clear();
        }
        ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
        if (chatListItemAnimator != null) {
            chatListItemAnimator.onDestroy();
        }
        PinchToZoomHelper pinchToZoomHelper = this.pinchToZoomHelper;
        if (pinchToZoomHelper != null) {
            pinchToZoomHelper.clear();
        }
        this.chatThemeBottomSheet = null;
        INavigationLayout parentLayout = getParentLayout();
        if (parentLayout != null && parentLayout.getFragmentStack() != null) {
            BackButtonMenu.clearPulledDialogs(this, parentLayout.getFragmentStack().indexOf(this) - (!replacingChatActivity ? 1 : 0));
        }
        replacingChatActivity = false;
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel();
            this.progressDialogCurrent = null;
        }
        this.chatMessagesMetadataController.onFragmentDestroy();
        ProfileBirthdayEffect.BirthdayEffectFetcher birthdayEffectFetcher = this.birthdayAssetsFetcher;
        if (birthdayEffectFetcher != null) {
            birthdayEffectFetcher.detach(true);
            this.birthdayAssetsFetcher = null;
        }
        StarReactionsOverlay starReactionsOverlay = this.starReactionsOverlay;
        if (starReactionsOverlay != null) {
            starReactionsOverlay.setMessageCell(null);
            AndroidUtilities.removeFromParent(this.starReactionsOverlay);
            this.starReactionsOverlay = null;
        }
        AyuHistoryHook.removeInstance(this);
        this.ayugramItem = null;
        this.actionsPopupWrapper = null;
    }

    private static class ChatActivityTextSelectionHelper extends TextSelectionHelper.ChatListTextSelectionHelper {
        ChatActivity chatActivity;

        private ChatActivityTextSelectionHelper() {
        }

        public void setChatActivity(ChatActivity chatActivity) {
            cancelAllAnimators();
            clear();
            this.textSelectionOverlay = null;
            this.chatActivity = chatActivity;
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        public int getParentTopPadding() {
            ChatActivity chatActivity = this.chatActivity;
            if (chatActivity == null) {
                return 0;
            }
            return (int) chatActivity.chatListViewPaddingTop;
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        public int getParentBottomPadding() {
            ChatActivity chatActivity = this.chatActivity;
            if (chatActivity == null) {
                return 0;
            }
            return chatActivity.blurredViewBottomOffset;
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        protected int getThemedColor(int i) {
            return Theme.getColor(i, this.chatActivity.themeDelegate);
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        protected Theme.ResourcesProvider getResourcesProvider() {
            ChatActivity chatActivity = this.chatActivity;
            if (chatActivity != null) {
                return chatActivity.themeDelegate;
            }
            return null;
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        protected boolean canShowQuote() {
            TextSelectionHelper.SelectableView selectableView;
            ChatActivity chatActivity;
            TextSelectionHelper.SelectableView selectableView2;
            ChatActivityEnterView chatActivityEnterView;
            ChatActivity chatActivity2 = this.chatActivity;
            if (chatActivity2 != null && chatActivity2.getDialogId() == UserObject.VERIFY) {
                return false;
            }
            ChatActivity chatActivity3 = this.chatActivity;
            return !this.isFactCheck && (chatActivity = this.chatActivity) != null && chatActivity.getCurrentEncryptedChat() == null && ((selectableView2 = this.selectedView) == null || !((((ChatMessageCell) selectableView2).getMessageObject().isVoiceTranscriptionOpen() && ((chatActivityEnterView = this.chatActivity.chatActivityEnterView) == null || chatActivityEnterView.getVisibility() != 0)) || ((ChatMessageCell) this.selectedView).getMessageObject().isInvoice() || this.chatActivity.textSelectionHelper.isDescription)) && !this.chatActivity.getMessagesController().getTranslateController().isTranslatingDialog(this.chatActivity.dialog_id) && !UserObject.isService(this.chatActivity.dialog_id) && (!((chatActivity3 != null && chatActivity3.getMessagesController().isChatNoForwards(this.chatActivity.getCurrentChat())) || ((selectableView = this.selectedView) != null && ((ChatMessageCell) selectableView).getMessageObject() != null && ((ChatMessageCell) this.selectedView).getMessageObject().messageOwner != null && ((ChatMessageCell) this.selectedView).getMessageObject().messageOwner.noforwards)) || this.chatActivity.getCurrentChat() == null || ChatObject.canWriteToChat(this.chatActivity.getCurrentChat()));
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        protected boolean canCopy() {
            ChatActivity chatActivity;
            ChatActivity chatActivity2 = this.chatActivity;
            if ((chatActivity2 == null || chatActivity2.getDialogId() != UserObject.VERIFY) && (chatActivity = this.chatActivity) != null) {
                if (chatActivity.getDialogId() < 0 && this.chatActivity.getMessagesController().isChatNoForwards(-this.chatActivity.getDialogId())) {
                    return false;
                }
                TextSelectionHelper.SelectableView selectableView = this.selectedView;
                if (selectableView != null && ((ChatMessageCell) selectableView).getMessageObject() != null && ((ChatMessageCell) this.selectedView).getMessageObject().messageOwner != null && ((ChatMessageCell) this.selectedView).getMessageObject().messageOwner.noforwards) {
                    return false;
                }
            }
            return true;
        }

        @Override // org.telegram.p023ui.Cells.TextSelectionHelper
        protected void onQuoteClick(MessageObject messageObject, int i, int i2, CharSequence charSequence) {
            ChatActivity chatActivity;
            MessageObject.GroupedMessages group;
            if (messageObject == null || (chatActivity = this.chatActivity) == null) {
                return;
            }
            int iMin = Math.min(i2, chatActivity.getMessagesController().quoteLengthMax + i);
            if (messageObject.getGroupId() != 0 && (group = this.chatActivity.getGroup(messageObject.getGroupId())) != null && !group.isDocuments) {
                messageObject = group.captionMessage;
            }
            if (messageObject == null) {
                return;
            }
            ChatActivityEnterView chatActivityEnterView = this.chatActivity.chatActivityEnterView;
            if (chatActivityEnterView != null && chatActivityEnterView.getVisibility() == 0 && messageObject.isVoiceTranscriptionOpen()) {
                if (((BaseFragment) this.chatActivity).actionBar != null && ((BaseFragment) this.chatActivity).actionBar.isActionModeShowed()) {
                    this.chatActivity.clearSelectionMode();
                }
                ChatActivityEnterView chatActivityEnterView2 = this.chatActivity.chatActivityEnterView;
                EditTextCaption editField = chatActivityEnterView2.getEditField();
                if (editField == null) {
                    return;
                }
                CharSequence charSequenceSubSequence = messageObject.getVoiceTranscription().subSequence(i, iMin);
                SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
                spannableStringBuilder.append(charSequenceSubSequence);
                QuoteSpan.QuoteStyleSpan quoteStyleSpan = new QuoteSpan.QuoteStyleSpan();
                QuoteSpan quoteSpan = new QuoteSpan(true, true, quoteStyleSpan);
                quoteStyleSpan.span = quoteSpan;
                quoteSpan.start = 0;
                quoteSpan.end = charSequenceSubSequence.length();
                spannableStringBuilder.setSpan(quoteSpan, 0, charSequenceSubSequence.length(), 33);
                spannableStringBuilder.setSpan(quoteStyleSpan, 0, charSequenceSubSequence.length(), 33);
                spannableStringBuilder.append((CharSequence) "\n");
                CharSequence fieldText = chatActivityEnterView2.getFieldText();
                if (fieldText != null) {
                    spannableStringBuilder.append(fieldText);
                }
                editField.setText(spannableStringBuilder);
                this.chatActivity.showFieldPanelForReply(messageObject);
                chatActivityEnterView2.openKeyboard();
                editField.setSelection(editField.length());
                return;
            }
            ReplyQuote replyQuoteFrom = ReplyQuote.from(messageObject, i, iMin);
            if (replyQuoteFrom.getText() == null) {
                return;
            }
            ChatActivityEnterView chatActivityEnterView3 = this.chatActivity.chatActivityEnterView;
            if (chatActivityEnterView3 != null && chatActivityEnterView3.getVisibility() == 0) {
                if (((BaseFragment) this.chatActivity).actionBar != null && ((BaseFragment) this.chatActivity).actionBar.isActionModeShowed()) {
                    this.chatActivity.clearSelectionMode();
                }
                this.chatActivity.showFieldPanelForReplyQuote(messageObject, replyQuoteFrom);
                ChatActivityEnterView chatActivityEnterView4 = this.chatActivity.chatActivityEnterView;
                if (chatActivityEnterView4 != null) {
                    chatActivityEnterView4.openKeyboard();
                    return;
                }
                return;
            }
            this.chatActivity.replyingQuote = replyQuoteFrom;
            this.chatActivity.replyingMessageObject = messageObject;
            this.chatActivity.forbidForwardingWithDismiss = false;
            ChatActivity chatActivity2 = this.chatActivity;
            chatActivity2.messagePreviewParams = new MessagePreviewParams(chatActivity2.currentEncryptedChat != null, chatActivity2.getMessagesController().isChatNoForwards(this.chatActivity.currentChat), ChatObject.isMonoForum(this.chatActivity.currentChat));
            ChatActivity chatActivity3 = this.chatActivity;
            chatActivity3.messagePreviewParams.updateReply(chatActivity3.replyingMessageObject, this.chatActivity.getGroup(messageObject.getGroupId()), this.chatActivity.getDialogId(), this.chatActivity.replyingQuote);
            Bundle bundle = new Bundle();
            bundle.putBoolean("onlySelect", true);
            bundle.putInt("dialogsType", 3);
            bundle.putBoolean("quote", true);
            bundle.putInt("messagesCount", 1);
            bundle.putBoolean("canSelectTopics", true);
            DialogsActivity dialogsActivity = new DialogsActivity(bundle);
            dialogsActivity.setDelegate(this.chatActivity);
            this.chatActivity.presentFragment(dialogsActivity);
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$13 */
    class C305713 extends ActionBar.ActionBarMenuOnItemClick {
        final /* synthetic */ Context val$context;

        C305713(Context context) {
            this.val$context = context;
        }

        @Override // org.telegram.ui.ActionBar.ActionBar.ActionBarMenuOnItemClick
        public void onItemClick(final int i) throws Resources.NotFoundException {
            TLRPC.User user;
            TLRPC.ChatFull chatFull;
            final TLRPC.User user2;
            TLRPC.User user3;
            long j = 0;
            if (i == -1) {
                if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed()) {
                    ChatActivity.this.clearSelectionMode();
                    return;
                }
                if (ChatActivity.this.chatMode == 5 && (ChatActivity.this.messages.isEmpty() || ChatActivity.this.threadMessageId == 0)) {
                    ChatActivity.this.showQuickRepliesRemoveAlert();
                    return;
                }
                if (ChatActivity.this.chatMode == 6 && ChatActivity.this.chatActivityEnterView.businessLinkHasChanges()) {
                    ChatActivity.this.showBusinessLinksDiscardAlert(new Runnable() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda0
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$onItemClick$0();
                        }
                    });
                    return;
                } else {
                    if (ChatActivity.this.checkRecordLocked(true)) {
                        return;
                    }
                    ChatActivity.this.lambda$onBackPressed$371();
                    return;
                }
            }
            if (i == 59) {
                if (ChatActivity.this.getUserConfig().getClientUserId() == ChatActivity.this.dialog_id) {
                    ChatActivity.this.getMessagesController().setSavedViewAs(true);
                    ChatActivity.this.avatarContainer.openProfile(false, true, true);
                    return;
                } else {
                    ChatActivity.this.getMessagesController().getTopicsController().toggleViewForumAsMessages(-ChatActivity.this.dialog_id, false);
                    TopicsFragment.prepareToSwitchAnimation(ChatActivity.this);
                    return;
                }
            }
            MessageObject messageObject = null;
            if (i == 10) {
                SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
                long fromChatId = 0;
                for (int i2 = 1; i2 >= 0; i2--) {
                    ArrayList arrayList = new ArrayList();
                    for (int i3 = 0; i3 < ChatActivity.this.selectedMessagesCanCopyIds[i2].size(); i3++) {
                        arrayList.add(Integer.valueOf(ChatActivity.this.selectedMessagesCanCopyIds[i2].keyAt(i3)));
                    }
                    if (ChatActivity.this.currentEncryptedChat == null) {
                        Collections.sort(arrayList);
                    } else {
                        Collections.sort(arrayList, Collections.reverseOrder());
                    }
                    for (int i4 = 0; i4 < arrayList.size(); i4++) {
                        MessageObject messageObject2 = (MessageObject) ChatActivity.this.selectedMessagesCanCopyIds[i2].get(((Integer) arrayList.get(i4)).intValue());
                        if (spannableStringBuilder.length() != 0) {
                            spannableStringBuilder.append((CharSequence) "\n\n");
                        }
                        spannableStringBuilder.append(ChatActivity.getMessageContent(messageObject2, fromChatId, arrayList.size() != 1 && ((user3 = ChatActivity.this.currentUser) == null || !user3.self)));
                        fromChatId = messageObject2.getFromChatId();
                    }
                }
                if (spannableStringBuilder.length() != 0) {
                    AndroidUtilities.addToClipboard(spannableStringBuilder);
                    ChatActivity.this.createUndoView();
                    ChatActivity.this.undoView.showWithAction(0L, 58, (Runnable) null);
                }
                ChatActivity.this.clearSelectionMode();
                return;
            }
            if (i == 12) {
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                ChatActivity.this.createDeleteMessagesAlert(null, null);
                return;
            }
            if (i == 11) {
                ChatActivity.this.openForward(true);
                return;
            }
            if (i == 69) {
                ChatActivity.this.share();
                return;
            }
            if (i == 70) {
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC.Chat chat = chatActivity.currentChat;
                if (chat == null) {
                    return;
                }
                chatActivity.presentFragment(ChatActivity.m1258of(-chat.linked_monoforum_id));
                return;
            }
            if (i == 72) {
                long threadId = ChatActivity.this.dialog_id;
                if (ChatObject.isMonoForum(ChatActivity.this.currentChat) && ChatObject.canManageMonoForum(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.currentChat)) {
                    threadId = ChatActivity.this.getThreadId();
                    j = ChatActivity.this.dialog_id;
                }
                StarsController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).stopPaidMessages(threadId, j, false, false);
                return;
            }
            if (i == 71) {
                long threadId2 = ChatActivity.this.dialog_id;
                if (ChatObject.isMonoForum(ChatActivity.this.currentChat) && ChatObject.canManageMonoForum(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.currentChat)) {
                    threadId2 = ChatActivity.this.getThreadId();
                    j = ChatActivity.this.dialog_id;
                }
                final long j2 = threadId2;
                final long j3 = j;
                StarsController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getPaidRevenue(j2, j3, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda1
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$onItemClick$2(j2, j3, (Long) obj);
                    }
                });
                return;
            }
            if (i == 28) {
                if (ChatActivity.this.tagSelector == null) {
                    ChatActivity.this.showTagSelector();
                    return;
                } else {
                    ChatActivity.this.hideTagSelector();
                    return;
                }
            }
            if (i == 25) {
                ArrayList arrayList2 = new ArrayList();
                for (int i5 = 1; i5 >= 0; i5--) {
                    for (int i6 = 0; i6 < ChatActivity.this.selectedMessagesIds[i5].size(); i6++) {
                        arrayList2.add((MessageObject) ChatActivity.this.selectedMessagesIds[i5].valueAt(i6));
                    }
                    ChatActivity.this.selectedMessagesIds[i5].clear();
                    ChatActivity.this.selectedMessagesCanCopyIds[i5].clear();
                    ChatActivity.this.selectedMessagesCanStarIds[i5].clear();
                }
                final boolean z = ChatActivity.this.canSaveMusicCount > 0;
                ChatActivity.this.hideActionMode();
                ChatActivity.this.updatePinnedMessageView(true);
                ChatActivity.this.updateVisibleRows();
                MediaController.saveFilesFromMessages(ChatActivity.this.getParentActivity(), ChatActivity.this.getAccountInstance(), arrayList2, new MessagesStorage.IntCallback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda2
                    @Override // org.telegram.messenger.MessagesStorage.IntCallback
                    public final void run(int i7) {
                        this.f$0.lambda$onItemClick$3(z, i7);
                    }
                });
                return;
            }
            if (i == 13) {
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                ChatActivity chatActivity2 = ChatActivity.this;
                Activity parentActivity = chatActivity2.getParentActivity();
                ChatActivity chatActivity3 = ChatActivity.this;
                chatActivity2.showDialog(AlertsCreator.createTTLAlert(parentActivity, chatActivity3.currentEncryptedChat, chatActivity3.themeDelegate).create());
                return;
            }
            if (i == 15 || i == 16 || i == 26) {
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                if (i == 15 && ChatObject.isMonoForum(ChatActivity.this.currentChat)) {
                    if (ChatActivity.this.getThreadId() == 0 || (user2 = ChatActivity.this.getMessagesController().getUser(Long.valueOf(ChatActivity.this.getThreadId()))) == null) {
                        return;
                    }
                    ChatActivity chatActivity4 = ChatActivity.this;
                    AlertsCreator.createClearDaysDialogAlert(chatActivity4, -1, user2, chatActivity4.currentChat, true, new MessagesStorage.BooleanCallback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda3
                        @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
                        public final void run(boolean z2) {
                            this.f$0.lambda$onItemClick$4(user2, z2);
                        }
                    }, ChatActivity.this.getResourceProvider());
                    return;
                }
                ChatActivity chatActivity5 = ChatActivity.this;
                TLRPC.ChatFull chatFull2 = chatActivity5.chatInfo;
                final boolean z2 = chatFull2 != null && chatFull2.can_delete_channel;
                if (i == 26 || (i == 15 && chatActivity5.currentEncryptedChat == null && (((user = chatActivity5.currentUser) != null && !UserObject.isUserSelf(user) && !UserObject.isDeleted(ChatActivity.this.currentUser)) || ((chatFull = ChatActivity.this.chatInfo) != null && chatFull.can_delete_channel)))) {
                    ChatActivity chatActivity6 = ChatActivity.this;
                    AlertsCreator.createClearDaysDialogAlert(chatActivity6, -1, chatActivity6.currentUser, chatActivity6.currentChat, z2, new AnonymousClass1(z2), ChatActivity.this.getResourceProvider());
                    return;
                } else {
                    ChatActivity chatActivity7 = ChatActivity.this;
                    AlertsCreator.createClearOrDeleteDialogAlert(chatActivity7, i == 15, chatActivity7.currentChat, chatActivity7.currentUser, chatActivity7.currentEncryptedChat != null, true, z2, new MessagesStorage.BooleanCallback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda4
                        @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
                        public final void run(boolean z3) {
                            this.f$0.lambda$onItemClick$5(i, z2, z3);
                        }
                    }, ChatActivity.this.themeDelegate);
                    return;
                }
            }
            if (i == 17) {
                ChatActivity chatActivity8 = ChatActivity.this;
                if (chatActivity8.currentUser == null || chatActivity8.getParentActivity() == null) {
                    return;
                }
                if (ChatActivity.this.addToContactsButton != null && ChatActivity.this.addToContactsButton.getTag() != null) {
                    ChatActivity chatActivity9 = ChatActivity.this;
                    chatActivity9.shareMyContact(((Integer) chatActivity9.addToContactsButton.getTag()).intValue(), null);
                    return;
                } else {
                    Bundle bundle = new Bundle();
                    bundle.putLong("user_id", ChatActivity.this.currentUser.f1734id);
                    bundle.putBoolean("addContact", true);
                    ChatActivity.this.presentFragment(new ContactAddActivity(bundle));
                    return;
                }
            }
            if (i == 18) {
                ChatActivity.this.toggleMute(false);
                return;
            }
            if (i == 24) {
                try {
                    ChatActivity.this.getMediaDataController().installShortcut(ChatActivity.this.currentUser.f1734id, MediaDataController.SHORTCUT_TYPE_USER_OR_CHAT);
                    return;
                } catch (Exception e) {
                    FileLog.m1160e(e);
                    return;
                }
            }
            if (i == 29) {
                if (ChatObject.hasAdminRights(ChatActivity.this.currentChat)) {
                    BoostsActivity boostsActivity = new BoostsActivity(ChatActivity.this.dialog_id);
                    boostsActivity.setBoostsStatus(ChatActivity.this.boostsStatus);
                    ChatActivity.this.presentFragment(boostsActivity);
                    return;
                }
                ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.openBoostForUsersDialog, Long.valueOf(ChatActivity.this.dialog_id));
                return;
            }
            if (i == 95) {
                ChatActivity.this.scrollToMessageId(1, 0, false, 0, true, 0);
                return;
            }
            if (i == 94) {
                ChatActivity.this.setPinVisibility(true);
                return;
            }
            if (i == 21) {
                ReportBottomSheet.openChat(ChatActivity.this);
                return;
            }
            if (i == 22) {
                for (int i7 = 0; i7 < 2; i7++) {
                    for (int i8 = 0; i8 < ChatActivity.this.selectedMessagesCanStarIds[i7].size(); i8++) {
                        MessageObject messageObject3 = (MessageObject) ChatActivity.this.selectedMessagesCanStarIds[i7].valueAt(i8);
                        ChatActivity.this.getMediaDataController().addRecentSticker(2, messageObject3, messageObject3.getDocument(), (int) (System.currentTimeMillis() / 1000), !ChatActivity.this.hasUnfavedSelected);
                    }
                }
                ChatActivity.this.clearSelectionMode();
                return;
            }
            if (i == 23) {
                for (int i9 = 1; i9 >= 0; i9--) {
                    if (messageObject == null && ChatActivity.this.selectedMessagesIds[i9].size() == 1) {
                        ArrayList arrayList3 = new ArrayList();
                        for (int i10 = 0; i10 < ChatActivity.this.selectedMessagesIds[i9].size(); i10++) {
                            arrayList3.add(Integer.valueOf(ChatActivity.this.selectedMessagesIds[i9].keyAt(i10)));
                        }
                        messageObject = (MessageObject) ChatActivity.this.messagesDict[i9].get(((Integer) arrayList3.get(0)).intValue());
                    }
                    ChatActivity.this.selectedMessagesIds[i9].clear();
                    ChatActivity.this.selectedMessagesCanCopyIds[i9].clear();
                    ChatActivity.this.selectedMessagesCanStarIds[i9].clear();
                }
                if (messageObject != null && messageObject.isTodo()) {
                    ChatActivity.this.selectedObject = messageObject;
                    ChatActivity.this.processSelectedOption(109);
                } else {
                    ChatActivity.this.startEditingMessageObject(messageObject);
                }
                ChatActivity.this.hideActionMode();
                ChatActivity.this.updatePinnedMessageView(true);
                ChatActivity.this.updateVisibleRows();
                return;
            }
            if (i == 64) {
                final QuickRepliesController.QuickReply quickReplyFindReply = QuickRepliesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).findReply(ChatActivity.this.getQuickReplyId());
                Context context = ChatActivity.this.getContext();
                int i11 = ((BaseFragment) ChatActivity.this).currentAccount;
                ChatActivity chatActivity10 = ChatActivity.this;
                QuickRepliesActivity.openRenameReplyAlert(context, i11, chatActivity10.quickReplyShortcut, quickReplyFindReply, chatActivity10.getResourceProvider(), false, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda5
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$onItemClick$6(quickReplyFindReply, (String) obj);
                    }
                });
                return;
            }
            if (i == 14) {
                ActionBarMenuSubItem actionBarMenuSubItem = new ActionBarMenuSubItem(this.val$context, false, true, true, ChatActivity.this.getResourceProvider());
                actionBarMenuSubItem.setTextAndIcon(LocaleController.getString(C2369R.string.AttachMenu), C2369R.drawable.input_attach);
                actionBarMenuSubItem.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda6
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        this.f$0.lambda$onItemClick$7(view);
                    }
                });
                ChatActivity.this.headerItem.toggleSubMenu(actionBarMenuSubItem, ChatActivity.this.attachItem.createView());
                return;
            }
            if (i == 30) {
                ChatActivity.this.getSendMessagesHelper().sendMessage(SendMessagesHelper.SendMessageParams.m1191of("/help", ChatActivity.this.dialog_id, null, null, null, false, null, null, null, true, 0, 0, null, false));
                return;
            }
            if (i == 31) {
                ChatActivity.this.getSendMessagesHelper().sendMessage(SendMessagesHelper.SendMessageParams.m1191of("/settings", ChatActivity.this.dialog_id, null, null, null, false, null, null, null, true, 0, 0, null, false));
                return;
            }
            if (i == 40) {
                ChatActivity chatActivity11 = ChatActivity.this;
                chatActivity11.lambda$openSearchWithText$374(chatActivity11.isSupportedTags() ? "" : null);
                return;
            }
            if (i == 62) {
                ChatActivity.this.getMessagesController().getTranslateController().setHideTranslateDialog(ChatActivity.this.getDialogId(), false, true);
                if (ChatActivity.this.getMessagesController().getTranslateController().toggleTranslatingDialog(ChatActivity.this.getDialogId(), true)) {
                    return;
                }
                ChatActivity.this.updateTopPanel(true);
                return;
            }
            if (i == 32 || i == 33) {
                ChatActivity chatActivity12 = ChatActivity.this;
                if (chatActivity12.currentUser == null || chatActivity12.getParentActivity() == null) {
                    return;
                }
                ChatActivity chatActivity13 = ChatActivity.this;
                TLRPC.User user4 = chatActivity13.currentUser;
                boolean z3 = i == 33;
                TLRPC.UserFull userFull = chatActivity13.userInfo;
                VoIPHelper.startCall(user4, z3, userFull != null && userFull.video_calls_available, chatActivity13.getParentActivity(), ChatActivity.this.getMessagesController().getUserFull(ChatActivity.this.currentUser.f1734id), ChatActivity.this.getAccountInstance());
                return;
            }
            if (i == 50) {
                ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView == null || chatActivityEnterView.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedBold();
                return;
            }
            if (i == 51) {
                ChatActivityEnterView chatActivityEnterView2 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView2 == null || chatActivityEnterView2.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedItalic();
                return;
            }
            if (i == 80) {
                ChatActivityEnterView chatActivityEnterView3 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView3 != null) {
                    chatActivityEnterView3.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                    ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedItalic();
                    ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedBold();
                    return;
                }
                return;
            }
            if (i == 57) {
                ChatActivityEnterView chatActivityEnterView4 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView4 == null || chatActivityEnterView4.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedSpoiler();
                return;
            }
            if (i == 58) {
                ChatActivityEnterView chatActivityEnterView5 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView5 == null || chatActivityEnterView5.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedQuote();
                return;
            }
            if (i == 52) {
                ChatActivityEnterView chatActivityEnterView6 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView6 == null || chatActivityEnterView6.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedMono();
                return;
            }
            if (i == 55) {
                ChatActivityEnterView chatActivityEnterView7 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView7 == null || chatActivityEnterView7.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedStrike();
                return;
            }
            if (i == 56) {
                ChatActivityEnterView chatActivityEnterView8 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView8 == null || chatActivityEnterView8.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedUnderline();
                return;
            }
            if (i == 53) {
                ChatActivityEnterView chatActivityEnterView9 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView9 == null || chatActivityEnterView9.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedUrl();
                return;
            }
            if (i == 54) {
                ChatActivityEnterView chatActivityEnterView10 = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView10 == null || chatActivityEnterView10.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setSelectionOverride(ChatActivity.this.editTextStart, ChatActivity.this.editTextEnd);
                ChatActivity.this.chatActivityEnterView.getEditField().makeSelectedRegular();
                return;
            }
            if (i == 27) {
                ChatActivity.this.showChatThemeBottomSheet();
                return;
            }
            if (i == 60) {
                if (ChatActivity.this.forumTopic == null) {
                    return;
                }
                TopicsController topicsController = ChatActivity.this.getMessagesController().getTopicsController();
                ChatActivity chatActivity14 = ChatActivity.this;
                long j4 = chatActivity14.currentChat.f1571id;
                int i12 = chatActivity14.forumTopic.f1631id;
                ChatActivity.this.forumTopic.closed = true;
                topicsController.toggleCloseTopic(j4, i12, true);
                ChatActivity.this.updateTopicButtons();
                ChatActivity.this.updateBottomOverlay();
                ChatActivity.this.updateTopPanel(true);
                return;
            }
            if (i == 61) {
                TopicsFragment.prepareToSwitchAnimation(ChatActivity.this);
                return;
            }
            if (i == 65) {
                AndroidUtilities.addToClipboard(ChatActivity.this.businessLink.link);
                BulletinFactory.m1267of(LaunchActivity.getLastFragment()).createCopyLinkBulletin().show();
                return;
            }
            if (i == 66) {
                Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda7
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onItemClick$8();
                    }
                };
                if (ChatActivity.this.chatActivityEnterView.businessLinkHasChanges()) {
                    ChatActivity.this.showBusinessLinksDiscardAlert(runnable);
                    return;
                } else {
                    runnable.run();
                    return;
                }
            }
            if (i == 67) {
                Context context2 = ChatActivity.this.getContext();
                int i13 = ((BaseFragment) ChatActivity.this).currentAccount;
                ChatActivity chatActivity15 = ChatActivity.this;
                BusinessLinksActivity.openRenameAlert(context2, i13, chatActivity15.businessLink, ((BaseFragment) chatActivity15).resourceProvider, false);
                return;
            }
            if (i == 68) {
                AlertDialog alertDialogCreate = new AlertDialog.Builder(ChatActivity.this.getContext(), ChatActivity.this.getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.BusinessLinksDeleteTitle)).setMessage(LocaleController.getString(C2369R.string.BusinessLinksDeleteMessage)).setPositiveButton(LocaleController.getString(C2369R.string.Remove), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda8
                    @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                    public final void onClick(AlertDialog alertDialog, int i14) {
                        this.f$0.lambda$onItemClick$9(alertDialog, i14);
                    }
                }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null).create();
                ChatActivity.this.showDialog(alertDialogCreate);
                TextView textView = (TextView) alertDialogCreate.getButton(-1);
                if (textView != null) {
                    textView.setTextColor(ChatActivity.this.getThemedColor(Theme.key_text_RedBold));
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$0() {
            ChatActivity.this.lambda$onBackPressed$371();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$2(final long j, final long j2, final Long l) {
            if (ChatActivity.this.getContext() == null) {
                return;
            }
            AlertsCreator.showAlertWithCheckbox(ChatActivity.this.getContext(), LocaleController.getString(C2369R.string.RemoveMessageFeeTitle), AndroidUtilities.replaceTags(LocaleController.formatString(ChatObject.isMonoForum(ChatActivity.this.currentChat) ? C2369R.string.RemoveMessageFeeMessageChannel : C2369R.string.RemoveMessageFeeMessage, DialogObject.getShortName(j))), l.longValue() > 0 ? LocaleController.formatPluralStringComma("RemoveMessageFeeRefund", (int) l.longValue()) : null, LocaleController.getString(C2369R.string.Confirm), new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$13$$ExternalSyntheticLambda9
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) {
                    this.f$0.lambda$onItemClick$1(j, j2, l, (Boolean) obj);
                }
            }, ((BaseFragment) ChatActivity.this).resourceProvider);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$1(long j, long j2, Long l, Boolean bool) {
            StarsController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).stopPaidMessages(j, j2, l.longValue() > 0 && bool.booleanValue(), true);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$3(boolean z, int i) {
            if (i <= 0 || ChatActivity.this.getParentActivity() == null) {
                return;
            }
            BulletinFactory.m1267of(ChatActivity.this).createDownloadBulletin(z ? BulletinFactory.FileType.AUDIOS : BulletinFactory.FileType.UNKNOWNS, i, ChatActivity.this.themeDelegate).show();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$4(TLRPC.User user, boolean z) {
            if (user.f1734id != ChatActivity.this.getThreadId()) {
                return;
            }
            ChatActivity.this.performHistoryClear(false, true);
        }

        /* renamed from: org.telegram.ui.ChatActivity$13$1, reason: invalid class name */
        /* loaded from: classes5.dex */
        class AnonymousClass1 implements MessagesStorage.BooleanCallback {
            final /* synthetic */ boolean val$canDeleteHistory;

            AnonymousClass1(boolean z) {
                this.val$canDeleteHistory = z;
            }

            @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
            public void run(boolean z) {
                if (z) {
                    ChatActivity chatActivity = ChatActivity.this;
                    if (chatActivity.currentUser != null || this.val$canDeleteHistory) {
                        MessagesStorage messagesStorage = chatActivity.getMessagesStorage();
                        long j = ChatActivity.this.dialog_id;
                        final boolean z2 = this.val$canDeleteHistory;
                        messagesStorage.getMessagesCount(j, new MessagesStorage.IntCallback() { // from class: org.telegram.ui.ChatActivity$13$1$$ExternalSyntheticLambda0
                            @Override // org.telegram.messenger.MessagesStorage.IntCallback
                            public final void run(int i) {
                                this.f$0.lambda$run$1(z2, i);
                            }
                        });
                        return;
                    }
                }
                ChatActivity.this.performHistoryClear(z, this.val$canDeleteHistory);
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$run$0(boolean z, boolean z2) {
                ChatActivity.this.performHistoryClear(true, z);
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$run$1(final boolean z, int i) {
                if (i >= 50) {
                    ChatActivity chatActivity = ChatActivity.this;
                    AlertsCreator.createClearOrDeleteDialogAlert(chatActivity, true, false, true, chatActivity.currentChat, chatActivity.currentUser, false, false, z, new MessagesStorage.BooleanCallback() { // from class: org.telegram.ui.ChatActivity$13$1$$ExternalSyntheticLambda1
                        @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
                        public final void run(boolean z2) {
                            this.f$0.lambda$run$0(z, z2);
                        }
                    }, ChatActivity.this.themeDelegate);
                } else {
                    ChatActivity.this.performHistoryClear(true, z);
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$5(int i, boolean z, boolean z2) {
            if (i == 15 && ChatObject.isChannel(ChatActivity.this.currentChat)) {
                TLRPC.Chat chat = ChatActivity.this.currentChat;
                if (!chat.megagroup || ChatObject.isPublic(chat)) {
                    ChatActivity.this.getMessagesController().deleteDialog(ChatActivity.this.dialog_id, 2, z2);
                    return;
                }
            }
            if (i != 15) {
                NotificationCenter notificationCenter = ChatActivity.this.getNotificationCenter();
                ChatActivity chatActivity = ChatActivity.this;
                int i2 = NotificationCenter.closeChats;
                notificationCenter.removeObserver(chatActivity, i2);
                ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(i2, new Object[0]);
                ChatActivity.this.lambda$onBackPressed$371();
                NotificationCenter notificationCenter2 = ChatActivity.this.getNotificationCenter();
                int i3 = NotificationCenter.needDeleteDialog;
                Long lValueOf = Long.valueOf(ChatActivity.this.dialog_id);
                ChatActivity chatActivity2 = ChatActivity.this;
                notificationCenter2.lambda$postNotificationNameOnUIThread$1(i3, lValueOf, chatActivity2.currentUser, chatActivity2.currentChat, Boolean.valueOf(z2));
                return;
            }
            ChatActivity.this.performHistoryClear(z2, z);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$6(QuickRepliesController.QuickReply quickReply, String str) {
            if (quickReply != null) {
                QuickRepliesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).renameReply(quickReply.f1797id, str);
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.quickReplyShortcut = str;
            chatActivity.avatarContainer.setTitle(str);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$7(View view) {
            ChatActivity.this.headerItem.closeSubMenu();
            ChatAttachAlert chatAttachAlert = ChatActivity.this.chatAttachAlert;
            if (chatAttachAlert != null) {
                chatAttachAlert.setEditingMessageObject(0, null);
            }
            ChatActivity.this.openAttachMenu();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$8() {
            Intent intent = new Intent(ChatActivity.this.getContext(), (Class<?>) LaunchActivity.class);
            intent.setAction("android.intent.action.SEND");
            intent.setType("text/plain");
            intent.putExtra("android.intent.extra.TEXT", ChatActivity.this.businessLink.link);
            ChatActivity.this.startActivityForResult(intent, 500);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onItemClick$9(AlertDialog alertDialog, int i) {
            ChatActivity.this.lambda$onBackPressed$371();
            ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.needDeleteBusinessLink, ChatActivity.this.businessLink);
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$14 */
    class C305814 extends LongPressListenerWithMovingGesture {
        final /* synthetic */ View val$backButton;

        C305814(View view) {
            this.val$backButton = view;
        }

        @Override // org.telegram.p023ui.LongPressListenerWithMovingGesture
        public void onLongPress() {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.scrimPopupWindow = BackButtonMenu.show(chatActivity, this.val$backButton, chatActivity.dialog_id, ChatActivity.this.getTopicId(), ChatActivity.this.themeDelegate);
            ActionBarPopupWindow actionBarPopupWindow = ChatActivity.this.scrimPopupWindow;
            if (actionBarPopupWindow != null) {
                setSubmenu(actionBarPopupWindow);
                ChatActivity.this.scrimPopupWindow.setOnDismissListener(new PopupWindow.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$14$$ExternalSyntheticLambda0
                    @Override // android.widget.PopupWindow.OnDismissListener
                    public final void onDismiss() {
                        this.f$0.lambda$onLongPress$0();
                    }
                });
                ChatActivity.this.chatListView.stopScroll();
                ChatActivity.this.chatLayoutManager.setCanScrollVertically(false);
                ChatActivity.this.dimBehindView(this.val$backButton, 0.3f);
                ChatActivity.this.hideHints(false);
                if (ChatActivity.this.topUndoView != null) {
                    ChatActivity.this.topUndoView.hide(true, 1);
                }
                if (ChatActivity.this.undoView != null) {
                    ChatActivity.this.undoView.hide(true, 1);
                }
                ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView == null || chatActivityEnterView.getEditField() == null) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.getEditField().setAllowDrawCursor(false);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onLongPress$0() {
            setSubmenu(null);
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.scrimPopupWindow = null;
            chatActivity.menuDeleteItem = null;
            ChatActivity.this.scrimPopupWindowItems = null;
            ChatActivity.this.chatLayoutManager.setCanScrollVertically(true);
            if (ChatActivity.this.scrimPopupWindowHideDimOnDismiss) {
                ChatActivity.this.dimBehindView(false);
            } else {
                ChatActivity.this.scrimPopupWindowHideDimOnDismiss = true;
            }
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView == null || chatActivityEnterView.getEditField() == null) {
                return;
            }
            ChatActivity.this.chatActivityEnterView.getEditField().setAllowDrawCursor(true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$18(View view, MotionEvent motionEvent) {
        ChatThemeBottomSheet chatThemeBottomSheet = this.chatThemeBottomSheet;
        if (chatThemeBottomSheet == null) {
            return false;
        }
        chatThemeBottomSheet.close();
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$19(int i, View view) {
        jumpToDate(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$23(final TLObject tLObject, TLRPC.TL_error tL_error) {
        if (tLObject instanceof TLRPC.messages_Messages) {
            if (!((TLRPC.messages_Messages) tLObject).messages.isEmpty()) {
                TLRPC.TL_messages_getHistory tL_messages_getHistory = new TLRPC.TL_messages_getHistory();
                tL_messages_getHistory.peer = getMessagesController().getInputPeer(this.dialog_id);
                tL_messages_getHistory.offset_date = this.startLoadFromDate + 86400;
                tL_messages_getHistory.limit = 1;
                getConnectionsManager().sendRequest(tL_messages_getHistory, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda130
                    @Override // org.telegram.tgnet.RequestDelegate
                    public final void run(TLObject tLObject2, TLRPC.TL_error tL_error2) {
                        this.f$0.lambda$createView$22(tLObject, tLObject2, tL_error2);
                    }
                });
                return;
            }
            this.actionBar.setSubtitle(LocaleController.getString(C2369R.string.NoMessagesForThisDay));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$22(TLObject tLObject, TLObject tLObject2, TLRPC.TL_error tL_error) {
        final int i;
        if (tLObject2 instanceof TLRPC.messages_Messages) {
            TLRPC.messages_Messages messages_messages = (TLRPC.messages_Messages) tLObject2;
            if (!messages_messages.messages.isEmpty()) {
                i = ((TLRPC.messages_Messages) tLObject).offset_id_offset - messages_messages.offset_id_offset;
            } else {
                i = ((TLRPC.messages_Messages) tLObject).offset_id_offset;
            }
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda249
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$21(i);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$20(int i) {
        this.actionBar.setSubtitle(LocaleController.formatPluralString("messages", i, new Object[0]));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$21(final int i) {
        if (i != 0) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda336
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$20(i);
                }
            });
        } else {
            this.actionBar.setSubtitle(LocaleController.getString(C2369R.string.NoMessagesForThisDay));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$25(View view) {
        if (MessagesController.getInstance(this.currentAccount).isDialogMuted(this.dialog_id, getTopicId())) {
            updateTitleIcons(true);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda175
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$24();
                }
            }, 150L);
            this.headerItem.toggleSubMenu();
            if (getParentActivity() != null) {
                BulletinFactory.createMuteBulletin(this, false, this.themeDelegate).show();
                return;
            }
            return;
        }
        this.muteItem.openSwipeBack();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$24() {
        toggleMute(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$26() {
        this.headerItem.toggleSubMenu();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$27(View view) {
        this.ayugramItem.openSwipeBack();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$28(View view) {
        this.pluginsMenuItem.openSwipeBack();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$29(View view) {
        onAdminShortcutsClick(90);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$30(View view) {
        onAdminShortcutsClick(91);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$31(View view) {
        onAdminShortcutsClick(92);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$32(View view) {
        onAdminShortcutsClick(93);
    }

    /* renamed from: org.telegram.ui.ChatActivity$18 */
    class C306218 extends ChatListRecyclerView {
        private final ArrayList drawCaptionAfter;
        private final ArrayList drawNamesAfter;
        private final ArrayList drawReactionsAfter;
        private final ArrayList drawTimeAfter;
        private final ArrayList drawingGroups;
        private float endTrackingX;
        private boolean ignoreLayout;
        private boolean invalidated;
        int lastH;
        private long lastTrackingAnimationTime;
        private int lastWidth;
        private final Paint outlineActionBackgroundDarkenPaint;
        private final Paint outlineActionBackgroundPaint;
        private final Path path;
        private boolean slidingBeyondMax;
        private final FloatValueHolder slidingDrawableVisibilityProgress;
        private final SpringAnimation slidingDrawableVisibilitySpring;
        private final FloatValueHolder slidingFillProgress;
        private final SpringAnimation slidingFillProgressSpring;
        private final FloatValueHolder slidingOuterRingProgress;
        private final SpringAnimation slidingOuterRingSpring;
        private final float springMultiplier;
        private int startedTrackingPointerId;
        private int startedTrackingX;
        private int startedTrackingY;
        private float trackAnimationProgress;
        private boolean wasTrackingVibrate;

        C306218(Context context, ThemeDelegate themeDelegate) {
            super(context, themeDelegate);
            this.drawTimeAfter = new ArrayList();
            this.drawNamesAfter = new ArrayList();
            this.drawCaptionAfter = new ArrayList();
            this.drawReactionsAfter = new ArrayList();
            this.drawingGroups = new ArrayList(10);
            this.springMultiplier = 2000.0f;
            Paint paint = new Paint(1);
            this.outlineActionBackgroundPaint = paint;
            Paint paint2 = new Paint(1);
            this.outlineActionBackgroundDarkenPaint = paint2;
            FloatValueHolder floatValueHolder = new FloatValueHolder(0.0f);
            this.slidingDrawableVisibilityProgress = floatValueHolder;
            this.slidingDrawableVisibilitySpring = (SpringAnimation) ((SpringAnimation) ((SpringAnimation) new SpringAnimation(floatValueHolder).setMinValue(0.0f)).setMaxValue(2000.0f)).setSpring(new SpringForce(0.0f).setStiffness(1500.0f).setDampingRatio(1.0f)).addUpdateListener(new DynamicAnimation.OnAnimationUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda5
                @Override // androidx.dynamicanimation.animation.DynamicAnimation.OnAnimationUpdateListener
                public final void onAnimationUpdate(DynamicAnimation dynamicAnimation, float f, float f2) {
                    this.f$0.lambda$$0(dynamicAnimation, f, f2);
                }
            });
            FloatValueHolder floatValueHolder2 = new FloatValueHolder(0.0f);
            this.slidingFillProgress = floatValueHolder2;
            this.slidingFillProgressSpring = (SpringAnimation) ((SpringAnimation) new SpringAnimation(floatValueHolder2).setMinValue(0.0f)).setSpring(new SpringForce(0.0f).setStiffness(400.0f).setDampingRatio(0.5f)).addUpdateListener(new DynamicAnimation.OnAnimationUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda6
                @Override // androidx.dynamicanimation.animation.DynamicAnimation.OnAnimationUpdateListener
                public final void onAnimationUpdate(DynamicAnimation dynamicAnimation, float f, float f2) {
                    this.f$0.lambda$$1(dynamicAnimation, f, f2);
                }
            });
            FloatValueHolder floatValueHolder3 = new FloatValueHolder(0.0f);
            this.slidingOuterRingProgress = floatValueHolder3;
            this.slidingOuterRingSpring = (SpringAnimation) ((SpringAnimation) new SpringAnimation(floatValueHolder3).setMinValue(0.0f)).setSpring(new SpringForce(0.0f).setStiffness(200.0f).setDampingRatio(1.0f)).addUpdateListener(new DynamicAnimation.OnAnimationUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda7
                @Override // androidx.dynamicanimation.animation.DynamicAnimation.OnAnimationUpdateListener
                public final void onAnimationUpdate(DynamicAnimation dynamicAnimation, float f, float f2) {
                    this.f$0.lambda$$2(dynamicAnimation, f, f2);
                }
            });
            this.path = new Path();
            this.lastH = 0;
            Paint.Style style = Paint.Style.STROKE;
            paint.setStyle(style);
            Paint.Cap cap = Paint.Cap.ROUND;
            paint.setStrokeCap(cap);
            paint.setStrokeWidth(AndroidUtilities.m1146dp(2.0f));
            paint2.setStyle(style);
            paint2.setStrokeCap(cap);
            paint2.setStrokeWidth(AndroidUtilities.m1146dp(2.0f));
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$$0(DynamicAnimation dynamicAnimation, float f, float f2) {
            invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$$1(DynamicAnimation dynamicAnimation, float f, float f2) {
            invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$$2(DynamicAnimation dynamicAnimation, float f, float f2) {
            invalidate();
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.View, android.view.ViewParent
        public void requestLayout() {
            if (this.ignoreLayout) {
                return;
            }
            super.requestLayout();
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, android.view.View
        public void setTranslationY(float f) {
            if (f != getTranslationY()) {
                super.setTranslationY(f);
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
            }
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView
        protected boolean allowSelectChildAtPosition(View view) {
            if (view == null || !(view.getVisibility() == 4 || view.getVisibility() == 8)) {
                return super.allowSelectChildAtPosition(view);
            }
            return false;
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.View
        protected void onMeasure(int i, int i2) {
            super.onMeasure(i, i2);
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.View
        protected void onLayout(boolean z, int i, int i2, int i3, int i4) {
            super.onLayout(z, i, i2, i3, i4);
            int i5 = this.lastWidth;
            int i6 = i3 - i;
            if (i5 != i6) {
                if (i5 != 0) {
                    ChatActivity.this.hideHints(false);
                }
                this.lastWidth = i6;
            }
            int measuredHeight = getMeasuredHeight();
            if (this.lastH != measuredHeight) {
                this.ignoreLayout = true;
                if (ChatActivity.this.chatListItemAnimator != null) {
                    ChatActivity.this.chatListItemAnimator.endAnimations();
                }
                ChatActivity.this.chatScrollHelper.cancel();
                this.ignoreLayout = false;
                this.lastH = measuredHeight;
            }
            ChatActivity.this.forceScrollToTop = false;
            if (ChatActivity.this.textSelectionHelper != null && ChatActivity.this.textSelectionHelper.isInSelectionMode()) {
                ChatActivity.this.textSelectionHelper.invalidate();
            }
            ChatActivity.this.invalidateClipRectForBackgroundAndChatList();
            ChatActivity.this.isSkeletonVisible();
        }

        private void setGroupTranslationX(ChatMessageCell chatMessageCell, float f) {
            MessageObject.GroupedMessages currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup();
            if (currentMessagesGroup == null) {
                return;
            }
            int childCount = getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = getChildAt(i);
                if (childAt != chatMessageCell && (childAt instanceof ChatMessageCell)) {
                    ChatMessageCell chatMessageCell2 = (ChatMessageCell) childAt;
                    if (chatMessageCell2.getCurrentMessagesGroup() == currentMessagesGroup) {
                        chatMessageCell2.setSlidingOffset(f);
                        chatMessageCell2.invalidate();
                    }
                }
            }
            invalidate();
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.ViewParent
        public boolean requestChildRectangleOnScreen(View view, Rect rect, boolean z) {
            if (ChatActivity.this.scrimPopupWindow != null) {
                return false;
            }
            return super.requestChildRectangleOnScreen(view, rect, z);
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup
        public boolean onInterceptTouchEvent(MotionEvent motionEvent) throws Resources.NotFoundException {
            ChatActivity.this.textSelectionHelper.checkSelectionCancel(motionEvent);
            if (isFastScrollAnimationRunning()) {
                return false;
            }
            if (ChatActivity.this.quickShareSelectorOverlay != null && ChatActivity.this.quickShareSelectorOverlay.isActive()) {
                return false;
            }
            boolean zOnInterceptTouchEvent = super.onInterceptTouchEvent(motionEvent);
            if (!((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() && !ChatActivity.this.isReport()) {
                processTouchEvent(motionEvent);
            }
            return zOnInterceptTouchEvent;
        }

        @Override // androidx.recyclerview.widget.RecyclerView
        public void setItemAnimator(RecyclerView.ItemAnimator itemAnimator) {
            if (isFastScrollAnimationRunning()) {
                return;
            }
            super.setItemAnimator(itemAnimator);
        }

        private void drawReplyButton(Canvas canvas) {
            Canvas canvas2;
            int i;
            float f;
            float f2;
            if (ChatActivity.this.slidingView == null || Thread.currentThread() != Looper.getMainLooper().getThread()) {
                return;
            }
            Paint themedPaint = getThemedPaint("paintChatActionBackground");
            Paint paint = Theme.chat_actionBackgroundGradientDarkenPaint;
            if (this.outlineActionBackgroundPaint.getColor() != themedPaint.getColor()) {
                this.outlineActionBackgroundPaint.setColor(themedPaint.getColor());
            }
            if (this.outlineActionBackgroundDarkenPaint.getColor() != paint.getColor()) {
                this.outlineActionBackgroundDarkenPaint.setColor(paint.getColor());
            }
            if (this.outlineActionBackgroundPaint.getShader() != themedPaint.getShader()) {
                this.outlineActionBackgroundPaint.setShader(themedPaint.getShader());
            }
            if (this.outlineActionBackgroundDarkenPaint.getShader() != paint.getShader()) {
                this.outlineActionBackgroundDarkenPaint.setShader(paint.getShader());
            }
            float value = this.slidingFillProgress.getValue() / 2000.0f;
            int color = this.outlineActionBackgroundDarkenPaint.getColor();
            if (value > 1.0f) {
                this.slidingBeyondMax = true;
            }
            float nonAnimationTranslationX = ChatActivity.this.slidingView.getNonAnimationTranslationX(false);
            if (this.slidingDrawableVisibilityProgress.getValue() == 0.0f) {
                this.slidingFillProgressSpring.cancel();
                this.slidingFillProgressSpring.getSpring().setFinalPosition(0.0f);
                this.slidingFillProgress.setValue(0.0f);
                this.slidingOuterRingSpring.cancel();
                this.slidingOuterRingSpring.getSpring().setFinalPosition(0.0f);
                this.slidingOuterRingProgress.setValue(0.0f);
                this.slidingBeyondMax = false;
            }
            float fClamp = this.slidingFillProgressSpring.getSpring().getFinalPosition() != 2000.0f ? MathUtils.clamp(((-nonAnimationTranslationX) - AndroidUtilities.m1146dp(20.0f)) / AndroidUtilities.m1146dp(30.0f), 0.0f, 1.0f) : 1.0f;
            if (fClamp == 1.0f && this.slidingFillProgressSpring.getSpring().getFinalPosition() != 2000.0f) {
                this.slidingFillProgressSpring.getSpring().setFinalPosition(2000.0f);
                this.slidingFillProgressSpring.start();
                this.slidingOuterRingSpring.getSpring().setFinalPosition(2000.0f);
                this.slidingOuterRingSpring.start();
            }
            float f3 = nonAnimationTranslationX <= ((float) (-AndroidUtilities.m1146dp(20.0f))) ? 2000.0f : 0.0f;
            if (f3 != this.slidingDrawableVisibilitySpring.getSpring().getFinalPosition()) {
                this.slidingDrawableVisibilitySpring.getSpring().setFinalPosition(f3);
                if (!this.slidingDrawableVisibilitySpring.isRunning()) {
                    this.slidingDrawableVisibilitySpring.start();
                }
            }
            float value2 = this.slidingDrawableVisibilityProgress.getValue() / 2000.0f;
            float measuredWidth = getMeasuredWidth() + (nonAnimationTranslationX * ((ChatActivity.this.slidingView.getMessageObject() == null || !ChatActivity.this.slidingView.getMessageObject().isOut()) ? 1.0f : 0.5f));
            float top = ChatActivity.this.slidingView.getTop() + (ChatActivity.this.slidingView.getMeasuredHeight() / 2.0f);
            boolean z = this.slidingBeyondMax;
            float f4 = z ? value : value2;
            float f5 = z ? 0.0f : 1.0f - value;
            boolean z2 = ColorUtils.calculateLuminance(getThemedColor(Theme.key_windowBackgroundWhite)) <= 0.5d;
            if (value2 != 0.0f) {
                RectF rectF = AndroidUtilities.rectTmp;
                f2 = 2000.0f;
                rectF.set((int) ((measuredWidth - (AndroidUtilities.m1146dp(16.0f) * f4)) + (this.outlineActionBackgroundPaint.getStrokeWidth() / 2.0f)), (int) ((top - (AndroidUtilities.m1146dp(16.0f) * f4)) + (this.outlineActionBackgroundPaint.getStrokeWidth() / 2.0f)), (int) (((AndroidUtilities.m1146dp(16.0f) * f4) + measuredWidth) - (this.outlineActionBackgroundPaint.getStrokeWidth() / 2.0f)), (int) ((top + (AndroidUtilities.m1146dp(16.0f) * f4)) - (this.outlineActionBackgroundPaint.getStrokeWidth() / 2.0f)));
                Theme.applyServiceShaderMatrix(getMeasuredWidth(), AndroidUtilities.displaySize.y, 0.0f, getY() + rectF.top);
                if (value == 0.0f) {
                    int alpha = this.outlineActionBackgroundPaint.getAlpha();
                    this.outlineActionBackgroundPaint.setAlpha((int) (alpha * value2));
                    float f6 = fClamp * 360.0f;
                    i = -1;
                    f = 1.0f;
                    canvas.drawArc(rectF, -90.0f, f6, false, this.outlineActionBackgroundPaint);
                    this.outlineActionBackgroundPaint.setAlpha(alpha);
                    if (ChatActivity.this.themeDelegate.hasGradientService()) {
                        int alpha2 = this.outlineActionBackgroundDarkenPaint.getAlpha();
                        if (z2) {
                            this.outlineActionBackgroundDarkenPaint.setColor(-1);
                        }
                        this.outlineActionBackgroundDarkenPaint.setAlpha((int) (alpha2 * value2));
                        canvas2 = canvas;
                        canvas2.drawArc(rectF, -90.0f, f6, false, this.outlineActionBackgroundDarkenPaint);
                    } else {
                        canvas2 = canvas;
                    }
                } else {
                    canvas2 = canvas;
                    i = -1;
                    f = 1.0f;
                }
            } else {
                canvas2 = canvas;
                i = -1;
                f = 1.0f;
                f2 = 2000.0f;
            }
            RectF rectF2 = AndroidUtilities.rectTmp;
            rectF2.set((int) (measuredWidth - (AndroidUtilities.m1146dp(16.0f) * f4)), (int) (top - (AndroidUtilities.m1146dp(16.0f) * f4)), (int) ((AndroidUtilities.m1146dp(16.0f) * f4) + measuredWidth), (int) (top + (AndroidUtilities.m1146dp(16.0f) * f4)));
            Theme.applyServiceShaderMatrix(getMeasuredWidth(), AndroidUtilities.displaySize.y, 0.0f, getY() + rectF2.top);
            this.path.rewind();
            Path.Direction direction = Path.Direction.CW;
            this.path.addRoundRect(rectF2, AndroidUtilities.m1146dp(16.0f) * f4, AndroidUtilities.m1146dp(16.0f) * f4, direction);
            int alpha3 = themedPaint.getAlpha();
            float f7 = 0.6f * value2 * fClamp;
            themedPaint.setAlpha((int) (alpha3 * f7));
            canvas2.drawPath(this.path, themedPaint);
            themedPaint.setAlpha(alpha3);
            if (ChatActivity.this.themeDelegate.hasGradientService()) {
                int alpha4 = Theme.chat_actionBackgroundGradientDarkenPaint.getAlpha();
                if (z2) {
                    Theme.chat_actionBackgroundGradientDarkenPaint.setColor(i);
                }
                Theme.chat_actionBackgroundGradientDarkenPaint.setAlpha((int) (f7 * alpha4));
                canvas2.drawPath(this.path, Theme.chat_actionBackgroundGradientDarkenPaint);
                Theme.chat_actionBackgroundGradientDarkenPaint.setAlpha(alpha4);
            }
            if (f5 != 0.0f) {
                rectF2.set((int) (measuredWidth - (AndroidUtilities.m1146dp(16.0f) * f5)), (int) (top - (AndroidUtilities.m1146dp(16.0f) * f5)), (int) ((AndroidUtilities.m1146dp(16.0f) * f5) + measuredWidth), (int) (top + (AndroidUtilities.m1146dp(16.0f) * f5)));
                this.path.rewind();
                this.path.addRoundRect(rectF2, AndroidUtilities.m1146dp(16.0f), AndroidUtilities.m1146dp(16.0f), direction);
                canvas2.save();
                canvas2.clipPath(this.path, Region.Op.DIFFERENCE);
            }
            rectF2.set((int) (measuredWidth - (AndroidUtilities.m1146dp(16.0f) * f4)), (int) (top - (AndroidUtilities.m1146dp(16.0f) * f4)), (int) ((AndroidUtilities.m1146dp(16.0f) * f4) + measuredWidth), (int) (top + (AndroidUtilities.m1146dp(16.0f) * f4)));
            Theme.applyServiceShaderMatrix(getMeasuredWidth(), AndroidUtilities.displaySize.y, 0.0f, getY() + rectF2.top);
            this.path.rewind();
            this.path.addRoundRect(rectF2, AndroidUtilities.m1146dp(16.0f) * f4, AndroidUtilities.m1146dp(16.0f) * f4, direction);
            int alpha5 = themedPaint.getAlpha();
            float f8 = 0.4f * value2;
            themedPaint.setAlpha((int) (alpha5 * f8));
            canvas2.drawPath(this.path, themedPaint);
            themedPaint.setAlpha(alpha5);
            if (ChatActivity.this.themeDelegate.hasGradientService()) {
                int alpha6 = Theme.chat_actionBackgroundGradientDarkenPaint.getAlpha();
                if (z2) {
                    Theme.chat_actionBackgroundGradientDarkenPaint.setColor(i);
                }
                Theme.chat_actionBackgroundGradientDarkenPaint.setAlpha((int) (f8 * alpha6));
                canvas2.drawPath(this.path, Theme.chat_actionBackgroundGradientDarkenPaint);
                Theme.chat_actionBackgroundGradientDarkenPaint.setAlpha(alpha6);
            }
            if (f5 != 0.0f) {
                canvas2.restore();
            }
            float value3 = this.slidingOuterRingProgress.getValue() / f2;
            if (value3 != 0.0f && value3 != f) {
                float f9 = value3 + f;
                float strokeWidth = this.outlineActionBackgroundPaint.getStrokeWidth();
                float f10 = (f - value3) * strokeWidth;
                if (f10 != 0.0f) {
                    rectF2.set((int) ((measuredWidth - (AndroidUtilities.m1146dp(16.0f) * f9)) + f10), (int) ((top - (AndroidUtilities.m1146dp(16.0f) * f9)) + f10), (int) (((AndroidUtilities.m1146dp(16.0f) * f9) + measuredWidth) - f10), (int) ((top + (AndroidUtilities.m1146dp(16.0f) * f9)) - f10));
                    Theme.applyServiceShaderMatrix(getMeasuredWidth(), AndroidUtilities.displaySize.y, 0.0f, getY() + rectF2.top);
                    int alpha7 = this.outlineActionBackgroundPaint.getAlpha();
                    this.outlineActionBackgroundPaint.setAlpha((int) (alpha7 * value2));
                    this.outlineActionBackgroundPaint.setStrokeWidth(f10);
                    canvas2.drawRoundRect(rectF2, AndroidUtilities.m1146dp(16.0f) * f9, AndroidUtilities.m1146dp(16.0f) * f9, this.outlineActionBackgroundPaint);
                    this.outlineActionBackgroundPaint.setStrokeWidth(strokeWidth);
                    this.outlineActionBackgroundPaint.setAlpha(alpha7);
                    if (ChatActivity.this.themeDelegate.hasGradientService()) {
                        int alpha8 = this.outlineActionBackgroundDarkenPaint.getAlpha();
                        if (z2) {
                            this.outlineActionBackgroundDarkenPaint.setColor(i);
                        }
                        this.outlineActionBackgroundDarkenPaint.setAlpha((int) (alpha8 * value2));
                        this.outlineActionBackgroundDarkenPaint.setStrokeWidth(f10);
                        canvas2.drawRoundRect(rectF2, AndroidUtilities.m1146dp(16.0f) * f9, AndroidUtilities.m1146dp(16.0f) * f9, this.outlineActionBackgroundDarkenPaint);
                        this.outlineActionBackgroundDarkenPaint.setStrokeWidth(strokeWidth);
                    }
                }
            }
            Drawable themedDrawable = getThemedDrawable("drawableReplyIcon");
            themedDrawable.setAlpha((int) (value2 * 255.0f));
            themedDrawable.setBounds((int) (measuredWidth - ((themedDrawable.getIntrinsicWidth() / 2) * f4)), (int) (top - ((themedDrawable.getIntrinsicHeight() / 2) * f4)), (int) (measuredWidth + ((themedDrawable.getIntrinsicWidth() / 2) * f4)), (int) (top + ((themedDrawable.getIntrinsicHeight() / 2) * f4)));
            themedDrawable.draw(canvas2);
            themedDrawable.setColorFilter(new PorterDuffColorFilter(ColorUtils.setAlphaComponent(Theme.getColor(Theme.key_chat_serviceIcon), 255), PorterDuff.Mode.MULTIPLY));
            this.outlineActionBackgroundDarkenPaint.setColor(color);
            paint.setColor(color);
        }

        private void processTouchEvent(MotionEvent motionEvent) throws Resources.NotFoundException {
            TLRPC.Chat chat;
            if (motionEvent != null) {
                ChatActivity.this.wasManualScroll = true;
            }
            if (motionEvent != null && motionEvent.getAction() == 0 && !ChatActivity.this.startedTrackingSlidingView && !ChatActivity.this.maybeStartTrackingSlidingView && ChatActivity.this.slidingView == null && !((BaseFragment) ChatActivity.this).inPreviewMode) {
                View pressedChildView = getPressedChildView();
                if (pressedChildView instanceof ChatMessageCell) {
                    if (ChatActivity.this.slidingView != null) {
                        ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                    }
                    ChatActivity.this.slidingView = (ChatMessageCell) pressedChildView;
                    MessageObject messageObject = ChatActivity.this.slidingView.getMessageObject();
                    boolean zCanSendMessageToTopic = ChatActivity.this.canSendMessageToTopic(messageObject);
                    if ((ChatActivity.this.chatMode != 0 && ChatActivity.this.chatMode != 5 && ChatActivity.this.chatMode != 8 && (ChatActivity.this.chatMode != 3 || ChatActivity.this.threadMessageId != ChatActivity.this.getUserConfig().getClientUserId())) || ((ChatActivity.this.threadMessageObjects != null && ChatActivity.this.threadMessageObjects.contains(messageObject)) || ((ChatActivity.this.getMessageType(messageObject) == 1 && (messageObject.getDialogId() == ChatActivity.this.mergeDialogId || messageObject.needDrawBluredPreview())) || ((ChatActivity.this.currentEncryptedChat == null && messageObject.getId() < 0) || ((ChatActivity.this.bottomChannelButtonsLayout != null && ChatActivity.this.bottomViewsVisibilityController.getVisibility(3) > 0.0f && ((!ChatActivity.this.bottomOverlayChatWaitsReply || !zCanSendMessageToTopic) && !messageObject.wasJustSent)) || (((chat = ChatActivity.this.currentChat) != null && ((ChatObject.isNotInChat(chat) && !ChatActivity.this.isThreadChat()) || ((ChatObject.isChannel(ChatActivity.this.currentChat) && !ChatObject.canPost(ChatActivity.this.currentChat) && !ChatActivity.this.currentChat.megagroup) || !ChatObject.canSendMessages(ChatActivity.this.currentChat) || (ChatObject.isForum(ChatActivity.this.currentChat) && !zCanSendMessageToTopic)))) || ChatActivity.this.textSelectionHelper.isInSelectionMode())))))) {
                        ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                        ChatActivity.this.slidingView = null;
                        return;
                    } else {
                        this.startedTrackingPointerId = motionEvent.getPointerId(0);
                        ChatActivity.this.maybeStartTrackingSlidingView = true;
                        this.startedTrackingX = (int) motionEvent.getX();
                        this.startedTrackingY = (int) motionEvent.getY();
                        return;
                    }
                }
                return;
            }
            if (ChatActivity.this.slidingView != null && motionEvent != null && motionEvent.getAction() == 2 && motionEvent.getPointerId(0) == this.startedTrackingPointerId) {
                int iMax = Math.max(AndroidUtilities.m1146dp(-80.0f), Math.min(0, (int) (motionEvent.getX() - this.startedTrackingX)));
                int iAbs = Math.abs(((int) motionEvent.getY()) - this.startedTrackingY);
                if (getScrollState() == 0 && ChatActivity.this.maybeStartTrackingSlidingView && !ChatActivity.this.startedTrackingSlidingView && iMax <= (-AndroidUtilities.getPixelsInCM(0.4f, true)) && Math.abs(iMax) / 3 > iAbs) {
                    MotionEvent motionEventObtain = MotionEvent.obtain(0L, 0L, 3, 0.0f, 0.0f, 0);
                    ChatActivity.this.slidingView.onTouchEvent(motionEventObtain);
                    super.onInterceptTouchEvent(motionEventObtain);
                    motionEventObtain.recycle();
                    ChatActivity.this.chatLayoutManager.setCanScrollVertically(false);
                    ChatActivity.this.maybeStartTrackingSlidingView = false;
                    ChatActivity.this.startedTrackingSlidingView = true;
                    this.startedTrackingX = (int) motionEvent.getX();
                    if (getParent() != null) {
                        getParent().requestDisallowInterceptTouchEvent(true);
                        return;
                    }
                    return;
                }
                if (ChatActivity.this.startedTrackingSlidingView) {
                    if (Math.abs(iMax) >= AndroidUtilities.m1146dp(50.0f)) {
                        if (!this.wasTrackingVibrate) {
                            try {
                                performHapticFeedback(3, 2);
                            } catch (Exception unused) {
                            }
                            this.wasTrackingVibrate = true;
                        }
                    } else {
                        this.wasTrackingVibrate = false;
                    }
                    float f = iMax;
                    ChatActivity.this.slidingView.setSlidingOffset(f);
                    MessageObject messageObject2 = ChatActivity.this.slidingView.getMessageObject();
                    if (messageObject2.isRoundVideo() || messageObject2.isVideo()) {
                        ChatActivity.this.updateTextureViewPosition(false, false);
                    }
                    setGroupTranslationX(ChatActivity.this.slidingView, f);
                    invalidate();
                    return;
                }
                return;
            }
            if (ChatActivity.this.slidingView != null) {
                if (motionEvent != null) {
                    if (motionEvent.getPointerId(0) != this.startedTrackingPointerId) {
                        return;
                    }
                    if (motionEvent.getAction() != 3 && motionEvent.getAction() != 1 && motionEvent.getAction() != 6) {
                        return;
                    }
                }
                if (motionEvent != null && motionEvent.getAction() != 3 && Math.abs(ChatActivity.this.slidingView.getNonAnimationTranslationX(false)) >= AndroidUtilities.m1146dp(50.0f)) {
                    ChatActivity chatActivity = ChatActivity.this;
                    chatActivity.showFieldPanelForReply(chatActivity.slidingView.getMessageObject());
                }
                float slidingOffsetX = ChatActivity.this.slidingView.getSlidingOffsetX();
                this.endTrackingX = slidingOffsetX;
                if (slidingOffsetX == 0.0f) {
                    ChatActivity.this.slidingView = null;
                }
                this.lastTrackingAnimationTime = System.currentTimeMillis();
                this.trackAnimationProgress = 0.0f;
                invalidate();
                ChatActivity.this.maybeStartTrackingSlidingView = false;
                ChatActivity.this.startedTrackingSlidingView = false;
                ChatActivity.this.chatLayoutManager.setCanScrollVertically(true);
            }
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, androidx.recyclerview.widget.RecyclerView, android.view.View
        public boolean onTouchEvent(MotionEvent motionEvent) throws Resources.NotFoundException {
            ChatActivity.this.textSelectionHelper.checkSelectionCancel(motionEvent);
            if (motionEvent.getAction() == 0) {
                ChatActivity.this.scrollByTouch = true;
            }
            if (ChatActivity.this.pullingDownOffset != 0.0f && (motionEvent.getAction() == 1 || motionEvent.getAction() == 3)) {
                float fMin = Math.min(1.0f, ChatActivity.this.pullingDownOffset / AndroidUtilities.m1146dp(110.0f));
                if (motionEvent.getAction() == 1 && fMin == 1.0f && ChatActivity.this.pullingDownDrawable != null && !ChatActivity.this.pullingDownDrawable.emptyStub) {
                    if (ChatActivity.this.pullingDownDrawable.animationIsRunning()) {
                        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, ChatActivity.this.pullingDownOffset + AndroidUtilities.m1146dp(8.0f));
                        ChatActivity.this.pullingDownBackAnimator = valueAnimatorOfFloat;
                        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda0
                            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                this.f$0.lambda$onTouchEvent$3(valueAnimator);
                            }
                        });
                        valueAnimatorOfFloat.setDuration(200L);
                        valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.DEFAULT);
                        valueAnimatorOfFloat.start();
                        ChatActivity.this.pullingDownDrawable.runOnAnimationFinish(new Runnable() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda1
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$onTouchEvent$4();
                            }
                        });
                    } else {
                        ChatActivity.this.animateToNextChat();
                    }
                } else if (ChatActivity.this.pullingDownDrawable != null && ChatActivity.this.pullingDownDrawable.emptyStub && System.currentTimeMillis() - ChatActivity.this.pullingDownDrawable.lastShowingReleaseTime < 500 && ChatActivity.this.pullingDownDrawable.animateSwipeToRelease) {
                    AnimatorSet animatorSet = new AnimatorSet();
                    ChatActivity.this.pullingDownBackAnimator = animatorSet;
                    if (ChatActivity.this.pullingDownDrawable != null) {
                        ChatActivity.this.animatorPullingDownContainerVisibility.setValue(false, true);
                    }
                    ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, AndroidUtilities.m1146dp(111.0f));
                    valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda2
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$onTouchEvent$5(valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat2.setDuration(400L);
                    valueAnimatorOfFloat2.setInterpolator(CubicBezierInterpolator.DEFAULT);
                    ValueAnimator valueAnimatorOfFloat3 = ValueAnimator.ofFloat(AndroidUtilities.m1146dp(111.0f), 0.0f);
                    valueAnimatorOfFloat3.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda3
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$onTouchEvent$6(valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat3.setStartDelay(600L);
                    valueAnimatorOfFloat3.setDuration(250L);
                    valueAnimatorOfFloat3.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                    animatorSet.playSequentially(valueAnimatorOfFloat2, valueAnimatorOfFloat3);
                    animatorSet.start();
                } else {
                    ValueAnimator valueAnimatorOfFloat4 = ValueAnimator.ofFloat(ChatActivity.this.pullingDownOffset, 0.0f);
                    ChatActivity.this.pullingDownBackAnimator = valueAnimatorOfFloat4;
                    if (ChatActivity.this.pullingDownDrawable != null) {
                        ChatActivity.this.animatorPullingDownContainerVisibility.setValue(false, true);
                    }
                    valueAnimatorOfFloat4.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$18$$ExternalSyntheticLambda4
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$onTouchEvent$7(valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat4.setDuration(250L);
                    valueAnimatorOfFloat4.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                    valueAnimatorOfFloat4.start();
                }
            }
            if (isFastScrollAnimationRunning()) {
                return false;
            }
            boolean zOnTouchEvent = super.onTouchEvent(motionEvent);
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport()) {
                return zOnTouchEvent;
            }
            processTouchEvent(motionEvent);
            return ChatActivity.this.startedTrackingSlidingView || zOnTouchEvent;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onTouchEvent$3(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onTouchEvent$4() {
            ChatActivity.this.animateToNextChat();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onTouchEvent$5(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onTouchEvent$6(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onTouchEvent$7(ValueAnimator valueAnimator) {
            ChatActivity.this.pullingDownOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.chatListView.invalidate();
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup, android.view.ViewParent
        public void requestDisallowInterceptTouchEvent(boolean z) throws Resources.NotFoundException {
            super.requestDisallowInterceptTouchEvent(z);
            if (ChatActivity.this.slidingView != null) {
                processTouchEvent(null);
            }
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView
        protected void onChildPressed(View view, float f, float f2, boolean z) {
            MessageObject.GroupedMessages currentMessagesGroup;
            super.onChildPressed(view, f, f2, z);
            if (view instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) view;
                MessageObject messageObject = chatMessageCell.getMessageObject();
                if (messageObject.isMusic() || messageObject.isDocument() || (currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup()) == null) {
                    return;
                }
                int childCount = getChildCount();
                for (int i = 0; i < childCount; i++) {
                    View childAt = getChildAt(i);
                    if (childAt != view && (childAt instanceof ChatMessageCell)) {
                        ChatMessageCell chatMessageCell2 = (ChatMessageCell) childAt;
                        if (chatMessageCell2.getCurrentMessagesGroup() == currentMessagesGroup) {
                            chatMessageCell2.setPressed(z);
                        }
                    }
                }
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView, android.view.View
        public void onDraw(Canvas canvas) {
            float measuredHeight;
            super.onDraw(canvas);
            if (ChatActivity.this.slidingView != null) {
                float slidingOffsetX = ChatActivity.this.slidingView.getSlidingOffsetX();
                if (!ChatActivity.this.maybeStartTrackingSlidingView && !ChatActivity.this.startedTrackingSlidingView && this.endTrackingX != 0.0f && slidingOffsetX != 0.0f) {
                    long jCurrentTimeMillis = System.currentTimeMillis();
                    float f = this.trackAnimationProgress + ((jCurrentTimeMillis - this.lastTrackingAnimationTime) / 180.0f);
                    this.trackAnimationProgress = f;
                    if (f > 1.0f) {
                        this.trackAnimationProgress = 1.0f;
                    }
                    this.lastTrackingAnimationTime = jCurrentTimeMillis;
                    float interpolation = this.endTrackingX * (1.0f - AndroidUtilities.decelerateInterpolator.getInterpolation(this.trackAnimationProgress));
                    if (interpolation == 0.0f) {
                        this.endTrackingX = 0.0f;
                    }
                    setGroupTranslationX(ChatActivity.this.slidingView, interpolation);
                    ChatActivity.this.slidingView.setSlidingOffset(interpolation);
                    MessageObject messageObject = ChatActivity.this.slidingView.getMessageObject();
                    if (messageObject.isRoundVideo() || messageObject.isVideo()) {
                        ChatActivity.this.updateTextureViewPosition(false, false);
                    }
                    float f2 = this.trackAnimationProgress;
                    if (f2 == 1.0f || f2 == 0.0f) {
                        ChatActivity.this.slidingView.setSlidingOffset(0.0f);
                        ChatActivity.this.slidingView = null;
                    }
                    invalidate();
                }
                drawReplyButton(canvas);
            }
            if (ChatActivity.this.pullingDownOffset != 0.0f && !ChatActivity.this.isInPreviewMode()) {
                ChatActivity chatActivity = ChatActivity.this;
                if (!chatActivity.isInsideContainer && chatActivity.chatMode != 3 && ChatActivity.this.chatMode != 1) {
                    canvas.save();
                    if (ChatActivity.this.pullingDownAnimateProgress != 0.0f) {
                        measuredHeight = ((ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.pullingDownOffset) + (ChatActivity.this.pullingDownAnimateToActivity == null ? 0.0f : ChatActivity.this.pullingDownAnimateToActivity.pullingBottomOffset)) * ChatActivity.this.pullingDownAnimateProgress;
                    } else {
                        measuredHeight = 0.0f;
                    }
                    canvas.translate(0.0f, (getMeasuredHeight() - ChatActivity.this.blurredViewBottomOffset) - measuredHeight);
                    if (ChatActivity.this.pullingDownDrawable == null) {
                        ChatActivity chatActivity2 = ChatActivity.this;
                        int i = ((BaseFragment) chatActivity2).currentAccount;
                        ChatActivity chatActivity3 = ChatActivity.this;
                        View view = chatActivity3.fragmentView;
                        long j = chatActivity3.dialog_id;
                        ChatActivity chatActivity4 = ChatActivity.this;
                        chatActivity2.pullingDownDrawable = new ChatPullingDownDrawable(i, view, j, chatActivity4.dialogFolderId, chatActivity4.dialogFilterId, chatActivity4.getTopicId(), ChatActivity.this.themeDelegate);
                        ChatActivity.this.pullingDownDrawable.progressToBottomPanel = ChatActivity.this.animatorPullingDownContainerVisibility.getFloatValue();
                        if (ChatActivity.this.nextChannels != null && !ChatActivity.this.nextChannels.isEmpty()) {
                            ChatActivity.this.pullingDownDrawable.updateDialog((TLRPC.Chat) ChatActivity.this.nextChannels.get(0));
                        } else {
                            ChatActivity chatActivity5 = ChatActivity.this;
                            if (chatActivity5.isTopic) {
                                chatActivity5.pullingDownDrawable.updateTopic();
                            } else {
                                chatActivity5.pullingDownDrawable.updateDialog();
                            }
                        }
                        ChatActivity.this.pullingDownDrawable.onAttach();
                    }
                    ChatActivity.this.pullingDownDrawable.setWidth(getMeasuredWidth() - (ChatActivity.this.isSideMenued() ? AndroidUtilities.m1146dp(71.0f) : 0));
                    float fMin = Math.min(1.0f, ChatActivity.this.pullingDownOffset / AndroidUtilities.m1146dp(110.0f));
                    canvas.translate(ChatActivity.this.isSideMenued() ? AndroidUtilities.lerp(AndroidUtilities.m1146dp(32.0f), AndroidUtilities.m1146dp(71.0f), ChatActivity.this.getSideMenuAlpha()) : 0.0f, -(ChatActivity.this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + AndroidUtilities.m1146dp(10.0f) + ChatActivity.this.chatInputViewsContainer.getInputBubbleHeight()));
                    ChatActivity.this.pullingDownDrawable.draw(canvas, ChatActivity.this.chatListView, fMin, 1.0f - ChatActivity.this.pullingDownAnimateProgress);
                    canvas.restore();
                    if (ChatActivity.this.pullingDownAnimateToActivity != null) {
                        canvas.saveLayerAlpha(0.0f, 0.0f, ChatActivity.this.pullingDownAnimateToActivity.chatListView.getMeasuredWidth(), ChatActivity.this.pullingDownAnimateToActivity.chatListView.getMeasuredHeight(), (int) (ChatActivity.this.pullingDownAnimateProgress * 255.0f), 31);
                        canvas.translate(0.0f, (getMeasuredHeight() - ChatActivity.this.pullingDownOffset) - measuredHeight);
                        ChatActivity.this.pullingDownAnimateToActivity.chatListView.draw(canvas);
                        canvas.restore();
                        return;
                    }
                    return;
                }
            }
            if (ChatActivity.this.pullingDownDrawable != null) {
                ChatActivity.this.pullingDownDrawable.reset();
            }
        }

        /*  JADX ERROR: NullPointerException in pass: LoopRegionVisitor
            java.lang.NullPointerException: Cannot invoke "jadx.core.dex.instructions.args.SSAVar.use(jadx.core.dex.instructions.args.RegisterArg)" because "ssaVar" is null
            	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:493)
            	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:496)
            */
        /* JADX WARN: Removed duplicated region for block: B:72:0x01a2 A[PHI: r3
          0x01a2: PHI (r3v40 int) = (r3v34 int), (r3v45 int) binds: [B:71:0x01a0, B:58:0x016c] A[DONT_GENERATE, DONT_INLINE]] */
        @Override // androidx.recyclerview.widget.RecyclerView, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void draw(android.graphics.Canvas r24) {
            /*
                Method dump skipped, instructions count: 1235
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C306218.draw(android.graphics.Canvas):void");
        }

        private void updateSkeletonColors() {
            boolean z = ColorUtils.calculateLuminance(getThemedColor(Theme.key_windowBackgroundWhite)) <= 0.699999988079071d;
            int i = Theme.key_listSelector;
            int iBlendARGB = ColorUtils.blendARGB(getThemedColor(i), Color.argb(z ? 33 : 3, 255, 255, 255), z ? 0.9f : 0.5f);
            int alphaComponent = ColorUtils.setAlphaComponent(getThemedColor(i), z ? 24 : ChatActivity.SKELETON_LIGHT_OVERLAY_ALPHA);
            if (ChatActivity.this.skeletonColor1 == alphaComponent && ChatActivity.this.skeletonColor0 == iBlendARGB) {
                return;
            }
            ChatActivity.this.skeletonColor0 = iBlendARGB;
            ChatActivity.this.skeletonColor1 = alphaComponent;
            ChatActivity chatActivity = ChatActivity.this;
            ChatActivity chatActivity2 = ChatActivity.this;
            int iM1146dp = AndroidUtilities.m1146dp(200.0f);
            chatActivity2.skeletonGradientWidth = iM1146dp;
            Shader.TileMode tileMode = Shader.TileMode.CLAMP;
            chatActivity.skeletonGradient = new LinearGradient(0.0f, 0.0f, iM1146dp, 0.0f, new int[]{alphaComponent, iBlendARGB, iBlendARGB, alphaComponent}, new float[]{0.0f, 0.4f, 0.6f, 1.0f}, tileMode);
            ChatActivity chatActivity3 = ChatActivity.this;
            chatActivity3.skeletonTotalTranslation = (-chatActivity3.skeletonGradientWidth) * 2;
            ChatActivity.this.skeletonPaint.setShader(ChatActivity.this.skeletonGradient);
            int iArgb = Color.argb(z ? 43 : 96, 255, 255, 255);
            ChatActivity.this.skeletonOutlineGradient = new LinearGradient(0.0f, 0.0f, ChatActivity.this.skeletonGradientWidth, 0.0f, new int[]{0, iArgb, iArgb, 0}, new float[]{0.0f, 0.4f, 0.6f, 1.0f}, tileMode);
            ChatActivity.this.skeletonOutlinePaint.setShader(ChatActivity.this.skeletonOutlineGradient);
        }

        private void updateSkeletonGradient() {
            long jElapsedRealtime = SystemClock.elapsedRealtime();
            long jAbs = Math.abs(ChatActivity.this.skeletonLastUpdateTime - jElapsedRealtime);
            if (jAbs > 17) {
                jAbs = 16;
            }
            if (jAbs < 4) {
                jAbs = 0;
            }
            int width = getWidth();
            ChatActivity.this.skeletonLastUpdateTime = jElapsedRealtime;
            ChatActivity.this.skeletonTotalTranslation = (int) (r0.skeletonTotalTranslation + ((jAbs * width) / 400.0f));
            if (ChatActivity.this.skeletonTotalTranslation >= width * 2) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.skeletonTotalTranslation = (-chatActivity.skeletonGradientWidth) * 2;
            }
            ChatActivity.this.skeletonMatrix.setTranslate(ChatActivity.this.skeletonTotalTranslation, 0.0f);
            if (ChatActivity.this.skeletonGradient != null) {
                ChatActivity.this.skeletonGradient.setLocalMatrix(ChatActivity.this.skeletonMatrix);
            }
            ChatActivity.this.skeletonOutlineMatrix.setTranslate(ChatActivity.this.skeletonTotalTranslation, 0.0f);
            if (ChatActivity.this.skeletonOutlineGradient != null) {
                ChatActivity.this.skeletonOutlineGradient.setLocalMatrix(ChatActivity.this.skeletonOutlineMatrix);
            }
        }

        @Override // org.telegram.p023ui.Components.RecyclerListView, android.view.ViewGroup, android.view.View
        protected void dispatchDraw(Canvas canvas) {
            ChatActivity.this.drawLaterRoundProgressCell = null;
            this.invalidated = false;
            canvas.save();
            if (ChatActivity.this.fragmentTransition == null || (ChatActivity.this.fromPullingDownTransition && !ChatActivity.this.toPullingDownTransition)) {
                boolean z = ChatActivity.this.isInsideContainer;
            }
            this.selectorRect.setEmpty();
            if (ChatActivity.this.pullingDownOffset != 0.0f) {
                int iSave = canvas.save();
                float measuredHeight = ChatActivity.this.pullingDownAnimateProgress != 0.0f ? (ChatActivity.this.chatListView.getMeasuredHeight() - ChatActivity.this.pullingDownOffset) * ChatActivity.this.pullingDownAnimateProgress : 0.0f;
                ChatActivity chatActivity = ChatActivity.this;
                float f = (-chatActivity.pullingDownOffset) - measuredHeight;
                chatActivity.drawingChatListViewYoffset = f;
                canvas.translate(0.0f, f);
                drawChatBackgroundElements(canvas);
                super.dispatchDraw(canvas);
                drawChatForegroundElements(canvas);
                canvas.restoreToCount(iSave);
            } else {
                drawChatBackgroundElements(canvas);
                super.dispatchDraw(canvas);
                drawChatForegroundElements(canvas);
            }
            canvas.restore();
        }

        @Override // org.telegram.ui.ChatActivity.ChatListRecyclerView
        protected void drawChatForegroundElements(Canvas canvas) {
            float f;
            int size = this.drawTimeAfter.size();
            boolean z = false;
            if (size > 0) {
                for (int i = 0; i < size; i++) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) this.drawTimeAfter.get(i);
                    canvas.save();
                    canvas.translate(chatMessageCell.getLeft() + chatMessageCell.getNonAnimationTranslationX(false), chatMessageCell.getY() + chatMessageCell.getPaddingTop());
                    chatMessageCell.drawTime(canvas, chatMessageCell.shouldDrawAlphaLayer() ? chatMessageCell.getAlpha() : 1.0f, true);
                    canvas.restore();
                }
                this.drawTimeAfter.clear();
            }
            int size2 = this.drawNamesAfter.size();
            if (size2 > 0) {
                for (int i2 = 0; i2 < size2; i2++) {
                    ChatMessageCell chatMessageCell2 = (ChatMessageCell) this.drawNamesAfter.get(i2);
                    float left = chatMessageCell2.getLeft() + chatMessageCell2.getNonAnimationTranslationX(false);
                    float y = chatMessageCell2.getY() + chatMessageCell2.getPaddingTop();
                    float alpha = chatMessageCell2.shouldDrawAlphaLayer() ? chatMessageCell2.getAlpha() : 1.0f;
                    canvas.save();
                    canvas.translate(left, y);
                    chatMessageCell2.setInvalidatesParent(true);
                    chatMessageCell2.drawNamesLayout(canvas, alpha);
                    chatMessageCell2.setInvalidatesParent(false);
                    canvas.restore();
                }
                this.drawNamesAfter.clear();
            }
            int size3 = this.drawCaptionAfter.size();
            if (size3 > 0) {
                int i3 = 0;
                while (i3 < size3) {
                    ChatMessageCell chatMessageCell3 = (ChatMessageCell) this.drawCaptionAfter.get(i3);
                    boolean z2 = chatMessageCell3.getCurrentPosition() != null && (chatMessageCell3.getCurrentPosition().flags & 1) == 0;
                    float alpha2 = chatMessageCell3.shouldDrawAlphaLayer() ? chatMessageCell3.getAlpha() : 1.0f;
                    float left2 = chatMessageCell3.getLeft() + chatMessageCell3.getNonAnimationTranslationX(z);
                    float y2 = chatMessageCell3.getY() + chatMessageCell3.getPaddingTop();
                    canvas.save();
                    MessageObject.GroupedMessages currentMessagesGroup = chatMessageCell3.getCurrentMessagesGroup();
                    if (currentMessagesGroup != null && currentMessagesGroup.transitionParams.backgroundChangeBounds) {
                        float nonAnimationTranslationX = chatMessageCell3.getNonAnimationTranslationX(true);
                        MessageObject.GroupedMessages.TransitionParams transitionParams = currentMessagesGroup.transitionParams;
                        float f2 = transitionParams.left + nonAnimationTranslationX + transitionParams.offsetLeft;
                        float translationY = transitionParams.top + transitionParams.offsetTop;
                        float f3 = transitionParams.right + nonAnimationTranslationX + transitionParams.offsetRight;
                        float translationY2 = transitionParams.bottom + transitionParams.offsetBottom;
                        if (!transitionParams.backgroundChangeBounds) {
                            translationY += chatMessageCell3.getTranslationY();
                            translationY2 += chatMessageCell3.getTranslationY();
                        }
                        canvas.clipRect(f2 + AndroidUtilities.m1146dp(8.0f), translationY + AndroidUtilities.m1146dp(8.0f), f3 - AndroidUtilities.m1146dp(8.0f), translationY2 - AndroidUtilities.m1146dp(8.0f));
                    }
                    if (chatMessageCell3.getTransitionParams().wasDraw) {
                        canvas.translate(left2, y2);
                        chatMessageCell3.setInvalidatesParent(true);
                        chatMessageCell3.drawCaptionLayout(canvas, z2, alpha2);
                        chatMessageCell3.setInvalidatesParent(false);
                    }
                    canvas.restore();
                    i3++;
                    z = false;
                }
                f = 8.0f;
                this.drawCaptionAfter.clear();
            } else {
                f = 8.0f;
            }
            int size4 = this.drawReactionsAfter.size();
            if (size4 > 0) {
                for (int i4 = 0; i4 < size4; i4++) {
                    ChatMessageCell chatMessageCell4 = (ChatMessageCell) this.drawReactionsAfter.get(i4);
                    boolean z3 = chatMessageCell4.getCurrentPosition() != null && (chatMessageCell4.getCurrentPosition().flags & 1) == 0;
                    float alpha3 = chatMessageCell4.shouldDrawAlphaLayer() ? chatMessageCell4.getAlpha() : 1.0f;
                    float left3 = chatMessageCell4.getLeft() + chatMessageCell4.getNonAnimationTranslationX(false);
                    float y3 = chatMessageCell4.getY() + chatMessageCell4.getPaddingTop();
                    canvas.save();
                    MessageObject.GroupedMessages currentMessagesGroup2 = chatMessageCell4.getCurrentMessagesGroup();
                    if (currentMessagesGroup2 != null && currentMessagesGroup2.transitionParams.backgroundChangeBounds) {
                        float nonAnimationTranslationX2 = chatMessageCell4.getNonAnimationTranslationX(true);
                        MessageObject.GroupedMessages.TransitionParams transitionParams2 = currentMessagesGroup2.transitionParams;
                        float f4 = transitionParams2.left + nonAnimationTranslationX2 + transitionParams2.offsetLeft;
                        float translationY3 = transitionParams2.top + transitionParams2.offsetTop;
                        float f5 = transitionParams2.right + nonAnimationTranslationX2 + transitionParams2.offsetRight;
                        float translationY4 = transitionParams2.bottom + transitionParams2.offsetBottom;
                        if (!transitionParams2.backgroundChangeBounds) {
                            translationY3 += chatMessageCell4.getTranslationY();
                            translationY4 += chatMessageCell4.getTranslationY();
                        }
                        canvas.clipRect(f4 + AndroidUtilities.m1146dp(f), translationY3 + AndroidUtilities.m1146dp(f), f5 - AndroidUtilities.m1146dp(f), translationY4 - AndroidUtilities.m1146dp(f));
                    }
                    if (!z3 && chatMessageCell4.getTransitionParams().wasDraw) {
                        canvas.translate(left3, y3);
                        chatMessageCell4.setInvalidatesParent(true);
                        chatMessageCell4.drawReactionsLayout(canvas, alpha3, null);
                        chatMessageCell4.drawCommentLayout(canvas, alpha3);
                        chatMessageCell4.setInvalidatesParent(false);
                    }
                    canvas.restore();
                }
                this.drawReactionsAfter.clear();
            }
        }

        /* JADX WARN: Removed duplicated region for block: B:140:0x03d8  */
        @Override // org.telegram.ui.ChatActivity.ChatListRecyclerView
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void drawChatBackgroundElements(android.graphics.Canvas r29) {
            /*
                Method dump skipped, instructions count: 1630
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C306218.drawChatBackgroundElements(android.graphics.Canvas):void");
        }

        /* JADX WARN: Removed duplicated region for block: B:158:0x029d  */
        /* JADX WARN: Removed duplicated region for block: B:234:0x0455  */
        /* JADX WARN: Removed duplicated region for block: B:237:0x0464  */
        /* JADX WARN: Removed duplicated region for block: B:238:0x046a  */
        /* JADX WARN: Removed duplicated region for block: B:241:0x0472  */
        /* JADX WARN: Removed duplicated region for block: B:242:0x047a  */
        /* JADX WARN: Removed duplicated region for block: B:248:0x04b1  */
        /* JADX WARN: Removed duplicated region for block: B:256:0x04c5  */
        /* JADX WARN: Removed duplicated region for block: B:258:0x04cd  */
        /* JADX WARN: Removed duplicated region for block: B:268:0x04fe  */
        /* JADX WARN: Removed duplicated region for block: B:330:0x0613  */
        /* JADX WARN: Removed duplicated region for block: B:333:0x061f  */
        /* JADX WARN: Removed duplicated region for block: B:340:0x0643  */
        /* JADX WARN: Removed duplicated region for block: B:347:0x065f  */
        /* JADX WARN: Removed duplicated region for block: B:350:0x0670  */
        /* JADX WARN: Removed duplicated region for block: B:351:0x06a2  */
        /* JADX WARN: Removed duplicated region for block: B:353:0x06af  */
        /* JADX WARN: Removed duplicated region for block: B:356:0x06c0  */
        /* JADX WARN: Removed duplicated region for block: B:357:0x06ef  */
        /* JADX WARN: Removed duplicated region for block: B:363:0x0704  */
        /* JADX WARN: Removed duplicated region for block: B:50:0x00ba  */
        /* JADX WARN: Removed duplicated region for block: B:52:0x00c1  */
        /* JADX WARN: Removed duplicated region for block: B:62:0x00ea  */
        @Override // androidx.recyclerview.widget.RecyclerView, android.view.ViewGroup
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean drawChild(android.graphics.Canvas r23, android.view.View r24, long r25) {
            /*
                Method dump skipped, instructions count: 1809
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C306218.drawChild(android.graphics.Canvas, android.view.View, long):boolean");
        }

        @Override // android.view.View
        public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo accessibilityNodeInfo) {
            if (ChatActivity.this.currentEncryptedChat != null) {
                return;
            }
            super.onInitializeAccessibilityNodeInfo(accessibilityNodeInfo);
            AccessibilityNodeInfo.CollectionInfo collectionInfo = accessibilityNodeInfo.getCollectionInfo();
            if (collectionInfo != null) {
                accessibilityNodeInfo.setCollectionInfo(AccessibilityNodeInfo.CollectionInfo.obtain(collectionInfo.getRowCount(), 1, false));
            }
        }

        @Override // android.view.View
        public AccessibilityNodeInfo createAccessibilityNodeInfo() {
            if (ChatActivity.this.currentEncryptedChat != null) {
                return null;
            }
            return super.createAccessibilityNodeInfo();
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:159:0x048c  */
    /* JADX WARN: Removed duplicated region for block: B:168:0x04c0  */
    /* JADX WARN: Removed duplicated region for block: B:176:0x04cf  */
    /* JADX WARN: Removed duplicated region for block: B:189:0x055b  */
    /* JADX WARN: Removed duplicated region for block: B:192:0x056b  */
    /* JADX WARN: Removed duplicated region for block: B:203:0x05a8  */
    /* JADX WARN: Removed duplicated region for block: B:204:0x05ab  */
    /* JADX WARN: Removed duplicated region for block: B:222:0x0617  */
    /* JADX WARN: Removed duplicated region for block: B:229:0x0632  */
    /* JADX WARN: Removed duplicated region for block: B:236:0x0657  */
    /* JADX WARN: Removed duplicated region for block: B:239:0x066b  */
    /* JADX WARN: Removed duplicated region for block: B:244:0x068a  */
    /* JADX WARN: Removed duplicated region for block: B:247:0x069d  */
    /* JADX WARN: Removed duplicated region for block: B:252:0x06b9  */
    /* JADX WARN: Removed duplicated region for block: B:260:0x06dd  */
    /* JADX WARN: Removed duplicated region for block: B:269:0x0706  */
    /* JADX WARN: Removed duplicated region for block: B:274:0x072a  */
    /* JADX WARN: Removed duplicated region for block: B:292:0x07cb  */
    /* JADX WARN: Removed duplicated region for block: B:295:0x081d  */
    /* JADX WARN: Removed duplicated region for block: B:302:0x0899  */
    /* JADX WARN: Removed duplicated region for block: B:313:0x08c0  */
    /* JADX WARN: Removed duplicated region for block: B:322:0x08f8  */
    /* JADX WARN: Removed duplicated region for block: B:335:0x092a  */
    /* JADX WARN: Removed duplicated region for block: B:339:0x0969  */
    /* JADX WARN: Removed duplicated region for block: B:346:0x09b5  */
    /* JADX WARN: Removed duplicated region for block: B:357:0x09ce  */
    /* JADX WARN: Removed duplicated region for block: B:358:0x09d2  */
    /* JADX WARN: Removed duplicated region for block: B:375:0x0a5e  */
    /* JADX WARN: Removed duplicated region for block: B:376:0x0a61  */
    /* JADX WARN: Removed duplicated region for block: B:379:0x0a7c  */
    /* JADX WARN: Removed duplicated region for block: B:388:0x0ab5  */
    /* JADX WARN: Removed duplicated region for block: B:396:0x0ad9  */
    /* JADX WARN: Removed duplicated region for block: B:399:0x0b25  */
    /* JADX WARN: Removed duplicated region for block: B:404:0x0b2f  */
    /* JADX WARN: Removed duplicated region for block: B:407:0x0b46  */
    /* JADX WARN: Removed duplicated region for block: B:411:0x0b55  */
    /* JADX WARN: Removed duplicated region for block: B:414:0x0bad  */
    /* JADX WARN: Removed duplicated region for block: B:417:0x0bbf  */
    /* JADX WARN: Removed duplicated region for block: B:420:0x0bc4  */
    /* JADX WARN: Removed duplicated region for block: B:425:0x0be0  */
    /* JADX WARN: Removed duplicated region for block: B:428:0x0c28  */
    /* JADX WARN: Removed duplicated region for block: B:430:0x0c30  */
    /* JADX WARN: Removed duplicated region for block: B:433:0x0c60  */
    /* JADX WARN: Removed duplicated region for block: B:436:0x0cdd  */
    /* JADX WARN: Removed duplicated region for block: B:439:0x0dc9  */
    /* JADX WARN: Removed duplicated region for block: B:442:0x0e74  */
    /* JADX WARN: Removed duplicated region for block: B:445:0x0eb9  */
    /* JADX WARN: Removed duplicated region for block: B:447:0x0ebf  */
    /* JADX WARN: Removed duplicated region for block: B:450:0x0ee8  */
    /* JADX WARN: Removed duplicated region for block: B:451:0x0eea  */
    /* JADX WARN: Removed duplicated region for block: B:454:0x0f02  */
    /* JADX WARN: Removed duplicated region for block: B:455:0x0f05  */
    /* JADX WARN: Removed duplicated region for block: B:458:0x0f2b  */
    /* JADX WARN: Removed duplicated region for block: B:461:0x0f9c  */
    /* JADX WARN: Removed duplicated region for block: B:465:0x0faa  */
    /* JADX WARN: Removed duplicated region for block: B:468:0x103e  */
    /* JADX WARN: Removed duplicated region for block: B:469:0x1043  */
    /* JADX WARN: Removed duplicated region for block: B:472:0x10db  */
    /* JADX WARN: Removed duplicated region for block: B:477:0x1173  */
    /* JADX WARN: Removed duplicated region for block: B:478:0x1175  */
    /* JADX WARN: Removed duplicated region for block: B:481:0x1191  */
    /* JADX WARN: Removed duplicated region for block: B:482:0x119c  */
    /* JADX WARN: Removed duplicated region for block: B:485:0x11ba  */
    /* JADX WARN: Removed duplicated region for block: B:488:0x11e8  */
    /* JADX WARN: Removed duplicated region for block: B:493:0x11f6  */
    /* JADX WARN: Removed duplicated region for block: B:496:0x1204  */
    /* JADX WARN: Removed duplicated region for block: B:499:0x120d  */
    /* JADX WARN: Removed duplicated region for block: B:501:0x1211  */
    /* JADX WARN: Removed duplicated region for block: B:504:0x121f  */
    /* JADX WARN: Removed duplicated region for block: B:506:0x1225  */
    /* JADX WARN: Removed duplicated region for block: B:509:0x126e  */
    /* JADX WARN: Removed duplicated region for block: B:512:0x12db  */
    /* JADX WARN: Removed duplicated region for block: B:515:0x1473  */
    /* JADX WARN: Removed duplicated region for block: B:522:0x1485  */
    /* JADX WARN: Removed duplicated region for block: B:526:0x14b9  */
    /* JADX WARN: Removed duplicated region for block: B:536:0x16d5  */
    /* JADX WARN: Removed duplicated region for block: B:557:0x17f0  */
    /* JADX WARN: Removed duplicated region for block: B:560:0x182a  */
    /* JADX WARN: Removed duplicated region for block: B:567:0x1847  */
    /* JADX WARN: Removed duplicated region for block: B:570:0x1899  */
    /* JADX WARN: Removed duplicated region for block: B:573:0x18b3  */
    /* JADX WARN: Removed duplicated region for block: B:579:0x1916  */
    /* JADX WARN: Removed duplicated region for block: B:582:0x1966  */
    /* JADX WARN: Removed duplicated region for block: B:583:0x1971  */
    /* JADX WARN: Removed duplicated region for block: B:588:0x1999  */
    /* JADX WARN: Removed duplicated region for block: B:592:0x19d8  */
    /* JADX WARN: Removed duplicated region for block: B:593:0x19e1  */
    /* JADX WARN: Removed duplicated region for block: B:596:0x1a83  */
    /* JADX WARN: Removed duplicated region for block: B:599:0x1ad7  */
    /* JADX WARN: Removed duplicated region for block: B:600:0x1b04  */
    /* JADX WARN: Removed duplicated region for block: B:603:0x1b0a  */
    /* JADX WARN: Removed duplicated region for block: B:606:0x1b2c  */
    /* JADX WARN: Removed duplicated region for block: B:608:0x1b34  */
    /* JADX WARN: Removed duplicated region for block: B:617:0x1b53  */
    /* JADX WARN: Removed duplicated region for block: B:625:0x08e2 A[SYNTHETIC] */
    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public android.view.View createView(android.content.Context r50) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 7027
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.createView(android.content.Context):android.view.View");
    }

    /* renamed from: org.telegram.ui.ChatActivity$19 */
    class C306319 extends ChatListItemAnimator {
        Runnable finishRunnable;

        C306319(ChatActivity chatActivity, RecyclerListView recyclerListView, Theme.ResourcesProvider resourcesProvider) {
            super(chatActivity, recyclerListView, resourcesProvider);
        }

        @Override // androidx.recyclerview.widget.DefaultItemAnimator
        public void checkIsRunning() {
            if (ChatActivity.this.scrollAnimationIndex == -1) {
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.scrollAnimationIndex = chatActivity.getNotificationCenter().setAnimationInProgress(ChatActivity.this.scrollAnimationIndex, ChatActivity.allowedNotificationsDuringChatListAnimations, false);
            }
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator
        public void onAnimationStart() {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.scrollAnimationIndex = chatActivity.getNotificationCenter().setAnimationInProgress(ChatActivity.this.scrollAnimationIndex, ChatActivity.allowedNotificationsDuringChatListAnimations, false);
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
                this.finishRunnable = null;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("chatItemAnimator disable notifications");
            }
            ChatActivity.this.chatActivityEnterView.getAdjustPanLayoutHelper().runDelayedAnimation();
            ChatActivity.this.chatActivityEnterView.runEmojiPanelAnimation();
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator, androidx.recyclerview.widget.DefaultItemAnimator
        protected void onAllAnimationsDone() {
            super.onAllAnimationsDone();
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
                this.finishRunnable = null;
            }
            Runnable runnable2 = new Runnable() { // from class: org.telegram.ui.ChatActivity$19$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAllAnimationsDone$0();
                }
            };
            this.finishRunnable = runnable2;
            AndroidUtilities.runOnUIThread(runnable2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onAllAnimationsDone$0() {
            this.finishRunnable = null;
            if (ChatActivity.this.scrollAnimationIndex != -1) {
                ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollAnimationIndex);
                ChatActivity.this.scrollAnimationIndex = -1;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("chatItemAnimator enable notifications");
            }
        }

        @Override // androidx.recyclerview.widget.ChatListItemAnimator, androidx.recyclerview.widget.DefaultItemAnimator, androidx.recyclerview.widget.RecyclerView.ItemAnimator
        public void endAnimations() {
            try {
                super.endAnimations();
            } catch (Exception unused) {
            }
            Runnable runnable = this.finishRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
            }
            Runnable runnable2 = new Runnable() { // from class: org.telegram.ui.ChatActivity$19$$ExternalSyntheticLambda1
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$endAnimations$1();
                }
            };
            this.finishRunnable = runnable2;
            AndroidUtilities.runOnUIThread(runnable2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$endAnimations$1() {
            this.finishRunnable = null;
            if (ChatActivity.this.scrollAnimationIndex != -1) {
                ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollAnimationIndex);
                ChatActivity.this.scrollAnimationIndex = -1;
            }
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("chatItemAnimator enable notifications");
            }
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$20 */
    class C306520 extends GridLayoutManagerFixed {
        boolean computingScroll;

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public boolean supportsPredictiveItemAnimations() {
            return true;
        }

        C306520(Context context, int i, int i2, boolean z) {
            super(context, i, i2, z);
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager
        public int getStartForFixGap() {
            return (int) ChatActivity.this.chatListViewPaddingTop;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        protected int getParentStart() {
            if (this.computingScroll) {
                return (int) ChatActivity.this.chatListViewPaddingTop;
            }
            return 0;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int getStartAfterPadding() {
            if (this.computingScroll) {
                return (int) ChatActivity.this.chatListViewPaddingTop;
            }
            return super.getStartAfterPadding();
        }

        @Override // androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int getTotalSpace() {
            if (this.computingScroll) {
                return (int) ((getHeight() - ChatActivity.this.chatListViewPaddingTop) - getPaddingBottom());
            }
            return super.getTotalSpace();
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollExtent(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollExtent = super.computeVerticalScrollExtent(state);
            this.computingScroll = false;
            return iComputeVerticalScrollExtent;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollOffset(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollOffset = super.computeVerticalScrollOffset(state);
            this.computingScroll = false;
            return iComputeVerticalScrollOffset;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public int computeVerticalScrollRange(RecyclerView.State state) {
            this.computingScroll = true;
            int iComputeVerticalScrollRange = super.computeVerticalScrollRange(state);
            this.computingScroll = false;
            return iComputeVerticalScrollRange;
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager
        public void scrollToPositionWithOffset(int i, int i2, boolean z) {
            if (!z) {
                i2 = (int) ((i2 - getPaddingTop()) + ChatActivity.this.chatListViewPaddingTop);
            }
            super.scrollToPositionWithOffset(i, i2, z);
        }

        @Override // androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public void smoothScrollToPosition(RecyclerView recyclerView, RecyclerView.State state, int i) {
            ChatActivity.this.scrollByTouch = false;
            LinearSmoothScrollerCustom linearSmoothScrollerCustom = new LinearSmoothScrollerCustom(recyclerView.getContext(), 0);
            linearSmoothScrollerCustom.setTargetPosition(i);
            startSmoothScroll(linearSmoothScrollerCustom);
        }

        @Override // androidx.recyclerview.widget.GridLayoutManagerFixed
        public boolean shouldLayoutChildFromOpositeSide(View view) {
            if (view instanceof ChatMessageCell) {
                return !((ChatMessageCell) view).getMessageObject().isOutOwner();
            }
            return false;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManagerFixed
        protected boolean hasSiblingChild(int i) {
            int i2;
            MessageObject messageObject;
            MessageObject.GroupedMessages validGroupedMessage;
            byte b;
            if (i >= ChatActivity.this.chatAdapter.messagesStartRow && i < ChatActivity.this.chatAdapter.messagesEndRow && (i2 = i - ChatActivity.this.chatAdapter.messagesStartRow) >= 0 && i2 < ChatActivity.this.chatAdapter.getMessages().size() && (validGroupedMessage = ChatActivity.this.getValidGroupedMessage((messageObject = (MessageObject) ChatActivity.this.chatAdapter.getMessages().get(i2)))) != null) {
                MessageObject.GroupedMessagePosition position = validGroupedMessage.getPosition(messageObject);
                if (position.minX != position.maxX && (b = position.minY) == position.maxY && b != 0) {
                    int size = validGroupedMessage.posArray.size();
                    for (int i3 = 0; i3 < size; i3++) {
                        MessageObject.GroupedMessagePosition groupedMessagePosition = validGroupedMessage.posArray.get(i3);
                        if (groupedMessagePosition != position) {
                            byte b2 = groupedMessagePosition.minY;
                            byte b3 = position.minY;
                            if (b2 <= b3 && groupedMessagePosition.maxY >= b3) {
                                return true;
                            }
                        }
                    }
                }
            }
            return false;
        }

        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {
            if (BuildVars.DEBUG_PRIVATE_VERSION) {
                super.onLayoutChildren(recycler, state);
                return;
            }
            try {
                super.onLayoutChildren(recycler, state);
            } catch (Exception e) {
                FileLog.m1160e(e);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$20$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onLayoutChildren$0();
                    }
                });
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onLayoutChildren$0() {
            ChatActivity.this.chatAdapter.notifyDataSetChanged(false);
        }

        /* JADX WARN: Removed duplicated region for block: B:41:0x00c1  */
        @Override // androidx.recyclerview.widget.GridLayoutManager, androidx.recyclerview.widget.LinearLayoutManager, androidx.recyclerview.widget.RecyclerView.LayoutManager
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public int scrollVerticallyBy(int r11, androidx.recyclerview.widget.RecyclerView.Recycler r12, androidx.recyclerview.widget.RecyclerView.State r13) {
            /*
                Method dump skipped, instructions count: 574
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C306520.scrollVerticallyBy(int, androidx.recyclerview.widget.RecyclerView$Recycler, androidx.recyclerview.widget.RecyclerView$State):int");
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$23 */
    class C306823 extends RecyclerView.OnScrollListener {
        private boolean scrollUp;
        private float totalDy = 0.0f;
        private final int scrollValue = AndroidUtilities.m1146dp(100.0f);

        C306823() {
        }

        @Override // androidx.recyclerview.widget.RecyclerView.OnScrollListener
        public void onScrollStateChanged(RecyclerView recyclerView, int i) {
            if (i == 0) {
                if (ChatActivity.this.pollHintCell != null) {
                    ChatActivity.this.pollHintView.showForMessageCell(ChatActivity.this.pollHintCell, -1, ChatActivity.this.pollHintX, ChatActivity.this.pollHintY, true);
                    ChatActivity.this.pollHintCell = null;
                }
                ChatActivity.this.scrollingFloatingDate = false;
                ChatActivity.this.scrollingFloatingTopic = false;
                ChatActivity.this.scrollingChatListView = false;
                ChatActivity.this.checkTextureViewPosition = false;
                ChatActivity.this.hideFloatingDateView(true);
                ChatActivity.this.hideFloatingTopicView(true);
                if (SharedConfig.getDevicePerformanceClass() == 0) {
                    ChatActivity.scrolling = true;
                    NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.startAllHeavyOperations, 512);
                }
                NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.startSpoilers, new Object[0]);
                ChatActivity.this.chatListView.setOverScrollMode(0);
                ChatActivity.this.textSelectionHelper.stopScrolling();
                ChatActivity.this.updateVisibleRows();
                ChatActivity.this.invalidateMergedVisibleBlurredPositionsAndSources(1);
                ChatActivity.this.scrollByTouch = false;
                return;
            }
            if (ChatActivity.this.groupEmojiPackHint != null && ChatActivity.this.groupEmojiPackHint.shown()) {
                ChatActivity.this.groupEmojiPackHint.hide();
            }
            if (ChatActivity.this.searchOtherButton != null && ChatActivity.this.searchOtherButton.getVisibility() == 0 && ChatActivity.this.isKeyboardVisible()) {
                AndroidUtilities.hideKeyboard(ChatActivity.this.getParentActivity().getCurrentFocus());
            }
            if (i == 2) {
                ChatActivity.this.wasManualScroll = true;
                ChatActivity.this.scrollingChatListView = true;
            } else if (i == 1) {
                if (ExteraConfig.hideKeyboardOnScroll) {
                    if (ChatActivity.this.isKeyboardVisible()) {
                        AndroidUtilities.hideKeyboard(ChatActivity.this.getParentActivity().getCurrentFocus());
                    } else {
                        ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                        if (chatActivityEnterView != null && chatActivityEnterView.isPopupShowing()) {
                            ChatActivity.this.chatActivityEnterView.hidePopup(true);
                        }
                    }
                }
                ChatActivity.this.pollHintCell = null;
                ChatActivity.this.wasManualScroll = true;
                ChatActivity.this.scrollingFloatingDate = true;
                ChatActivity.this.scrollingFloatingTopic = true;
                ChatActivity.this.checkTextureViewPosition = true;
                ChatActivity.this.scrollingChatListView = true;
            }
            if (SharedConfig.getDevicePerformanceClass() == 0) {
                ChatActivity.scrolling = false;
                NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.stopAllHeavyOperations, 512);
            }
            NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.stopSpoilers, new Object[0]);
            if (ChatActivity.this.selectionReactionsOverlay == null || !ChatActivity.this.selectionReactionsOverlay.isVisible()) {
                return;
            }
            ChatActivity.this.selectionReactionsOverlay.setHiddenByScroll(true);
        }

        @Override // androidx.recyclerview.widget.RecyclerView.OnScrollListener
        public void onScrolled(RecyclerView recyclerView, int i, int i2) {
            boolean z;
            ChatActivity.this.chatListView.invalidate();
            ChatActivityFragmentView chatActivityFragmentView = ChatActivity.this.contentView;
            if (chatActivityFragmentView != null) {
                chatActivityFragmentView.updateBlurContent();
            }
            if (ChatActivity.this.chatListThanosEffect != null) {
                ChatActivity.this.chatListThanosEffect.scroll(i, i2);
            }
            this.scrollUp = i2 < 0;
            int iFindFirstVisibleItemPosition = ChatActivity.this.chatLayoutManager.findFirstVisibleItemPosition();
            if (((i2 != 0 && ChatActivity.this.scrollByTouch && recyclerView.getScrollState() == 2) || recyclerView.getScrollState() == 1) && ChatActivity.this.forceNextPinnedMessageId != 0) {
                if (!this.scrollUp || ChatActivity.this.forceScrollToFirst) {
                    ChatActivity.this.forceNextPinnedMessageId = 0;
                } else if (!ChatActivity.this.chatListView.isFastScrollAnimationRunning() && iFindFirstVisibleItemPosition != -1) {
                    int iFindLastVisibleItemPosition = ChatActivity.this.chatLayoutManager.findLastVisibleItemPosition();
                    MessageObject messageObject = null;
                    while (true) {
                        if (iFindLastVisibleItemPosition < iFindFirstVisibleItemPosition) {
                            z = false;
                            break;
                        }
                        View viewFindViewByPosition = ChatActivity.this.chatLayoutManager.findViewByPosition(iFindLastVisibleItemPosition);
                        if (viewFindViewByPosition instanceof ChatMessageCell) {
                            messageObject = ((ChatMessageCell) viewFindViewByPosition).getMessageObject();
                        } else if (viewFindViewByPosition instanceof ChatActionCell) {
                            messageObject = ((ChatActionCell) viewFindViewByPosition).getMessageObject();
                        } else if (viewFindViewByPosition instanceof DummyView) {
                            messageObject = ((DummyView) viewFindViewByPosition).getMessageObject();
                        }
                        if (messageObject != null && ChatActivity.this.forceNextPinnedMessageId == messageObject.getId()) {
                            z = true;
                            break;
                        }
                        iFindLastVisibleItemPosition--;
                    }
                    if (!z && messageObject != null && messageObject.getId() < ChatActivity.this.forceNextPinnedMessageId) {
                        ChatActivity.this.forceNextPinnedMessageId = 0;
                    }
                }
            }
            if (recyclerView.getScrollState() == 1) {
                ChatActivity.this.forceScrollToFirst = false;
                if (!ChatActivity.this.wasManualScroll && i2 != 0) {
                    ChatActivity.this.wasManualScroll = true;
                }
            }
            if (i2 != 0) {
                ChatActivity.this.invalidateMergedVisibleBlurredPositionsAndSources(1);
                ChatActivity.this.contentView.invalidateBlur();
                ChatActivity.this.hideHints(true);
            }
            if (i2 != 0 && ChatActivity.this.scrollingFloatingDate && !ChatActivity.this.currentFloatingTopIsNotMessage) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.highlightMessageId != Integer.MAX_VALUE) {
                    chatActivity.removeSelectedMessageHighlight();
                    ChatActivity.this.updateVisibleRows();
                }
                ChatActivity.this.showFloatingDateView(true);
            }
            if (ChatActivity.this.isAllChats() && i2 != 0 && ChatActivity.this.scrollingFloatingTopic && !ChatActivity.this.currentFloatingTopIsNotMessage) {
                ChatActivity chatActivity2 = ChatActivity.this;
                if (chatActivity2.highlightMessageId != Integer.MAX_VALUE) {
                    chatActivity2.removeSelectedMessageHighlight();
                    ChatActivity.this.updateVisibleRows();
                }
                ChatActivity.this.showFloatingTopicView(true);
            }
            ChatActivity.this.checkScrollForLoad(true);
            if (iFindFirstVisibleItemPosition != -1) {
                if (iFindFirstVisibleItemPosition != 0 || !ChatActivity.this.forwardEndReached[0]) {
                    boolean zIsButtonVisible = ChatActivity.this.sideControlsButtonsLayout.isButtonVisible(0);
                    if (i2 > 0) {
                        if (!zIsButtonVisible) {
                            float f = this.totalDy + i2;
                            this.totalDy = f;
                            if (f > this.scrollValue) {
                                this.totalDy = 0.0f;
                                ChatActivity.this.canShowPagedownButton = true;
                                ChatActivity.this.updatePagedownButtonVisibility(true);
                                ChatActivity.this.pagedownButtonShowedByScroll = true;
                            }
                        }
                    } else if (ChatActivity.this.pagedownButtonShowedByScroll && zIsButtonVisible) {
                        float f2 = this.totalDy + i2;
                        this.totalDy = f2;
                        if (f2 < (-this.scrollValue)) {
                            ChatActivity.this.canShowPagedownButton = false;
                            ChatActivity.this.updatePagedownButtonVisibility(true);
                            this.totalDy = 0.0f;
                        }
                    }
                } else if (i2 >= 0) {
                    ChatActivity.this.canShowPagedownButton = false;
                    ChatActivity.this.updatePagedownButtonVisibility(true);
                }
            }
            ChatActivity.this.invalidateMessagesVisiblePart();
            ChatActivity.this.textSelectionHelper.onParentScrolled();
            ChatActivity.this.emojiAnimationsOverlay.onScrolled(i2);
            ReactionsEffectOverlay.onScrolled(i2);
            if (Build.VERSION.SDK_INT >= 31 && ChatActivity.this.scrollableViewNoiseSuppressor != null) {
                ChatActivity.this.scrollableViewNoiseSuppressor.onScrolled(i, i2);
            }
            ChatActivity.this.checkTranslation(false);
            if (ChatActivity.this.savedMessagesTagHint != null) {
                if (ChatActivity.this.savedMessagesTagHint.shown()) {
                    ChatActivity.this.savedMessagesTagHint.hide();
                } else if (!ChatActivity.this.savedMessagesTagHintShown) {
                    ChatActivity.this.lastScrollTime = System.currentTimeMillis();
                    final ChatActivity chatActivity3 = ChatActivity.this;
                    AndroidUtilities.cancelRunOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$23$$ExternalSyntheticLambda0
                        @Override // java.lang.Runnable
                        public final void run() {
                            chatActivity3.checkSavedMessagesTagHint();
                        }
                    });
                    final ChatActivity chatActivity4 = ChatActivity.this;
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$23$$ExternalSyntheticLambda0
                        @Override // java.lang.Runnable
                        public final void run() {
                            chatActivity4.checkSavedMessagesTagHint();
                        }
                    }, 2000L);
                }
            }
            if (ChatActivity.this.videoConversionTimeHint != null && ChatActivity.this.videoConversionTimeHint.shown()) {
                ChatActivity.this.videoConversionTimeHint.hide();
            }
            if (ChatActivity.this.botMessageHint != null && ChatActivity.this.botMessageHint.shown()) {
                ChatActivity.this.botMessageHint.hide();
            } else {
                final ChatActivity chatActivity5 = ChatActivity.this;
                AndroidUtilities.cancelRunOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$23$$ExternalSyntheticLambda1
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity5.checkBotMessageHint();
                    }
                });
                final ChatActivity chatActivity6 = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$23$$ExternalSyntheticLambda1
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity6.checkBotMessageHint();
                    }
                }, 2000L);
            }
            if (ChatActivity.this.factCheckHint != null) {
                ChatActivity.this.factCheckHint.hide();
            }
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.hideHints();
            }
            if (ChatActivity.this.starReactionsOverlay != null) {
                ChatActivity.this.starReactionsOverlay.invalidate();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$33(Long l) {
        TopicsTabsView topicsTabsView = this.topicsTabs;
        if (topicsTabsView != null) {
            topicsTabsView.selectTopic(l.longValue(), true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$34(View view) {
        if (this.floatingDateView.getAlpha() == 0.0f || this.actionBar.isActionModeShowed() || isReport()) {
            return;
        }
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(this.floatingDateView.getCustomDate() * 1000);
        int i = calendar.get(1);
        int i2 = calendar.get(2);
        int i3 = calendar.get(5);
        calendar.clear();
        calendar.set(i, i2, i3);
        jumpToDate((int) (calendar.getTime().getTime() / 1000));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$35(View view, MotionEvent motionEvent) {
        return ContentPreviewViewer.getInstance().onTouch(motionEvent, this.mentionContainer.getListView(), 0, this.mentionsOnItemClickListener, this.mentionContainer.getAdapter().isStickers() ? this.contentPreviewViewerDelegate : null, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$43(View view, int i) throws NumberFormatException {
        String str;
        AnimatedEmojiSpan animatedEmojiSpan;
        FrameLayout frameLayout;
        FrameLayout frameLayout2;
        if (i == 0 || this.mentionContainer.getAdapter().isBannedInline()) {
            return;
        }
        int i2 = i - 1;
        final Object item = this.mentionContainer.getAdapter().getItem(i2);
        int resultStartPosition = this.mentionContainer.getAdapter().getResultStartPosition();
        int resultLength = this.mentionContainer.getAdapter().getResultLength();
        str = " ";
        char c = 0;
        if (this.mentionContainer.getAdapter().isLocalHashtagHint(i2)) {
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, this.mentionContainer.getAdapter().getHashtagHint() + "@" + ChatObject.getPublicUsername(this.currentChat) + " ", false);
            return;
        }
        if (this.mentionContainer.getAdapter().isGlobalHashtagHint(i2)) {
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, this.mentionContainer.getAdapter().getHashtagHint() + " ", false);
            return;
        }
        if (item instanceof QuickRepliesController.QuickReply) {
            if (!getUserConfig().isPremium()) {
                showDialog(new PremiumFeatureBottomSheet(this, getContext(), this.currentAccount, true, 31, false, null));
                return;
            } else {
                AlertsCreator.ensurePaidMessageConfirmation(this.currentAccount, this.dialog_id, Math.max(1, ((QuickRepliesController.QuickReply) item).getMessagesCount()), new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda341
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$createView$36(item, (Long) obj);
                    }
                });
                return;
            }
        }
        Paint.FontMetricsInt fontMetricsInt = null;
        if (item instanceof TLRPC.TL_document) {
            if (this.chatMode == 0 && checkSlowMode(view)) {
                return;
            }
            final MessageObject.SendAnimationData sendAnimationData = view instanceof StickerCell ? ((StickerCell) view).getSendAnimationData() : null;
            final TLRPC.TL_document tL_document = (TLRPC.TL_document) item;
            final Object itemParent = this.mentionContainer.getAdapter().getItemParent(i2);
            final String strFindAnimatedEmojiEmoticon = MessageObject.findAnimatedEmojiEmoticon(tL_document);
            AlertsCreator.ensurePaidMessageConfirmation(this.currentAccount, getDialogId(), 1, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda342
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$createView$38(tL_document, strFindAnimatedEmojiEmoticon, itemParent, sendAnimationData, (Long) obj);
                }
            });
            return;
        }
        if (item instanceof TLRPC.Chat) {
            TLRPC.Chat chat = (TLRPC.Chat) item;
            if (this.searchingForUser && (frameLayout2 = this.searchContainer) != null && frameLayout2.getVisibility() == 0) {
                searchUserMessages(null, chat);
                return;
            }
            String publicUsername = ChatObject.getPublicUsername(chat);
            if (publicUsername != null) {
                ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
                StringBuilder sb = new StringBuilder();
                sb.append("@");
                sb.append(publicUsername);
                sb.append(ExteraConfig.addCommaAfterMention ? ", " : " ");
                chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, sb.toString(), false);
                return;
            }
            return;
        }
        if (item instanceof TLRPC.User) {
            TLRPC.User user = (TLRPC.User) item;
            if (this.searchingForUser && (frameLayout = this.searchContainer) != null && frameLayout.getVisibility() == 0) {
                searchUserMessages(user, null);
                return;
            }
            if (UserObject.getPublicUsername(user) != null) {
                ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
                StringBuilder sb2 = new StringBuilder();
                sb2.append("@");
                sb2.append(UserObject.getPublicUsername(user));
                if (!user.bot && ExteraConfig.addCommaAfterMention) {
                    str = ", ";
                }
                sb2.append(str);
                chatActivityEnterView2.replaceWithText(resultStartPosition, resultLength, sb2.toString(), false);
                return;
            }
            String firstName = UserObject.getFirstName(user, false);
            StringBuilder sb3 = new StringBuilder();
            sb3.append(firstName);
            if (!user.bot && ExteraConfig.addCommaAfterMention) {
                str = ", ";
            }
            sb3.append(str);
            SpannableString spannableString = new SpannableString(sb3.toString());
            spannableString.setSpan(new URLSpanUserMention(String.valueOf(user.f1734id), 3), 0, firstName.length(), 33);
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, spannableString, false);
            return;
        }
        if (item instanceof String) {
            if (this.mentionContainer.getAdapter().isBotCommands()) {
                if (this.chatMode == 1) {
                    AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda343
                        @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                        public final void didSelectDate(boolean z, int i3, int i4) throws Resources.NotFoundException, NumberFormatException {
                            this.f$0.lambda$createView$39(item, z, i3, i4);
                        }
                    }, this.themeDelegate);
                    return;
                } else {
                    if (checkSlowMode(view)) {
                        return;
                    }
                    AlertsCreator.ensurePaidMessageConfirmation(this.currentAccount, this.dialog_id, 1, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda344
                        @Override // org.telegram.messenger.Utilities.Callback
                        public final void run(Object obj) throws Resources.NotFoundException, NumberFormatException {
                            this.f$0.lambda$createView$40(item, (Long) obj);
                        }
                    });
                    return;
                }
            }
            this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, item + " ", false);
            return;
        }
        if (item instanceof TLRPC.BotInlineResult) {
            if (this.chatActivityEnterView.getFieldText() != null) {
                if (this.chatMode == 1 || !checkSlowMode(view)) {
                    final TLRPC.BotInlineResult botInlineResult = (TLRPC.BotInlineResult) item;
                    if (this.currentEncryptedChat != null) {
                        if ((botInlineResult.send_message instanceof TLRPC.TL_botInlineMessageMediaAuto) && "game".equals(botInlineResult.type)) {
                            c = 1;
                        } else if (botInlineResult.send_message instanceof TLRPC.TL_botInlineMessageMediaInvoice) {
                            c = 2;
                        }
                        if (c != 0) {
                            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                            builder.setTitle(LocaleController.getString(C2369R.string.SendMessageTitle));
                            if (c == 1) {
                                builder.setMessage(LocaleController.getString(C2369R.string.GameCantSendSecretChat));
                            } else {
                                builder.setMessage(LocaleController.getString(C2369R.string.InvoiceCantSendSecretChat));
                            }
                            builder.setNegativeButton(LocaleController.getString(C2369R.string.f1459OK), null);
                            showDialog(builder.create());
                            return;
                        }
                    }
                    if ((botInlineResult.type.equals("photo") && (botInlineResult.photo != null || botInlineResult.content != null)) || ((botInlineResult.type.equals("gif") && (botInlineResult.document != null || botInlineResult.content != null)) || (botInlineResult.type.equals(MediaStreamTrack.VIDEO_TRACK_KIND) && botInlineResult.document != null))) {
                        ArrayList arrayList = new ArrayList(this.mentionContainer.getAdapter().getSearchResultBotContext());
                        this.botContextResults = arrayList;
                        PhotoViewer.getInstance().setParentActivity(this, this.themeDelegate);
                        PhotoViewer.getInstance().openPhotoForSelect(arrayList, this.mentionContainer.getAdapter().getItemPosition(i2), 3, false, this.botContextProvider, this);
                        return;
                    }
                    AlertsCreator.ensurePaidMessageConfirmation(this.currentAccount, getDialogId(), 1, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda345
                        @Override // org.telegram.messenger.Utilities.Callback
                        public final void run(Object obj) throws Resources.NotFoundException, NumberFormatException {
                            this.f$0.lambda$createView$42(botInlineResult, (Long) obj);
                        }
                    });
                    return;
                }
                return;
            }
            return;
        }
        if (item instanceof TLRPC.TL_inlineBotWebView) {
            processInlineBotWebView((TLRPC.TL_inlineBotWebView) item);
            return;
        }
        if (item instanceof TLRPC.TL_inlineBotSwitchPM) {
            processInlineBotContextPM((TLRPC.TL_inlineBotSwitchPM) item);
            return;
        }
        if (item instanceof MediaDataController.KeywordResult) {
            String str2 = ((MediaDataController.KeywordResult) item).emoji;
            this.chatActivityEnterView.addEmojiToRecent(str2);
            if (str2 != null && str2.startsWith("animated_")) {
                try {
                    try {
                        fontMetricsInt = this.chatActivityEnterView.getEditField().getPaint().getFontMetricsInt();
                    } catch (Exception e) {
                        FileLog.m1160e(e);
                    }
                    long j = Long.parseLong(str2.substring(9));
                    TLRPC.Document documentFindDocument = AnimatedEmojiDrawable.findDocument(this.currentAccount, j);
                    SpannableString spannableString2 = new SpannableString(MessageObject.findAnimatedEmojiEmoticon(documentFindDocument));
                    if (documentFindDocument != null) {
                        animatedEmojiSpan = new AnimatedEmojiSpan(documentFindDocument, fontMetricsInt);
                    } else {
                        animatedEmojiSpan = new AnimatedEmojiSpan(j, fontMetricsInt);
                    }
                    spannableString2.setSpan(animatedEmojiSpan, 0, spannableString2.length(), 33);
                    this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, spannableString2, false);
                } catch (Exception unused) {
                    this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, str2, true);
                }
            } else {
                this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, str2, true);
            }
            this.mentionContainer.updateVisibility(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$36(Object obj, Long l) {
        TLRPC.TL_messages_sendQuickReplyMessages tL_messages_sendQuickReplyMessages = new TLRPC.TL_messages_sendQuickReplyMessages();
        tL_messages_sendQuickReplyMessages.peer = getMessagesController().getInputPeer(this.dialog_id);
        tL_messages_sendQuickReplyMessages.shortcut_id = ((QuickRepliesController.QuickReply) obj).f1797id;
        getConnectionsManager().sendRequest(tL_messages_sendQuickReplyMessages, null);
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setFieldText(null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$38(final TLRPC.TL_document tL_document, final String str, final Object obj, MessageObject.SendAnimationData sendAnimationData, Long l) throws Resources.NotFoundException, NumberFormatException {
        if (this.chatMode == 1) {
            AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda440
                @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                public final void didSelectDate(boolean z, int i, int i2) {
                    this.f$0.lambda$createView$37(tL_document, str, obj, z, i, i2);
                }
            }, this.themeDelegate);
        } else {
            getSendMessagesHelper().sendSticker(tL_document, str, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, sendAnimationData, true, 0, 0, false, obj, this.quickReplyShortcut, getQuickReplyId(), l.longValue(), getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        }
        hideFieldPanel(false);
        this.chatActivityEnterView.addStickerToRecent(tL_document);
        this.chatActivityEnterView.setFieldText("");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$37(TLRPC.TL_document tL_document, String str, Object obj, boolean z, int i, int i2) {
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(tL_document, str, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, null, z, i, 0, false, obj, this.quickReplyShortcut, getQuickReplyId(), 0L, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$39(Object obj, boolean z, int i, int i2) throws Resources.NotFoundException, NumberFormatException {
        getSendMessagesHelper().sendMessage(SendMessagesHelper.SendMessageParams.m1191of((String) obj, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, null, null, null, z, i, 0, null, false));
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$40(Object obj, Long l) throws Resources.NotFoundException, NumberFormatException {
        SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of((String) obj, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, null, null, null, true, 0, 0, null, false);
        sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
        sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
        sendMessageParamsM1191of.payStars = l.longValue();
        sendMessageParamsM1191of.monoForumPeer = getSendMonoForumPeerId();
        sendMessageParamsM1191of.suggestionParams = this.messageSuggestionParams;
        getSendMessagesHelper().sendMessage(sendMessageParamsM1191of);
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$42(final TLRPC.BotInlineResult botInlineResult, final Long l) throws Resources.NotFoundException, NumberFormatException {
        if (this.chatMode == 1) {
            AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda452
                @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                public final void didSelectDate(boolean z, int i, int i2) throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$createView$41(botInlineResult, l, z, i, i2);
                }
            }, this.themeDelegate);
        } else {
            sendBotInlineResult(botInlineResult, true, 0, l.longValue());
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$41(TLRPC.BotInlineResult botInlineResult, Long l, boolean z, int i, int i2) throws Resources.NotFoundException, NumberFormatException {
        sendBotInlineResult(botInlineResult, z, i, l.longValue());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$45(View view, int i) {
        boolean z = false;
        if (getParentActivity() != null && this.mentionContainer.getAdapter().isLongClickEnabled() && i != 0 && !this.mentionContainer.getAdapter().isBannedInline()) {
            int resultLength = this.mentionContainer.getAdapter().getResultLength();
            int resultStartPosition = this.mentionContainer.getAdapter().getResultStartPosition();
            Object item = this.mentionContainer.getAdapter().getItem(i - 1);
            if (item instanceof String) {
                if (this.mentionContainer.getAdapter().isBotCommands()) {
                    if (!URLSpanBotCommand.enabled) {
                        return false;
                    }
                    this.chatActivityEnterView.setFieldText("");
                    ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
                    String str = (String) item;
                    TLRPC.Chat chat = this.currentChat;
                    if (chat != null && chat.megagroup) {
                        z = true;
                    }
                    chatActivityEnterView.setCommand(null, str, true, z);
                    return true;
                }
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                builder.setTitle(LocaleController.getString(C2369R.string.AppName));
                builder.setMessage(LocaleController.getString(C2369R.string.ClearSearch));
                builder.setPositiveButton(LocaleController.getString(C2369R.string.ClearButton), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda428
                    @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                    public final void onClick(AlertDialog alertDialog, int i2) {
                        this.f$0.lambda$createView$44(alertDialog, i2);
                    }
                });
                builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
                showDialog(builder.create());
                return true;
            }
            if (item instanceof TLRPC.User) {
                TLRPC.User user = (TLRPC.User) item;
                if (!this.searchingForUser || this.searchContainer.getVisibility() != 0) {
                    String firstName = UserObject.getFirstName(user, false);
                    StringBuilder sb = new StringBuilder();
                    sb.append(firstName);
                    sb.append((user.bot || !ExteraConfig.addCommaAfterMention) ? " " : ", ");
                    SpannableString spannableString = new SpannableString(sb.toString());
                    spannableString.setSpan(new URLSpanUserMention(String.valueOf(user.f1734id), 3), 0, firstName.length(), 33);
                    this.chatActivityEnterView.replaceWithText(resultStartPosition, resultLength, spannableString, false);
                    return true;
                }
            }
        }
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$44(AlertDialog alertDialog, int i) {
        this.mentionContainer.getAdapter().clearRecentHashtags();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$49(View view, int i) {
        if (this.chatMode == 7) {
            Object item = this.messagesSearchAdapter.getItem(i);
            if (i == 0) {
                MessagesSearchAdapter messagesSearchAdapter = this.messagesSearchAdapter;
                if (messagesSearchAdapter.containsStories && messagesSearchAdapter.storiesList != null) {
                    Bundle bundle = new Bundle();
                    bundle.putInt(PluginsConstants.Settings.TYPE, 3);
                    bundle.putString("hashtag", this.messagesSearchAdapter.storiesList.query);
                    String str = this.messagesSearchAdapter.storiesList.username;
                    if (str != null) {
                        bundle.putString("username", str);
                    }
                    bundle.putInt("storiesCount", this.messagesSearchAdapter.storiesList.getCount());
                    presentFragment(new MediaActivity(bundle, null));
                    return;
                }
            }
            if (item instanceof MessageObject) {
                openMessageInOriginalDialog((MessageObject) item);
                return;
            }
            return;
        }
        if (this.searchingReaction != null) {
            if (i < 0 || i >= getMediaDataController().searchResultMessages.size()) {
                return;
            }
            final MessageObject messageObject = getMediaDataController().searchResultMessages.get(i);
            this.searchingFiltered = false;
            setFilterMessages(false, true, false);
            getMediaDataController().setSearchedPosition(i);
            updateSearchButtons(getMediaDataController().getMask(), getMediaDataController().getSearchPosition(), getMediaDataController().getSearchCount());
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda427
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$48(messageObject);
                }
            });
            return;
        }
        getMediaDataController().jumpToSearchedMessage(this.classGuid, i);
        showMessagesSearchListView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$48(MessageObject messageObject) {
        scrollToMessageId(messageObject.getId(), 0, true, 0, true, 0, null, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda441
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createView$47();
            }
        });
        if (this.waitingForLoad.isEmpty()) {
            showMessagesSearchListView(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$47() {
        AlertDialog alertDialog = new AlertDialog(getParentActivity(), 3, this.themeDelegate);
        this.progressDialog = alertDialog;
        alertDialog.setOnShowListener(new DialogInterface.OnShowListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda470
            @Override // android.content.DialogInterface.OnShowListener
            public final void onShow(DialogInterface dialogInterface) {
                this.f$0.lambda$createView$46(dialogInterface);
            }
        });
        this.progressDialog.setOnCancelListener(this.postponedScrollCancelListener);
        this.progressDialog.showDelayed(500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$46(DialogInterface dialogInterface) {
        showPinnedProgress(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$50(View view, MotionEvent motionEvent) {
        if (motionEvent.getAction() == 0) {
            checkRecordLocked(false);
        }
        this.overlayView.getParent().requestDisallowInterceptTouchEvent(true);
        return true;
    }

    /* renamed from: org.telegram.ui.ChatActivity$34 */
    class C308034 extends ChatActivityEnterView {
        int lastContentViewHeight;
        int messageEditTextPredrawHeigth;
        int messageEditTextPredrawScrollY;

        C308034(Activity activity, SizeNotifierFrameLayout sizeNotifierFrameLayout, ChatActivity chatActivity, boolean z, Theme.ResourcesProvider resourcesProvider) {
            super(activity, sizeNotifierFrameLayout, chatActivity, z, resourcesProvider);
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        protected void onChangedIslandTotalHeight(float f) {
            ChatActivity.this.checkUi_inputIslandHeight();
        }

        @Override // android.view.View
        public void setAlpha(float f) {
            super.setAlpha(f);
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView, android.view.ViewGroup
        public boolean onInterceptTouchEvent(MotionEvent motionEvent) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.onInterceptTouchEvent(motionEvent);
        }

        @Override // android.view.View
        public boolean onTouchEvent(MotionEvent motionEvent) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.onTouchEvent(motionEvent);
        }

        @Override // android.view.ViewGroup, android.view.View
        public boolean dispatchTouchEvent(MotionEvent motionEvent) {
            if (getAlpha() != 1.0f) {
                return false;
            }
            return super.dispatchTouchEvent(motionEvent);
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        protected boolean pannelAnimationEnabled() {
            return ChatActivity.this.openAnimationEnded;
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        public void openKeyboard() {
            if (ChatActivity.this.forwardingPreviewView != null) {
                return;
            }
            super.openKeyboard();
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView, android.view.View
        public void setVisibility(int i) {
            super.setVisibility(i);
            ChatActivity.this.bottomViewsVisibilityController.setViewVisible(1, i == 0, getMeasuredWidth() > 0);
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        public void checkAnimation() {
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport()) {
                if (ChatActivity.this.messageEditTextAnimator != null) {
                    ChatActivity.this.messageEditTextAnimator.cancel();
                }
                if (ChatActivity.this.changeBoundAnimator != null) {
                    ChatActivity.this.changeBoundAnimator.cancel();
                }
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
                this.shouldAnimateEditTextWithBounds = false;
                return;
            }
            int backgroundTop = getBackgroundTop();
            if (ChatActivity.this.chatActivityEnterViewAnimateFromTop != 0 && backgroundTop != ChatActivity.this.chatActivityEnterViewAnimateFromTop && this.lastContentViewHeight == ChatActivity.this.contentView.getMeasuredHeight()) {
                int i = (this.animatedTop + ChatActivity.this.chatActivityEnterViewAnimateFromTop) - backgroundTop;
                setAnimatedTop(i);
                this.messageEditTextContainer.invalidate();
                if (ChatActivity.this.changeBoundAnimator != null) {
                    ChatActivity.this.changeBoundAnimator.removeAllListeners();
                    ChatActivity.this.changeBoundAnimator.cancel();
                }
                View view = this.topView;
                if (view != null && view.getVisibility() == 0) {
                    this.topView.setTranslationY(this.animatedTop + ((1.0f - getTopViewEnterProgress()) * this.topView.getLayoutParams().height));
                }
                ChatActivity.this.changeBoundAnimator = ValueAnimator.ofFloat(i, 0.0f);
                ChatActivity.this.changeBoundAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$34$$ExternalSyntheticLambda0
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$checkAnimation$0(valueAnimator);
                    }
                });
                ChatActivity.this.changeBoundAnimator.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.34.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animator) {
                        C308034.this.setAnimatedTop(0);
                        if (((ChatActivityEnterView) C308034.this).topView != null && ((ChatActivityEnterView) C308034.this).topView.getVisibility() == 0) {
                            ((ChatActivityEnterView) C308034.this).topView.setTranslationY(((ChatActivityEnterView) C308034.this).animatedTop + ((1.0f - C308034.this.getTopViewEnterProgress()) * ((ChatActivityEnterView) C308034.this).topView.getLayoutParams().height));
                        }
                        ChatActivity.this.changeBoundAnimator = null;
                    }
                });
                ChatActivity.this.changeBoundAnimator.setDuration(250L);
                ChatActivity.this.changeBoundAnimator.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                if (!ChatActivity.this.waitingForSendingMessageLoad) {
                    ChatActivity.this.changeBoundAnimator.start();
                }
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
            } else if (this.lastContentViewHeight != ChatActivity.this.contentView.getMeasuredHeight()) {
                ChatActivity.this.chatActivityEnterViewAnimateFromTop = 0;
            }
            if (this.shouldAnimateEditTextWithBounds) {
                float measuredHeight = (this.messageEditTextPredrawHeigth - this.messageEditText.getMeasuredHeight()) + (this.messageEditTextPredrawScrollY - this.messageEditText.getScrollY());
                EditTextCaption editTextCaption = this.messageEditText;
                editTextCaption.setOffsetY(editTextCaption.getOffsetY() - measuredHeight);
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.messageEditText.getOffsetY(), 0.0f);
                valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$34$$ExternalSyntheticLambda1
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$checkAnimation$1(valueAnimator);
                    }
                });
                if (ChatActivity.this.messageEditTextAnimator != null) {
                    ChatActivity.this.messageEditTextAnimator.cancel();
                }
                ChatActivity.this.messageEditTextAnimator = valueAnimatorOfFloat;
                valueAnimatorOfFloat.setDuration(250L);
                valueAnimatorOfFloat.setInterpolator(ChatListItemAnimator.DEFAULT_INTERPOLATOR);
                valueAnimatorOfFloat.start();
                this.shouldAnimateEditTextWithBounds = false;
            }
            this.lastContentViewHeight = ChatActivity.this.contentView.getMeasuredHeight();
            ChatActivity.this.chatActivityEnterViewAnimateBeforeSending = false;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$checkAnimation$0(ValueAnimator valueAnimator) {
            float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            setAnimatedTop((int) fFloatValue);
            View view = this.topView;
            if (view != null && view.getVisibility() == 0) {
                this.topView.setTranslationY(fFloatValue + ((1.0f - getTopViewEnterProgress()) * this.topView.getLayoutParams().height));
            } else {
                ChatActivity.this.invalidateChatListViewTopPadding();
                ChatActivity.this.invalidateMessagesVisiblePart();
            }
            this.messageEditTextContainer.invalidate();
            invalidate();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$checkAnimation$1(ValueAnimator valueAnimator) {
            this.messageEditText.setOffsetY(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        protected void onLineCountChanged(int i, int i2) {
            ChatActivity chatActivity = ChatActivity.this;
            if (chatActivity.chatActivityEnterView != null) {
                if (chatActivity.chatListView != null) {
                    if (ChatActivity.this.searchExpandProgress > 0.0f) {
                        return;
                    }
                    if (((BaseFragment) ChatActivity.this).actionBar != null && ((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed()) {
                        return;
                    }
                }
                this.shouldAnimateEditTextWithBounds = true;
                this.messageEditTextPredrawHeigth = this.messageEditText.getMeasuredHeight();
                this.messageEditTextPredrawScrollY = this.messageEditText.getScrollY();
                ChatActivity.this.contentView.invalidate();
                ChatActivity chatActivity2 = ChatActivity.this;
                chatActivity2.chatActivityEnterViewAnimateFromTop = chatActivity2.chatActivityEnterView.getBackgroundTop();
            }
        }

        @Override // org.telegram.p023ui.Components.ChatActivityEnterView
        public void hideTopView(boolean z) {
            super.hideTopView(z);
            if (ChatActivity.this.onHideFieldPanelRunnable != null) {
                AndroidUtilities.runOnUIThread(ChatActivity.this.onHideFieldPanelRunnable);
                ChatActivity.this.onHideFieldPanelRunnable = null;
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$51(View view) {
        openForward(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$52(View view) {
        int i;
        MessageObject messageObject = null;
        for (int i2 = 1; i2 >= 0; i2--) {
            if (messageObject == null && this.selectedMessagesIds[i2].size() != 0) {
                messageObject = (MessageObject) this.messagesDict[i2].get(this.selectedMessagesIds[i2].keyAt(0));
            }
            this.selectedMessagesIds[i2].clear();
            this.selectedMessagesCanCopyIds[i2].clear();
            this.selectedMessagesCanStarIds[i2].clear();
        }
        hideActionMode();
        if (messageObject != null && ((i = messageObject.messageOwner.f1597id) > 0 || (i < 0 && this.currentEncryptedChat != null))) {
            showFieldPanelForReply(messageObject);
        }
        updatePinnedMessageView(true);
        updateVisibleRows();
        updateSelectedMessageReactions();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$53(View view) {
        ArrayList arrayList = new ArrayList();
        int i = 1;
        while (true) {
            if (i < 0) {
                break;
            }
            for (int i2 = 0; i2 < this.selectedMessagesIds[i].size(); i2++) {
                arrayList.add(Integer.valueOf(this.selectedMessagesIds[i].keyAt(i2)));
            }
            i--;
        }
        if (arrayList.isEmpty()) {
            return;
        }
        Collections.sort(arrayList);
        Integer num = (Integer) arrayList.get(0);
        Integer num2 = (Integer) arrayList.get(arrayList.size() - 1);
        for (int i3 = 0; i3 < this.messages.size(); i3++) {
            int id = ((MessageObject) this.messages.get(i3)).getId();
            MessageObject messageObject = (MessageObject) this.messages.get(i3);
            if (messageObject != null && id > num.intValue() && id < num2.intValue() && this.selectedMessagesIds[0].indexOfKey(id) < 0 && messageObject.contentType == 0) {
                addToSelectedMessages(messageObject, false);
            }
        }
        updateActionModeTitle();
        updateVisibleRows();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$55(boolean[] zArr, Context context, View view) throws Resources.NotFoundException {
        MessageObject messageObject;
        boolean z = zArr[0];
        if (z) {
            zArr[0] = false;
        }
        int i = this.fieldPanelShown;
        if (i == 5) {
            int i2 = this.currentAccount;
            long j = this.dialog_id;
            MessageSuggestionParams messageSuggestionParamsEmpty = this.messageSuggestionParams;
            if (messageSuggestionParamsEmpty == null) {
                messageSuggestionParamsEmpty = MessageSuggestionParams.empty();
            }
            new MessageSuggestionOfferSheet(context, i2, j, messageSuggestionParamsEmpty, this, getResourceProvider(), 0, new ChatActivity$$ExternalSyntheticLambda186(this)).show();
            return;
        }
        if (i == 1 && (messageObject = this.editingMessageObject) != null) {
            if (messageObject.needResendWhenEdit() && !z) {
                MessageSuggestionParams messageSuggestionParamsEmpty2 = this.messageSuggestionParams;
                if (messageSuggestionParamsEmpty2 == null) {
                    messageSuggestionParamsEmpty2 = MessageSuggestionParams.empty();
                }
                showSuggestionOfferForEditMessage(messageSuggestionParamsEmpty2);
                return;
            }
            if (this.editingMessageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
                new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda187
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$createView$54((Integer) obj);
                    }
                }.run(-1);
                return;
            } else {
                scrollToMessageId(this.editingMessageObject.getId(), 0, true, 0, true, 0);
                return;
            }
        }
        if (this.messagePreviewParams != null) {
            this.forbidForwardingWithDismiss = false;
            if (i != 2) {
                if (i == 3) {
                    SharedConfig.forwardingOptionsHintHintShowed();
                    openForwardingPreview(1);
                    return;
                } else {
                    if (i == 4) {
                        openForwardingPreview(2);
                        return;
                    }
                    return;
                }
            }
            if (!DialogObject.isEncryptedDialog(this.dialog_id)) {
                MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
                if (!messagePreviewParams.hasSecretMessages && this.chatMode != 5) {
                    this.forbidForwardingWithDismiss = messagePreviewParams.quote == null;
                    SharedConfig.replyingOptionsHintHintShowed();
                    openForwardingPreview(0);
                    return;
                }
            }
            MessageObject messageObject2 = this.replyingMessageObject;
            if (messageObject2 != null) {
                scrollToMessageId(messageObject2.getId(), 0, true, 0, true, 0);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$54(Integer num) {
        if (this.chatAttachAlert == null) {
            createChatAttachView();
        }
        this.chatAttachAlert.setEditingMessageObject(num.intValue(), this.editingMessageObject);
        openAttachMenu();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$56(View view) {
        MessageObject messageObject;
        MessageObject messageObject2;
        int i = this.fieldPanelShown;
        if (i == 1 && (messageObject2 = this.editingMessageObject) != null) {
            scrollToMessageId(messageObject2.getId(), 0, true, 0, true, 0);
            return true;
        }
        if (this.messagePreviewParams == null || i != 2 || (messageObject = this.replyingMessageObject) == null) {
            return false;
        }
        scrollToMessageId(messageObject.getId(), 0, true, 0, true, 0);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$57(View view) throws Resources.NotFoundException, NumberFormatException {
        MessageObject messageObject;
        this.messageSuggestionParams = null;
        int i = this.fieldPanelShown;
        if (i == 2) {
            this.replyingQuote = null;
            this.replyingMessageObject = null;
            MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
            if (messagePreviewParams != null) {
                messagePreviewParams.updateReply(null, null, this.dialog_id, null);
            }
            fallbackFieldPanel();
            return;
        }
        if (i == 3) {
            openAnotherForward();
            return;
        }
        if (i == 4) {
            this.foundWebPage = null;
            MessagePreviewParams messagePreviewParams2 = this.messagePreviewParams;
            if (messagePreviewParams2 != null) {
                int i2 = this.currentAccount;
                MessageObject messageObject2 = this.replyingMessageObject;
                messagePreviewParams2.updateLink(i2, null, null, messageObject2 == this.threadMessageObject ? null : messageObject2, this.replyingQuote, this.editingMessageObject);
            }
            this.chatActivityEnterView.setWebPage(null, false);
            editResetMediaManual();
            fallbackFieldPanel();
            return;
        }
        if (ChatObject.isForum(this.currentChat) && !this.isTopic && (messageObject = this.replyingMessageObject) != null) {
            long topicId = MessageObject.getTopicId(this.currentAccount, messageObject.messageOwner, true);
            if (topicId != 0) {
                getMediaDataController().cleanDraft(this.dialog_id, topicId, false);
            }
        }
        showFieldPanel(false, null, null, null, null, true, 0, null, true, 0L, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$58(View view) {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null) {
            scrollToMessageId(messageObject.getId(), 0, true, 0, true, 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$59(ChatActivityEnterTopView.EditViewButton editViewButton, boolean[] zArr, FrameLayout frameLayout, View view) {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null && messageObject.canEditMedia() && this.editingMessageObjectReqId == 0) {
            if (editViewButton.isEditButton()) {
                openEditingMessageInPhotoEditor();
            } else {
                zArr[0] = true;
                frameLayout.callOnClick();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$60(View view) {
        lambda$openSearchWithText$374(isSupportedTags() ? "" : null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$61(View view) {
        createUndoView();
        this.undoView.showWithAction(this.dialog_id, 18, LocaleController.getString(C2369R.string.BroadcastGroupInfo));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$62(View view) {
        MessagesController.getGlobalMainSettings().edit().putInt("channelgifthint", 3).apply();
        showDialog(new GiftSheet(getContext(), this.currentAccount, getDialogId(), null, null));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$63(View view) {
        MessagesController.getGlobalMainSettings().edit().putInt("channelsuggesthint", 3).apply();
        TLRPC.Chat chat = this.currentChat;
        if (chat == null || chat.linked_monoforum_id == 0) {
            return;
        }
        MessagesController messagesController = getMessagesController();
        TLRPC.Chat chat2 = this.currentChat;
        messagesController.putMonoForumLinkedChat(chat2.f1571id, chat2.linked_monoforum_id);
        Bundle bundle = new Bundle();
        bundle.putLong("chat_id", this.currentChat.linked_monoforum_id);
        bundle.putInt("chatMode", 8);
        bundle.putBoolean("isSubscriberSuggestions", true);
        presentFragment(new ChatActivity(bundle));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$66(final View view, int i, boolean z) {
        if (this.bottomGiftHintView == null && z && MessagesController.getGlobalMainSettings().getInt("channelgifthint", 0) < 2) {
            HintView2 hintView2 = this.bottomSuggestHintView;
            if (hintView2 == null || !hintView2.shown()) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda137
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$createView$65(view);
                    }
                }, 400L);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$65(View view) {
        if (getContext() == null) {
            return;
        }
        float f = this.windowInsetsStateHolder.getInsets(WindowInsetsCompat.Type.navigationBars()).bottom / AndroidUtilities.density;
        float width = ((this.contentView.getWidth() - (view.getX() + view.getWidth())) + (view.getWidth() / 2.0f)) / AndroidUtilities.density;
        HintView2 hintView2 = new HintView2(getContext(), 3);
        this.bottomGiftHintView = hintView2;
        hintView2.setPadding(AndroidUtilities.m1146dp(7.33f), 0, AndroidUtilities.m1146dp(7.33f), 0);
        this.bottomGiftHintView.setMultilineText(false);
        this.bottomGiftHintView.setText(LocaleController.getString(C2369R.string.Gift2ChannelSendHint));
        this.bottomGiftHintView.setJoint(1.0f, (-width) + 7.33f);
        this.contentView.addView(this.bottomGiftHintView, LayoutHelper.createFrame(-1, 100.0f, 87, 0.0f, 0.0f, 0.0f, f + 50.0f));
        this.bottomGiftHintView.setOnHiddenListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda279
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createView$64();
            }
        });
        this.bottomGiftHintView.show();
        MessagesController.getGlobalMainSettings().edit().putInt("channelgifthint", MessagesController.getGlobalMainSettings().getInt("channelgifthint", 0) + 1).apply();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$64() {
        AndroidUtilities.removeFromParent(this.bottomGiftHintView);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$69(final View view, int i, boolean z) {
        if (this.bottomSuggestHintView == null && z && MessagesController.getGlobalMainSettings().getInt("channelsuggesthint", 0) < 2) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda190
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$68(view);
                }
            }, 400L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$68(View view) {
        if (getContext() == null) {
            return;
        }
        float f = this.windowInsetsStateHolder.getInsets(WindowInsetsCompat.Type.navigationBars()).bottom / AndroidUtilities.density;
        float width = ((this.contentView.getWidth() - (view.getX() + view.getWidth())) + (view.getWidth() / 2.0f)) / AndroidUtilities.density;
        HintView2 hintView2 = new HintView2(getContext(), 3);
        this.bottomSuggestHintView = hintView2;
        hintView2.setPadding(AndroidUtilities.m1146dp(7.33f), 0, AndroidUtilities.m1146dp(7.33f), 0);
        this.bottomSuggestHintView.setMultilineText(false);
        this.bottomSuggestHintView.setText(LocaleController.getString(C2369R.string.Suggest2ChannelSendHint), true);
        this.bottomSuggestHintView.setJoint(1.0f, (-width) + 7.33f);
        this.contentView.addView(this.bottomSuggestHintView, LayoutHelper.createFrame(-1, 100.0f, 87, 0.0f, 0.0f, 0.0f, f + 50.0f));
        this.bottomSuggestHintView.setOnHiddenListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda319
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createView$67();
            }
        });
        this.bottomSuggestHintView.show();
        MessagesController.getGlobalMainSettings().edit().putInt("channelsuggesthint", MessagesController.getGlobalMainSettings().getInt("channelsuggesthint", 0) + 1).apply();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$67() {
        AndroidUtilities.removeFromParent(this.bottomSuggestHintView);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$70(float f, float f2) {
        this.chatInputViewsContainer.setInputBubbleOffsets(f, f2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$71(View view) {
        this.bottomOverlayChatText.callOnClick();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$72(View view) {
        if (this.chatMode != 0 || getMessagesController().freezeUntilDate <= getConnectionsManager().getCurrentTime() || AccountFrozenAlert.isSpamBot(this.currentAccount, this.currentUser)) {
            return;
        }
        AccountFrozenAlert.show(getContext(), this.currentAccount, getResourceProvider());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$79(final Context context, View view) {
        String str;
        if (getParentActivity() == null || this.pullingDownOffset != 0.0f) {
            return;
        }
        if (this.chatMode == 3) {
            Bundle bundle = new Bundle();
            long savedDialogId = getSavedDialogId();
            if (savedDialogId >= 0) {
                bundle.putLong("user_id", savedDialogId);
            } else {
                bundle.putLong("chat_id", -savedDialogId);
            }
            presentFragment(new ChatActivity(bundle));
            return;
        }
        if (isReport()) {
            ArrayList arrayList = new ArrayList();
            for (int i = 0; i < this.selectedMessagesIds[0].size(); i++) {
                arrayList.add(Integer.valueOf(this.selectedMessagesIds[0].keyAt(i)));
            }
            showBottomOverlayProgress(true, true);
            ReportBottomSheet.continueReport(this, this.reportOption, this.reportMessage, arrayList, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda147
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) {
                    this.f$0.lambda$createView$73((Boolean) obj);
                }
            });
            return;
        }
        if (this.chatMode == 2) {
            lambda$onBackPressed$371();
            this.chatActivityDelegate.onUnpin(true, this.bottomOverlayChatText.getTag() == null);
            return;
        }
        TLRPC.User user = this.currentUser;
        if (user != null && user.f1734id == UserObject.VERIFY) {
            toggleMute(true);
            return;
        }
        if (user != null && this.userBlocked) {
            if (user.bot) {
                final String str2 = this.botUser;
                this.botUser = null;
                getMessagesController().unblockPeer(this.currentUser.f1734id, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda148
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$createView$74(str2);
                    }
                });
                return;
            } else {
                AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
                builder.setMessage(LocaleController.getString(C2369R.string.AreYouSureUnblockContact));
                builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda149
                    @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                    public final void onClick(AlertDialog alertDialog, int i2) {
                        this.f$0.lambda$createView$75(alertDialog, i2);
                    }
                });
                builder.setTitle(LocaleController.getString(C2369R.string.AppName));
                builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
                showDialog(builder.create());
                return;
            }
        }
        if (UserObject.isReplyUser(user)) {
            toggleMute(true);
            return;
        }
        TLRPC.User user2 = this.currentUser;
        if (user2 != null && user2.bot && (str = this.botUser) != null) {
            if (str.length() != 0) {
                getMessagesController().sendBotStart(this.currentUser, this.botUser);
            } else {
                getSendMessagesHelper().sendMessage(SendMessagesHelper.SendMessageParams.m1191of("/start", this.dialog_id, null, null, null, false, null, null, null, true, 0, 0, null, false));
            }
            this.botUser = null;
            updateBottomOverlay();
            return;
        }
        if (ChatObject.isChannel(this.currentChat)) {
            TLRPC.Chat chat = this.currentChat;
            if (!(chat instanceof TLRPC.TL_channelForbidden)) {
                if (ChatObject.isNotInChat(chat)) {
                    if (this.currentChat.join_request) {
                        showBottomOverlayProgress(true, true);
                        MessagesController.getInstance(this.currentAccount).addUserToChat(this.currentChat.f1571id, UserConfig.getInstance(this.currentAccount).getCurrentUser(), 0, null, null, true, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda150
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$createView$76();
                            }
                        }, new MessagesController.ErrorDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda151
                            @Override // org.telegram.messenger.MessagesController.ErrorDelegate
                            public final boolean run(TLRPC.TL_error tL_error) {
                                return this.f$0.lambda$createView$77(context, tL_error);
                            }
                        });
                        return;
                    }
                    Runnable runnable = this.chatInviteRunnable;
                    if (runnable != null) {
                        AndroidUtilities.cancelRunOnUIThread(runnable);
                        this.chatInviteRunnable = null;
                    }
                    showBottomOverlayProgress(true, true);
                    getMessagesController().addUserToChat(this.currentChat.f1571id, getUserConfig().getCurrentUser(), 0, null, this, null);
                    NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.closeSearchByActiveAction, new Object[0]);
                    if (!hasReportSpam() || this.reportSpamButton.getTag(C2369R.id.object_tag) == null) {
                        return;
                    }
                    MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_bar_vis3" + this.dialog_id, 3).apply();
                    getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.peerSettingsDidLoad, Long.valueOf(this.dialog_id));
                    return;
                }
                if (ExteraConfig.bottomButton == 1 || !haveDiscussion()) {
                    toggleMute(true);
                    return;
                } else {
                    if (ExteraConfig.bottomButton == 2) {
                        openDiscussion();
                        return;
                    }
                    return;
                }
            }
        }
        TLRPC.ChatFull chatFull = this.chatInfo;
        AlertsCreator.createClearOrDeleteDialogAlert(this, false, this.currentChat, this.currentUser, this.currentEncryptedChat != null, true, chatFull != null && chatFull.can_delete_channel, new MessagesStorage.BooleanCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda152
            @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
            public final void run(boolean z) {
                this.f$0.lambda$createView$78(z);
            }
        }, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$73(Boolean bool) {
        showBottomOverlayProgress(true, false);
        if (bool.booleanValue()) {
            lambda$onBackPressed$371();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$74(String str) {
        if (str != null && str.length() != 0) {
            getMessagesController().sendBotStart(this.currentUser, str);
        } else {
            getSendMessagesHelper().sendMessage(SendMessagesHelper.SendMessageParams.m1191of("/start", this.dialog_id, null, null, null, false, null, null, null, true, 0, 0, null, false));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$75(AlertDialog alertDialog, int i) {
        getMessagesController().unblockPeer(this.currentUser.f1734id);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$76() {
        showBottomOverlayProgress(false, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$77(Context context, TLRPC.TL_error tL_error) {
        MessagesController.getNotificationsSettings(this.currentAccount).edit().putLong("dialog_join_requested_time_" + this.dialog_id, System.currentTimeMillis()).apply();
        if (tL_error != null && "INVITE_REQUEST_SENT".equals(tL_error.text)) {
            JoinGroupAlert.showBulletin(context, this, ChatObject.isChannel(this.currentChat) && !this.currentChat.megagroup);
        }
        showBottomOverlayProgress(false, true);
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$78(boolean z) {
        NotificationCenter notificationCenter = getNotificationCenter();
        int i = NotificationCenter.closeChats;
        notificationCenter.removeObserver(this, i);
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(i, new Object[0]);
        lambda$onBackPressed$371();
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.needDeleteDialog, Long.valueOf(this.dialog_id), this.currentUser, this.currentChat, Boolean.valueOf(z));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$81(View view) {
        TLRPC.ChatFull chatFull;
        TLRPC.Chat chat = this.currentChat;
        boolean z = (chat == null || !chat.megagroup || chat.join_to_send || (chatFull = this.chatInfo) == null || chatFull.linked_chat_id == 0) ? false : !ChatObject.isKickedFromChat(getMessagesController().getChat(Long.valueOf(this.chatInfo.linked_chat_id)));
        if (z) {
            this.chatActivityEnterView.setVisibility(0);
            this.bottomChannelButtonsLayout.setVisibility(4);
            this.chatActivityEnterView.setFieldFocused();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda122
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$createView$80();
                }
            }, 100L);
        }
        return z;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$80() {
        this.chatActivityEnterView.openKeyboard();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createView$82() {
        return this.currentEncryptedChat != null || getMessagesController().isChatNoForwards(this.currentChat);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$83(float[] fArr) {
        fArr[1] = this.chatListView.getBottom() - this.blurredViewBottomOffset;
        fArr[0] = (this.chatListView.getTop() + this.chatListViewPaddingTop) - AndroidUtilities.m1146dp(4.0f);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createView$84() {
        HintView2 hintView2;
        FrameLayout frameLayout = this.searchContainer;
        if ((frameLayout == null || frameLayout.getVisibility() != 0) && (hintView2 = this.savedMessagesSearchHint) != null) {
            hintView2.show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public WindowInsetsCompat onApplyWindowInsets(View view, WindowInsetsCompat windowInsetsCompat) {
        this.windowInsetsStateHolder.setInsets(windowInsetsCompat);
        checkUi_chatListViewPaddings();
        boolean zIsVisible = windowInsetsCompat.isVisible(WindowInsetsCompat.Type.ime());
        if (this.lastImeVisible != zIsVisible) {
            this.lastImeVisible = zIsVisible;
            this.contentView.notifyHeightChanged();
        }
        ViewPagerFixed viewPagerFixed = this.searchViewPager;
        if (viewPagerFixed != null) {
            ViewCompat.dispatchApplyWindowInsets(viewPagerFixed, windowInsetsCompat);
        }
        return WindowInsetsCompat.CONSUMED;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkInsets() {
        this.chatInputViewsContainer.checkInsets();
        updatePagedownButtonsPosition();
        updateBotforumTabsBottomMargin();
        checkUi_botMenuPosition();
        checkUi_BlurHeight();
        checkUi_emptyContainerPosition();
        checkUi_chatListViewPaddings();
        invalidateClipRectForBackgroundAndChatList();
        boolean zInAppViewIsVisible = this.windowInsetsStateHolder.inAppViewIsVisible();
        if (this.lastInAppInputVisible != zInAppViewIsVisible) {
            this.lastInAppInputVisible = zInAppViewIsVisible;
            checkSystemBarColors();
        }
    }

    private void onAdminShortcutsClick(int i) {
        this.headerItem.toggleSubMenu();
        if (i == 93) {
            presentFragment(new ChannelAdminLogActivity(this.currentChat));
            return;
        }
        if (i == 90) {
            Bundle bundle = new Bundle();
            bundle.putLong("chat_id", this.currentChat.f1571id);
            bundle.putInt(PluginsConstants.Settings.TYPE, ((!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup) && !this.currentChat.gigagroup) ? 3 : 0);
            ChatUsersActivity chatUsersActivity = new ChatUsersActivity(bundle);
            chatUsersActivity.setInfo(getMessagesController().getChatFull(this.currentChat.f1571id));
            presentFragment(chatUsersActivity);
            return;
        }
        if (i == 91) {
            Bundle bundle2 = new Bundle();
            bundle2.putLong("chat_id", this.currentChat.f1571id);
            bundle2.putInt(PluginsConstants.Settings.TYPE, 1);
            ChatUsersActivity chatUsersActivity2 = new ChatUsersActivity(bundle2);
            chatUsersActivity2.setInfo(getMessagesController().getChatFull(this.currentChat.f1571id));
            presentFragment(chatUsersActivity2);
            return;
        }
        if (i == 92) {
            Bundle bundle3 = new Bundle();
            bundle3.putLong("chat_id", this.currentChat.f1571id);
            bundle3.putInt(PluginsConstants.Settings.TYPE, 2);
            ChatUsersActivity chatUsersActivity3 = new ChatUsersActivity(bundle3);
            chatUsersActivity3.setInfo(getMessagesController().getChatFull(this.currentChat.f1571id));
            presentFragment(chatUsersActivity3);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkBotMessageHint() {
        ChatMessageCell chatMessageCell;
        MessageObject primaryMessageObject;
        TLRPC.Message message;
        if (this.botMessageHint != null) {
            return;
        }
        ChatMessageCell chatMessageCell2 = null;
        for (int childCount = this.chatListView.getChildCount() - 1; childCount >= 0; childCount--) {
            View childAt = this.chatListView.getChildAt(childCount);
            if ((childAt instanceof ChatMessageCell) && (primaryMessageObject = (chatMessageCell = (ChatMessageCell) childAt).getPrimaryMessageObject()) != null && (message = primaryMessageObject.messageOwner) != null && message.via_business_bot_id != 0) {
                chatMessageCell2 = chatMessageCell;
            }
        }
        showBotMessageHint(chatMessageCell2, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showBotMessageHint(final ChatMessageCell chatMessageCell, boolean z) {
        if (getContext() == null || chatMessageCell == null || chatMessageCell.timeLayout == null || chatMessageCell.getPrimaryMessageObject() == null || chatMessageCell.getPrimaryMessageObject().messageOwner == null || chatMessageCell.getPrimaryMessageObject().messageOwner.via_business_bot_id == 0) {
            return;
        }
        if (!z) {
            if (getMessagesController().getMainSettings().getBoolean("bizbothint", false)) {
                return;
            }
            getMessagesController().getMainSettings().edit().putBoolean("bizbothint", true).apply();
            if (this.bizbothint) {
                return;
            } else {
                this.bizbothint = true;
            }
        }
        final HintView2 hintView2 = this.botMessageHint;
        if (hintView2 != null) {
            if (!z) {
                return;
            }
            hintView2.setOnHiddenListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda251
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$showBotMessageHint$85(hintView2);
                }
            });
            hintView2.hide();
            this.botMessageHint = null;
        }
        HintView2 rounding = new HintView2(getContext(), 3).setMultilineText(true).setTextAlign(Layout.Alignment.ALIGN_NORMAL).setDuration(-1L).setHideByTouch(true).useScale(true).setCloseButton(true).setRounding(8.0f);
        this.botMessageHint = rounding;
        rounding.setText(AndroidUtilities.replaceTags(LocaleController.getString(C2369R.string.MessageBizBot)));
        HintView2 hintView22 = this.botMessageHint;
        hintView22.setMaxWidthPx(HintView2.cutInFancyHalf(hintView22.getText(), this.botMessageHint.getTextPaint()));
        this.contentView.addView(this.botMessageHint, LayoutHelper.createFrame(-1, 120.0f, 55, 16.0f, 0.0f, 16.0f, 0.0f));
        this.contentView.post(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda252
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showBotMessageHint$86(chatMessageCell);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showBotMessageHint$85(HintView2 hintView2) {
        this.contentView.removeView(hintView2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showBotMessageHint$86(ChatMessageCell chatMessageCell) {
        chatMessageCell.getLocationInWindow(new int[2]);
        this.botMessageHint.setTranslationY(((r0[1] - r1.getTop()) - AndroidUtilities.m1146dp(120.0f)) + chatMessageCell.getTimeY());
        this.botMessageHint.setJointPx(0.0f, ((((-AndroidUtilities.m1146dp(16.0f)) + r0[0]) + chatMessageCell.timeX) + chatMessageCell.timeWidth) - (chatMessageCell.signWidth / 2.0f));
        this.botMessageHint.show();
    }

    private void hideHints() {
        HintView2 hintView2 = this.savedMessagesTagHint;
        if (hintView2 != null && hintView2.shown()) {
            this.savedMessagesTagHint.hide();
        }
        HintView2 hintView22 = this.videoConversionTimeHint;
        if (hintView22 != null && hintView22.shown()) {
            this.videoConversionTimeHint.hide();
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.hideHints();
        }
    }

    public void setTagFilter(ReactionsLayoutInBubble.VisibleReaction visibleReaction) {
        SearchTagsList searchTagsList = this.actionBarSearchTags;
        if (searchTagsList != null) {
            searchTagsList.setChosen(visibleReaction, true);
        }
        boolean z = (TextUtils.isEmpty(this.searchingQuery) && this.searchingReaction == null) ? false : true;
        this.searching = z;
        this.searchItemVisible = z;
        updateBottomOverlay();
        updateSearchUpDownButtonVisibility(true);
    }

    public void setSearchQuery(String str) {
        ActionBarMenuItem actionBarMenuItem = this.searchItem;
        if (actionBarMenuItem != null) {
            this.searchingQuery = str;
            actionBarMenuItem.setSearchFieldText(str, false);
        }
    }

    public void hitSearch() {
        this.searchWas = true;
        updateSearchButtons(0, 0, -1);
        getMediaDataController().searchMessagesInChat(this.searchingQuery, this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages, this.searchingReaction);
        boolean z = (TextUtils.isEmpty(this.searchingQuery) && this.searchingReaction == null) ? false : true;
        this.searching = z;
        this.searchItemVisible = z;
        updateBottomOverlay();
        updateSearchUpDownButtonVisibility(true);
    }

    public void clearSearch() {
        SearchItemListener searchItemListener = this.searchItemListener;
        if (searchItemListener != null) {
            searchItemListener.onSearchCollapse();
        }
        this.searching = false;
        this.searchItemVisible = false;
        updateBottomOverlay();
        updateSearchUpDownButtonVisibility(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setFilterMessages(boolean z) {
        setFilterMessages(z, false, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setFilterMessages(boolean z, boolean z2, boolean z3) {
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter == null || chatActivityAdapter.isFiltered == z) {
            return;
        }
        chatActivityAdapter.isFiltered = z;
        boolean z4 = true;
        createEmptyView(true);
        if (z) {
            updateFilteredMessages(false);
        }
        if (!saveScrollOnFilterToggle(z3, z2)) {
            this.chatAdapter.isFiltered = !z;
        }
        AnimatedTextView animatedTextView = this.searchOtherButton;
        if (animatedTextView != null) {
            animatedTextView.setText(LocaleController.getString(this.chatAdapter.isFiltered ? C2369R.string.SavedTagShowOtherMessages : C2369R.string.SavedTagHideOtherMessages));
        }
        updateSearchUpDownButtonVisibility(true);
        if (this.chatAdapter.isFiltered ? !getMediaDataController().isSearchLoading() || !this.chatAdapter.filteredMessages.isEmpty() : !this.loading || !this.messages.isEmpty() || this.chatAdapter.botInfoRow >= 0) {
            z4 = false;
        }
        showProgressView(z4);
        if (this.chatListView != null) {
            createEmptyView(false);
            if (this.chatAdapter.isFiltered ? getMediaDataController().isSearchLoading() || !this.chatAdapter.filteredMessages.isEmpty() : this.loading || !this.messages.isEmpty() || this.chatAdapter.botInfoRow >= 0) {
                FrameLayout frameLayout = this.emptyViewContainer;
                if (frameLayout != null) {
                    frameLayout.setVisibility(8);
                }
                this.chatListView.setEmptyView(null);
                return;
            }
            this.chatListView.setEmptyView(this.emptyViewContainer);
            this.chatListView.checkIfEmpty();
        }
    }

    private boolean saveScrollOnFilterToggle(boolean z, boolean z2) {
        int i;
        int scrollingOffsetForView;
        int id;
        int i2;
        MessageObject messageObject;
        int iAbs;
        MessageObject messageObject2;
        MessageObject messageObject3;
        ArrayList messages = this.chatAdapter.getMessages();
        this.chatListView.getMeasuredHeight();
        ArrayList arrayList = new ArrayList();
        final HashMap map = new HashMap();
        for (int i3 = 0; i3 < this.chatListView.getChildCount(); i3++) {
            View childAt = this.chatListView.getChildAt(i3);
            int measuredHeight = (((int) (this.chatListView.getMeasuredHeight() * 0.97f)) - AndroidUtilities.m1146dp(42.0f)) - childAt.getBottom();
            if (measuredHeight >= 0) {
                map.put(childAt, Integer.valueOf(measuredHeight));
                arrayList.add(childAt);
            }
        }
        Collections.sort(arrayList, Comparator.CC.comparingInt(new ToIntFunction() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda240
            @Override // java.util.function.ToIntFunction
            public final int applyAsInt(Object obj) {
                return ((Integer) map.get((View) obj)).intValue();
            }
        }));
        HashSet hashSet = new HashSet();
        HashSet hashSet2 = new HashSet();
        for (int i4 = 0; i4 < messages.size(); i4++) {
            MessageObject messageObject4 = (MessageObject) messages.get(i4);
            if (!messageObject4.isDateObject) {
                hashSet.add(Integer.valueOf(messageObject4.getId()));
            }
            hashSet2.add(Integer.valueOf(messageObject4.stableId));
        }
        int i5 = 0;
        while (true) {
            if (i5 >= arrayList.size()) {
                i = 0;
                scrollingOffsetForView = 0;
                break;
            }
            View view = (View) arrayList.get(i5);
            if (view instanceof ChatMessageCell) {
                messageObject3 = ((ChatMessageCell) view).getMessageObject();
            } else if (view instanceof ChatActionCell) {
                messageObject3 = ((ChatActionCell) view).getMessageObject();
            } else if (view instanceof DummyView) {
                messageObject3 = ((DummyView) view).getMessageObject();
            } else {
                continue;
                i5++;
            }
            if (messageObject3 != null) {
                id = messageObject3.getId();
                if (hashSet.contains(Integer.valueOf(id))) {
                    scrollingOffsetForView = getScrollingOffsetForView(view);
                    i = 0;
                    break;
                }
                if (hashSet2.contains(Integer.valueOf(messageObject3.stableId))) {
                    i = messageObject3.stableId;
                    scrollingOffsetForView = getScrollingOffsetForView(view);
                    break;
                }
            } else {
                continue;
            }
            i5++;
        }
        id = 0;
        int i6 = -1;
        if (id == 0 && i == 0) {
            if (!this.chatAdapter.isFiltered && !z2) {
                for (int i7 = 0; i7 < arrayList.size(); i7++) {
                    View view2 = (View) arrayList.get(i7);
                    if ((view2 instanceof ChatMessageCell) && (messageObject2 = ((ChatMessageCell) view2).getMessageObject()) != null) {
                        int id2 = messageObject2.getId();
                        this.waitingForLoad.clear();
                        removeSelectedMessageHighlight();
                        this.scrollToMessagePosition = XCallback.PRIORITY_LOWEST;
                        this.startLoadFromMessageId = id2;
                        this.showScrollToMessageError = false;
                        this.createUnreadMessageAfterIdLoading = false;
                        this.postponedScrollIsCanceled = false;
                        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                        this.postponedScrollToLastMessageQueryIndex = this.lastLoadIndex;
                        this.fakePostponedScroll = true;
                        this.postponedScrollMinMessageId = this.minMessageId[0];
                        this.postponedScrollMessageId = id2;
                        MessagesController messagesController = getMessagesController();
                        long j = this.dialog_id;
                        int i8 = this.startLoadFromMessageId;
                        int i9 = this.classGuid;
                        int i10 = this.chatMode;
                        long j2 = this.threadMessageId;
                        int i11 = this.replyMaxReadId;
                        int i12 = this.lastLoadIndex;
                        this.lastLoadIndex = i12 + 1;
                        messagesController.loadMessages(j, 0L, false, 50, i8, 0, true, 0, i9, 3, 0, i10, j2, i11, i12, this.isTopic);
                        return false;
                    }
                }
            }
            int i13 = -1;
            for (int i14 = 0; i14 < arrayList.size(); i14++) {
                View view3 = (View) arrayList.get(i14);
                if ((view3 instanceof ChatMessageCell) && (messageObject = ((ChatMessageCell) view3).getMessageObject()) != null) {
                    int id3 = messageObject.getId();
                    int i15 = ConnectionsManager.DEFAULT_DATACENTER_ID;
                    int id4 = -1;
                    for (int i16 = 0; i16 < messages.size(); i16++) {
                        MessageObject messageObject5 = (MessageObject) messages.get(i16);
                        if (messageObject5.getId() != 0 && (iAbs = Math.abs(messageObject5.getId() - id3)) < i15) {
                            id4 = messageObject5.getId();
                            i15 = iAbs;
                            i13 = i16;
                            scrollingOffsetForView = 0;
                        }
                    }
                    if (id4 != -1) {
                        break;
                    }
                }
            }
            i6 = i13;
        }
        if (i != 0) {
            i2 = 0;
            while (i2 < messages.size()) {
                if (((MessageObject) messages.get(i2)).stableId == i) {
                    i6 = i2;
                    break;
                }
                i2++;
            }
        } else if (id != 0) {
            i2 = 0;
            while (i2 < messages.size()) {
                if (((MessageObject) messages.get(i2)).getId() == id) {
                    i6 = i2;
                    break;
                }
                i2++;
            }
        }
        this.chatAdapter.updateRowsSafe();
        if (i6 >= 0) {
            this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + i6, scrollingOffsetForView);
        }
        this.chatAdapter.notifyDataSetChanged(z);
        return true;
    }

    private void putFilteredDate(int i, MessageObject messageObject) {
        TLRPC.TL_message tL_message = new TLRPC.TL_message();
        tL_message.message = LocaleController.formatDateChat(messageObject.messageOwner.date);
        tL_message.f1597id = 0;
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(messageObject.messageOwner.date * 1000);
        calendar.set(11, 0);
        calendar.set(12, 0);
        calendar.set(13, 0);
        calendar.set(14, 0);
        tL_message.date = (int) (calendar.getTimeInMillis() / 1000);
        MessageObject messageObject2 = new MessageObject(this.currentAccount, tL_message, false, false);
        messageObject2.type = 10;
        messageObject2.contentType = 1;
        messageObject2.isDateObject = true;
        messageObject2.stableId = getStableIdForDateObject(messageObject.dateKeyInt);
        this.chatAdapter.filteredMessages.add(i, messageObject2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createHint2MessageObject() {
        if (this.hint2MessageObject != null) {
            return;
        }
        TLRPC.TL_message tL_message = new TLRPC.TL_message();
        if (this.chatMode == 3) {
            tL_message.message = LocaleController.getString(C2369R.string.SavedMessagesProfileHint);
        } else {
            tL_message.message = LocaleController.getString(C2369R.string.BusinessRepliesHint);
        }
        tL_message.f1597id = 0;
        MessageObject messageObject = new MessageObject(this.currentAccount, tL_message, false, false);
        this.hint2MessageObject = messageObject;
        messageObject.type = 10;
        messageObject.contentType = 1;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateFilteredMessages(boolean z) {
        boolean z2;
        MessageObject.GroupedMessages groupedMessages;
        TLRPC.Message message;
        TLRPC.TL_messageReactions tL_messageReactions;
        MessageObject messageObject;
        ArrayList arrayList = new ArrayList(MediaDataController.getInstance(this.currentAccount).getFoundMessageObjects());
        if (this.filteredMessagesDict == null) {
            this.filteredMessagesDict = new LongSparseArray();
        }
        LongSparseArray longSparseArray = this.filteredMessagesByDays;
        if (longSparseArray == null) {
            this.filteredMessagesByDays = new LongSparseArray();
        } else {
            longSparseArray.clear();
        }
        this.chatAdapter.filteredMessages.clear();
        this.filteredMessagesDict.clear();
        LongSparseArray longSparseArray2 = null;
        LongSparseArray longSparseArray3 = null;
        int i = 0;
        while (true) {
            z2 = true;
            if (i >= arrayList.size()) {
                break;
            }
            MessageObject messageObject2 = (MessageObject) arrayList.get(i);
            int i2 = 0;
            while (true) {
                if (i2 >= this.messages.size()) {
                    messageObject = null;
                    break;
                }
                messageObject = (MessageObject) this.messages.get(i2);
                if (messageObject.getDialogId() == messageObject2.getDialogId() && messageObject.getId() == messageObject2.getId()) {
                    break;
                } else {
                    i2++;
                }
            }
            if (messageObject2.stableId == 0) {
                if (messageObject == null) {
                    messageObject2.checkMediaExistance();
                } else {
                    messageObject2.mediaExists = messageObject.mediaExists;
                    messageObject2.attachPathExists = messageObject.attachPathExists;
                }
            }
            if (messageObject != null) {
                messageObject2.isSaved = messageObject.isSaved;
                if (this.chatAdapter.isFiltered && messageObject2.stableId != 0) {
                    messageObject.copyStableParams(messageObject2);
                } else {
                    messageObject2.copyStableParams(messageObject);
                }
            } else if (messageObject2.stableId == 0) {
                int i3 = lastStableId;
                lastStableId = i3 + 1;
                messageObject2.stableId = i3;
            }
            messageObject2.isOutOwnerCached = null;
            TLRPC.Message message2 = messageObject2.messageOwner;
            if (message2 != null) {
                message2.out = true;
            }
            messageObject2.isOutOwner();
            if (messageObject2.hasValidGroupId()) {
                MessageObject.GroupedMessages groupedMessages2 = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject2.getGroupIdForUse());
                if (groupedMessages2 == null) {
                    groupedMessages2 = new MessageObject.GroupedMessages();
                    groupedMessages2.reversed = this.reversed;
                    long groupId = messageObject2.getGroupId();
                    groupedMessages2.groupId = groupId;
                    this.groupedMessagesMap.put(groupId, groupedMessages2);
                } else if (longSparseArray2 == null || longSparseArray2.indexOfKey(messageObject2.getGroupId()) < 0) {
                    if (longSparseArray3 == null) {
                        longSparseArray3 = new LongSparseArray();
                    }
                    longSparseArray3.put(messageObject2.getGroupId(), groupedMessages2);
                }
                if (longSparseArray2 == null) {
                    longSparseArray2 = new LongSparseArray();
                }
                longSparseArray2.put(groupedMessages2.groupId, groupedMessages2);
                if (groupedMessages2.getPosition(messageObject2) == null) {
                    int i4 = 0;
                    while (true) {
                        if (i4 < groupedMessages2.messages.size()) {
                            if (groupedMessages2.messages.get(i4).getId() == messageObject2.getId()) {
                                break;
                            } else {
                                i4++;
                            }
                        } else {
                            groupedMessages2.messages.add(messageObject2);
                            break;
                        }
                    }
                }
            } else if (messageObject2.getGroupIdForUse() != 0) {
                messageObject2.messageOwner.grouped_id = 0L;
                messageObject2.localSentGroupId = 0L;
            }
            this.chatAdapter.filteredMessages.add(messageObject2);
            this.filteredMessagesDict.put(messageObject2.getId(), messageObject2);
            i++;
        }
        if (longSparseArray2 != null) {
            for (int i5 = 0; i5 < longSparseArray2.size(); i5++) {
                MessageObject.GroupedMessages groupedMessages3 = (MessageObject.GroupedMessages) longSparseArray2.valueAt(i5);
                Collections.sort(groupedMessages3.messages, new java.util.Comparator() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda153
                    @Override // java.util.Comparator
                    public final int compare(Object obj, Object obj2) {
                        return ChatActivity.$r8$lambda$Ts9jlWYgOCEydGzlNKgiNcfhDMY((MessageObject) obj, (MessageObject) obj2);
                    }
                });
                groupedMessages3.calculate();
            }
        }
        ArrayList arrayList2 = new ArrayList();
        if (this.searchingReaction != null && TextUtils.isEmpty(this.searchingQuery)) {
            for (int i6 = 0; i6 < this.messages.size(); i6++) {
                MessageObject messageObject3 = (MessageObject) this.messages.get(i6);
                if (messageObject3 != null && (message = messageObject3.messageOwner) != null && (tL_messageReactions = message.reactions) != null && tL_messageReactions.reactions_as_tags) {
                    int i7 = 0;
                    while (true) {
                        if (i7 >= messageObject3.messageOwner.reactions.results.size()) {
                            break;
                        }
                        if (this.searchingReaction.isSame(((TLRPC.ReactionCount) messageObject3.messageOwner.reactions.results.get(i7)).reaction)) {
                            arrayList2.add(messageObject3);
                            break;
                        }
                        i7++;
                    }
                }
            }
        }
        for (int i8 = 0; i8 < arrayList2.size(); i8++) {
            MessageObject messageObject4 = (MessageObject) arrayList2.get(i8);
            if (!this.filteredMessagesDict.containsKey(messageObject4.getId())) {
                messageObject4.isOutOwnerCached = null;
                TLRPC.Message message3 = messageObject4.messageOwner;
                if (message3 != null) {
                    message3.out = true;
                }
                this.chatAdapter.filteredMessages.add(messageObject4);
                this.filteredMessagesDict.put(messageObject4.getId(), messageObject4);
            }
        }
        int i9 = 0;
        while (i9 < this.chatAdapter.filteredMessages.size()) {
            MessageObject messageObject5 = (MessageObject) this.chatAdapter.filteredMessages.get(i9);
            if (messageObject5.hasValidGroupId() && (groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject5.getGroupId())) != null) {
                for (int size = groupedMessages.messages.size() - 1; size >= 0; size--) {
                    MessageObject messageObject6 = groupedMessages.messages.get(size);
                    if (messageObject6 != messageObject5 && !this.filteredMessagesDict.containsKey(messageObject6.getId())) {
                        this.chatAdapter.filteredMessages.add(i9, messageObject6);
                        this.filteredMessagesDict.put(messageObject6.getId(), messageObject6);
                        i9++;
                    }
                }
            }
            i9++;
        }
        Collections.sort(this.chatAdapter.filteredMessages, new java.util.Comparator() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda154
            @Override // java.util.Comparator
            public final int compare(Object obj, Object obj2) {
                return ChatActivity.$r8$lambda$e3_zSMeqLrdfon0CwshBVU1NMYc((MessageObject) obj, (MessageObject) obj2);
            }
        });
        MessageObject messageObject7 = null;
        int i10 = 0;
        while (i10 < this.chatAdapter.filteredMessages.size()) {
            MessageObject messageObject8 = (MessageObject) this.chatAdapter.filteredMessages.get(i10);
            if (this.reversed && messageObject8 != null && i10 == 0) {
                putFilteredDate(i10, messageObject8);
                i10++;
            }
            if (!this.reversed && messageObject7 != null && messageObject8.dateKeyInt != messageObject7.dateKeyInt) {
                putFilteredDate(i10, messageObject7);
                i10++;
            }
            ArrayList arrayList3 = (ArrayList) this.filteredMessagesByDays.get(messageObject8.dateKeyInt);
            if (arrayList3 == null) {
                LongSparseArray longSparseArray4 = this.filteredMessagesByDays;
                long j = messageObject8.dateKeyInt;
                ArrayList arrayList4 = new ArrayList();
                longSparseArray4.put(j, arrayList4);
                arrayList3 = arrayList4;
            }
            arrayList3.add(messageObject8);
            if (this.reversed && messageObject7 != null && messageObject8.dateKeyInt != messageObject7.dateKeyInt) {
                putFilteredDate(i10, messageObject8);
                i10++;
            }
            if (!this.reversed && i10 >= this.chatAdapter.filteredMessages.size() - 1) {
                putFilteredDate(this.chatAdapter.filteredMessages.size(), messageObject8);
                i10++;
            }
            i10++;
            messageObject7 = messageObject8;
        }
        this.chatAdapter.filteredEndReached = MediaDataController.getInstance(this.currentAccount).searchEndReached();
        if (z) {
            this.chatAdapter.updateRowsSafe();
            this.chatAdapter.notifyDataSetChanged(true);
            if (this.chatAdapter.isFiltered ? !getMediaDataController().isSearchLoading() || !this.chatAdapter.filteredMessages.isEmpty() : !this.loading || !this.messages.isEmpty() || this.chatAdapter.botInfoRow >= 0) {
                z2 = false;
            }
            showProgressView(z2);
            if (this.chatListView != null) {
                createEmptyView(false);
                if (this.chatAdapter.isFiltered ? getMediaDataController().isSearchLoading() || !this.chatAdapter.filteredMessages.isEmpty() : this.loading || !this.messages.isEmpty() || this.chatAdapter.botInfoRow >= 0) {
                    this.emptyViewContainer.setVisibility(8);
                    this.chatListView.setEmptyView(null);
                } else {
                    this.chatListView.setEmptyView(this.emptyViewContainer);
                    this.chatListView.checkIfEmpty();
                }
            }
        }
    }

    public static /* synthetic */ int $r8$lambda$Ts9jlWYgOCEydGzlNKgiNcfhDMY(MessageObject messageObject, MessageObject messageObject2) {
        return messageObject.getId() - messageObject2.getId();
    }

    public static /* synthetic */ int $r8$lambda$e3_zSMeqLrdfon0CwshBVU1NMYc(MessageObject messageObject, MessageObject messageObject2) {
        return messageObject2.getId() - messageObject.getId();
    }

    private void checkInstantSearch() {
        TLRPC.Chat chat;
        long j = getArguments().getInt("search_from_user_id", 0);
        if (j != 0) {
            TLRPC.User user = getMessagesController().getUser(Long.valueOf(j));
            if (user != null) {
                openSearchWithText();
                ImageView imageView = this.searchUserButton;
                if (imageView != null) {
                    imageView.callOnClick();
                }
                searchUserMessages(user, null);
                return;
            }
            return;
        }
        long j2 = getArguments().getInt("search_from_chat_id", 0);
        if (j2 == 0 || (chat = getMessagesController().getChat(Long.valueOf(j2))) == null) {
            return;
        }
        openSearchWithText();
        ImageView imageView2 = this.searchUserButton;
        if (imageView2 != null) {
            imageView2.callOnClick();
        }
        searchUserMessages(null, chat);
    }

    private void createTopPanel() {
        if (this.contentView == null || this.topChatPanelView != null || getContext() == null) {
            return;
        }
        BlurredFrameLayout blurredFrameLayout = new BlurredFrameLayout(getContext(), this.contentView) { // from class: org.telegram.ui.ChatActivity.50
            private boolean ignoreLayout;

            @Override // android.widget.FrameLayout, android.view.View
            protected void onMeasure(int i, int i2) {
                int iM1146dp;
                int size = View.MeasureSpec.getSize(i);
                if (ChatActivity.this.isSideMenued()) {
                    size -= AndroidUtilities.m1146dp(71.0f);
                    iM1146dp = AndroidUtilities.m1146dp(32.0f);
                } else {
                    iM1146dp = 0;
                }
                if (ChatActivity.this.addToContactsButton != null && ChatActivity.this.addToContactsButton.getVisibility() == 0 && ChatActivity.this.reportSpamButton != null && ChatActivity.this.reportSpamButton.getVisibility() == 0) {
                    size = (size - AndroidUtilities.m1146dp(31.0f)) / 2;
                }
                this.ignoreLayout = true;
                if (ChatActivity.this.reportSpamButton != null && ChatActivity.this.reportSpamButton.getVisibility() == 0) {
                    FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) ChatActivity.this.reportSpamButton.getLayoutParams();
                    layoutParams.width = size;
                    if (ChatActivity.this.addToContactsButton != null && ChatActivity.this.addToContactsButton.getVisibility() == 0) {
                        ChatActivity.this.reportSpamButton.setPadding(AndroidUtilities.m1146dp(4.0f), 0, AndroidUtilities.m1146dp(4.0f), 0);
                        layoutParams.leftMargin = iM1146dp + size;
                        layoutParams.width -= AndroidUtilities.m1146dp(15.0f);
                    } else {
                        ChatActivity.this.reportSpamButton.setPadding(AndroidUtilities.m1146dp(48.0f), 0, AndroidUtilities.m1146dp(48.0f), 0);
                        layoutParams.leftMargin = iM1146dp;
                    }
                }
                if (ChatActivity.this.addToContactsButton != null && ChatActivity.this.addToContactsButton.getVisibility() == 0) {
                    FrameLayout.LayoutParams layoutParams2 = (FrameLayout.LayoutParams) ChatActivity.this.addToContactsButton.getLayoutParams();
                    layoutParams2.width = size;
                    if (ChatActivity.this.reportSpamButton != null && ChatActivity.this.reportSpamButton.getVisibility() == 0) {
                        ChatActivity.this.addToContactsButton.setPadding(AndroidUtilities.m1146dp(11.0f), 0, AndroidUtilities.m1146dp(4.0f), 0);
                    } else {
                        ChatActivity.this.addToContactsButton.setPadding(AndroidUtilities.m1146dp(48.0f), 0, AndroidUtilities.m1146dp(48.0f), 0);
                    }
                    layoutParams2.leftMargin = iM1146dp;
                }
                this.ignoreLayout = false;
                super.onMeasure(i, i2);
            }

            @Override // android.view.View, android.view.ViewParent
            public void requestLayout() {
                if (this.ignoreLayout) {
                    return;
                }
                super.requestLayout();
            }

            @Override // org.telegram.p023ui.Components.BlurredFrameLayout, android.view.ViewGroup, android.view.View
            protected void dispatchDraw(Canvas canvas) {
                super.dispatchDraw(canvas);
                canvas.drawLine(0.0f, getMeasuredHeight() - AndroidUtilities.m1146dp(2.0f), getMeasuredWidth(), getMeasuredHeight() - AndroidUtilities.m1146dp(2.0f), Theme.dividerPaint);
            }
        };
        this.topChatPanelView = blurredFrameLayout;
        int i = Theme.key_chat_topPanelBackground;
        blurredFrameLayout.backgroundColor = getThemedColor(i);
        this.topChatPanelView.backgroundPaddingBottom = AndroidUtilities.m1146dp(2.0f);
        this.topChatPanelView.setTag(1);
        this.topChatPanelViewOffset = -AndroidUtilities.m1146dp(50.0f);
        invalidateChatListViewTopPadding();
        this.topChatPanelView.setClickable(true);
        this.topChatPanelView.setVisibility(8);
        this.topChatPanelView.setBackgroundResource(C2369R.drawable.blockpanel);
        Drawable background = this.topChatPanelView.getBackground();
        int themedColor = getThemedColor(i);
        PorterDuff.Mode mode = PorterDuff.Mode.MULTIPLY;
        background.setColorFilter(new PorterDuffColorFilter(themedColor, mode));
        int iMin = Math.min(8, this.contentView.getChildCount());
        BlurredFrameLayout blurredFrameLayout2 = this.pinnedMessageView;
        if (blurredFrameLayout2 != null) {
            ViewParent parent = blurredFrameLayout2.getParent();
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (parent == chatActivityFragmentView) {
                iMin = chatActivityFragmentView.indexOfChild(this.pinnedMessageView) + 1;
            }
        }
        this.contentView.addView(this.topChatPanelView, iMin, LayoutHelper.createFrame(-1, 50, 51));
        TextView textView = new TextView(getContext());
        this.reportSpamButton = textView;
        int i2 = Theme.key_text_RedBold;
        textView.setTextColor(getThemedColor(i2));
        this.reportSpamButton.setBackground(Theme.createSelectorDrawable(getThemedColor(i2) & 436207615, 3));
        this.reportSpamButton.setTag(Integer.valueOf(i2));
        this.reportSpamButton.setTextSize(1, 14.0f);
        this.reportSpamButton.setTypeface(AndroidUtilities.bold());
        this.reportSpamButton.setSingleLine(true);
        this.reportSpamButton.setMaxLines(1);
        this.reportSpamButton.setGravity(17);
        this.topChatPanelView.addView(this.reportSpamButton, LayoutHelper.createFrame(-1, 48.0f, 51, 0.0f, 0.0f, 0.0f, 1.0f));
        this.reportSpamButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda259
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                this.f$0.lambda$createTopPanel$90(view);
            }
        });
        LinkSpanDrawable.LinksTextView linksTextView = new LinkSpanDrawable.LinksTextView(getContext(), this.themeDelegate);
        this.emojiStatusSpamHint = linksTextView;
        linksTextView.setTextColor(getThemedColor(Theme.key_chat_topPanelMessage));
        this.emojiStatusSpamHint.setTextSize(1, 13.3f);
        this.emojiStatusSpamHint.setGravity(17);
        this.emojiStatusSpamHint.setVisibility(8);
        this.emojiStatusSpamHint.setLinkTextColor(getThemedColor(Theme.key_windowBackgroundWhiteLinkText));
        this.topChatPanelView.addView(this.emojiStatusSpamHint, LayoutHelper.createFrame(-1, -2.0f, 51, 25.0f, 0.0f, 25.0f, 1.0f));
        View view = new View(getContext());
        this.topViewSeparator1 = view;
        view.setVisibility(8);
        View view2 = this.topViewSeparator1;
        int i3 = Theme.key_divider;
        view2.setBackgroundColor(getThemedColor(i3));
        this.topViewSeparator1.setAlpha(0.5f);
        this.topChatPanelView.addView(this.topViewSeparator1, LayoutHelper.createFrame(-1, 1.0f / AndroidUtilities.density, 83, 0.0f, 0.0f, 0.0f, 2.0f));
        View view3 = new View(getContext());
        this.topViewSeparator2 = view3;
        view3.setVisibility(8);
        this.topViewSeparator2.setBackgroundColor(getThemedColor(i3));
        this.topChatPanelView.addView(this.topViewSeparator2, LayoutHelper.createFrame(-1, 1.0f / AndroidUtilities.density, 51, 10.0f, 48.0f, 10.0f, 1.0f));
        View view4 = new View(getContext());
        this.topViewSeparator3 = view4;
        view4.setVisibility(8);
        this.topViewSeparator3.setBackgroundColor(getThemedColor(i3));
        this.topChatPanelView.addView(this.topViewSeparator3, LayoutHelper.createFrame(-1, 1.0f / AndroidUtilities.density, 83, 0.0f, 0.0f, 0.0f, 38.0f));
        TextView textView2 = new TextView(getContext());
        this.addToContactsButton = textView2;
        int i4 = Theme.key_chat_addContact;
        textView2.setTextColor(getThemedColor(i4));
        this.addToContactsButton.setVisibility(8);
        this.addToContactsButton.setTextSize(1, 14.0f);
        this.addToContactsButton.setTypeface(AndroidUtilities.bold());
        this.addToContactsButton.setSingleLine(true);
        this.addToContactsButton.setMaxLines(1);
        this.addToContactsButton.setPadding(AndroidUtilities.m1146dp(4.0f), 0, AndroidUtilities.m1146dp(4.0f), 0);
        this.addToContactsButton.setGravity(17);
        this.addToContactsButton.setBackground(Theme.createSelectorDrawable(getThemedColor(i4) & 436207615, 3));
        this.topChatPanelView.addView(this.addToContactsButton, LayoutHelper.createFrame(-1, 48.0f, 51, 0.0f, 0.0f, 0.0f, 1.0f));
        this.addToContactsButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda260
            @Override // android.view.View.OnClickListener
            public final void onClick(View view5) {
                this.f$0.lambda$createTopPanel$93(view5);
            }
        });
        TextView textView3 = new TextView(getContext());
        this.restartTopicButton = textView3;
        textView3.setTextColor(getThemedColor(i4));
        this.restartTopicButton.setVisibility(8);
        this.restartTopicButton.setTextSize(1, 14.0f);
        this.restartTopicButton.setTypeface(AndroidUtilities.bold());
        this.restartTopicButton.setSingleLine(true);
        this.restartTopicButton.setMaxLines(1);
        this.restartTopicButton.setPadding(AndroidUtilities.m1146dp(4.0f), 0, AndroidUtilities.m1146dp(4.0f), 0);
        this.restartTopicButton.setGravity(17);
        this.restartTopicButton.setText(LocaleController.getString(C2369R.string.RestartTopic).toUpperCase());
        this.restartTopicButton.setBackground(Theme.createSelectorDrawable(getThemedColor(i4) & 436207615, 3));
        this.topChatPanelView.addView(this.restartTopicButton, LayoutHelper.createFrame(-1, 48.0f, 51, 0.0f, 0.0f, 0.0f, 1.0f));
        this.restartTopicButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda261
            @Override // android.view.View.OnClickListener
            public final void onClick(View view5) {
                this.f$0.lambda$createTopPanel$94(view5);
            }
        });
        ImageView imageView = new ImageView(getContext());
        this.closeReportSpam = imageView;
        imageView.setImageResource(C2369R.drawable.miniplayer_close);
        this.closeReportSpam.setContentDescription(LocaleController.getString(C2369R.string.Close));
        ImageView imageView2 = this.closeReportSpam;
        int i5 = Theme.key_chat_topPanelClose;
        imageView2.setBackground(Theme.AdaptiveRipple.circle(getThemedColor(i5)));
        this.closeReportSpam.setColorFilter(new PorterDuffColorFilter(getThemedColor(i5), mode));
        this.closeReportSpam.setScaleType(ImageView.ScaleType.CENTER);
        this.topChatPanelView.addView(this.closeReportSpam, LayoutHelper.createFrame(36, 36.0f, 53, 0.0f, 6.0f, 2.0f, 0.0f));
        this.closeReportSpam.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda262
            @Override // android.view.View.OnClickListener
            public final void onClick(View view5) {
                this.f$0.lambda$createTopPanel$95(view5);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$90(View view) {
        AlertsCreator.showBlockReportSpamAlert(this, this.dialog_id, this.currentUser, this.currentChat, this.currentEncryptedChat, this.reportSpamButton.getTag(C2369R.id.object_tag) != null, this.chatInfo, new MessagesStorage.IntCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda375
            @Override // org.telegram.messenger.MessagesStorage.IntCallback
            public final void run(int i) {
                this.f$0.lambda$createTopPanel$89(i);
            }
        }, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$89(int i) {
        if (i == 0) {
            updateTopPanel(true);
        } else {
            lambda$onBackPressed$371();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$93(View view) {
        if (this.addToContactsButtonArchive) {
            getMessagesController().addDialogToFolder(this.dialog_id, 0, 0, 0L);
            createUndoView();
            this.undoView.showWithAction(this.dialog_id, 23, (Runnable) null);
            SharedPreferences.Editor editorEdit = MessagesController.getNotificationsSettings(this.currentAccount).edit();
            editorEdit.putBoolean("dialog_bar_archived" + this.dialog_id, false);
            editorEdit.putBoolean("dialog_bar_block" + this.dialog_id, false);
            editorEdit.putBoolean("dialog_bar_report" + this.dialog_id, false);
            editorEdit.commit();
            updateTopPanel(false);
            getNotificationsController().clearDialogNotificationsSettings(this.dialog_id, getTopicId());
            return;
        }
        if (this.addToContactsButton.getTag() != null && ((Integer) this.addToContactsButton.getTag()).intValue() == 4) {
            TLRPC.ChatFull chatFull = this.chatInfo;
            if (chatFull == null || chatFull.participants == null) {
                return;
            }
            LongSparseArray longSparseArray = new LongSparseArray();
            for (int i = 0; i < this.chatInfo.participants.participants.size(); i++) {
                longSparseArray.put(((TLRPC.ChatParticipant) this.chatInfo.participants.participants.get(i)).user_id, null);
            }
            long j = this.chatInfo.f1572id;
            InviteMembersBottomSheet inviteMembersBottomSheet = new InviteMembersBottomSheet(getContext(), this.currentAccount, longSparseArray, this.chatInfo.f1572id, this, this.themeDelegate);
            inviteMembersBottomSheet.setDelegate(new GroupCreateActivity.ContactsAddActivityDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda429
                @Override // org.telegram.ui.GroupCreateActivity.ContactsAddActivityDelegate
                public final void didSelectUsers(ArrayList arrayList, int i2) {
                    this.f$0.lambda$createTopPanel$91(arrayList, i2);
                }

                @Override // org.telegram.ui.GroupCreateActivity.ContactsAddActivityDelegate
                public /* synthetic */ void needAddBot(TLRPC.User user) {
                    GroupCreateActivity.ContactsAddActivityDelegate.CC.$default$needAddBot(this, user);
                }
            });
            inviteMembersBottomSheet.show();
            return;
        }
        if (this.addToContactsButton.getTag() != null) {
            shareMyContact(1, null);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putLong("user_id", this.currentUser.f1734id);
        bundle.putBoolean("addContact", true);
        ContactAddActivity contactAddActivity = new ContactAddActivity(bundle);
        contactAddActivity.setDelegate(new ContactAddActivity.ContactAddActivityDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda430
            @Override // org.telegram.ui.ContactAddActivity.ContactAddActivityDelegate
            public final void didAddToContacts() {
                this.f$0.lambda$createTopPanel$92();
            }
        });
        presentFragment(contactAddActivity);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$91(ArrayList arrayList, int i) {
        getMessagesController().addUsersToChat(this.currentChat, this, arrayList, i, null, null, null);
        getMessagesController().hidePeerSettingsBar(this.dialog_id, this.currentUser, this.currentChat);
        updateTopPanel(true);
        updateInfoTopView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$92() {
        if (this.undoView != null || getContext() == null) {
            return;
        }
        createUndoView();
        this.undoView.showWithAction(this.dialog_id, 8, this.currentUser);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$94(View view) {
        if (this.forumTopic != null) {
            TopicsController topicsController = getMessagesController().getTopicsController();
            long j = this.currentChat.f1571id;
            TLRPC.TL_forumTopic tL_forumTopic = this.forumTopic;
            int i = tL_forumTopic.f1631id;
            tL_forumTopic.closed = false;
            topicsController.toggleCloseTopic(j, i, false);
        }
        updateTopicButtons();
        updateBottomOverlay();
        updateTopPanel(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopPanel$95(View view) {
        long j = this.dialog_id;
        if (this.currentEncryptedChat != null) {
            j = this.currentUser.f1734id;
        }
        this.shownBotVerification = false;
        getMessagesController().hidePeerSettingsBar(j, this.currentUser, this.currentChat);
        updateTopPanel(true);
        updateInfoTopView(true);
    }

    private void createTopPanel2() {
        if (this.contentView == null || this.topChatPanelView2 != null || getContext() == null) {
            return;
        }
        BlurredFrameLayout blurredFrameLayout = new BlurredFrameLayout(getContext(), this.contentView);
        this.topChatPanelView2 = blurredFrameLayout;
        int i = Theme.key_chat_topPanelBackground;
        blurredFrameLayout.backgroundColor = getThemedColor(i);
        this.topChatPanelView2.backgroundPaddingBottom = AndroidUtilities.m1146dp(2.0f);
        this.topChatPanelView2.setPadding(0, 0, 0, AndroidUtilities.m1146dp(2.0f));
        this.topChatPanelView2.setTag(1);
        this.topChatPanelView2Offset = -AndroidUtilities.m1146dp(50.0f);
        invalidateChatListViewTopPadding();
        this.topChatPanelView2.setClickable(true);
        int iIndexOfChild = 8;
        this.topChatPanelView2.setVisibility(8);
        this.topChatPanelView2.setBackgroundResource(C2369R.drawable.blockpanel);
        this.topChatPanelView2.getBackground().setColorFilter(new PorterDuffColorFilter(getThemedColor(i), PorterDuff.Mode.MULTIPLY));
        BlurredFrameLayout blurredFrameLayout2 = this.pinnedMessageView;
        if (blurredFrameLayout2 != null) {
            ViewParent parent = blurredFrameLayout2.getParent();
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (parent == chatActivityFragmentView) {
                iIndexOfChild = chatActivityFragmentView.indexOfChild(this.pinnedMessageView) + 1;
            }
        }
        this.contentView.addView(this.topChatPanelView2, iIndexOfChild, LayoutHelper.createFrame(-1, 50, 51));
    }

    private void createTranslateButton() {
        if (this.translateButton != null || getContext() == null) {
            return;
        }
        createTopPanel();
        if (this.topChatPanelView == null) {
            return;
        }
        TranslateButton translateButton = new TranslateButton(getContext(), this, this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.51
            @Override // org.telegram.p023ui.Components.TranslateButton
            protected void onButtonClick() {
                ChatActivity chatActivity;
                TLRPC.Chat chat;
                if (!ChatActivity.this.getUserConfig().isPremium() && ((chat = (chatActivity = ChatActivity.this).currentChat) == null || !chat.autotranslation)) {
                    MessagesController.getNotificationsSettings(((BaseFragment) chatActivity).currentAccount).edit().putInt("dialog_show_translate_count" + ChatActivity.this.getDialogId(), 14).commit();
                    ChatActivity.this.showDialog(new PremiumFeatureBottomSheet(ChatActivity.this, 13, false));
                } else {
                    ChatActivity.this.getMessagesController().getTranslateController().toggleTranslatingDialog(ChatActivity.this.getDialogId());
                }
                ChatActivity.this.updateTopPanel(true);
            }

            @Override // org.telegram.p023ui.Components.TranslateButton
            protected void onCloseClick() {
                MessagesController.getNotificationsSettings(((BaseFragment) ChatActivity.this).currentAccount).edit().putInt("dialog_show_translate_count" + ChatActivity.this.getDialogId(), Opcodes.F2L).commit();
                ChatActivity.this.updateTopPanel(true);
            }
        };
        this.translateButton = translateButton;
        this.topChatPanelView.addView(translateButton, LayoutHelper.createFrame(-1, 36.0f, 83, 0.0f, 0.0f, 0.0f, 2.0f));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isAllChats() {
        return this.topicsTabs != null && this.threadMessageId == 0;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isSideMenued() {
        if (this.topicsTabs != null) {
            return true;
        }
        if (this.isSubscriberSuggestions || !ChatObject.isMonoForum(this.currentChat)) {
            return ChatObject.isForum(this.currentChat) && ChatObject.areTabsEnabled(this.currentChat);
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isSideMenuEnabled() {
        TopicsTabsView topicsTabsView = this.topicsTabs;
        return topicsTabsView != null && topicsTabsView.sidemenuEnabled;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public float getSideMenuAlpha() {
        TopicsTabsView topicsTabsView = this.topicsTabs;
        if (topicsTabsView != null) {
            return topicsTabsView.sidemenuT;
        }
        return 0.0f;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getSideMenuWidth() {
        return (int) (AndroidUtilities.m1146dp(71.0f) * getSideMenuAlpha());
    }

    private boolean isSideMenuAnimating() {
        TopicsTabsView topicsTabsView = this.topicsTabs;
        return topicsTabsView != null && topicsTabsView.sidemenuAnimating;
    }

    private void createTopicsTabs() {
        if (this.topicsTabs != null || getContext() == null) {
            return;
        }
        if (this.pinnedMessageView == null) {
            createPinnedMessageView();
        }
        C310052 c310052 = new C310052(getContext(), this, this.contentView, this.currentAccount, getDialogId(), getResourceProvider());
        this.topicsTabs = c310052;
        c310052.setSideMenuBackgroundDrawable(this.glassBackgroundDrawableFactory.create(c310052, this.blurredBackgroundColorProvider));
        BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
        int iMax = 8;
        if (blurredFrameLayout != null) {
            ViewParent parent = blurredFrameLayout.getParent();
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (parent == chatActivityFragmentView) {
                iMax = Math.max(8, chatActivityFragmentView.indexOfChild(this.topChatPanelView) + 1);
            }
        }
        BlurredFrameLayout blurredFrameLayout2 = this.topChatPanelView2;
        if (blurredFrameLayout2 != null) {
            ViewParent parent2 = blurredFrameLayout2.getParent();
            ChatActivityFragmentView chatActivityFragmentView2 = this.contentView;
            if (parent2 == chatActivityFragmentView2) {
                iMax = Math.max(iMax, chatActivityFragmentView2.indexOfChild(this.topChatPanelView2) + 1);
            }
        }
        ChatActivityMemberRequestsDelegate chatActivityMemberRequestsDelegate = this.pendingRequestsDelegate;
        View view = chatActivityMemberRequestsDelegate != null ? chatActivityMemberRequestsDelegate.getView() : null;
        if (view != null) {
            ViewParent parent3 = view.getParent();
            ChatActivityFragmentView chatActivityFragmentView3 = this.contentView;
            if (parent3 == chatActivityFragmentView3) {
                iMax = Math.max(iMax, chatActivityFragmentView3.indexOfChild(view) + 1);
            }
        }
        BlurredFrameLayout blurredFrameLayout3 = this.pinnedMessageView;
        if (blurredFrameLayout3 != null) {
            ViewParent parent4 = blurredFrameLayout3.getParent();
            ChatActivityFragmentView chatActivityFragmentView4 = this.contentView;
            if (parent4 == chatActivityFragmentView4) {
                iMax = Math.max(iMax, chatActivityFragmentView4.indexOfChild(this.pinnedMessageView) + 1);
            }
        }
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            ViewParent parent5 = fragmentContextView.getParent();
            ChatActivityFragmentView chatActivityFragmentView5 = this.contentView;
            if (parent5 == chatActivityFragmentView5) {
                iMax = Math.max(iMax, chatActivityFragmentView5.indexOfChild(this.fragmentContextView) + 1);
            }
        }
        FragmentContextView fragmentContextView2 = this.fragmentLocationContextView;
        if (fragmentContextView2 != null) {
            ViewParent parent6 = fragmentContextView2.getParent();
            ChatActivityFragmentView chatActivityFragmentView6 = this.contentView;
            if (parent6 == chatActivityFragmentView6) {
                iMax = Math.max(iMax, chatActivityFragmentView6.indexOfChild(this.fragmentLocationContextView) + 1);
            }
        }
        this.topicsTabs.setCurrentTopic(getTopicId());
        this.topicsTabs.setOnNewTopicSelected(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda125
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createTopicsTabs$96();
            }
        });
        this.topicsTabs.setOnTopicSelected(new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda126
            @Override // org.telegram.messenger.Utilities.Callback2
            public final void run(Object obj, Object obj2) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$createTopicsTabs$97((Integer) obj, (Boolean) obj2);
            }
        });
        this.topicsTabs.setOnDialogSelected(new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda127
            @Override // org.telegram.messenger.Utilities.Callback2
            public final void run(Object obj, Object obj2) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$createTopicsTabs$98((Long) obj, (Boolean) obj2);
            }
        });
        this.contentView.addView(this.topicsTabs, iMax, LayoutHelper.createFrame(-1, -1, 51));
        this.topicsTabs.updateSidemenuPosition();
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null) {
            mentionsContainerView.bringToFront();
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$52 */
    /* loaded from: classes5.dex */
    class C310052 extends TopicsTabsView {
        C310052(Context context, BaseFragment baseFragment, SizeNotifierFrameLayout sizeNotifierFrameLayout, int i, long j, Theme.ResourcesProvider resourcesProvider) {
            super(context, baseFragment, sizeNotifierFrameLayout, i, j, resourcesProvider);
        }

        @Override // org.telegram.p023ui.Components.TopicsTabsView
        public void updateSidemenuPosition() {
            super.updateSidemenuPosition();
            ChatActivity.this.invalidateChatListViewTopPadding();
            AndroidUtilities.forEachViews((RecyclerView) ChatActivity.this.chatListView, new Consumer() { // from class: org.telegram.ui.ChatActivity$52$$ExternalSyntheticLambda0
                @Override // com.google.android.exoplayer2.util.Consumer
                public final void accept(Object obj) {
                    this.f$0.lambda$updateSidemenuPosition$0((View) obj);
                }
            });
            if (ChatActivity.this.floatingDateView != null) {
                ChatActivity.this.floatingDateView.setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
            if (ChatActivity.this.floatingTopicSeparator != null) {
                ChatActivity.this.floatingTopicSeparator.setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
            if (ChatActivity.this.emptyViewContainer != null) {
                ChatActivity.this.emptyViewContainer.setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
            if (ChatActivity.this.pendingRequestsDelegate != null) {
                ChatActivity.this.pendingRequestsDelegate.setLeftMargin(ChatActivity.this.getSideMenuWidth());
            }
            if (ChatActivity.this.bizBotButton != null) {
                ChatActivity.this.bizBotButton.setLeftMargin(ChatActivity.this.getSideMenuWidth());
            }
            if (ChatActivity.this.restartTopicButton != null) {
                ChatActivity.this.restartTopicButton.setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
            if (ChatActivity.this.emojiStatusSpamHint != null) {
                ChatActivity.this.emojiStatusSpamHint.setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$updateSidemenuPosition$0(View view) {
            if (view instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) view;
                chatMessageCell.isAllChats = ChatActivity.this.isAllChats();
                chatMessageCell.isSideMenued = ChatActivity.this.isSideMenued();
                boolean zIsSideMenuEnabled = ChatActivity.this.isSideMenuEnabled();
                if (chatMessageCell.isSideMenuEnabled != zIsSideMenuEnabled) {
                    chatMessageCell.isSideMenuEnabled = zIsSideMenuEnabled;
                    int childAdapterPosition = ChatActivity.this.chatListView.getChildAdapterPosition(view);
                    chatMessageCell.relayout();
                    if (childAdapterPosition >= 0) {
                        ChatActivity.this.chatAdapter.notifyItemChanged(childAdapterPosition);
                    }
                }
                chatMessageCell.sideMenuAlpha = ChatActivity.this.getSideMenuAlpha();
                int sideMenuWidth = ChatActivity.this.getSideMenuWidth();
                if (chatMessageCell.sideMenuWidth != sideMenuWidth) {
                    chatMessageCell.sideMenuWidth = sideMenuWidth;
                    chatMessageCell.updateTranslation();
                    chatMessageCell.invalidate();
                    return;
                }
                return;
            }
            if (view instanceof ChatActionCell) {
                ChatActionCell chatActionCell = (ChatActionCell) view;
                chatActionCell.isAllChats = ChatActivity.this.isAllChats();
                chatActionCell.isSideMenued = ChatActivity.this.isSideMenued();
                chatActionCell.isSideMenuEnabled = ChatActivity.this.isSideMenuEnabled();
                chatActionCell.sideMenuAlpha = ChatActivity.this.getSideMenuAlpha();
                int sideMenuWidth2 = ChatActivity.this.getSideMenuWidth();
                if (chatActionCell.sideMenuWidth != sideMenuWidth2) {
                    chatActionCell.sideMenuWidth = sideMenuWidth2;
                    chatActionCell.invalidate();
                    return;
                }
                return;
            }
            if (view instanceof ChatUnreadCell) {
                ((ChatUnreadCell) view).getTextView().setTranslationX(ChatActivity.this.getSideMenuWidth() / 2.0f);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopicsTabs$96() {
        presentFragment(TopicCreateFragment.create(-this.dialog_id, 0L).setOpenInChatActivity(this));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopicsTabs$97(Integer num, Boolean bool) throws Resources.NotFoundException, NumberFormatException {
        TLRPC.TL_forumTopic tL_forumTopic;
        ChatActivity chatActivity;
        TLRPC.TL_forumTopic tL_forumTopicFindTopic;
        if (num.intValue() != getTopicId()) {
            TLRPC.TL_forumTopic topic = this.topicsTabs.getTopic(num.intValue());
            TLRPC.Message message = topic == null ? null : topic.topicStartMessage;
            if (message != null || topic == null || (tL_forumTopicFindTopic = getMessagesController().getTopicsController().findTopic(-getDialogId(), topic.f1631id)) == null) {
                tL_forumTopic = topic;
            } else {
                message = tL_forumTopicFindTopic.topicStartMessage;
                tL_forumTopic = tL_forumTopicFindTopic;
            }
            if (message != null || num.intValue() == 0) {
                this.topicChangedFromMessage = bool.booleanValue();
                if (num.intValue() == 0) {
                    savePositionForTopicChange(getTopicId());
                } else if (getTopicId() == 0) {
                    savePositionForTopicChange(num.intValue());
                } else {
                    this.clearOnLoadAndScrollMessageId = -1;
                }
                getConnectionsManager().cancelRequestsForGuid(this.classGuid);
                getMessagesStorage().cancelTasksForGuid(this.classGuid);
                AyuHistoryHook.removeInstance(this);
                this.classGuid = ConnectionsManager.generateClassGuid();
                AyuHistoryHook.setInstance(this);
                saveDraft();
                this.messagePreviewParams = null;
                this.startLoadFromMessageId = 0;
                this.firstMessagesLoaded = false;
                this.clearOnLoad = true;
                this.waitingForLoad.clear();
                this.justCreatedTopic = false;
                if (message != null && num.intValue() != 0) {
                    ArrayList arrayList = new ArrayList();
                    arrayList.add(new MessageObject(getCurrentAccount(), message, false, false));
                    setThreadMessages(arrayList, this.currentChat, tL_forumTopic.f1631id, tL_forumTopic.read_inbox_max_id, tL_forumTopic.read_outbox_max_id, tL_forumTopic);
                    chatActivity = this;
                } else {
                    chatActivity = this;
                    chatActivity.forumTopic = null;
                    chatActivity.threadMessageObjects = null;
                    chatActivity.threadMessageObject = null;
                    chatActivity.replyingMessageObject = null;
                    chatActivity.threadMaxInboxReadId = 0;
                    chatActivity.threadMaxOutboxReadId = 0;
                    chatActivity.replyMaxReadId = 0;
                    chatActivity.threadMessageId = 0L;
                    chatActivity.replyOriginalMessageId = 0;
                    chatActivity.replyOriginalChat = null;
                    chatActivity.isTopic = false;
                    chatActivity.isComments = false;
                }
                firstLoadMessages();
                updateTitle(true);
                chatActivity.avatarContainer.updateSubtitle(true);
                if (tL_forumTopic != null) {
                    updateTopicTitleIcon();
                } else {
                    chatActivity.avatarContainer.checkAndUpdateAvatar();
                }
                chatActivity.topicsTabs.setCurrentTopic(getTopicId());
                updateTopPanel(true);
                updateBottomOverlay(true);
                getMessagesController().setForumLastTopicId(-getDialogId(), getTopicId());
                reloadPinnedMessages();
                hideFloatingDateView(true);
                hideFieldPanel(true);
                applyDraftMaybe(true, true);
                ChatActivityEnterView chatActivityEnterView = chatActivity.chatActivityEnterView;
                if (chatActivityEnterView != null) {
                    chatActivityEnterView.hidePopup(false);
                    chatActivity.chatActivityEnterView.updateFieldHint(true);
                    if (getParentActivity() != null) {
                        AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
                    }
                }
                if (tL_forumTopic != null) {
                    getMessagesController().getTopicsController().getTopicRepliesCount(chatActivity.dialog_id, tL_forumTopic.f1631id);
                }
                chatActivity.reactionsMentionCount = tL_forumTopic != null ? tL_forumTopic.unread_reactions_count : 0;
                updateReactionsMentionButton(false);
                updateTopicButtons();
                if (chatActivity.searchItemListener == null || !chatActivity.actionBar.isSearchFieldVisible()) {
                    return;
                }
                chatActivity.searchItemListener.onSearchPressed(null);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createTopicsTabs$98(Long l, Boolean bool) throws Resources.NotFoundException, NumberFormatException {
        if (l.longValue() == getTopicId()) {
            return;
        }
        this.topicChangedFromMessage = bool.booleanValue();
        if (l.longValue() == 0) {
            savePositionForTopicChange(getTopicId());
        } else if (getTopicId() == 0) {
            savePositionForTopicChange(l.longValue());
        } else {
            this.clearOnLoadAndScrollMessageId = -1;
        }
        getConnectionsManager().cancelRequestsForGuid(this.classGuid);
        getMessagesStorage().cancelTasksForGuid(this.classGuid);
        AyuHistoryHook.removeInstance(this);
        this.classGuid = ConnectionsManager.generateClassGuid();
        AyuHistoryHook.setInstance(this);
        saveDraft();
        this.messagePreviewParams = null;
        this.startLoadFromMessageId = 0;
        this.firstMessagesLoaded = false;
        this.clearOnLoad = true;
        this.waitingForLoad.clear();
        setSavedDialog(l.longValue());
        TLRPC.TL_forumTopic tL_forumTopicFindTopic = getMessagesController().getTopicsController().findTopic(-getDialogId(), l.longValue());
        if (l.longValue() != 0 && tL_forumTopicFindTopic != null) {
            int i = tL_forumTopicFindTopic.read_inbox_max_id;
            this.threadMaxInboxReadId = i;
            this.threadMaxOutboxReadId = tL_forumTopicFindTopic.read_outbox_max_id;
            this.replyMaxReadId = Math.max(1, i);
            getMessagesController().getTopicsController().getTopicRepliesCount(this.dialog_id, DialogObject.getPeerDialogId(tL_forumTopicFindTopic.from_id));
        } else {
            this.forumTopic = null;
            this.threadMessageObjects = null;
            this.threadMessageObject = null;
            this.replyingMessageObject = null;
            this.threadMaxInboxReadId = 0;
            this.threadMaxOutboxReadId = 0;
            this.replyMaxReadId = 0;
            this.threadMessageId = 0L;
            this.replyOriginalMessageId = 0;
            this.replyOriginalChat = null;
            this.isTopic = false;
            this.isComments = false;
        }
        firstLoadMessages();
        updateTitle(true);
        this.avatarContainer.updateSubtitle(true);
        this.avatarContainer.checkAndUpdateAvatar();
        this.topicsTabs.setCurrentTopic(l.longValue());
        updateTopPanel(true);
        updateBottomOverlay(true);
        getMessagesController().setForumLastTopicId(-getDialogId(), getTopicId());
        hideFloatingTopicView(true);
        hideFieldPanel(true);
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.hidePopup(false);
            this.chatActivityEnterView.updateFieldHint(true);
            if (getParentActivity() != null) {
                AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
            }
        }
        applyDraftMaybe(true, true);
        this.reactionsMentionCount = tL_forumTopicFindTopic != null ? tL_forumTopicFindTopic.unread_reactions_count : 0;
        updateReactionsMentionButton(false);
        updateTopicButtons();
        if (this.searchItemListener == null || !this.actionBar.isSearchFieldVisible()) {
            return;
        }
        this.searchItemListener.onSearchPressed(null);
    }

    private void toggleIsAllChats() {
        final boolean zIsAllChats = isAllChats();
        AndroidUtilities.forEachViews((RecyclerView) this.chatListView, new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda143
            @Override // com.google.android.exoplayer2.util.Consumer
            public final void accept(Object obj) {
                this.f$0.lambda$toggleIsAllChats$99(zIsAllChats, (View) obj);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$toggleIsAllChats$99(boolean z, View view) {
        if (view instanceof ChatMessageCell) {
            ChatMessageCell chatMessageCell = (ChatMessageCell) view;
            if ((chatMessageCell.isAllChats && chatMessageCell.isSideMenuEnabled) == z || !isSideMenuEnabled()) {
                return;
            }
            chatMessageCell.isAllChats = z;
            chatMessageCell.isSideMenuEnabled = isSideMenuEnabled();
            chatMessageCell.relayout();
            return;
        }
        if (view instanceof ChatActionCell) {
            ((ChatActionCell) view).isAllChats = z;
        }
    }

    private void createBotAdView() {
        if (this.botAdView != null || getContext() == null) {
            return;
        }
        createTopPanel2();
        if (this.topChatPanelView2 == null) {
            return;
        }
        BotAdView botAdView = new BotAdView(getContext(), this.themeDelegate);
        this.botAdView = botAdView;
        this.topChatPanelView2.addView(botAdView);
    }

    private void createBizBotButton() {
        if (this.bizBotButton != null || getContext() == null) {
            return;
        }
        createTopPanel();
        if (this.topChatPanelView == null) {
            return;
        }
        BusinessBotButton businessBotButton = new BusinessBotButton(getContext(), this, this.themeDelegate);
        this.bizBotButton = businessBotButton;
        this.topChatPanelView.addView(businessBotButton, LayoutHelper.createFrame(-1, 48.0f, 83, 0.0f, 0.0f, 0.0f, 2.0f));
        this.bizBotButton.setLeftMargin(getSideMenuWidth());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createUndoView() {
        if (this.undoView != null || getContext() == null) {
            return;
        }
        UndoView undoView = new UndoView(getContext(), this, false, this.themeDelegate);
        this.undoView = undoView;
        undoView.setAdditionalTranslationY(AndroidUtilities.m1146dp(51.0f));
        this.contentView.addView(this.undoView, LayoutHelper.createFrame(-1, -2.0f, 83, 8.0f, 0.0f, 8.0f, 8.0f));
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public INavigationLayout.BackButtonState getBackButtonState() {
        return INavigationLayout.BackButtonState.BACK;
    }

    private void createActionMode() {
        char c;
        int i;
        if (this.selectedMessagesCountTextView != null || getContext() == null) {
            return;
        }
        ActionBarMenu actionBarMenuCreateActionMode = this.actionBar.createActionMode();
        NumberTextView numberTextView = new NumberTextView(actionBarMenuCreateActionMode.getContext());
        this.selectedMessagesCountTextView = numberTextView;
        numberTextView.setTextSize(18);
        this.selectedMessagesCountTextView.setTypeface(AndroidUtilities.bold());
        this.selectedMessagesCountTextView.setTextColor(getThemedColor(Theme.key_actionBarActionModeDefaultIcon));
        this.selectedMessagesCountTextView.setOnTouchListener(new View.OnTouchListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda218
            @Override // android.view.View.OnTouchListener
            public final boolean onTouch(View view, MotionEvent motionEvent) {
                return ChatActivity.$r8$lambda$e3hP7JwobHHUI6zKW7nQdU85L3E(view, motionEvent);
            }
        });
        actionBarMenuCreateActionMode.addView(this.selectedMessagesCountTextView, LayoutHelper.createLinear(0, -1, 1.0f, 65, 0, 0, 0));
        if (this.currentEncryptedChat == null) {
            boolean z = getDialogId() == getUserConfig().getClientUserId() && ((i = this.chatMode) == 0 || i == 3);
            c = 0;
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(25, C2369R.drawable.msg_download, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.SaveToMusic)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(23, C2369R.drawable.msg_edit, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Edit)));
            if (z) {
                this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(28, C2369R.drawable.menu_tag_edit, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.AccDescrTagMessage)));
            }
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(22, C2369R.drawable.msg_fave, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.AddToFavorites)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(10, C2369R.drawable.msg_copy, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Copy)));
            if (getDialogId() != UserObject.VERIFY) {
                this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(11, C2369R.drawable.msg_forward, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Forward)));
            }
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(69, C2369R.drawable.msg_shareout, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.ShareFile)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(12, C2369R.drawable.msg_delete, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Delete)));
        } else {
            c = 0;
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(23, C2369R.drawable.msg_edit, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Edit)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(22, C2369R.drawable.msg_fave, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.AddToFavorites)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(10, C2369R.drawable.msg_copy, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Copy)));
            this.actionModeViews.add(actionBarMenuCreateActionMode.addItemWithWidth(12, C2369R.drawable.msg_delete, AndroidUtilities.m1146dp(54.0f), LocaleController.getString(C2369R.string.Delete)));
        }
        actionBarMenuCreateActionMode.setItemVisibility(23, (this.canEditMessagesCount == 1 && this.selectedMessagesIds[c].size() + this.selectedMessagesIds[1].size() == 1) ? 0 : 8);
        actionBarMenuCreateActionMode.setItemVisibility(10, (getMessagesController().isChatNoForwards(this.currentChat) || this.selectedMessagesCanCopyIds[c].size() + this.selectedMessagesCanCopyIds[1].size() == 0) ? 8 : 0);
        actionBarMenuCreateActionMode.setItemVisibility(22, this.selectedMessagesCanStarIds[c].size() + this.selectedMessagesCanStarIds[1].size() != 0 ? 0 : 8);
        actionBarMenuCreateActionMode.setItemVisibility(12, this.cantDeleteMessagesCount == 0 ? 0 : 8);
        actionBarMenuCreateActionMode.setItemVisibility(28, getUserConfig().isPremium() ? 0 : 8);
        actionBarMenuCreateActionMode.setItemVisibility(69, 8);
    }

    public static /* synthetic */ boolean $r8$lambda$e3hP7JwobHHUI6zKW7nQdU85L3E(View view, MotionEvent motionEvent) {
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideTagSelector() {
        final ReactionsContainerLayout reactionsContainerLayout = this.tagSelector;
        if (reactionsContainerLayout == null) {
            return;
        }
        this.tagSelector = null;
        reactionsContainerLayout.dismissWindow();
        if (reactionsContainerLayout.getReactionsWindow() != null && reactionsContainerLayout.getReactionsWindow().containerView != null) {
            reactionsContainerLayout.getReactionsWindow().containerView.animate().alpha(0.0f).setDuration(180L).start();
        }
        reactionsContainerLayout.animate().alpha(0.01f).translationY(-AndroidUtilities.m1146dp(12.0f)).scaleX(0.7f).scaleY(0.7f).withEndAction(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda95
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$hideTagSelector$101(reactionsContainerLayout);
            }
        }).setDuration(180L).start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hideTagSelector$101(ReactionsContainerLayout reactionsContainerLayout) {
        this.contentView.removeView(reactionsContainerLayout);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showTagSelector() {
        if (getDialogId() == getUserConfig().getClientUserId() && getUserConfig().isPremium() && this.tagSelector == null) {
            C310153 c310153 = new C310153(3, this, getContext(), this.currentAccount, this.themeDelegate);
            this.tagSelector = c310153;
            c310153.setPadding(AndroidUtilities.m1146dp(4.0f), AndroidUtilities.m1146dp(24.0f), AndroidUtilities.m1146dp(4.0f), AndroidUtilities.m1146dp(0.0f));
            this.tagSelector.setDelegate(new ReactionsContainerLayout.ReactionsContainerDelegate() { // from class: org.telegram.ui.ChatActivity.54
                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                public /* synthetic */ boolean allowLongPress() {
                    return ReactionsContainerLayout.ReactionsContainerDelegate.CC.$default$allowLongPress(this);
                }

                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                public /* synthetic */ boolean drawBackground() {
                    return ReactionsContainerLayout.ReactionsContainerDelegate.CC.$default$drawBackground(this);
                }

                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                public /* synthetic */ void drawRoundRect(Canvas canvas, RectF rectF, float f, float f2, float f3, int i, boolean z) {
                    ReactionsContainerLayout.ReactionsContainerDelegate.CC.$default$drawRoundRect(this, canvas, rectF, f, f2, f3, i, z);
                }

                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                public /* synthetic */ boolean needEnterText() {
                    return ReactionsContainerLayout.ReactionsContainerDelegate.CC.$default$needEnterText(this);
                }

                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                public /* synthetic */ void onEmojiWindowDismissed() {
                    ReactionsContainerLayout.ReactionsContainerDelegate.CC.$default$onEmojiWindowDismissed(this);
                }

                /* JADX WARN: Removed duplicated region for block: B:27:0x00b7 A[PHI: r4
                  0x00b7: PHI (r4v12 org.telegram.messenger.MessageObject) = (r4v11 org.telegram.messenger.MessageObject), (r4v17 org.telegram.messenger.MessageObject) binds: [B:18:0x0089, B:25:0x00ad] A[DONT_GENERATE, DONT_INLINE]] */
                @Override // org.telegram.ui.Components.ReactionsContainerLayout.ReactionsContainerDelegate
                /*
                    Code decompiled incorrectly, please refer to instructions dump.
                    To view partially-correct add '--show-bad-code' argument
                */
                public void onReactionClicked(android.view.View r23, org.telegram.ui.Components.Reactions.ReactionsLayoutInBubble.VisibleReaction r24, boolean r25, boolean r26) {
                    /*
                        Method dump skipped, instructions count: 482
                        To view this dump add '--comments-level debug' option
                    */
                    throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.C310254.onReactionClicked(android.view.View, org.telegram.ui.Components.Reactions.ReactionsLayoutInBubble$VisibleReaction, boolean, boolean):void");
                }
            });
            this.tagSelector.setTop(true);
            this.tagSelector.setClipChildren(false);
            this.tagSelector.setClipToPadding(false);
            this.tagSelector.setVisibility(0);
            ReactionsContainerLayout reactionsContainerLayout = this.tagSelector;
            reactionsContainerLayout.setHint(LocaleController.getString(reactionsContainerLayout.getSelectedReactions().isEmpty() ? C2369R.string.SavedTagReactionsSelectedAddHint : C2369R.string.SavedTagReactionsSelectedEditHint));
            this.contentView.addView(this.tagSelector, LayoutHelper.createFrame(-2, 92.5f, 49, 0.0f, 0.0f, 0.0f, 0.0f));
            this.tagSelector.setMessage(null, null, true);
            this.tagSelector.setTranslationY(-AndroidUtilities.m1146dp(12.0f));
            this.tagSelector.setScaleY(0.4f);
            this.tagSelector.setScaleX(0.4f);
            this.tagSelector.animate().scaleY(1.0f).scaleX(1.0f).translationY(0.0f).setDuration(420L).setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT).start();
            updateSelectedMessageReactions();
            this.tagSelector.setTranslationY(this.contentPanTranslation + (this.actionBarSearchTags != null ? r4.getCurrentHeight() : 0));
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$53 */
    /* loaded from: classes5.dex */
    class C310153 extends ReactionsContainerLayout {
        private boolean firstLayout;
        private int[] loc;

        /* renamed from: va */
        private ValueAnimator f1828va;

        C310153(int i, BaseFragment baseFragment, Context context, int i2, Theme.ResourcesProvider resourcesProvider) {
            super(i, baseFragment, context, i2, resourcesProvider);
            this.loc = new int[2];
            this.firstLayout = true;
        }

        private void updateBubbleOffset(float f, boolean z) {
            ValueAnimator valueAnimator = this.f1828va;
            if (valueAnimator != null) {
                valueAnimator.cancel();
                this.f1828va = null;
            }
            if (!z) {
                setBubbleOffset(f);
                return;
            }
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.bubblesOffset, f);
            this.f1828va = valueAnimatorOfFloat;
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$53$$ExternalSyntheticLambda0
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                    this.f$0.lambda$updateBubbleOffset$0(valueAnimator2);
                }
            });
            this.f1828va.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
            this.f1828va.setDuration(420L);
            this.f1828va.start();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$updateBubbleOffset$0(ValueAnimator valueAnimator) {
            setBubbleOffset(((Float) valueAnimator.getAnimatedValue()).floatValue());
            invalidate();
        }

        @Override // android.widget.FrameLayout, android.view.ViewGroup, android.view.View
        protected void onLayout(boolean z, int i, int i2, int i3, int i4) {
            super.onLayout(z, i, i2, i3, i4);
            ActionBarMenuItem item = ((BaseFragment) ChatActivity.this).actionBar.createActionMode().getItem(28);
            if (item != null) {
                getLocationInWindow(this.loc);
                float x = getX();
                float width = getWidth() + x;
                item.getLocationInWindow(this.loc);
                float width2 = this.loc[0] + (item.getWidth() / 2.0f);
                int iM1146dp = AndroidUtilities.m1146dp(20.0f);
                boolean z2 = LocaleController.isRTL;
                float f = width2 + (iM1146dp * (z2 ? -1 : 1));
                if (z2) {
                    updateBubbleOffset(f - x, !this.firstLayout);
                } else {
                    updateBubbleOffset(f - width, !this.firstLayout);
                }
                this.firstLayout = false;
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createSearchContainer() {
        if (this.searchContainer != null || getContext() == null) {
            return;
        }
        FrameLayout frameLayout = new FrameLayout(getContext()) { // from class: org.telegram.ui.ChatActivity.55
            @Override // android.view.ViewGroup
            protected void measureChildWithMargins(View view, int i, int i2, int i3, int i4) {
                if (view == ChatActivity.this.searchCountText) {
                    int i5 = (ChatActivity.this.searchCalendarButton == null || ChatActivity.this.searchCalendarButton.getVisibility() == 8) ? 18 : 66;
                    if (ChatActivity.this.searchUserButton != null && ChatActivity.this.searchUserButton.getVisibility() != 8) {
                        i5 += 48;
                    }
                    ((ViewGroup.MarginLayoutParams) view.getLayoutParams()).leftMargin = AndroidUtilities.m1146dp(i5);
                }
                super.measureChildWithMargins(view, i, i2, i3, i4);
            }
        };
        this.searchContainer = frameLayout;
        frameLayout.setClickable(false);
        this.searchContainer.setWillNotDraw(false);
        this.bottomViewsVisibilityController.setViewVisible(4, false, false);
        this.searchContainer.setClipToPadding(false);
        AnimatedTextView animatedTextView = new AnimatedTextView(getContext(), true, true, true);
        this.searchCountText = animatedTextView;
        CubicBezierInterpolator cubicBezierInterpolator = CubicBezierInterpolator.EASE_OUT_QUINT;
        animatedTextView.setAnimationProperties(0.25f, 0L, 280L, cubicBezierInterpolator);
        this.searchCountText.setTextSize(AndroidUtilities.m1146dp(15.0f));
        this.searchCountText.setTypeface(AndroidUtilities.bold());
        this.searchCountText.setTextColor(getThemedColor(Theme.key_chat_searchPanelText));
        this.searchCountText.setGravity(3);
        this.searchContainer.addView(this.searchCountText, LayoutHelper.createFrame(-2, 30.0f, 16, 0.0f, -1.0f, 97.33f, 0.0f));
        this.chatInputBubbleContainer.addView(this.searchContainer, LayoutHelper.createFrame(-1, 48.0f, 80, 7.0f, 0.0f, 7.0f, 0.0f));
        HashtagHistoryView hashtagHistoryView = this.hashtagHistoryView;
        if (hashtagHistoryView != null) {
            hashtagHistoryView.bringToFront();
        }
        AnimatedTextView animatedTextView2 = new AnimatedTextView(getContext(), true, false, true);
        this.searchExpandList = animatedTextView2;
        animatedTextView2.setAnimationProperties(0.0f, 0L, 420L, cubicBezierInterpolator);
        this.searchExpandList.setScaleProperty(0.7f);
        this.searchExpandList.setTextSize(AndroidUtilities.m1146dp(15.0f));
        this.searchExpandList.setGravity(5);
        this.searchExpandList.setTypeface(AndroidUtilities.bold());
        this.searchExpandList.setTextColor(getThemedColor(Theme.key_windowBackgroundWhiteBlueText2));
        AnimatedTextView animatedTextView3 = this.searchExpandList;
        FrameLayout frameLayout2 = this.messagesSearchListContainer;
        animatedTextView3.setText(LocaleController.getString((frameLayout2 == null || frameLayout2.getTag() == null) ? C2369R.string.SearchAsList : C2369R.string.SearchAsChat));
        AnimatedTextView animatedTextView4 = this.searchExpandList;
        animatedTextView4.adaptWidth = false;
        animatedTextView4.setPadding(AndroidUtilities.m1146dp(15.33f), 0, AndroidUtilities.m1146dp(15.33f), 0);
        this.searchExpandList.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda180
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                this.f$0.lambda$createSearchContainer$102(view);
            }
        });
        this.searchExpandList.setAlpha(0.5f);
        this.searchExpandList.setClickable(false);
        this.searchContainer.addView(this.searchExpandList, LayoutHelper.createFrame(-2, -1, Opcodes.LNEG));
        AnimatedTextView animatedTextView5 = new AnimatedTextView(getContext(), true, true, true);
        this.searchOtherButton = animatedTextView5;
        animatedTextView5.setGravity(17);
        this.searchOtherButton.setTypeface(AndroidUtilities.bold());
        this.searchOtherButton.setTextColor(getThemedColor(Theme.key_chat_fieldOverlayText));
        this.searchOtherButton.setTextSize(AndroidUtilities.m1146dp(15.0f));
        AnimatedTextView animatedTextView6 = this.searchOtherButton;
        int i = Theme.key_windowBackgroundWhite;
        animatedTextView6.setBackground(Theme.createSelectorWithBackgroundDrawable(getThemedColor(i), Theme.blendOver(getThemedColor(i), getThemedColor(Theme.key_listSelector))));
        this.searchOtherButton.setText(LocaleController.getString(this.chatAdapter.isFiltered ? C2369R.string.SavedTagHideOtherMessages : C2369R.string.SavedTagShowOtherMessages));
        this.searchOtherButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda181
            @Override // android.view.View.OnClickListener
            public final void onClick(View view) {
                this.f$0.lambda$createSearchContainer$103(view);
            }
        });
        this.searchOtherButton.setVisibility(8);
        this.searchOtherButton.setAlpha(0.0f);
        this.searchContainer.addView(this.searchOtherButton, LayoutHelper.createFrame(-1, -1, Opcodes.DNEG));
        TLRPC.Chat chat = this.currentChat;
        if (chat != null && ((!ChatObject.isChannel(chat) || this.currentChat.megagroup) && this.chatMode != 7 && !ChatObject.isMonoForum(this.currentChat))) {
            ImageView imageView = new ImageView(getContext());
            this.searchUserButton = imageView;
            imageView.setScaleType(ImageView.ScaleType.CENTER);
            this.searchUserButton.setImageResource(C2369R.drawable.msg_usersearch);
            this.searchUserButton.setColorFilter(new PorterDuffColorFilter(getThemedColor(Theme.key_chat_searchPanelIcons), PorterDuff.Mode.MULTIPLY));
            this.searchUserButton.setBackgroundDrawable(Theme.createSelectorDrawable(getThemedColor(Theme.key_actionBarActionModeDefaultSelector), 1));
            this.searchContainer.addView(this.searchUserButton, LayoutHelper.createFrame(48, 48.0f, 51, 48.0f, 0.0f, 0.0f, 0.0f));
            this.searchUserButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda182
                @Override // android.view.View.OnClickListener
                public final void onClick(View view) {
                    this.f$0.lambda$createSearchContainer$104(view);
                }
            });
            this.searchUserButton.setContentDescription(LocaleController.getString(C2369R.string.AccDescrSearchByUser));
        }
        if (this.chatMode != 7) {
            ImageView imageView2 = new ImageView(getContext());
            this.searchCalendarButton = imageView2;
            imageView2.setScaleType(ImageView.ScaleType.CENTER);
            this.searchCalendarButton.setImageResource(C2369R.drawable.msg_calendar);
            this.searchCalendarButton.setColorFilter(new PorterDuffColorFilter(getThemedColor(Theme.key_chat_searchPanelIcons), PorterDuff.Mode.MULTIPLY));
            this.searchCalendarButton.setBackgroundDrawable(Theme.createSelectorDrawable(getThemedColor(Theme.key_actionBarActionModeDefaultSelector), 1));
            this.searchContainer.addView(this.searchCalendarButton, LayoutHelper.createFrame(48, 48.0f, 51, 2.66f, 0.0f, 0.0f, 0.0f));
            this.searchCalendarButton.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda183
                @Override // android.view.View.OnClickListener
                public final void onClick(View view) {
                    this.f$0.lambda$createSearchContainer$105(view);
                }
            });
            this.searchCalendarButton.setContentDescription(LocaleController.getString(C2369R.string.JumpToDate));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createSearchContainer$102(View view) {
        toggleMesagesSearchListView();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createSearchContainer$103(View view) {
        setFilterMessages(!this.chatAdapter.isFiltered);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createSearchContainer$104(View view) {
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null) {
            mentionsContainerView.setReversed(true);
            this.mentionContainer.getAdapter().setSearchingMentions(true);
            checkUi_botMenuPosition();
        }
        this.searchCalendarButton.setVisibility(8);
        this.searchUserButton.setVisibility(8);
        this.searchingForUser = true;
        this.searchingUserMessages = null;
        this.searchingChatMessages = null;
        this.searchItem.setSearchFieldHint(LocaleController.getString(C2369R.string.SearchMembers));
        this.searchItem.setSearchFieldCaption(LocaleController.getString(C2369R.string.SearchFrom));
        AndroidUtilities.showKeyboard(this.searchItem.getSearchField());
        this.searchItem.clearSearchText();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createSearchContainer$105(View view) {
        if (getParentActivity() == null) {
            return;
        }
        ActionBarMenuItem actionBarMenuItem = this.searchItem;
        if (actionBarMenuItem != null) {
            AndroidUtilities.hideKeyboard(actionBarMenuItem.getSearchField());
        }
        showDialog(AlertsCreator.createCalendarPickerDialog(getParentActivity(), 1375315200000L, new MessagesStorage.IntCallback() { // from class: org.telegram.ui.ChatActivity.56
            @Override // org.telegram.messenger.MessagesStorage.IntCallback
            public void run(int i) {
                ChatActivity.this.jumpToDate(i);
            }
        }, this.themeDelegate).create());
    }

    public void onPageDownClicked(boolean z) {
        this.wasManualScroll = true;
        this.textSelectionHelper.cancelTextSelectionRunnable();
        Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda346
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onPageDownClicked$107();
            }
        };
        int i = this.createUnreadMessageAfterId;
        if (i != 0) {
            scrollToMessageId(i, 0, false, this.returnToLoadIndex, true, 0, null, runnable);
            return;
        }
        if (!z && !this.returnToMessageIdStack.empty()) {
            scrollToMessageId(((Integer) this.returnToMessageIdStack.pop()).intValue(), 0, true, this.returnToLoadIndex, true, 0, null, runnable);
            return;
        }
        scrollToLastMessage(true, true, runnable);
        if (this.pinnedMessageIds.isEmpty()) {
            return;
        }
        this.forceScrollToFirst = true;
        this.forceNextPinnedMessageId = ((Integer) this.pinnedMessageIds.get(0)).intValue();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onPageDownClicked$107() {
        this.sideControlsButtonsLayout.setButtonLoading(0, true, true);
    }

    private void playReactionAnimation(Integer num) {
        if (this.fragmentView == null) {
            return;
        }
        BaseCell baseCellFindMessageCell = findMessageCell(num.intValue(), false);
        if (baseCellFindMessageCell instanceof ChatMessageCell) {
            ChatMessageCell chatMessageCell = (ChatMessageCell) baseCellFindMessageCell;
            TLRPC.MessagePeerReaction randomUnreadReaction = chatMessageCell.getMessageObject().getRandomUnreadReaction();
            if (randomUnreadReaction != null && (chatMessageCell.reactionsLayoutInBubble.hasUnreadReactions || randomUnreadReaction.big)) {
                ReactionsEffectOverlay.show(this, null, baseCellFindMessageCell, null, 0.0f, 0.0f, ReactionsLayoutInBubble.VisibleReaction.fromTL(randomUnreadReaction.reaction), this.currentAccount, !randomUnreadReaction.big ? 1 : 0);
                ReactionsEffectOverlay.startAnimation();
            }
            chatMessageCell.markReactionsAsRead();
            return;
        }
        if (baseCellFindMessageCell instanceof ChatActionCell) {
            ChatActionCell chatActionCell = (ChatActionCell) baseCellFindMessageCell;
            TLRPC.MessagePeerReaction randomUnreadReaction2 = chatActionCell.getMessageObject().getRandomUnreadReaction();
            if (randomUnreadReaction2 != null && (chatActionCell.reactionsLayoutInBubble.hasUnreadReactions || randomUnreadReaction2.big)) {
                ReactionsEffectOverlay.show(this, null, baseCellFindMessageCell, null, 0.0f, 0.0f, ReactionsLayoutInBubble.VisibleReaction.fromTL(randomUnreadReaction2.reaction), this.currentAccount, !randomUnreadReaction2.big ? 1 : 0);
                ReactionsEffectOverlay.startAnimation();
            }
            chatActionCell.markReactionsAsRead();
        }
    }

    private void dimBehindView(View view, boolean z) {
        dimBehindView(view, false, z);
    }

    private void dimBehindView(View view, boolean z, boolean z2) {
        setScrimView(view);
        dimBehindView(z2 ? 0.2f : 0.0f, z, view != this.sideControlsButtonsLayout);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void dimBehindView(View view, float f) {
        setScrimView(view);
        dimBehindView(f, false, view != this.sideControlsButtonsLayout);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setScrimView(View view) {
        View view2 = this.scrimView;
        if (view2 == view) {
            return;
        }
        if (view2 != null && (view2 instanceof ChatActionCell)) {
            ((ChatActionCell) view2).setInvalidateWithParent(null);
        }
        this.scrimView = view;
        if (view instanceof ChatActionCell) {
            ((ChatActionCell) view).setInvalidateWithParent(this.fragmentView);
        }
    }

    public void dimBehindView(boolean z) {
        dimBehindView(z ? 0.2f : 0.0f, false, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkInstantCameraView() {
        if (this.instantCameraView == null && CameraView.isCameraAllowed() && getContext() != null) {
            InstantCameraView instantCameraView = new InstantCameraView(getContext(), this, this.themeDelegate, true) { // from class: org.telegram.ui.ChatActivity.57
                @Override // org.telegram.p023ui.Components.InstantCameraView
                public void startAnimation(boolean z, boolean z2) {
                    super.startAnimation(z, z2);
                    ChatActivity.this.animatorRoundMessageCameraVisibility.setValue(z, true);
                }
            };
            this.instantCameraView = instantCameraView;
            instantCameraView.setClipToPadding(false);
            this.instantCameraView.setButtonsBackground(this.glassBackgroundDrawableFactory, this.blurredBackgroundColorProvider);
            int iIndexOfChild = this.contentView.indexOfChild(this.chatInputViewsContainer);
            if (iIndexOfChild < 0) {
                iIndexOfChild = this.contentView.getChildCount();
            }
            this.contentView.addView(this.instantCameraView, Math.min(iIndexOfChild + 1, this.contentView.getChildCount()), LayoutHelper.createFrame(-1, -1, 51));
        }
    }

    private void dimBehindView(float f, boolean z, boolean z2) {
        ValueAnimator valueAnimatorOfFloat;
        ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout;
        final boolean z3 = f > 0.0f;
        View view = this.scrimView;
        if (view instanceof ChatMessageCell) {
            ChatMessageCell chatMessageCell = (ChatMessageCell) view;
            chatMessageCell.setInvalidatesParent(z3);
            if (z3) {
                restartSticker(chatMessageCell);
            }
        }
        this.contentView.invalidate();
        this.chatListView.invalidate();
        AnimatorSet animatorSet = this.scrimAnimatorSet;
        if (animatorSet != null) {
            animatorSet.removeAllListeners();
            this.scrimAnimatorSet.cancel();
        }
        this.scrimAnimatorSet = new AnimatorSet();
        ArrayList arrayList = new ArrayList();
        final float fMax = Math.max(this.scrimPaintAlpha, f);
        if (z3) {
            this.scrimViewAlpha = 1.0f;
            this.scrimViewProgress = 0.0f;
            ValueAnimator valueAnimator = this.scrimViewAlphaAnimator;
            if (valueAnimator != null) {
                valueAnimator.cancel();
            }
            this.scrimProgressDirection = true;
            valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, f);
            arrayList.add(valueAnimatorOfFloat);
            if (z) {
                AndroidUtilities.makeGlobalBlurBitmap(new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda244
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$dimBehindView$108((Bitmap) obj);
                    }
                }, 14.0f);
            }
        } else {
            float f2 = this.scrimPaintAlpha;
            this.scrimViewProgress = f2 / fMax;
            this.scrimProgressDirection = false;
            valueAnimatorOfFloat = ValueAnimator.ofFloat(f2, 0.0f);
            arrayList.add(valueAnimatorOfFloat);
        }
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda245
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                this.f$0.lambda$dimBehindView$109(fMax, valueAnimator2);
            }
        });
        if ((!z3 || z2) && (chatActivitySideControlsButtonsLayout = this.sideControlsButtonsLayout) != null) {
            arrayList.add(ObjectAnimator.ofFloat(chatActivitySideControlsButtonsLayout, (Property<ChatActivitySideControlsButtonsLayout, Float>) View.ALPHA, z3 ? 0.0f : 1.0f));
        }
        this.scrimAnimatorSet.playTogether(arrayList);
        this.scrimAnimatorSet.setInterpolator(CubicBezierInterpolator.DEFAULT);
        this.scrimAnimatorSet.setDuration(z3 ? 150L : 220L);
        View view2 = this.scrimView;
        final ChatMessageCell chatMessageCell2 = view2 instanceof ChatMessageCell ? (ChatMessageCell) view2 : null;
        this.scrimAnimatorSet.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.58
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animator) {
                if (z3) {
                    return;
                }
                if (ChatActivity.this.scrimBlurBitmap != null) {
                    ChatActivity.this.scrimBlurBitmapShader = null;
                    ChatActivity.this.scrimBlurBitmapPaint = null;
                    ChatActivity.this.scrimBlurBitmap.recycle();
                    ChatActivity.this.scrimBlurBitmap = null;
                }
                ChatMessageCell chatMessageCell3 = chatMessageCell2;
                if (chatMessageCell3 != null) {
                    chatMessageCell3.invalidate();
                }
                ChatActivity.this.setScrimView(null);
                ChatActivity.this.scrimViewTask = null;
                ChatActivity.this.scrimViewReaction = null;
                ChatActivity.this.contentView.invalidate();
                ChatActivity.this.chatListView.invalidate();
            }
        });
        if (this.scrimView != null && this.scrimViewAlpha <= 0.0f) {
            setScrimView(null);
        }
        this.scrimAnimatorSet.start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$dimBehindView$108(Bitmap bitmap) {
        this.scrimBlurBitmap = bitmap;
        Paint paint = new Paint(1);
        this.scrimBlurBitmapPaint = paint;
        Bitmap bitmap2 = this.scrimBlurBitmap;
        Shader.TileMode tileMode = Shader.TileMode.CLAMP;
        BitmapShader bitmapShader = new BitmapShader(bitmap2, tileMode, tileMode);
        this.scrimBlurBitmapShader = bitmapShader;
        paint.setShader(bitmapShader);
        ColorMatrix colorMatrix = new ColorMatrix();
        AndroidUtilities.adjustSaturationColorMatrix(colorMatrix, Theme.isCurrentThemeDark() ? 0.08f : 0.25f);
        AndroidUtilities.adjustBrightnessColorMatrix(colorMatrix, Theme.isCurrentThemeDark() ? -0.02f : -0.07f);
        this.scrimBlurBitmapPaint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));
        this.scrimBlurMatrix = new Matrix();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$dimBehindView$109(float f, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.scrimPaintAlpha = fFloatValue;
        this.scrimViewProgress = fFloatValue / f;
        View view = this.fragmentView;
        if (view != null) {
            view.invalidate();
        }
    }

    private class PinnedMessageButton extends TextView {
        public PinnedMessageButton(Context context) {
            super(context);
            setSingleLine(true);
            setLines(1);
            setMaxLines(1);
            setEllipsize(TextUtils.TruncateAt.END);
            setTextColor(ChatActivity.this.getThemedColor(Theme.key_featuredStickers_buttonText));
            setBackground(Theme.AdaptiveRipple.filledRect(ChatActivity.this.getThemedColor(Theme.key_featuredStickers_addButton), 16.0f));
            setTextSize(1, 14.0f);
            setTypeface(AndroidUtilities.bold());
            setGravity(17);
            setPadding(AndroidUtilities.m1146dp(14.0f), 0, AndroidUtilities.m1146dp(14.0f), 0);
        }

        @Override // android.widget.TextView, android.view.View
        protected void onMeasure(int i, int i2) {
            super.onMeasure(View.MeasureSpec.makeMeasureSpec(Math.min(View.MeasureSpec.getSize(i), (int) (AndroidUtilities.displaySize.x * 0.45f)), TLObject.FLAG_31), i2);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkEditTextItemMenu() {
        ActionBarMenu.LazyItem lazyItem;
        if (this.filledEditTextItemMenu || (lazyItem = this.editTextItem) == null) {
            return;
        }
        ActionBarMenuItem actionBarMenuItemCreateView = lazyItem.createView();
        actionBarMenuItemCreateView.addSubItem(57, LocaleController.getString(C2369R.string.Spoiler));
        if (this.chatMode == 0) {
            actionBarMenuItemCreateView.addSubItem(58, LocaleController.getString(C2369R.string.Quote));
        }
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Bold));
        spannableStringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.bold()), 0, spannableStringBuilder.length(), 33);
        actionBarMenuItemCreateView.addSubItem(50, spannableStringBuilder);
        SpannableStringBuilder spannableStringBuilder2 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Italic));
        spannableStringBuilder2.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface(AndroidUtilities.TYPEFACE_ROBOTO_ITALIC)), 0, spannableStringBuilder2.length(), 33);
        actionBarMenuItemCreateView.addSubItem(51, spannableStringBuilder2);
        SpannableStringBuilder spannableStringBuilder3 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.BoldItalic));
        spannableStringBuilder3.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface(AndroidUtilities.TYPEFACE_ROBOTO_MEDIUM_ITALIC)), 0, spannableStringBuilder3.length(), 33);
        actionBarMenuItemCreateView.addSubItem(80, spannableStringBuilder3);
        SpannableStringBuilder spannableStringBuilder4 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Mono));
        spannableStringBuilder4.setSpan(new TypefaceSpan(Typeface.MONOSPACE), 0, spannableStringBuilder4.length(), 33);
        actionBarMenuItemCreateView.addSubItem(52, spannableStringBuilder4);
        TLRPC.EncryptedChat encryptedChat = this.currentEncryptedChat;
        if (encryptedChat == null || AndroidUtilities.getPeerLayerVersion(encryptedChat.layer) >= 101) {
            SpannableStringBuilder spannableStringBuilder5 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Strike));
            TextStyleSpan.TextStyleRun textStyleRun = new TextStyleSpan.TextStyleRun();
            textStyleRun.flags |= 8;
            spannableStringBuilder5.setSpan(new TextStyleSpan(textStyleRun), 0, spannableStringBuilder5.length(), 33);
            actionBarMenuItemCreateView.addSubItem(55, spannableStringBuilder5);
            SpannableStringBuilder spannableStringBuilder6 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Underline));
            TextStyleSpan.TextStyleRun textStyleRun2 = new TextStyleSpan.TextStyleRun();
            textStyleRun2.flags |= 16;
            spannableStringBuilder6.setSpan(new TextStyleSpan(textStyleRun2), 0, spannableStringBuilder6.length(), 33);
            actionBarMenuItemCreateView.addSubItem(56, spannableStringBuilder6);
        }
        actionBarMenuItemCreateView.addSubItem(53, LocaleController.getString(C2369R.string.CreateLink));
        actionBarMenuItemCreateView.addSubItem(54, LocaleController.getString(C2369R.string.Regular));
        this.filledEditTextItemMenu = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updatePagedownButtonsPosition() {
        if (this.sideControlsButtonsLayout != null) {
            this.sideControlsButtonsLayout.setTranslationY(((-this.windowInsetsStateHolder.getAnimatedMaxBottomInset()) - this.chatInputViewsContainer.getInputBubbleHeight()) - AndroidUtilities.m1146dp(15.0f));
        }
        if (this.suggestEmojiPanel != null) {
            this.suggestEmojiPanel.setTranslationY((-this.windowInsetsStateHolder.getAnimatedMaxBottomInset()) - AndroidUtilities.m1146dp(16.0f));
        }
    }

    private void updateReactionsMentionButton(boolean z) {
        int i;
        if (getParentActivity() == null) {
            return;
        }
        this.sideControlsButtonsLayout.showButton(2, this.reactionsMentionCount > 0 && ((i = this.chatMode) == 0 || i == 8) && !ExteraConfig.hideReactions, z);
        this.sideControlsButtonsLayout.setButtonCount(2, this.reactionsMentionCount, z);
    }

    public void fallbackFieldPanel() throws Resources.NotFoundException {
        MessagePreviewParams.Messages messages;
        MessageSuggestionParams messageSuggestionParams = this.messageSuggestionParams;
        if (messageSuggestionParams != null) {
            showFieldPanelForSuggestionParams(messageSuggestionParams);
            return;
        }
        TLRPC.WebPage webPage = this.foundWebPage;
        if (webPage != null) {
            showFieldPanelForWebPage(true, webPage, false);
            return;
        }
        ReplyQuote replyQuote = this.replyingQuote;
        if (replyQuote != null) {
            showFieldPanelForReplyQuote(this.replyingMessageObject, replyQuote);
            return;
        }
        MessageObject messageObject = this.replyingMessageObject;
        if (messageObject != null && messageObject != this.threadMessageObject) {
            showFieldPanelForReply(messageObject);
            return;
        }
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams != null && (messages = messagePreviewParams.forwardMessages) != null) {
            showFieldPanelForForward(true, messages.messages);
            return;
        }
        MessageObject messageObject2 = this.editingMessageObject;
        if (messageObject2 != null) {
            showFieldPanelForEdit(true, messageObject2);
        } else {
            showFieldPanelForWebPage(false, null, true);
        }
    }

    private void openForwardingPreview(int i) throws Resources.NotFoundException {
        TLRPC.TL_channels_sendAsPeers tL_channels_sendAsPeers;
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams == null || this.forwardingPreviewView != null) {
            return;
        }
        if (messagePreviewParams.linkMessage != null) {
            int i2 = this.currentAccount;
            TLRPC.WebPage webPage = this.foundWebPage;
            CharSequence fieldText = this.chatActivityEnterView.getFieldText();
            MessageObject messageObject = this.replyingMessageObject;
            messagePreviewParams.updateLink(i2, webPage, fieldText, messageObject == this.threadMessageObject ? null : messageObject, this.replyingQuote, this.editingMessageObject);
        }
        if (this.messagePreviewParams.isEmpty()) {
            return;
        }
        this.keyboardWasVisible = this.chatActivityEnterView.isKeyboardVisible();
        Context context = this.contentView.getContext();
        MessagePreviewParams messagePreviewParams2 = this.messagePreviewParams;
        TLRPC.User user = this.currentUser;
        TLRPC.Chat chat = this.currentChat;
        int i3 = this.currentAccount;
        ThemeDelegate themeDelegate = this.themeDelegate;
        ReplyQuote replyQuote = this.replyingQuote;
        C310759 c310759 = new C310759(context, this, messagePreviewParams2, user, chat, i3, themeDelegate, i, replyQuote != null && replyQuote.outdated);
        this.forwardingPreviewView = c310759;
        this.messagePreviewParams.attach(c310759);
        TLRPC.ChatFull chatFull = this.chatInfo;
        TLRPC.Peer peer = chatFull != null ? chatFull.default_send_as : null;
        if (peer == null && (tL_channels_sendAsPeers = this.sendAsPeersObj) != null && !tL_channels_sendAsPeers.peers.isEmpty()) {
            peer = ((TLRPC.TL_sendAsPeer) this.sendAsPeersObj.peers.get(0)).peer;
        }
        this.forwardingPreviewView.setSendAsPeer(peer);
        checkShowBlur(true);
        this.contentView.addView(this.forwardingPreviewView);
        if (this.keyboardWasVisible) {
            this.chatActivityEnterView.freezeEmojiView(true);
            this.chatActivityEnterView.showEmojiView();
            this.openKeyboardOnAttachMenuClose = true;
        }
        AndroidUtilities.setAdjustResizeToNothing(getParentActivity(), this.classGuid);
        this.fragmentView.requestLayout();
    }

    /* renamed from: org.telegram.ui.ChatActivity$59 */
    /* loaded from: classes5.dex */
    class C310759 extends MessagePreviewView {
        C310759(Context context, ChatActivity chatActivity, MessagePreviewParams messagePreviewParams, TLRPC.User user, TLRPC.Chat chat, int i, MessagePreviewView.ResourcesDelegate resourcesDelegate, int i2, boolean z) {
            super(context, chatActivity, messagePreviewParams, user, chat, i, resourcesDelegate, i2, z);
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void removeLink() throws Resources.NotFoundException {
            dismiss(true);
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.foundWebPage = null;
            ChatActivityEnterView chatActivityEnterView = chatActivity.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setWebPage(null, false);
            }
            ChatActivity chatActivity2 = ChatActivity.this;
            MessagePreviewParams messagePreviewParams = chatActivity2.messagePreviewParams;
            if (messagePreviewParams != null) {
                messagePreviewParams.updateLink(((BaseFragment) chatActivity2).currentAccount, null, null, ChatActivity.this.replyingMessageObject != ChatActivity.this.threadMessageObject ? ChatActivity.this.replyingMessageObject : null, ChatActivity.this.replyingQuote, ChatActivity.this.editingMessageObject);
            }
            ChatActivity.this.fallbackFieldPanel();
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void removeQuote() {
            dismiss(true);
            ChatActivity.this.replyingQuote = null;
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.showFieldPanelForReply(chatActivity.replyingMessageObject);
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void removeReply() throws Resources.NotFoundException {
            dismiss(true);
            ChatActivity.this.replyingMessageObject = null;
            ChatActivity.this.replyingQuote = null;
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.messagePreviewParams.updateReply(null, null, chatActivity.dialog_id, null);
            ChatActivity.this.fallbackFieldPanel();
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void removeForward() throws Resources.NotFoundException {
            super.removeForward();
            dismiss(true);
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.messagePreviewParams.updateForward(null, chatActivity.dialog_id);
            ChatActivity.this.fallbackFieldPanel();
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void onFullDismiss(boolean z) {
            MessagePreviewParams messagePreviewParams = ChatActivity.this.messagePreviewParams;
            if (messagePreviewParams != null) {
                messagePreviewParams.attach(null);
            }
            if (z) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$59$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onFullDismiss$0();
                    }
                }, 15L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onFullDismiss$0() {
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.freezeEmojiView(false);
            }
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void onQuoteSelectedPart() {
            if (ChatActivity.this.replyingQuote != null && ChatActivity.this.replyingQuote.message != null) {
                ChatActivity chatActivity = ChatActivity.this;
                ReplyQuote replyQuote = chatActivity.messagePreviewParams.quote;
                if (replyQuote == null || replyQuote.message == null || chatActivity.replyingQuote.message.getId() == ChatActivity.this.messagePreviewParams.quote.message.getId()) {
                    return;
                }
            }
            ChatActivity chatActivity2 = ChatActivity.this;
            chatActivity2.replyingQuote = chatActivity2.messagePreviewParams.quote;
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void onDismiss(boolean z) throws Resources.NotFoundException, NumberFormatException {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.forwardingPreviewView = null;
            chatActivity.checkShowBlur(true);
            ChatActivity chatActivity2 = ChatActivity.this;
            if (chatActivity2.messagePreviewParams != null) {
                if (chatActivity2.replyingQuote == null) {
                    ChatActivity chatActivity3 = ChatActivity.this;
                    chatActivity3.replyingQuote = chatActivity3.messagePreviewParams.quote;
                }
                ChatActivity chatActivity4 = ChatActivity.this;
                if (chatActivity4.messagePreviewParams.quote == null) {
                    chatActivity4.replyingQuote = null;
                }
                if (ChatActivity.this.replyingQuote != null) {
                    ChatActivity.this.replyingQuote.outdated = false;
                    ReplyQuote replyQuote = ChatActivity.this.replyingQuote;
                    ChatActivity chatActivity5 = ChatActivity.this;
                    replyQuote.start = chatActivity5.messagePreviewParams.quoteStart;
                    ReplyQuote replyQuote2 = chatActivity5.replyingQuote;
                    ChatActivity chatActivity6 = ChatActivity.this;
                    replyQuote2.end = chatActivity6.messagePreviewParams.quoteEnd;
                    chatActivity6.replyingQuote.update();
                    if (ChatActivity.this.fieldPanelShown == 2) {
                        ChatActivity chatActivity7 = ChatActivity.this;
                        chatActivity7.showFieldPanelForReplyQuote(chatActivity7.replyingMessageObject, ChatActivity.this.replyingQuote);
                    }
                } else {
                    ArrayList<MessageObject> arrayList = new ArrayList<>();
                    MessagePreviewParams.Messages messages = ChatActivity.this.messagePreviewParams.forwardMessages;
                    if (messages != null) {
                        messages.getSelectedMessages(arrayList);
                    }
                    ChatActivity.this.fallbackFieldPanel();
                }
            }
            ChatActivity.this.forbidForwardingWithDismiss = false;
            if (ChatActivity.this.keyboardWasVisible && z) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$59$$ExternalSyntheticLambda1
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onDismiss$1();
                    }
                }, 50L);
                ChatActivity.this.keyboardWasVisible = false;
            }
            AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onDismiss$1() {
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.openKeyboard();
            }
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void viewInChat() {
            TLRPC.MessageReplyHeader messageReplyHeader;
            ChatActivity chatActivity = ChatActivity.this;
            if (chatActivity.messagePreviewParams != null) {
                MessageObject replyMessage = chatActivity.getReplyMessage();
                int id = replyMessage.getId();
                String str = ChatActivity.this.replyingQuote != null ? ChatActivity.this.replyingQuote.text : null;
                long peerDialogId = DialogObject.getPeerDialogId(replyMessage.messageOwner.peer_id);
                boolean z = replyMessage.messageOwner.peer_id instanceof TLRPC.TL_peerChannel;
                if (peerDialogId != ChatActivity.this.dialog_id || (ChatObject.isForum(ChatActivity.this.currentChat) && z)) {
                    dismiss(false);
                    TLRPC.Message message = replyMessage.messageOwner;
                    int i = (message == null || (messageReplyHeader = message.reply_to) == null || !messageReplyHeader.quote || (messageReplyHeader.flags & 1024) == 0) ? -1 : messageReplyHeader.quote_offset;
                    LaunchActivity launchActivity = LaunchActivity.instance;
                    if (launchActivity != null) {
                        launchActivity.openMessage(peerDialogId, id, str, null, 0, i, null);
                        return;
                    }
                    return;
                }
                dismiss(true);
                if (str != null) {
                    ChatActivity chatActivity2 = ChatActivity.this;
                    chatActivity2.highlightMessageQuote = str;
                    chatActivity2.showNoQuoteAlert = true;
                }
                ChatActivity.this.scrollToMessageId(id, 0, true, replyMessage.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0);
            }
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void selectAnotherChat(boolean z) {
            int i;
            boolean z2;
            MessagePreviewParams.Messages messages;
            dismiss(false);
            ChatActivity chatActivity = ChatActivity.this;
            if (chatActivity.messagePreviewParams != null) {
                if (!z) {
                    chatActivity.ignoreDraft = true;
                }
                MessagePreviewParams.Messages messages2 = ChatActivity.this.messagePreviewParams.forwardMessages;
                if (messages2 != null) {
                    int size = messages2.messages.size();
                    i = 0;
                    z2 = false;
                    for (int i2 = 0; i2 < size; i2++) {
                        MessageObject messageObject = ChatActivity.this.messagePreviewParams.forwardMessages.messages.get(i2);
                        if (messageObject.isTodo()) {
                            i = 3;
                        } else if (messageObject.isPoll()) {
                            if (i != 2) {
                                i = messageObject.isPublicPoll() ? 2 : 1;
                            }
                        } else if (messageObject.isInvoice()) {
                            z2 = true;
                        }
                        ChatActivity.this.selectedMessagesIds[0].put(messageObject.getId(), messageObject);
                    }
                } else {
                    i = 0;
                    z2 = false;
                }
                Bundle bundle = new Bundle();
                bundle.putBoolean("onlySelect", true);
                bundle.putInt("dialogsType", 3);
                bundle.putBoolean("quote", !z);
                boolean z3 = (z || (messages = ChatActivity.this.messagePreviewParams.replyMessage) == null || messages.messages.isEmpty() || ChatActivity.this.messagePreviewParams.quote != null) ? false : true;
                bundle.putBoolean("reply_to", z3);
                if (z3) {
                    long peerDialogId = DialogObject.getPeerDialogId(ChatActivity.this.messagePreviewParams.replyMessage.messages.get(0).getFromPeer());
                    if (peerDialogId != 0 && peerDialogId != ChatActivity.this.getDialogId() && peerDialogId != ChatActivity.this.getUserConfig().getClientUserId() && peerDialogId > 0) {
                        bundle.putLong("reply_to_author", peerDialogId);
                    }
                }
                bundle.putInt("hasPoll", i);
                bundle.putBoolean("hasInvoice", z2);
                MessagePreviewParams.Messages messages3 = ChatActivity.this.messagePreviewParams.forwardMessages;
                bundle.putInt("messagesCount", messages3 != null ? messages3.messages.size() : 0);
                bundle.putBoolean("canSelectTopics", true);
                DialogsActivity dialogsActivity = new DialogsActivity(bundle);
                dialogsActivity.setDelegate(ChatActivity.this);
                ChatActivity.this.presentFragment(dialogsActivity);
            }
        }

        @Override // org.telegram.p023ui.Components.MessagePreviewView
        protected void didSendPressed() {
            super.didSendPressed();
            dismiss(true);
            ChatActivity.this.chatActivityEnterView.getSendButton().callOnClick();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void animateToNextChat() {
        ChatPullingDownDrawable chatPullingDownDrawable = this.pullingDownDrawable;
        if (chatPullingDownDrawable == null) {
            return;
        }
        if (this.isTopic) {
            if (chatPullingDownDrawable.getTopic() != null) {
                addToPulledTopicsMyself();
                addToPulledDialogs(this.currentChat, this.pullingDownDrawable.nextTopic, this.dialog_id, this.dialogFolderId, this.dialogFilterId);
                Bundle bundle = new Bundle();
                bundle.putInt("dialog_folder_id", this.pullingDownDrawable.dialogFolderId);
                bundle.putInt("dialog_filter_id", this.pullingDownDrawable.dialogFilterId);
                bundle.putBoolean("pulled", true);
                ChatActivity chatActivityForTopic = ForumUtilities.getChatActivityForTopic(this, -this.dialog_id, this.pullingDownDrawable.getTopic(), 0, bundle);
                chatActivityForTopic.setPullingDownTransition(true);
                replacingChatActivity = true;
                presentFragment(chatActivityForTopic, true);
                return;
            }
            return;
        }
        if (chatPullingDownDrawable.getChatId() != 0) {
            addToPulledDialogsMyself();
            ChatPullingDownDrawable chatPullingDownDrawable2 = this.pullingDownDrawable;
            addToPulledDialogs(chatPullingDownDrawable2.nextChat, null, chatPullingDownDrawable2.nextDialogId, chatPullingDownDrawable2.dialogFolderId, chatPullingDownDrawable2.dialogFilterId);
            Bundle bundle2 = new Bundle();
            bundle2.putLong("chat_id", this.pullingDownDrawable.getChatId());
            bundle2.putInt("dialog_folder_id", this.pullingDownDrawable.dialogFolderId);
            bundle2.putInt("dialog_filter_id", this.pullingDownDrawable.dialogFilterId);
            bundle2.putBoolean("pulled", true);
            MessagesController.getNotificationsSettings(this.currentAccount).edit().remove("diditem" + this.pullingDownDrawable.nextDialogId).apply();
            ChatActivity chatActivity = new ChatActivity(bundle2);
            ArrayList arrayList = this.nextChannels;
            if (arrayList != null && arrayList.size() > 1) {
                ArrayList arrayList2 = this.nextChannels;
                chatActivity.setNextChannels(new ArrayList(arrayList2.subList(1, arrayList2.size())));
            }
            chatActivity.setPullingDownTransition(true);
            replacingChatActivity = true;
            presentFragment(chatActivity, true);
        }
    }

    public void setNextChannels(ArrayList arrayList) {
        this.nextChannels = arrayList;
    }

    private void addToPulledDialogsMyself() {
        if (getParentLayout() == null) {
            return;
        }
        BackButtonMenu.addToPulledDialogs(this, getParentLayout().getFragmentStack().indexOf(this), this.currentChat, this.currentUser, null, this.dialog_id, this.dialogFilterId, this.dialogFolderId);
    }

    private void addToPulledDialogs(TLRPC.Chat chat, TLRPC.TL_forumTopic tL_forumTopic, long j, int i, int i2) {
        if (getParentLayout() == null) {
            return;
        }
        BackButtonMenu.addToPulledDialogs(this, getParentLayout().getFragmentStack().indexOf(this), chat, null, tL_forumTopic, j, i, i2);
    }

    private void addToPulledTopicsMyself() {
        if (getParentLayout() == null) {
            return;
        }
        BackButtonMenu.addToPulledDialogs(this, getParentLayout().getFragmentStack().indexOf(this), this.currentChat, this.currentUser, this.forumTopic, this.dialog_id, this.dialogFilterId, this.dialogFolderId);
    }

    private void setPullingDownTransition(boolean z) {
        this.fromPullingDownTransition = z;
    }

    public void setSwitchFromTopics(boolean z) {
        this.switchFromTopics = z;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateBulletinLayout() {
        Bulletin visibleBulletin = Bulletin.getVisibleBulletin();
        if (visibleBulletin == null || this.bulletinDelegate == null) {
            return;
        }
        visibleBulletin.updatePosition();
    }

    private void searchUserMessages(TLRPC.User user, TLRPC.Chat chat) {
        String strSubstring;
        this.searchingUserMessages = user;
        this.searchingChatMessages = chat;
        if (this.searchItem == null || this.mentionContainer == null) {
            return;
        }
        if (user == null && chat == null) {
            return;
        }
        if (user != null) {
            strSubstring = user.first_name;
            if (TextUtils.isEmpty(strSubstring)) {
                strSubstring = this.searchingUserMessages.last_name;
            }
        } else {
            strSubstring = chat.title;
        }
        if (strSubstring == null) {
            return;
        }
        if (strSubstring.length() > 10) {
            strSubstring = strSubstring.substring(0, 10);
        }
        this.searchingForUser = false;
        String string = LocaleController.getString(C2369R.string.SearchFrom);
        SpannableString spannableString = new SpannableString(string + " " + strSubstring);
        spannableString.setSpan(new ForegroundColorSpan(getThemedColor(Theme.key_actionBarDefaultSubtitle)), string.length() + 1, spannableString.length(), 33);
        this.searchItem.setSearchFieldCaption(spannableString);
        this.mentionContainer.getAdapter().lambda$searchUsernameOrHashtag$7(null, 0, null, false, true);
        this.searchItem.setSearchFieldHint(null);
        this.searchItem.clearSearchText();
        MediaDataController mediaDataController = getMediaDataController();
        this.searchingQuery = "";
        mediaDataController.searchMessagesInChat("", this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages, this.searchingReaction);
    }

    private void updateTranslateItemVisibility() {
        ActionBarMenuItem.Item item = this.translateItem;
        if (item == null) {
            return;
        }
        item.setVisibility((getMessagesController().getTranslateController().isTranslateDialogHidden(getDialogId()) && getMessagesController().getTranslateController().isDialogTranslatable(getDialogId())) ? 0 : 8);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateInfoTopView$110(View view) {
        Bundle bundle = new Bundle();
        bundle.putLong("user_id", this.chatInviterId);
        presentFragment(new ProfileActivity(bundle));
    }

    private void updateInfoTopView(boolean z) {
        View.OnClickListener onClickListener;
        if (this.contentView == null) {
            return;
        }
        SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
        CharSequence charSequenceReplaceWithLink = null;
        if (this.currentChat == null || this.chatInviterId == 0) {
            onClickListener = null;
        } else {
            StringBuilder sb = new StringBuilder();
            sb.append("dialog_bar_vis3");
            sb.append(this.dialog_id);
            boolean z2 = notificationsSettings.getInt(sb.toString(), 0) == 2;
            boolean z3 = notificationsSettings.getBoolean("dialog_bar_report" + this.dialog_id, false);
            boolean z4 = notificationsSettings.getBoolean("dialog_bar_block" + this.dialog_id, false);
            if (z2 && (z3 || z4)) {
                TLRPC.User user = getMessagesController().getUser(Long.valueOf(this.chatInviterId));
                if (user != null) {
                    charSequenceReplaceWithLink = MessageObject.replaceWithLink(LocaleController.getString((!ChatObject.isChannel(this.currentChat) || this.currentChat.megagroup) ? C2369R.string.ActionUserInvitedToGroup : C2369R.string.ActionUserInvitedToChannel), "un1", user);
                    onClickListener = new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda164
                        @Override // android.view.View.OnClickListener
                        public final void onClick(View view) {
                            this.f$0.lambda$updateInfoTopView$110(view);
                        }
                    };
                }
            } else {
                hideInfoView();
            }
            onClickListener = null;
        }
        if (charSequenceReplaceWithLink != null) {
            Animator animator = this.infoTopViewAnimator;
            if (animator != null) {
                animator.cancel();
            }
            if (this.infoTopView == null) {
                ChatActionCell chatActionCell = new ChatActionCell(this.contentView.getContext(), false, this.themeDelegate);
                this.infoTopView = chatActionCell;
                chatActionCell.setCustomText(charSequenceReplaceWithLink);
                this.infoTopView.setInvalidateColors(true);
                this.infoTopView.setOnClickListener(onClickListener);
                this.contentView.addView(this.infoTopView, LayoutHelper.createFrame(-2, -2.0f, 49, 0.0f, 0.0f, 0.0f, 0.0f));
            }
            if (z) {
                if (this.infoTopView.getTag() == null) {
                    ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
                    this.infoTopView.setTag(1);
                    this.infoTopView.setAlpha(0.0f);
                    final ChatActionCell chatActionCell2 = this.infoTopView;
                    valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda165
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$updateInfoTopView$111(chatActionCell2, valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.60
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animator2) {
                            ChatActivity.this.topViewOffset = AndroidUtilities.m1146dp(30.0f);
                            ChatActivity.this.invalidateChatListViewTopPadding();
                        }
                    });
                    valueAnimatorOfFloat.setDuration(150L);
                    this.infoTopViewAnimator = valueAnimatorOfFloat;
                    valueAnimatorOfFloat.start();
                    return;
                }
                return;
            }
            this.infoTopView.setTag(1);
            this.topViewOffset = AndroidUtilities.m1146dp(30.0f);
            invalidateChatListViewTopPadding();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateInfoTopView$111(View view, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.topViewOffset = AndroidUtilities.m1146dp(30.0f) * fFloatValue;
        invalidateChatListViewTopPadding();
        view.setAlpha(fFloatValue);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkTopUndoView() {
        if (this.topUndoView != null) {
            return;
        }
        UndoView undoView = new UndoView(getContext(), this, true, this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.61
            @Override // org.telegram.p023ui.Components.UndoView
            public void didPressUrl(CharacterStyle characterStyle) throws Resources.NotFoundException, NumberFormatException, UnsupportedEncodingException {
                ChatActivity.this.didPressMessageUrl(characterStyle, false, null, null);
            }

            @Override // org.telegram.p023ui.Components.UndoView
            public void showWithAction(long j, int i, Object obj, Object obj2, Runnable runnable, Runnable runnable2) {
                setAdditionalTranslationY((ChatActivity.this.fragmentContextView == null || !ChatActivity.this.fragmentContextView.isCallTypeVisible()) ? 0.0f : AndroidUtilities.m1146dp(ChatActivity.this.fragmentContextView.getStyleHeight()));
                super.showWithAction(j, i, obj, obj2, runnable, runnable2);
            }
        };
        this.topUndoView = undoView;
        this.contentView.addView(undoView, 17, LayoutHelper.createFrame(-1, -2.0f, 51, 8.0f, 8.0f, 8.0f, 0.0f));
    }

    /* JADX WARN: Removed duplicated region for block: B:14:0x007e  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void createPinnedMessageView() {
        /*
            Method dump skipped, instructions count: 864
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.createPinnedMessageView():void");
    }

    /* renamed from: org.telegram.ui.ChatActivity$62 */
    class C311162 extends BlurredFrameLayout {
        float lastY;
        float startY;

        C311162(Context context, SizeNotifierFrameLayout sizeNotifierFrameLayout) {
            super(context, sizeNotifierFrameLayout);
            setOnLongClickListener(new View.OnLongClickListener() { // from class: org.telegram.ui.ChatActivity$62$$ExternalSyntheticLambda0
                @Override // android.view.View.OnLongClickListener
                public final boolean onLongClick(View view) {
                    return this.f$0.lambda$new$0(view);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ boolean lambda$new$0(View view) {
            if (AndroidUtilities.isTablet() || ChatActivity.this.isThreadChat()) {
                return false;
            }
            this.startY = this.lastY;
            ChatActivity.this.openPinnedMessagesList(true);
            return true;
        }

        @Override // android.view.View
        public boolean onTouchEvent(MotionEvent motionEvent) {
            this.lastY = motionEvent.getY();
            if (motionEvent.getAction() == 1) {
                ChatActivity.this.finishPreviewFragment();
            } else if (motionEvent.getAction() == 2) {
                float f = this.startY - this.lastY;
                ChatActivity.this.movePreviewFragment(f);
                if (f < 0.0f) {
                    this.startY = this.lastY;
                }
            }
            return super.onTouchEvent(motionEvent);
        }

        @Override // android.widget.FrameLayout, android.view.View
        protected void onMeasure(int i, int i2) {
            super.onMeasure(i, i2);
            if (ChatActivity.this.setPinnedTextTranslationX) {
                for (int i3 = 0; i3 < ChatActivity.this.pinnedNextAnimation.length; i3++) {
                    if (ChatActivity.this.pinnedNextAnimation[i3] != null) {
                        ChatActivity.this.pinnedNextAnimation[i3].start();
                    }
                }
                ChatActivity.this.setPinnedTextTranslationX = false;
            }
        }

        @Override // android.view.ViewGroup
        protected boolean drawChild(Canvas canvas, View view, long j) {
            if (view == ChatActivity.this.pinnedLineView) {
                canvas.save();
                canvas.clipRect(0, 0, getMeasuredWidth(), AndroidUtilities.m1146dp(48.0f));
            }
            if (view == ChatActivity.this.pinnedMessageTextView[0] || view == ChatActivity.this.pinnedMessageTextView[1]) {
                canvas.save();
                canvas.clipRect(0, 0, getMeasuredWidth() - AndroidUtilities.m1146dp(38.0f), getMeasuredHeight());
                boolean zDrawChild = super.drawChild(canvas, view, j);
                canvas.restore();
                return zDrawChild;
            }
            boolean zDrawChild2 = super.drawChild(canvas, view, j);
            if (view == ChatActivity.this.pinnedLineView) {
                canvas.restore();
            }
            return zDrawChild2;
        }

        @Override // org.telegram.p023ui.Components.BlurredFrameLayout, android.view.ViewGroup, android.view.View
        protected void dispatchDraw(Canvas canvas) {
            super.dispatchDraw(canvas);
            canvas.drawLine(0.0f, getMeasuredHeight() - AndroidUtilities.m1146dp(2.0f), getMeasuredWidth(), getMeasuredHeight() - AndroidUtilities.m1146dp(2.0f), Theme.dividerPaint);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createPinnedMessageView$112(View view) {
        int iIntValue;
        this.wasManualScroll = true;
        if (isThreadChat() && !this.isTopic) {
            scrollToMessageId((int) this.threadMessageId, 0, true, 0, true, 0);
            return;
        }
        int i = this.currentPinnedMessageId;
        if (i != 0) {
            if (this.pinnedMessageIds.isEmpty()) {
                iIntValue = 0;
            } else {
                ArrayList arrayList = this.pinnedMessageIds;
                if (i == ((Integer) arrayList.get(arrayList.size() - 1)).intValue()) {
                    iIntValue = ((Integer) this.pinnedMessageIds.get(0)).intValue() + 1;
                    this.forceScrollToFirst = true;
                } else {
                    iIntValue = i - 1;
                    this.forceScrollToFirst = false;
                }
            }
            this.forceNextPinnedMessageId = iIntValue;
            if (!this.forceScrollToFirst) {
                iIntValue = -iIntValue;
            }
            scrollToMessageId(i, 0, true, 0, true, iIntValue);
            updateMessagesVisiblePart(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createPinnedMessageView$113(View view) {
        setPinVisibility(false);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createPinnedMessageView$114(View view) {
        openPinnedMessagesList(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:17:0x0027  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$createPinnedMessageView$116(android.view.View r6) {
        /*
            r5 = this;
            android.app.Activity r6 = r5.getParentActivity()
            if (r6 != 0) goto L8
            goto La3
        L8:
            org.telegram.tgnet.TLRPC$Chat r6 = r5.currentChat
            r0 = 1
            r1 = 0
            if (r6 == 0) goto L1c
            boolean r6 = org.telegram.messenger.ChatObject.canPinMessages(r6)
            if (r6 == 0) goto L27
            org.telegram.tgnet.TLRPC$Chat r6 = r5.currentChat
            boolean r6 = r6.monoforum
            if (r6 != 0) goto L27
            r6 = 1
            goto L28
        L1c:
            org.telegram.tgnet.TLRPC$EncryptedChat r6 = r5.currentEncryptedChat
            if (r6 != 0) goto L27
            org.telegram.tgnet.TLRPC$UserFull r6 = r5.userInfo
            if (r6 == 0) goto L27
            boolean r6 = r6.can_pin_message
            goto L28
        L27:
            r6 = 0
        L28:
            if (r6 == 0) goto L67
            org.telegram.ui.ActionBar.AlertDialog$Builder r6 = new org.telegram.ui.ActionBar.AlertDialog$Builder
            android.app.Activity r0 = r5.getParentActivity()
            org.telegram.ui.ChatActivity$ThemeDelegate r1 = r5.themeDelegate
            r6.<init>(r0, r1)
            int r0 = org.telegram.messenger.C2369R.string.UnpinMessageAlertTitle
            java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r0)
            r6.setTitle(r0)
            int r0 = org.telegram.messenger.C2369R.string.UnpinMessageAlert
            java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r0)
            r6.setMessage(r0)
            int r0 = org.telegram.messenger.C2369R.string.UnpinMessage
            java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r0)
            org.telegram.ui.ChatActivity$$ExternalSyntheticLambda379 r1 = new org.telegram.ui.ChatActivity$$ExternalSyntheticLambda379
            r1.<init>()
            r6.setPositiveButton(r0, r1)
            int r0 = org.telegram.messenger.C2369R.string.Cancel
            java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r0)
            r1 = 0
            r6.setNegativeButton(r0, r1)
            org.telegram.ui.ActionBar.AlertDialog r6 = r6.create()
            r5.showDialog(r6)
            return
        L67:
            java.util.ArrayList r6 = r5.pinnedMessageIds
            boolean r6 = r6.isEmpty()
            if (r6 != 0) goto La3
            int r6 = r5.currentAccount
            android.content.SharedPreferences r6 = org.telegram.messenger.MessagesController.getNotificationsSettings(r6)
            android.content.SharedPreferences$Editor r6 = r6.edit()
            java.lang.StringBuilder r2 = new java.lang.StringBuilder
            r2.<init>()
            java.lang.String r3 = "pin_"
            r2.append(r3)
            long r3 = r5.dialog_id
            r2.append(r3)
            java.lang.String r2 = r2.toString()
            java.util.ArrayList r3 = r5.pinnedMessageIds
            java.lang.Object r1 = r3.get(r1)
            java.lang.Integer r1 = (java.lang.Integer) r1
            int r1 = r1.intValue()
            android.content.SharedPreferences$Editor r6 = r6.putInt(r2, r1)
            r6.apply()
            r5.updatePinnedMessageView(r0)
        La3:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$createPinnedMessageView$116(android.view.View):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createPinnedMessageView$115(AlertDialog alertDialog, int i) {
        MessageObject messageObject = (MessageObject) this.pinnedMessageObjects.get(Integer.valueOf(this.currentPinnedMessageId));
        if (messageObject == null) {
            messageObject = (MessageObject) this.messagesDict[0].get(this.currentPinnedMessageId);
        }
        unpinMessage(messageObject);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createPinnedMessageView$117(View view) {
        setPinVisibility(false);
        return true;
    }

    private void openAnotherForward() {
        MessagePreviewParams.Messages messages;
        ArrayList<MessageObject> arrayList;
        String string;
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams == null || messagePreviewParams.isEmpty() || (messages = this.messagePreviewParams.forwardMessages) == null || (arrayList = messages.messages) == null) {
            return;
        }
        int size = arrayList.size();
        long fromChatId = 0;
        long dialogId = 0;
        for (int i = 0; i < size; i++) {
            MessageObject messageObject = this.messagePreviewParams.forwardMessages.messages.get(i);
            if (fromChatId != 0) {
                if (fromChatId != messageObject.getFromChatId()) {
                    break;
                }
            } else {
                dialogId = messageObject.getDialogId();
                fromChatId = messageObject.getFromChatId();
            }
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setButtonsVertical(true);
        if (dialogId > 0) {
            TLRPC.User user = getMessagesController().getUser(Long.valueOf(dialogId));
            if (user == null) {
                return;
            } else {
                string = LocaleController.formatString("CancelForwardPrivate", C2369R.string.CancelForwardPrivate, LocaleController.formatPluralString("MessagesBold", this.messagePreviewParams.forwardMessages.messages.size(), new Object[0]), ContactsController.formatName(user.first_name, user.last_name));
            }
        } else {
            TLRPC.Chat chat = getMessagesController().getChat(Long.valueOf(-dialogId));
            if (chat == null) {
                return;
            } else {
                string = LocaleController.formatString("CancelForwardChat", C2369R.string.CancelForwardChat, LocaleController.formatPluralString("MessagesBold", this.messagePreviewParams.forwardMessages.messages.size(), new Object[0]), chat.title);
            }
        }
        builder.setMessage(AndroidUtilities.replaceTags(string));
        builder.setTitle(LocaleController.formatPluralString("messages", this.messagePreviewParams.forwardMessages.messages.size(), new Object[0]));
        builder.setPositiveButton(LocaleController.getString(C2369R.string.CancelForwarding), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda144
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i2) throws Resources.NotFoundException {
                this.f$0.lambda$openAnotherForward$118(alertDialog, i2);
            }
        });
        builder.setNegativeButton(LocaleController.getString(C2369R.string.ShowForwardingOptions), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda145
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i2) throws Resources.NotFoundException {
                this.f$0.lambda$openAnotherForward$119(alertDialog, i2);
            }
        });
        AlertDialog alertDialogCreate = builder.create();
        showDialog(alertDialogCreate);
        TextView textView = (TextView) alertDialogCreate.getButton(-1);
        if (textView != null) {
            textView.setTextColor(getThemedColor(Theme.key_text_RedBold));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAnotherForward$118(AlertDialog alertDialog, int i) throws Resources.NotFoundException {
        this.forbidForwardingWithDismiss = false;
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams != null) {
            messagePreviewParams.updateForward(null, this.dialog_id);
        }
        fallbackFieldPanel();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAnotherForward$119(AlertDialog alertDialog, int i) throws Resources.NotFoundException {
        openForwardingPreview(1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openPinnedMessagesList(boolean z) {
        INavigationLayout iNavigationLayout;
        if (getParentActivity() == null || (iNavigationLayout = this.parentLayout) == null || iNavigationLayout.getLastFragment() != this || this.pinnedMessageIds.isEmpty()) {
            return;
        }
        Bundle bundle = new Bundle();
        TLRPC.Chat chat = this.currentChat;
        if (chat != null) {
            bundle.putLong("chat_id", chat.f1571id);
        } else {
            bundle.putLong("user_id", this.currentUser.f1734id);
        }
        bundle.putInt("chatMode", 2);
        ChatActivity chatActivity = new ChatActivity(bundle);
        chatActivity.pinnedMessageIds = new ArrayList(this.pinnedMessageIds);
        chatActivity.pinnedMessageObjects = new HashMap(this.pinnedMessageObjects);
        int size = this.pinnedMessageIds.size();
        for (int i = 0; i < size; i++) {
            Integer num = (Integer) this.pinnedMessageIds.get(i);
            MessageObject messageObject = (MessageObject) this.pinnedMessageObjects.get(num);
            MessageObject messageObject2 = (MessageObject) this.messagesDict[0].get(num.intValue());
            if (messageObject == null) {
                messageObject = messageObject2;
            } else if (messageObject2 != null) {
                messageObject.mediaExists = messageObject2.mediaExists;
                messageObject.attachPathExists = messageObject2.attachPathExists;
            }
            if (messageObject != null) {
                chatActivity.pinnedMessageObjects.put(num, messageObject);
                chatActivity.updatePinnedTopicStarterMessage();
            }
        }
        chatActivity.loadedPinnedMessagesCount = this.loadedPinnedMessagesCount;
        chatActivity.totalPinnedMessagesCount = this.isTopic ? this.pinnedMessageIds.size() : this.totalPinnedMessagesCount;
        chatActivity.pinnedEndReached = this.pinnedEndReached;
        chatActivity.userInfo = this.userInfo;
        chatActivity.chatInfo = this.chatInfo;
        chatActivity.chatActivityDelegate = new C311465();
        if (z) {
            presentFragmentAsPreview(chatActivity);
            checkShowBlur(true);
        } else {
            presentFragment(chatActivity, false);
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$65 */
    /* loaded from: classes5.dex */
    class C311465 implements ChatActivityDelegate {
        C311465() {
        }

        @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
        public void openReplyMessage(int i) {
            ChatActivity.this.scrollToMessageId(i, 0, true, 0, true, 0);
        }

        @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
        public void openHashtagSearch(String str) {
            ChatActivity.this.lambda$openHashtagSearch$375(str);
        }

        @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
        public void onUnpin(boolean z, final boolean z2) {
            if (z) {
                final ArrayList arrayList = new ArrayList(ChatActivity.this.pinnedMessageIds);
                final ArrayList arrayList2 = new ArrayList(ChatActivity.this.pinnedMessageObjects.values());
                if (z2) {
                    SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(((BaseFragment) ChatActivity.this).currentAccount);
                    if (ChatActivity.this.pinnedMessageIds.isEmpty()) {
                        notificationsSettings.edit().remove("pin_" + ChatActivity.this.dialog_id).apply();
                    } else {
                        notificationsSettings.edit().putInt("pin_" + ChatActivity.this.dialog_id, ((Integer) ChatActivity.this.pinnedMessageIds.get(0)).intValue()).apply();
                    }
                    ChatActivity.this.updatePinnedMessageView(true);
                } else {
                    ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(ChatActivity.this.dialog_id), arrayList, Boolean.FALSE, null, null, 0, 0, Boolean.TRUE);
                }
                if (ChatActivity.this.pinBulletin != null) {
                    ChatActivity.this.pinBulletin.hide();
                }
                ChatActivity.this.showPinBulletin = true;
                ChatActivity chatActivity = ChatActivity.this;
                final int i = chatActivity.pinBullerinTag + 1;
                chatActivity.pinBullerinTag = i;
                final int pinnedMessagesCount = ChatActivity.this.getPinnedMessagesCount();
                ChatActivity chatActivity2 = ChatActivity.this;
                chatActivity2.pinBulletin = BulletinFactory.createUnpinAllMessagesBulletin(chatActivity2, pinnedMessagesCount, z2, new Runnable() { // from class: org.telegram.ui.ChatActivity$65$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onUnpin$0(z2, arrayList, arrayList2, pinnedMessagesCount, i);
                    }
                }, new Runnable() { // from class: org.telegram.ui.ChatActivity$65$$ExternalSyntheticLambda1
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onUnpin$1(z2, i);
                    }
                }, ChatActivity.this.themeDelegate);
                return;
            }
            MessageObject messageObject = (MessageObject) ChatActivity.this.pinnedMessageObjects.get(Integer.valueOf(ChatActivity.this.currentPinnedMessageId));
            if (messageObject == null) {
                ChatActivity chatActivity3 = ChatActivity.this;
                messageObject = (MessageObject) chatActivity3.messagesDict[0].get(chatActivity3.currentPinnedMessageId);
            }
            ChatActivity.this.unpinMessage(messageObject);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onUnpin$0(boolean z, ArrayList arrayList, ArrayList arrayList2, int i, int i2) {
            if (z) {
                MessagesController.getNotificationsSettings(((BaseFragment) ChatActivity.this).currentAccount).edit().remove("pin_" + ChatActivity.this.dialog_id).apply();
                ChatActivity.this.updatePinnedMessageView(true);
            } else {
                ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(ChatActivity.this.dialog_id), arrayList, Boolean.TRUE, arrayList2, null, 0, Integer.valueOf(i), Boolean.valueOf(ChatActivity.this.pinnedEndReached));
            }
            if (i2 == ChatActivity.this.pinBullerinTag) {
                ChatActivity.this.pinBulletin = null;
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onUnpin$1(boolean z, int i) {
            if (!z) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.isTopic) {
                    for (int i2 = 0; i2 < ChatActivity.this.pinnedMessageIds.size(); i2++) {
                        MessagesController messagesController = ChatActivity.this.getMessagesController();
                        ChatActivity chatActivity2 = ChatActivity.this;
                        messagesController.pinMessage(chatActivity2.currentChat, chatActivity2.currentUser, ((Integer) chatActivity2.pinnedMessageIds.get(i2)).intValue(), true, false, false);
                    }
                } else {
                    MessagesController messagesController2 = chatActivity.getMessagesController();
                    ChatActivity chatActivity3 = ChatActivity.this;
                    messagesController2.unpinAllMessages(chatActivity3.currentChat, chatActivity3.currentUser);
                }
            }
            if (i == ChatActivity.this.pinBullerinTag) {
                ChatActivity.this.pinBulletin = null;
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkShowBlur(boolean z) {
        MessagePreviewView messagePreviewView;
        BluredView bluredView;
        BluredView bluredView2;
        INavigationLayout iNavigationLayout = this.parentLayout;
        boolean z2 = !(iNavigationLayout == null || !iNavigationLayout.isInPreviewMode() || this.parentLayout.hasIntegratedBlurInPreview() || this.inPreviewMode) || ((messagePreviewView = this.forwardingPreviewView) != null && messagePreviewView.isShowing());
        if (!z2 || ((bluredView2 = this.blurredView) != null && bluredView2.getTag() != null)) {
            if (z2 || (bluredView = this.blurredView) == null || bluredView.getTag() == null) {
                return;
            }
            this.blurredView.animate().setListener(null).cancel();
            this.blurredView.animate().setListener(new HideViewAfterAnimation(this.blurredView)).alpha(0.0f).start();
            this.blurredView.setTag(null);
            this.chatListView.invalidate();
            View view = this.fragmentView;
            if (view != null) {
                view.invalidate();
                return;
            }
            return;
        }
        BluredView bluredView3 = this.blurredView;
        if (bluredView3 == null) {
            BluredView bluredView4 = new BluredView(this.fragmentView.getContext(), this.fragmentView, this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.66
                @Override // android.view.View
                public void setAlpha(float f) {
                    super.setAlpha(f);
                    View view2 = ChatActivity.this.fragmentView;
                    if (view2 != null) {
                        view2.invalidate();
                    }
                }

                @Override // android.view.View
                public void setVisibility(int i) {
                    super.setVisibility(i);
                    View view2 = ChatActivity.this.fragmentView;
                    if (view2 != null) {
                        view2.invalidate();
                    }
                }
            };
            this.blurredView = bluredView4;
            this.contentView.addView(bluredView4, LayoutHelper.createFrame(-1, -1.0f));
        } else {
            if (this.contentView.indexOfChild(bluredView3) != this.contentView.getChildCount() - 1) {
                this.contentView.removeView(this.blurredView);
                this.contentView.addView(this.blurredView);
            }
            this.blurredView.update();
            this.blurredView.setVisibility(0);
        }
        this.blurredView.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda13
            @Override // android.view.View.OnClickListener
            public final void onClick(View view2) {
                this.f$0.lambda$checkShowBlur$120(view2);
            }
        });
        this.blurredView.setAlpha(0.0f);
        this.blurredView.animate().setListener(null).cancel();
        this.blurredView.animate().alpha(1.0f).setListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.67
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animator) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.fragmentView == null || chatActivity.chatListView == null) {
                    return;
                }
                ChatActivity.this.chatListView.invalidate();
                ChatActivity.this.fragmentView.invalidate();
            }
        }).start();
        this.blurredView.setTag(1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkShowBlur$120(View view) {
        finishPreviewFragment();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public int getPreviewHeight() {
        if (this.chatMode == 2 && this.messages.size() == 2) {
            return getHeightForMessage((MessageObject) this.messages.get(0), false) + AndroidUtilities.m1146dp(80.0f) + ActionBar.getCurrentActionBarHeight();
        }
        return super.getPreviewHeight();
    }

    private boolean getLiteModeChat() {
        if (this.liteModeChat == null) {
            this.liteModeChat = Boolean.valueOf(LiteMode.isEnabled(LiteMode.FLAGS_CHAT));
        }
        return this.liteModeChat.booleanValue();
    }

    private void showProgressView(boolean z) {
        if (this.progressView == null) {
            return;
        }
        if (!AndroidUtilities.isTablet() && !this.isComments && this.currentUser == null && getLiteModeChat()) {
            this.animateProgressViewTo = z;
            return;
        }
        if (this.fragmentOpened && SharedConfig.animationsEnabled()) {
            if (z == this.animateProgressViewTo) {
                return;
            }
            this.animateProgressViewTo = z;
            if (z) {
                if (this.progressView.getVisibility() != 0) {
                    this.progressView.setVisibility(0);
                    this.progressView.setAlpha(0.0f);
                    this.progressView.setScaleX(0.3f);
                    this.progressView.setScaleY(0.3f);
                }
                this.progressView.animate().setListener(null).cancel();
                this.progressView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
                return;
            }
            this.progressView.animate().setListener(null).cancel();
            this.progressView.animate().alpha(0.0f).scaleX(0.3f).scaleY(0.3f).setDuration(150L).setListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.68
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    ChatActivity.this.progressView.setVisibility(4);
                }
            }).start();
            return;
        }
        this.animateProgressViewTo = z;
        this.progressView.setVisibility(z ? 0 : 4);
    }

    private void hideInfoView() {
        Animator animator = this.infoTopViewAnimator;
        if (animator != null) {
            animator.cancel();
        }
        ChatActionCell chatActionCell = this.infoTopView;
        if (chatActionCell == null || chatActionCell.getTag() == null) {
            return;
        }
        this.infoTopView.setTag(null);
        final ChatActionCell chatActionCell2 = this.infoTopView;
        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(1.0f, 0.0f);
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda263
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                this.f$0.lambda$hideInfoView$121(chatActionCell2, valueAnimator);
            }
        });
        valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.69
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animator2) {
                ChatActivity.this.topViewOffset = 0.0f;
                if (animator2 == ChatActivity.this.infoTopViewAnimator) {
                    ViewGroup viewGroup = (ViewGroup) chatActionCell2.getParent();
                    if (viewGroup != null) {
                        viewGroup.removeView(chatActionCell2);
                    }
                    ChatActivity.this.infoTopView = null;
                    ChatActivity.this.infoTopViewAnimator = null;
                }
            }
        });
        valueAnimatorOfFloat.setDuration(150L);
        this.infoTopViewAnimator = valueAnimatorOfFloat;
        valueAnimatorOfFloat.start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hideInfoView$121(View view, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.topViewOffset = AndroidUtilities.m1146dp(30.0f) * fFloatValue;
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
        view.setAlpha(fFloatValue);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateChatListViewTopPadding() {
        TranslateButton translateButton;
        ChatActivityEnterView chatActivityEnterView;
        if (!this.invalidateChatListViewTopPadding || this.chatListView == null) {
            return;
        }
        float measuredHeight = 0.0f;
        if (this.fixedKeyboardHeight <= 0 || this.searchExpandProgress != 0.0f) {
            BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
            float fMax = Math.max(0, (blurredFrameLayout == null || blurredFrameLayout.getVisibility() != 0) ? 0 : this.topChatPanelView.getLayoutParams().height - AndroidUtilities.m1146dp(2.0f));
            float fMax2 = fMax + Math.max(-fMax, this.topChatPanelViewOffset);
            BlurredFrameLayout blurredFrameLayout2 = this.topChatPanelView2;
            float fMax3 = Math.max(0, (blurredFrameLayout2 == null || blurredFrameLayout2.getVisibility() != 0) ? 0 : this.topChatPanelView2.getLayoutParams().height - AndroidUtilities.m1146dp(2.0f));
            float fMax4 = fMax3 + Math.max(-fMax3, this.topChatPanelView2Offset);
            BlurredFrameLayout blurredFrameLayout3 = this.pinnedMessageView;
            float fMax5 = (blurredFrameLayout3 == null || blurredFrameLayout3.getVisibility() != 0) ? 0.0f : Math.max(0.0f, AndroidUtilities.m1146dp(48.0f) + this.pinnedMessageEnterOffset);
            if (this.actionBarSearchTags != null) {
                fMax5 = Math.max(fMax5, r6.getCurrentHeight());
            }
            if (this.hashtagSearchTabs != null) {
                fMax5 = Math.max(fMax5, r6.getCurrentHeight());
            }
            ChatActivityMemberRequestsDelegate chatActivityMemberRequestsDelegate = this.pendingRequestsDelegate;
            View view = chatActivityMemberRequestsDelegate != null ? chatActivityMemberRequestsDelegate.getView() : null;
            float fMax6 = (view == null || view.getVisibility() != 0) ? 0.0f : Math.max(0.0f, (view.getHeight() + this.pendingRequestsDelegate.getViewEnterOffset()) - AndroidUtilities.m1146dp(4.0f));
            float f = this.chatListViewPaddingTop;
            float fM1146dp = AndroidUtilities.m1146dp(4.0f) + this.contentPaddingTop;
            float f2 = fMax2 + fMax5 + fMax6 + fMax4;
            this.paddingTopHeight = f2;
            float fM1146dp2 = fM1146dp + f2 + (this.topicsTabs != null ? AndroidUtilities.m1146dp(48.0f) * (1.0f - this.topicsTabs.sidemenuT) : 0.0f) + this.blurredViewTopOffset;
            this.chatListViewPaddingVisibleOffset = 0;
            this.chatListViewPaddingTop = fM1146dp2 + this.contentPanTranslation;
            if (this.searchExpandProgress != 0.0f && (chatActivityEnterView = this.chatActivityEnterView) != null && chatActivityEnterView.getVisibility() == 0) {
                float f3 = this.chatListViewPaddingTop;
                measuredHeight = this.searchExpandProgress * (this.chatActivityEnterView.getMeasuredHeight() - AndroidUtilities.m1146dp(48.0f));
                this.chatListViewPaddingTop = f3 - measuredHeight;
            }
            ChatActionCell chatActionCell = this.infoTopView;
            if (chatActionCell != null) {
                chatActionCell.setTranslationY(((this.chatListView.getTranslationY() + this.chatListViewPaddingTop) + this.topViewOffset) - AndroidUtilities.m1146dp(30.0f));
                float f4 = this.chatListViewPaddingTop;
                float f5 = this.topViewOffset;
                this.chatListViewPaddingTop = f4 + f5;
                this.chatListViewPaddingVisibleOffset = (int) (this.chatListViewPaddingVisibleOffset + f5);
            }
            ChatActionCell chatActionCell2 = this.floatingDateView;
            if (chatActionCell2 != null) {
                chatActionCell2.setTranslationY((((this.chatListView.getTranslationY() - measuredHeight) + this.chatListViewPaddingTop) + this.floatingDateViewOffset) - AndroidUtilities.m1146dp(4.0f));
            }
            updateFloatingTopicView();
            ChatListRecyclerView chatListRecyclerView = this.chatListView;
            if (chatListRecyclerView != null && this.chatLayoutManager != null && this.chatAdapter != null) {
                int paddingTop = chatListRecyclerView.getPaddingTop();
                int paddingBottom = this.chatListView.getPaddingBottom();
                checkUi_chatListViewPaddings();
                if (this.chatListView.getPaddingTop() != paddingTop || this.chatListView.getPaddingBottom() != paddingBottom) {
                    invalidateMessagesVisiblePart();
                    invalidateMergedVisibleBlurredPositionsAndSourcesPositions();
                }
                this.chatListView.setTopGlowOffset((int) ((this.chatListViewPaddingTop - this.chatListViewPaddingVisibleOffset) - AndroidUtilities.m1146dp(4.0f)));
                if (f != this.chatListViewPaddingTop) {
                    int childCount = this.chatListView.getChildCount();
                    int i = 0;
                    while (true) {
                        if (i >= childCount) {
                            break;
                        }
                        if (this.chatListView.getChildAdapterPosition(this.chatListView.getChildAt(i)) == this.chatAdapter.getItemCount() - 1) {
                            float f6 = this.chatListViewPaddingTop;
                            if (r2.getTop() > f6) {
                                this.chatListView.scrollBy(0, (int) (r2.getTop() - f6));
                            }
                        } else {
                            i++;
                        }
                    }
                }
                if (!isThreadChat() && !this.wasManualScroll && this.unreadMessageObject != null && this.chatListView != null && ((translateButton = this.translateButton) == null || translateButton.getVisibility() != 0)) {
                    this.chatListView.scrollBy(0, (int) (f - this.chatListViewPaddingTop));
                }
            }
            this.invalidateChatListViewTopPadding = false;
            Bulletin.updateCurrentPosition();
            checkUi_chatListViewPaddings();
        }
    }

    private void checkUi_chatListViewPaddings() {
        if (this.chatListView == null) {
            return;
        }
        int iM1146dp = (int) (this.blurredViewBottomOffset + AndroidUtilities.m1146dp(16.0f) + this.inputIslandHeightTarget + this.windowInsetsStateHolder.getInsets(WindowInsetsCompat.Type.ime() | WindowInsetsCompat.Type.systemBars()).bottom);
        float fM1146dp = this.blurredViewBottomOffset + AndroidUtilities.m1146dp(16.0f) + this.inputIslandHeightCurrent + this.windowInsetsStateHolder.getAnimatedMaxBottomInset();
        int i = (int) this.chatListViewPaddingTop;
        TopicsTabsView topicsTabsView = this.topicsTabs;
        if (topicsTabsView != null) {
            topicsTabsView.setSideMenuBackgroundMarginTop(Math.max(0, (i - this.blurredViewTopOffset) - AndroidUtilities.m1146dp(5.0f)));
        }
        this.chatListViewPaddingsAnimator.setPaddings(i, fM1146dp, iM1146dp, this.wasManualScroll);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateChatListViewTopPadding() {
        int iM1146dp;
        int iM1146dp2;
        if (!this.invalidateChatListViewTopPadding) {
            this.invalidateChatListViewTopPadding = true;
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (chatActivityFragmentView != null) {
                chatActivityFragmentView.invalidate();
            }
            ChatListRecyclerView chatListRecyclerView = this.chatListView;
            if (chatListRecyclerView != null) {
                chatListRecyclerView.invalidate();
            }
        }
        BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
        if (blurredFrameLayout == null || blurredFrameLayout.getVisibility() != 0) {
            iM1146dp = 0;
        } else {
            iM1146dp = (this.topChatPanelView.getLayoutParams() == null ? AndroidUtilities.m1146dp(50.0f) : this.topChatPanelView.getLayoutParams().height) - AndroidUtilities.m1146dp(2.0f);
        }
        int iMax = iM1146dp + ((int) Math.max(-iM1146dp, this.topChatPanelViewOffset));
        float fMax = this.contentPanTranslation + this.contentPaddingTop + Math.max(0, iMax);
        if (this.topicsTabs != null) {
            fMax += AndroidUtilities.m1146dp(48.0f) * (1.0f - this.topicsTabs.sidemenuT);
        }
        BlurredFrameLayout blurredFrameLayout2 = this.pinnedMessageView;
        if (blurredFrameLayout2 != null) {
            float f = fMax + this.pinnedMessageEnterOffset;
            blurredFrameLayout2.setTranslationY(f);
            fMax = f + AndroidUtilities.m1146dp(48.0f);
        }
        BlurredFrameLayout blurredFrameLayout3 = this.topChatPanelView2;
        if (blurredFrameLayout3 == null || blurredFrameLayout3.getVisibility() != 0) {
            iM1146dp2 = 0;
        } else {
            iM1146dp2 = (this.topChatPanelView2.getLayoutParams() == null ? AndroidUtilities.m1146dp(50.0f) : this.topChatPanelView2.getLayoutParams().height) - AndroidUtilities.m1146dp(2.0f);
        }
        float fMax2 = fMax + Math.max(0, iM1146dp2 + ((int) Math.max(-iM1146dp2, this.topChatPanelView2Offset)));
        ChatActivityMemberRequestsDelegate chatActivityMemberRequestsDelegate = this.pendingRequestsDelegate;
        View view = chatActivityMemberRequestsDelegate != null ? chatActivityMemberRequestsDelegate.getView() : null;
        if (view != null) {
            view.setTranslationY(fMax2 + this.pendingRequestsDelegate.getViewEnterOffset());
        }
        float fM1146dp = (this.topicsTabs != null ? (AndroidUtilities.m1146dp(48.0f) * (1.0f - this.topicsTabs.sidemenuT)) + 0.0f : 0.0f) + (this.actionBarSearchTags != null ? r5.getCurrentHeight() : 0.0f) + (this.hashtagSearchTabs != null ? r5.getCurrentHeight() : 0.0f);
        if (this.fragmentContextView != null) {
            FragmentContextView fragmentContextView = this.fragmentLocationContextView;
            float fM1146dp2 = (fragmentContextView == null || fragmentContextView.getVisibility() != 0) ? 0.0f : AndroidUtilities.m1146dp(36.0f) + 0.0f;
            FragmentContextView fragmentContextView2 = this.fragmentContextView;
            fragmentContextView2.setTranslationY(this.contentPanTranslation + fM1146dp + fM1146dp2 + fragmentContextView2.getTopPadding());
        }
        if (this.fragmentLocationContextView != null) {
            FragmentContextView fragmentContextView3 = this.fragmentContextView;
            float fM1146dp3 = (fragmentContextView3 == null || fragmentContextView3.getVisibility() != 0) ? 0.0f : AndroidUtilities.m1146dp(this.fragmentContextView.getStyleHeight()) + this.fragmentContextView.getTopPadding() + 0.0f;
            FragmentContextView fragmentContextView4 = this.fragmentLocationContextView;
            fragmentContextView4.setTranslationY(this.contentPanTranslation + fM1146dp + fM1146dp3 + fragmentContextView4.getTopPadding());
        }
        BlurredFrameLayout blurredFrameLayout4 = this.topChatPanelView;
        if (blurredFrameLayout4 != null) {
            blurredFrameLayout4.setTranslationY(this.contentPanTranslation + fM1146dp + this.contentPaddingTop + this.topChatPanelViewOffset);
        }
        BlurredFrameLayout blurredFrameLayout5 = this.topChatPanelView2;
        if (blurredFrameLayout5 != null) {
            blurredFrameLayout5.setTranslationY(this.contentPanTranslation + fM1146dp + this.contentPaddingTop + this.topChatPanelView2Offset + iMax + Math.max(0.0f, this.topChatPanelViewOffset) + Math.max(0.0f, this.pinnedMessageView != null ? AndroidUtilities.m1146dp(48.0f) + this.pinnedMessageEnterOffset : 0.0f));
        }
        FrameLayout frameLayout = this.alertView;
        if (frameLayout != null && frameLayout.getVisibility() == 0) {
            this.alertView.setTranslationY(((this.contentPanTranslation + fM1146dp) + this.contentPaddingTop) - (AndroidUtilities.m1146dp(50.0f) * (1.0f - this.alertViewEnterProgress)));
        }
        UndoView undoView = this.undoView;
        if (undoView != null) {
            undoView.setAdditionalTranslationY(this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + AndroidUtilities.m1146dp(16.0f) + this.chatInputViewsContainer.getInputBubbleHeight());
        }
        FrameLayout frameLayout2 = this.messagesSearchListContainer;
        if (frameLayout2 != null) {
            frameLayout2.setTranslationY(getHashtagTabsHeight() + this.contentPanTranslation);
            FrameLayout frameLayout3 = this.messagesSearchListContainer;
            SearchTagsList searchTagsList = this.actionBarSearchTags;
            frameLayout3.setPadding(0, (searchTagsList == null || !searchTagsList.shown()) ? 0 : this.actionBarSearchTags.getHeight(), 0, getHashtagTabsHeight());
        }
        HashtagHistoryView hashtagHistoryView = this.hashtagHistoryView;
        if (hashtagHistoryView != null) {
            hashtagHistoryView.setTranslationY(getHashtagTabsHeight() + this.contentPanTranslation);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public TextureView createTextureView(boolean z) {
        if (this.parentLayout == null) {
            return null;
        }
        AndroidUtilities.cancelRunOnUIThread(this.destroyTextureViewRunnable);
        if (this.videoPlayerContainer == null) {
            FrameLayout frameLayout = new FrameLayout(getParentActivity()) { // from class: org.telegram.ui.ChatActivity.70
                @Override // android.view.View
                public void setTranslationY(float f) {
                    super.setTranslationY(f);
                    ChatActivity.this.contentView.invalidate();
                }
            };
            this.videoPlayerContainer = frameLayout;
            frameLayout.setOutlineProvider(new ViewOutlineProvider() { // from class: org.telegram.ui.ChatActivity.71
                @Override // android.view.ViewOutlineProvider
                public void getOutline(View view, Outline outline) {
                    ImageReceiver imageReceiver = (ImageReceiver) view.getTag(C2369R.id.parent_tag);
                    if (imageReceiver != null) {
                        int[] roundRadius = imageReceiver.getRoundRadius();
                        int iMax = 0;
                        for (int i = 0; i < 4; i++) {
                            iMax = Math.max(iMax, roundRadius[i]);
                        }
                        outline.setRoundRect(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), iMax);
                        return;
                    }
                    outline.setOval(0, 0, AndroidUtilities.roundPlayingMessageSize(ChatActivity.this.isSideMenued()), AndroidUtilities.roundPlayingMessageSize(ChatActivity.this.isSideMenued()));
                }
            });
            this.videoPlayerContainer.setClipToOutline(true);
            this.videoPlayerContainer.setWillNotDraw(false);
            AspectRatioFrameLayout aspectRatioFrameLayout = new AspectRatioFrameLayout(getParentActivity());
            this.aspectRatioFrameLayout = aspectRatioFrameLayout;
            aspectRatioFrameLayout.setBackgroundColor(0);
            if (z) {
                this.videoPlayerContainer.addView(this.aspectRatioFrameLayout, LayoutHelper.createFrame(-1, -1, 17));
            }
            TextureView textureView = new TextureView(getParentActivity());
            this.videoTextureView = textureView;
            textureView.setOpaque(false);
            this.aspectRatioFrameLayout.addView(this.videoTextureView, LayoutHelper.createFrame(-1, -1.0f));
        }
        ViewGroup viewGroup = (ViewGroup) this.videoPlayerContainer.getParent();
        if (viewGroup != null && viewGroup != this.contentView) {
            viewGroup.removeView(this.videoPlayerContainer);
            viewGroup = null;
        }
        if (viewGroup == null) {
            this.contentView.addView(this.videoPlayerContainer, 1, new FrameLayout.LayoutParams(AndroidUtilities.roundPlayingMessageSize(isSideMenued()), AndroidUtilities.roundPlayingMessageSize(isSideMenued())));
        }
        this.videoPlayerContainer.setTag(null);
        this.aspectRatioFrameLayout.setDrawingReady(false);
        return this.videoTextureView;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void destroyTextureView() {
        FrameLayout frameLayout = this.videoPlayerContainer;
        if (frameLayout == null || frameLayout.getParent() == null) {
            return;
        }
        this.chatListView.invalidateViews();
        this.aspectRatioFrameLayout.setDrawingReady(false);
        this.videoPlayerContainer.setTag(null);
        this.contentView.removeView(this.videoPlayerContainer);
    }

    private boolean hasSelectedNoforwardsMessage() {
        TLRPC.Message message;
        try {
            for (SparseArrayWithTouch sparseArrayWithTouch : this.selectedMessagesIds) {
                for (int i = 0; i < sparseArrayWithTouch.size(); i++) {
                    MessageObject messageObject = (MessageObject) sparseArrayWithTouch.valueAt(i);
                    if (messageObject != null && (message = messageObject.messageOwner) != null && message.noforwards) {
                        return true;
                    }
                }
            }
        } catch (Exception unused) {
        }
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void share() {
        MessageObject messageObject = null;
        for (int i = 1; i >= 0; i--) {
            if (messageObject == null && this.selectedMessagesIds[i].size() != 0) {
                messageObject = (MessageObject) this.messagesDict[i].get(this.selectedMessagesIds[i].keyAt(0));
            }
            this.selectedMessagesIds[i].clear();
            this.selectedMessagesCanCopyIds[i].clear();
            this.selectedMessagesCanStarIds[i].clear();
        }
        if (getParentActivity() != null && messageObject != null && ((messageObject.isVoice() || messageObject.isRoundVideo()) && messageObject.getDocument() != null)) {
            File pathToAttach = FileLoader.getInstance(this.currentAccount).getPathToAttach(messageObject.getDocument(), null, false, true);
            TLRPC.Message message = messageObject.messageOwner;
            if (message != null && message.attachPath != null && (pathToAttach == null || !pathToAttach.exists())) {
                pathToAttach = new File(messageObject.messageOwner.attachPath);
            }
            if (pathToAttach != null && pathToAttach.exists()) {
                Intent intent = new Intent("android.intent.action.SEND");
                if (messageObject.isVideo() || messageObject.isRoundVideo()) {
                    intent.setType("video/mp4");
                } else {
                    intent.setType(messageObject.getMimeType());
                }
                if (Build.VERSION.SDK_INT >= 24) {
                    try {
                        intent.putExtra("android.intent.extra.STREAM", FileProvider.getUriForFile(getParentActivity(), ApplicationLoader.getApplicationId() + ".provider", pathToAttach));
                        intent.setFlags(1);
                    } catch (Exception unused) {
                        intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(pathToAttach));
                    }
                } else {
                    intent.putExtra("android.intent.extra.STREAM", Uri.fromFile(pathToAttach));
                }
                getParentActivity().startActivityForResult(Intent.createChooser(intent, LocaleController.getString(C2369R.string.ShareFile)), 500);
            }
        }
        hideActionMode();
        updatePinnedMessageView(true);
        updateVisibleRows();
        updateSelectedMessageReactions();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openForward(boolean z) {
        String string;
        if (getMessagesController().isChatNoForwards(this.currentChat) || hasSelectedNoforwardsMessage()) {
            if (getMessagesController().isChatNoForwards(this.currentChat)) {
                if (ChatObject.isChannel(this.currentChat) && !this.currentChat.megagroup) {
                    string = LocaleController.getString(C2369R.string.ForwardsRestrictedInfoChannel);
                } else {
                    string = LocaleController.getString(C2369R.string.ForwardsRestrictedInfoGroup);
                }
            } else {
                string = LocaleController.getString(C2369R.string.ForwardsRestrictedInfoBot);
            }
            if (z) {
                if (this.fwdRestrictedTopHint == null) {
                    ChatActivityFragmentView chatActivityFragmentView = this.contentView;
                    int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
                    if (iIndexOfChild == -1) {
                        return;
                    }
                    HintView hintView = new HintView((Context) getParentActivity(), 7, true);
                    this.fwdRestrictedTopHint = hintView;
                    chatActivityFragmentView.addView(hintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 12.0f, 0.0f, 12.0f, 0.0f));
                    this.fwdRestrictedTopHint.setAlpha(0.0f);
                    this.fwdRestrictedTopHint.setVisibility(4);
                }
                this.fwdRestrictedTopHint.setText(string);
                this.fwdRestrictedTopHint.showForView(this.actionBar.getActionMode().getItem(11), true);
                return;
            }
            if (this.fwdRestrictedBottomHint == null) {
                ChatActivityFragmentView chatActivityFragmentView2 = this.contentView;
                int iIndexOfChild2 = chatActivityFragmentView2.indexOfChild(this.chatInputViewsContainer);
                if (iIndexOfChild2 == -1) {
                    return;
                }
                HintView hintView2 = new HintView(getParentActivity(), 9);
                this.fwdRestrictedBottomHint = hintView2;
                chatActivityFragmentView2.addView(hintView2, iIndexOfChild2 + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 12.0f, 0.0f, 12.0f, 0.0f));
                this.fwdRestrictedBottomHint.setAlpha(0.0f);
                this.fwdRestrictedBottomHint.setVisibility(4);
            }
            this.fwdRestrictedBottomHint.setText(string);
            this.fwdRestrictedBottomHint.showForView(this.actionsButtonsLayout.getForwardButton(), true);
            return;
        }
        int i = 0;
        boolean z2 = false;
        for (int i2 = 0; i2 < 2; i2++) {
            for (int i3 = 0; i3 < this.selectedMessagesIds[i2].size(); i3++) {
                MessageObject messageObject = (MessageObject) this.selectedMessagesIds[i2].valueAt(i3);
                if (messageObject.isTodo()) {
                    i = 3;
                } else if (messageObject.isPoll()) {
                    i = messageObject.isPublicPoll() ? 2 : 1;
                    if (i == 2) {
                        break;
                    }
                } else if (messageObject.isInvoice()) {
                    z2 = true;
                }
            }
            if (i == 2) {
                break;
            }
        }
        ChatSelectionReactionMenuOverlay chatSelectionReactionMenuOverlay = this.selectionReactionsOverlay;
        if (chatSelectionReactionMenuOverlay != null && chatSelectionReactionMenuOverlay.isVisible()) {
            this.selectionReactionsOverlay.setHiddenByScroll(true);
        }
        if (z) {
            Bundle bundle = new Bundle();
            bundle.putBoolean("onlySelect", true);
            bundle.putInt("dialogsType", 3);
            bundle.putInt("messagesCount", this.canForwardMessagesCount);
            bundle.putInt("hasPoll", i);
            bundle.putBoolean("hasInvoice", z2);
            bundle.putBoolean("canSelectTopics", true);
            DialogsActivity dialogsActivity = new DialogsActivity(bundle);
            dialogsActivity.setDelegate(this);
            presentFragment(dialogsActivity);
            return;
        }
        ArrayList arrayList = new ArrayList();
        MessageObject messageObject2 = this.forwardingMessage;
        if (messageObject2 != null) {
            MessageObject.GroupedMessages groupedMessages = this.forwardingMessageGroup;
            if (groupedMessages != null) {
                arrayList.addAll(groupedMessages.messages);
            } else {
                arrayList.add(messageObject2);
            }
        } else {
            for (int i4 = 1; i4 >= 0; i4--) {
                ArrayList arrayList2 = new ArrayList();
                for (int i5 = 0; i5 < this.selectedMessagesIds[i4].size(); i5++) {
                    arrayList2.add(Integer.valueOf(this.selectedMessagesIds[i4].keyAt(i5)));
                }
                Collections.sort(arrayList2);
                for (int i6 = 0; i6 < arrayList2.size(); i6++) {
                    MessageObject messageObject3 = (MessageObject) this.selectedMessagesIds[i4].get(((Integer) arrayList2.get(i6)).intValue());
                    if (messageObject3 != null) {
                        arrayList.add(messageObject3);
                    }
                }
            }
        }
        ShareAlert shareAlert = new ShareAlert(getParentActivity(), this, arrayList, null, null, null, ChatObject.isChannel(this.currentChat), null, null, false, false, false, null, this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.72
            @Override // org.telegram.p023ui.Components.ShareAlert, org.telegram.p023ui.ActionBar.BottomSheet
            public void dismissInternal() {
                super.dismissInternal();
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ChatActivity.this.getClassGuid());
                if (ChatActivity.this.getChatActivityEnterView().getVisibility() == 0) {
                    ChatActivity.this.getFragmentView().requestLayout();
                }
            }

            @Override // org.telegram.p023ui.Components.ShareAlert
            protected void onSend(LongSparseArray longSparseArray, int i7, TLRPC.TL_forumTopic tL_forumTopic, boolean z3) {
                if (z3) {
                    ChatActivity.this.createUndoView();
                    if (ChatActivity.this.undoView == null) {
                        return;
                    }
                    if (longSparseArray.size() != 1) {
                        ChatActivity.this.undoView.showWithAction(0L, 53, Integer.valueOf(i7), Integer.valueOf(longSparseArray.size()), (Runnable) null, (Runnable) null);
                    } else if (((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id != ChatActivity.this.getUserConfig().getClientUserId() || !BulletinFactory.m1267of(ChatActivity.this).showForwardedBulletinWithTag(((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id, i7)) {
                        ChatActivity.this.undoView.showWithAction(((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id, 53, Integer.valueOf(i7), tL_forumTopic, (Runnable) null, (Runnable) null);
                    }
                }
                ChatActivity.this.clearSelectionMode();
            }
        };
        showDialog(shareAlert);
        shareAlert.setCalcMandatoryInsets(isKeyboardVisible());
    }

    public void showBottomOverlayProgress(final boolean z, boolean z2) {
        if (!z || this.bottomOverlayProgress.getTag() == null) {
            if (z || this.bottomOverlayProgress.getTag() != null) {
                AnimatorSet animatorSet = this.bottomOverlayAnimation;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.bottomOverlayAnimation = null;
                }
                this.bottomOverlayProgress.setTag(z ? 1 : null);
                float f = 0.1f;
                if (z2) {
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.bottomOverlayAnimation = animatorSet2;
                    if (z) {
                        this.bottomOverlayProgress.setVisibility(0);
                        AnimatorSet animatorSet3 = this.bottomOverlayAnimation;
                        UnreadCounterTextView unreadCounterTextView = this.bottomOverlayChatText;
                        Property property = View.SCALE_X;
                        ObjectAnimator objectAnimatorOfFloat = ObjectAnimator.ofFloat(unreadCounterTextView, (Property<UnreadCounterTextView, Float>) property, 0.1f);
                        UnreadCounterTextView unreadCounterTextView2 = this.bottomOverlayChatText;
                        Property property2 = View.SCALE_Y;
                        ObjectAnimator objectAnimatorOfFloat2 = ObjectAnimator.ofFloat(unreadCounterTextView2, (Property<UnreadCounterTextView, Float>) property2, 0.1f);
                        UnreadCounterTextView unreadCounterTextView3 = this.bottomOverlayChatText;
                        Property property3 = View.ALPHA;
                        animatorSet3.playTogether(objectAnimatorOfFloat, objectAnimatorOfFloat2, ObjectAnimator.ofFloat(unreadCounterTextView3, (Property<UnreadCounterTextView, Float>) property3, 0.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) property, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) property2, 1.0f), ObjectAnimator.ofFloat(this.bottomOverlayProgress, (Property<RadialProgressView, Float>) property3, 1.0f));
                        this.bottomOverlayAnimation.setStartDelay(200L);
                    } else {
                        Object obj = this.bottomOverlayLinks ? this.bottomOverlayLinksText : this.bottomOverlayChatText;
                        RadialProgressView radialProgressView = this.bottomOverlayProgress;
                        Property property4 = View.SCALE_X;
                        ObjectAnimator objectAnimatorOfFloat3 = ObjectAnimator.ofFloat(radialProgressView, (Property<RadialProgressView, Float>) property4, 0.1f);
                        RadialProgressView radialProgressView2 = this.bottomOverlayProgress;
                        Property property5 = View.SCALE_Y;
                        ObjectAnimator objectAnimatorOfFloat4 = ObjectAnimator.ofFloat(radialProgressView2, (Property<RadialProgressView, Float>) property5, 0.1f);
                        RadialProgressView radialProgressView3 = this.bottomOverlayProgress;
                        Property property6 = View.ALPHA;
                        animatorSet2.playTogether(objectAnimatorOfFloat3, objectAnimatorOfFloat4, ObjectAnimator.ofFloat(radialProgressView3, (Property<RadialProgressView, Float>) property6, 0.0f), ObjectAnimator.ofFloat(obj, (Property<Object, Float>) property4, 1.0f), ObjectAnimator.ofFloat(obj, (Property<Object, Float>) property5, 1.0f), ObjectAnimator.ofFloat(obj, (Property<Object, Float>) property6, 1.0f));
                    }
                    this.bottomOverlayAnimation.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.73
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animator) {
                            if (ChatActivity.this.bottomOverlayAnimation == null || !ChatActivity.this.bottomOverlayAnimation.equals(animator)) {
                                return;
                            }
                            if (!z) {
                                ChatActivity.this.bottomOverlayProgress.setVisibility(4);
                            } else {
                                (ChatActivity.this.bottomOverlayLinks ? ChatActivity.this.bottomOverlayLinksText : ChatActivity.this.bottomOverlayChatText).setVisibility(4);
                            }
                        }

                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationCancel(Animator animator) {
                            if (ChatActivity.this.bottomOverlayAnimation == null || !ChatActivity.this.bottomOverlayAnimation.equals(animator)) {
                                return;
                            }
                            ChatActivity.this.bottomOverlayAnimation = null;
                        }
                    });
                    this.bottomOverlayAnimation.setDuration(150L);
                    this.bottomOverlayAnimation.start();
                    return;
                }
                this.bottomOverlayProgress.setVisibility(z ? 0 : 4);
                this.bottomOverlayProgress.setScaleX(z ? 1.0f : 0.1f);
                this.bottomOverlayProgress.setScaleY(z ? 1.0f : 0.1f);
                this.bottomOverlayProgress.setAlpha(1.0f);
                this.bottomOverlayChatText.setVisibility((z || this.bottomOverlayLinks) ? 4 : 0);
                this.bottomOverlayLinksText.setVisibility((z || !this.bottomOverlayLinks) ? 4 : 0);
                this.bottomOverlayChatText.setScaleX((z || this.bottomOverlayLinks) ? 0.1f : 1.0f);
                this.bottomOverlayLinksText.setScaleX((z || !this.bottomOverlayLinks) ? 0.1f : 1.0f);
                this.bottomOverlayChatText.setScaleY((z || this.bottomOverlayLinks) ? 0.1f : 1.0f);
                LinkSpanDrawable.LinksTextView linksTextView = this.bottomOverlayLinksText;
                if (!z && this.bottomOverlayLinks) {
                    f = 1.0f;
                }
                linksTextView.setScaleY(f);
                this.bottomOverlayChatText.setAlpha((z || this.bottomOverlayLinks) ? 0.0f : 1.0f);
                this.bottomOverlayLinksText.setAlpha((z || !this.bottomOverlayLinks) ? 0.0f : 1.0f);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void sendBotInlineResult(TLRPC.BotInlineResult botInlineResult, boolean z, int i, long j) throws Resources.NotFoundException, NumberFormatException {
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView == null) {
            return;
        }
        long contextBotId = mentionsContainerView.getAdapter().getContextBotId();
        HashMap map = new HashMap();
        map.put("id", botInlineResult.f1569id);
        map.put("query_id", "" + botInlineResult.query_id);
        map.put("bot", "" + contextBotId);
        map.put("bot_name", this.mentionContainer.getAdapter().getContextBotName());
        SendMessagesHelper.prepareSendingBotContextResult(this, getAccountInstance(), botInlineResult, map, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, z, i, 0, this.quickReplyShortcut, getQuickReplyId(), j);
        this.chatActivityEnterView.setFieldText("");
        hideFieldPanel(false);
        getMediaDataController().increaseInlineRating(contextBotId);
    }

    private void checkBotCommands() {
        TLRPC.Chat chat;
        z = false;
        z = false;
        boolean z = false;
        URLSpanBotCommand.enabled = false;
        TLRPC.User user = this.currentUser;
        if (user != null && user.bot) {
            URLSpanBotCommand.enabled = !UserObject.isReplyUser(user);
            return;
        }
        TLRPC.ChatFull chatFull = this.chatInfo;
        if (chatFull instanceof TLRPC.TL_chatFull) {
            for (int i = 0; i < this.chatInfo.participants.participants.size(); i++) {
                TLRPC.User user2 = getMessagesController().getUser(Long.valueOf(((TLRPC.ChatParticipant) this.chatInfo.participants.participants.get(i)).user_id));
                if (user2 != null && user2.bot) {
                    URLSpanBotCommand.enabled = true;
                    return;
                }
            }
            return;
        }
        if (chatFull instanceof TLRPC.TL_channelFull) {
            if (!chatFull.bot_info.isEmpty() && (chat = this.currentChat) != null && chat.megagroup) {
                z = true;
            }
            URLSpanBotCommand.enabled = z;
        }
    }

    public MessageObject.GroupedMessages getValidGroupedMessage(MessageObject messageObject) {
        if (messageObject.getGroupId() == 0) {
            return null;
        }
        MessageObject.GroupedMessages groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
        if (groupedMessages == null || (groupedMessages.messages.size() > 1 && groupedMessages.getPosition(messageObject) != null)) {
            return groupedMessages;
        }
        return null;
    }

    public void jumpToDate(int i) {
        int i2;
        TLRPC.Message message;
        if (this.messages.isEmpty()) {
            return;
        }
        MessageObject messageObject = (MessageObject) this.messages.get(0);
        ArrayList arrayList = this.messages;
        MessageObject messageObject2 = (MessageObject) arrayList.get(arrayList.size() - 1);
        if ((messageObject.messageOwner.date >= i && messageObject2.messageOwner.date <= i) || (messageObject2.messageOwner.date >= i && this.endReached[0])) {
            for (int size = this.messages.size() - 1; size >= 0; size--) {
                MessageObject messageObject3 = (MessageObject) this.messages.get(size);
                if (messageObject3.messageOwner.date >= i && messageObject3.getId() != 0) {
                    scrollToMessageId(messageObject3.getId(), 0, false, messageObject3.getDialogId() == this.mergeDialogId ? 1 : 0, true, 0);
                    return;
                }
            }
            return;
        }
        if (DialogObject.isEncryptedDialog(this.dialog_id)) {
            return;
        }
        int iFindLastVisibleItemPosition = this.chatLayoutManager.findLastVisibleItemPosition();
        int iFindFirstVisibleItemPosition = this.chatLayoutManager.findFirstVisibleItemPosition();
        while (true) {
            if (iFindFirstVisibleItemPosition > iFindLastVisibleItemPosition) {
                i2 = -1;
                break;
            }
            ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
            if (iFindFirstVisibleItemPosition < chatActivityAdapter.messagesStartRow || iFindFirstVisibleItemPosition >= chatActivityAdapter.messagesEndRow || (message = ((MessageObject) this.messages.get(iFindFirstVisibleItemPosition - this.chatAdapter.messagesStartRow)).messageOwner) == null) {
                iFindFirstVisibleItemPosition++;
            } else {
                int i3 = message.date < i ? 1 : 0;
                if (isSecretChat()) {
                    i3 ^= 1;
                }
                i2 = i3 ^ 1;
            }
        }
        this.chatScrollHelper.setScrollDirection(i2);
        AlertDialog alertDialog = this.progressDialog;
        if (alertDialog != null) {
            alertDialog.dismiss();
        }
        updatePinnedListButton(false);
        AlertDialog alertDialog2 = new AlertDialog(getParentActivity(), 3, this.themeDelegate);
        this.progressDialog = alertDialog2;
        alertDialog2.setOnCancelListener(this.postponedScrollCancelListener);
        this.progressDialog.showDelayed(1000L);
        int i4 = this.lastLoadIndex;
        this.postponedScrollToLastMessageQueryIndex = i4;
        this.fakePostponedScroll = false;
        this.waitingForLoad.add(Integer.valueOf(i4));
        this.postponedScrollMessageId = 0;
        this.postponedScrollIsCanceled = false;
        MessagesController messagesController = getMessagesController();
        long j = this.dialog_id;
        long j2 = this.mergeDialogId;
        int i5 = this.classGuid;
        int i6 = this.chatMode;
        long j3 = this.threadMessageId;
        int i7 = this.replyMaxReadId;
        int i8 = this.lastLoadIndex;
        this.lastLoadIndex = i8 + 1;
        messagesController.loadMessages(j, j2, false, 30, 0, i, true, 0, i5, 4, 0, i6, j3, i7, i8, this.isTopic);
        this.floatingDateView.setAlpha(0.0f);
        this.floatingDateView.setTag(null);
        this.floatingTopicViewAlpha = 0.0f;
        updateFloatingTopicView();
        this.floatingTopicSeparator.setTag(null);
    }

    public void processInlineBotWebView(final TLRPC.TL_inlineBotWebView tL_inlineBotWebView) {
        final Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda443
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processInlineBotWebView$122(tL_inlineBotWebView);
            }
        };
        if (this.approved) {
            runnable.run();
        } else {
            WebAppDisclaimerAlert.show(getContext(), new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda444
                @Override // com.google.android.exoplayer2.util.Consumer
                public final void accept(Object obj) {
                    this.f$0.lambda$processInlineBotWebView$123(runnable, (Boolean) obj);
                }
            }, null, null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processInlineBotWebView$122(TLRPC.TL_inlineBotWebView tL_inlineBotWebView) {
        TLRPC.User foundContextBot = this.mentionContainer.getAdapter().getFoundContextBot();
        int i = this.currentAccount;
        TLRPC.User user = this.currentUser;
        WebViewRequestProps webViewRequestPropsM1358of = WebViewRequestProps.m1358of(i, user != null ? user.f1734id : this.currentChat.f1571id, foundContextBot.f1734id, tL_inlineBotWebView.text, tL_inlineBotWebView.url, 1, 0, getSendMonoForumPeerId(), false, null, false, null, null, 1, false, false);
        LaunchActivity launchActivity = LaunchActivity.instance;
        if (launchActivity == null || launchActivity.getBottomSheetTabs() == null || LaunchActivity.instance.getBottomSheetTabs().tryReopenTab(webViewRequestPropsM1358of) == null) {
            String restrictionReason = MessagesController.getInstance(this.currentAccount).getRestrictionReason(foundContextBot.restriction_reason);
            if (!TextUtils.isEmpty(restrictionReason)) {
                MessagesController.getInstance(this.currentAccount);
                MessagesController.showCantOpenAlert(this, restrictionReason);
                return;
            }
            BotWebViewSheet botWebViewSheet = new BotWebViewSheet(getContext(), getResourceProvider());
            botWebViewSheet.setDefaultFullsize(false);
            botWebViewSheet.setNeedsContext(true);
            botWebViewSheet.setParentActivity(getParentActivity());
            botWebViewSheet.requestWebView(this, webViewRequestPropsM1358of);
            botWebViewSheet.show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processInlineBotWebView$123(Runnable runnable, Boolean bool) {
        this.approved = true;
        runnable.run();
    }

    public void processInlineBotContextPM(TLRPC.TL_inlineBotSwitchPM tL_inlineBotSwitchPM) {
        MentionsContainerView mentionsContainerView;
        TLRPC.User contextBotUser;
        if (tL_inlineBotSwitchPM == null || (mentionsContainerView = this.mentionContainer) == null || (contextBotUser = mentionsContainerView.getAdapter().getContextBotUser()) == null) {
            return;
        }
        this.chatActivityEnterView.setFieldText("");
        long j = this.dialog_id;
        if (j == contextBotUser.f1734id) {
            this.inlineReturn = j;
            getMessagesController().sendBotStart(this.currentUser, tL_inlineBotSwitchPM.start_param);
            return;
        }
        Bundle bundle = new Bundle();
        bundle.putLong("user_id", contextBotUser.f1734id);
        bundle.putString("inline_query", tL_inlineBotSwitchPM.start_param);
        bundle.putLong("inline_return", this.dialog_id);
        if (getMessagesController().checkCanOpenChat(bundle, this)) {
            presentFragment(new ChatActivity(bundle));
        }
    }

    private void createChatAttachView() {
        if (getParentActivity() == null || getContext() == null || this.chatAttachAlert != null) {
            return;
        }
        ChatAttachAlert chatAttachAlert = new ChatAttachAlert(getParentActivity(), this, false, false, true, this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.74
            @Override // org.telegram.p023ui.Components.ChatAttachAlert, org.telegram.p023ui.ActionBar.BottomSheet
            public void dismissInternal() {
                ChatAttachAlert chatAttachAlert2 = ChatActivity.this.chatAttachAlert;
                if (chatAttachAlert2 != null && chatAttachAlert2.isShowing()) {
                    AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                }
                super.dismissInternal();
                ChatActivity.this.onEditTextDialogClose(false, true);
            }

            @Override // org.telegram.p023ui.ActionBar.BottomSheet
            public void onDismissAnimationStart() {
                ChatAttachAlert chatAttachAlert2 = ChatActivity.this.chatAttachAlert;
                if (chatAttachAlert2 != null) {
                    chatAttachAlert2.setFocusable(false);
                }
                ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                if (chatActivityEnterView != null && chatActivityEnterView.getEditField() != null) {
                    ChatActivity.this.chatActivityEnterView.getEditField().requestFocus();
                }
                ChatAttachAlert chatAttachAlert3 = ChatActivity.this.chatAttachAlert;
                if (chatAttachAlert3 != null && chatAttachAlert3.isShowing()) {
                    AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                }
                ChatActivity.this.onEditTextDialogClose(false, false);
            }
        };
        this.chatAttachAlert = chatAttachAlert;
        chatAttachAlert.setDelegate(new ChatAttachAlert.ChatAttachViewDelegate() { // from class: org.telegram.ui.ChatActivity.75
            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public /* synthetic */ void onWallpaperSelected(Object obj) {
                ChatAttachAlert.ChatAttachViewDelegate.CC.$default$onWallpaperSelected(this, obj);
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public /* synthetic */ void openAvatarsSearch() {
                ChatAttachAlert.ChatAttachViewDelegate.CC.$default$openAvatarsSearch(this);
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public /* synthetic */ boolean selectItemOnClicking() {
                return ChatAttachAlert.ChatAttachViewDelegate.CC.$default$selectItemOnClicking(this);
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public /* synthetic */ void sendAudio(ArrayList arrayList, CharSequence charSequence, boolean z, int i, int i2, long j, boolean z2, long j2) {
                ChatAttachAlert.ChatAttachViewDelegate.CC.$default$sendAudio(this, arrayList, charSequence, z, i, i2, j, z2, j2);
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public void didPressedButton(int i, boolean z, boolean z2, int i2, int i3, long j, boolean z3, boolean z4, long j2) throws Resources.NotFoundException, NumberFormatException {
                ChatActivity chatActivity;
                ChatAttachAlert chatAttachAlert2;
                HashMap<Object, Object> map;
                boolean z5;
                HashMap<Object, Object> map2;
                int i4;
                int i5;
                AccountInstance accountInstance;
                ArrayList arrayList;
                boolean z6;
                String str;
                TLRPC.Message message;
                if (ChatActivity.this.getParentActivity() == null || (chatAttachAlert2 = (chatActivity = ChatActivity.this).chatAttachAlert) == null) {
                    return;
                }
                chatActivity.editingMessageObject = chatAttachAlert2.getEditingMessageObject();
                ChatActivity chatActivity2 = ChatActivity.this;
                MessageObject messageObject = chatActivity2.editingMessageObject;
                if (messageObject != null && (message = messageObject.messageOwner) != null) {
                    message.invert_media = z3;
                }
                if (i == 8 || i == 7 || (i == 4 && !chatActivity2.chatAttachAlert.getPhotoLayout().getSelectedPhotos().isEmpty())) {
                    ChatAttachAlert chatAttachAlert3 = ChatActivity.this.chatAttachAlert;
                    if (chatAttachAlert3 != null && i != 8) {
                        chatAttachAlert3.dismiss(true);
                    }
                    HashMap<Object, Object> selectedPhotos = ChatActivity.this.chatAttachAlert.getPhotoLayout().getSelectedPhotos();
                    ArrayList<Object> selectedPhotosOrder = ChatActivity.this.chatAttachAlert.getPhotoLayout().getSelectedPhotosOrder();
                    int i6 = 0;
                    if (selectedPhotos.isEmpty()) {
                        map = selectedPhotos;
                    } else {
                        int iCeil = (int) Math.ceil(selectedPhotos.size() / 10.0f);
                        int i7 = 0;
                        while (i7 < iCeil) {
                            int i8 = i7 * 10;
                            int iMin = Math.min(10, selectedPhotos.size() - i8);
                            ArrayList arrayList2 = new ArrayList();
                            for (int i9 = 0; i9 < iMin; i9++) {
                                int i10 = i8 + i9;
                                if (i10 < selectedPhotosOrder.size()) {
                                    MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) selectedPhotos.get(selectedPhotosOrder.get(i10));
                                    SendMessagesHelper.SendingMediaInfo sendingMediaInfo = new SendMessagesHelper.SendingMediaInfo();
                                    if (!photoEntry.isVideo && (str = photoEntry.imagePath) != null) {
                                        sendingMediaInfo.path = str;
                                        if (photoEntry.highQuality) {
                                            sendingMediaInfo.originalPhotoEntry = photoEntry.clone();
                                        }
                                    } else {
                                        String str2 = photoEntry.path;
                                        if (str2 != null) {
                                            sendingMediaInfo.path = str2;
                                        }
                                    }
                                    sendingMediaInfo.thumbPath = photoEntry.thumbPath;
                                    sendingMediaInfo.coverPath = photoEntry.coverPath;
                                    sendingMediaInfo.coverPhoto = photoEntry.coverPhoto;
                                    sendingMediaInfo.isVideo = photoEntry.isVideo;
                                    CharSequence charSequence = photoEntry.caption;
                                    sendingMediaInfo.caption = charSequence != null ? charSequence.toString() : null;
                                    sendingMediaInfo.entities = photoEntry.entities;
                                    sendingMediaInfo.masks = photoEntry.stickers;
                                    sendingMediaInfo.ttl = photoEntry.ttl;
                                    sendingMediaInfo.videoEditedInfo = photoEntry.editedInfo;
                                    sendingMediaInfo.canDeleteAfter = photoEntry.canDeleteAfter;
                                    sendingMediaInfo.updateStickersOrder = SendMessagesHelper.checkUpdateStickersOrder(photoEntry.caption);
                                    sendingMediaInfo.hasMediaSpoilers = photoEntry.hasSpoiler;
                                    sendingMediaInfo.stars = photoEntry.starsAmount;
                                    sendingMediaInfo.highQuality = photoEntry.editedInfo == null && photoEntry.highQuality;
                                    arrayList2.add(sendingMediaInfo);
                                    photoEntry.reset();
                                }
                            }
                            if (i7 == 0) {
                                ChatActivity.this.fillEditingMediaWithCaption(((SendMessagesHelper.SendingMediaInfo) arrayList2.get(i6)).caption, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(i6)).entities);
                                z5 = ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(i6)).updateStickersOrder;
                            } else {
                                z5 = false;
                            }
                            MessageObject messageObject2 = ChatActivity.this.editingMessageObject;
                            if (messageObject2 != null && messageObject2.needResendWhenEdit()) {
                                ChatActivity chatActivity3 = ChatActivity.this;
                                MessageSuggestionParams messageSuggestionParamsM1170of = chatActivity3.messageSuggestionParams;
                                if (messageSuggestionParamsM1170of == null) {
                                    messageSuggestionParamsM1170of = MessageSuggestionParams.m1170of(chatActivity3.editingMessageObject.messageOwner.suggested_post);
                                }
                                MessageSuggestionParams messageSuggestionParams = messageSuggestionParamsM1170of;
                                AccountInstance accountInstance2 = ChatActivity.this.getAccountInstance();
                                long j3 = ChatActivity.this.dialog_id;
                                ChatActivity chatActivity4 = ChatActivity.this;
                                MessageObject messageObject3 = chatActivity4.editingMessageObject;
                                MessageObject threadMessage = chatActivity4.getThreadMessage();
                                ReplyQuote replyQuote = ChatActivity.this.replyingQuote;
                                if (i == 4 || z4) {
                                    accountInstance = accountInstance2;
                                    arrayList = arrayList2;
                                    z6 = true;
                                } else {
                                    accountInstance = accountInstance2;
                                    arrayList = arrayList2;
                                    z6 = false;
                                }
                                int i11 = ChatActivity.this.chatMode;
                                ChatActivity chatActivity5 = ChatActivity.this;
                                map2 = selectedPhotos;
                                i5 = i7;
                                i4 = iCeil;
                                SendMessagesHelper.prepareSendingMedia(accountInstance, arrayList, j3, messageObject3, threadMessage, null, replyQuote, z6, z, null, z2, i2, i3, i11, z5, null, chatActivity5.quickReplyShortcut, chatActivity5.getQuickReplyId(), j, z3, j2, ChatActivity.this.getSendMonoForumPeerId(), messageSuggestionParams);
                            } else {
                                map2 = selectedPhotos;
                                i4 = iCeil;
                                i5 = i7;
                                AccountInstance accountInstance3 = ChatActivity.this.getAccountInstance();
                                long j4 = ChatActivity.this.dialog_id;
                                MessageObject messageObject4 = ChatActivity.this.replyingMessageObject;
                                MessageObject threadMessage2 = ChatActivity.this.getThreadMessage();
                                ReplyQuote replyQuote2 = ChatActivity.this.replyingQuote;
                                boolean z7 = i == 4 || z4;
                                ChatActivity chatActivity6 = ChatActivity.this;
                                MessageObject messageObject5 = chatActivity6.editingMessageObject;
                                int i12 = chatActivity6.chatMode;
                                ChatActivity chatActivity7 = ChatActivity.this;
                                SendMessagesHelper.prepareSendingMedia(accountInstance3, arrayList2, j4, messageObject4, threadMessage2, null, replyQuote2, z7, z, messageObject5, z2, i2, i3, i12, z5, null, chatActivity7.quickReplyShortcut, chatActivity7.getQuickReplyId(), j, z3, j2, ChatActivity.this.getSendMonoForumPeerId(), ChatActivity.this.messageSuggestionParams);
                            }
                            i7 = i5 + 1;
                            selectedPhotos = map2;
                            iCeil = i4;
                            i6 = 0;
                        }
                        map = selectedPhotos;
                        ChatActivity.this.afterMessageSend();
                        ChatActivity.this.chatActivityEnterView.setFieldText("");
                    }
                    if (i2 != 0) {
                        if (ChatActivity.this.scheduledMessagesCount == -1) {
                            ChatActivity.this.scheduledMessagesCount = 0;
                        }
                        ChatActivity.this.scheduledMessagesCount += map.size();
                        ChatActivity.this.updateScheduledInterface(true);
                        return;
                    }
                    return;
                }
                ChatAttachAlert chatAttachAlert4 = ChatActivity.this.chatAttachAlert;
                if (chatAttachAlert4 != null) {
                    chatAttachAlert4.dismissWithButtonClick(i);
                }
                ChatActivity.this.processSelectedAttach(i);
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public void didSelectBot(TLRPC.User user) {
                String publicUsername = UserObject.getPublicUsername(user);
                if (ChatActivity.this.chatActivityEnterView == null || user == null || TextUtils.isEmpty(publicUsername)) {
                    return;
                }
                ChatActivity.this.chatActivityEnterView.setFieldText("@" + publicUsername + " ");
                ChatActivity.this.chatActivityEnterView.openKeyboard();
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public void onCameraOpened() {
                ChatActivity.this.chatActivityEnterView.closeKeyboard();
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public boolean needEnterComment() {
                return ChatActivity.this.needEnterText();
            }

            @Override // org.telegram.ui.Components.ChatAttachAlert.ChatAttachViewDelegate
            public void doOnIdle(Runnable runnable) {
                ChatActivity.this.lambda$openDiscussionMessageChat$389(runnable);
            }
        });
    }

    public boolean needEnterText() throws Resources.NotFoundException {
        boolean zIsKeyboardVisible = this.chatActivityEnterView.isKeyboardVisible();
        if (zIsKeyboardVisible) {
            this.chatActivityEnterView.showEmojiView();
            this.openKeyboardOnAttachMenuClose = true;
        }
        AndroidUtilities.setAdjustResizeToNothing(getParentActivity(), this.classGuid);
        this.fragmentView.requestLayout();
        return zIsKeyboardVisible;
    }

    public void onEditTextDialogClose(boolean z, boolean z2) {
        if (this.openKeyboardOnAttachMenuClose) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda172
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onEditTextDialogClose$124();
                }
            }, 200L);
            if (z2) {
                this.openKeyboardOnAttachMenuClose = false;
            }
        }
        if (!z || this.isInsideContainer) {
            return;
        }
        AndroidUtilities.requestAdjustResize(getParentActivity(), this.classGuid);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onEditTextDialogClose$124() {
        this.chatActivityEnterView.openKeyboard();
    }

    /* renamed from: doOnIdle, reason: merged with bridge method [inline-methods] */
    public void lambda$openDiscussionMessageChat$389(Runnable runnable) {
        NotificationCenter.getInstance(this.currentAccount).doOnIdle(runnable);
    }

    public void performHistoryClear(boolean z, boolean z2) {
        performHistoryClear(getThreadId(), z, z2);
    }

    public void performHistoryClear(final long j, final boolean z, boolean z2) {
        setClearingHistory(j, true);
        createUndoView();
        UndoView undoView = this.undoView;
        if (undoView == null) {
            return;
        }
        undoView.showWithAction(this.dialog_id, 0, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda247
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException {
                this.f$0.lambda$performHistoryClear$125(j, z);
            }
        }, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda248
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$performHistoryClear$126(j);
            }
        });
        this.chatAdapter.notifyDataSetChanged();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$performHistoryClear$125(long j, boolean z) throws Resources.NotFoundException {
        if (!this.pinnedMessageIds.isEmpty()) {
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("pin_" + this.dialog_id, ((Integer) this.pinnedMessageIds.get(0)).intValue()).apply();
            this.pinnedMessageIds.clear();
            this.pinnedMessageObjects.clear();
            this.currentPinnedMessageId = 0;
            this.loadedPinnedMessagesCount = 0;
            this.totalPinnedMessagesCount = 0;
            updatePinnedMessageView(true);
        }
        if (!ChatObject.isMonoForum(this.currentChat) || !ChatObject.canManageMonoForum(this.currentAccount, this.currentChat)) {
            getMessagesController().deleteDialog(this.dialog_id, 1, z);
        } else if (j != 0) {
            getMessagesStorage().removeTopic(-this.currentChat.f1571id, j);
            getMessagesController().deleteSavedDialog(j, getMessagesController().getInputPeer(-this.currentChat.f1571id));
            getMessagesController().getTopicsController().onTopicsDeletedServerSide(this.currentChat.f1571id, j);
        }
        setClearingHistory(j, false);
        if (j == getThreadId()) {
            clearHistory(false, null);
            this.chatAdapter.notifyDataSetChanged();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$performHistoryClear$126(long j) {
        setClearingHistory(j, false);
        if (j == getThreadId()) {
            this.chatAdapter.notifyDataSetChanged();
        }
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface, org.telegram.ui.Components.InstantCameraView.Delegate
    public long getDialogId() {
        return this.dialog_id;
    }

    public int getDialogFolderId() {
        return this.dialogFolderId;
    }

    public int getDialogFilterId() {
        return this.dialogFilterId;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public boolean openedWithLivestream() {
        return this.livestream;
    }

    public UndoView getUndoView() {
        createUndoView();
        return this.undoView;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public long getMergeDialogId() {
        return this.mergeDialogId;
    }

    public boolean hasReportSpam() {
        BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
        return (blurredFrameLayout == null || blurredFrameLayout.getTag() != null || this.reportSpamButton.getVisibility() == 8) ? false : true;
    }

    public void setChatInvite(TLRPC.ChatInvite chatInvite) {
        this.chatInvite = chatInvite;
    }

    public void setBotUser(String str) {
        if (this.inlineReturn != 0) {
            getMessagesController().sendBotStart(this.currentUser, str);
            return;
        }
        this.sentBotStart = true;
        MessagesController messagesController = getMessagesController();
        TLRPC.User user = this.currentUser;
        this.botUser = str;
        messagesController.sendBotStart(user, str);
        updateBottomOverlay();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void afterMessageSend() throws Resources.NotFoundException, NumberFormatException {
        this.messageSuggestionParams = null;
        if (this.threadMessageId == 0 || this.isTopic) {
            if (this.isTopic) {
                this.replyingMessageObject = this.threadMessageObject;
            } else {
                this.replyingMessageObject = null;
            }
            this.replyingQuote = null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setReplyingMessageObject(null, null);
            }
        }
        hideFieldPanel(false);
        if (this.chatMode == 0) {
            getMediaDataController().cleanDraft(this.dialog_id, this.threadMessageId, true);
        }
    }

    private void toggleMesagesSearchListView() {
        FrameLayout frameLayout = this.messagesSearchListContainer;
        if (frameLayout != null) {
            showMessagesSearchListView(frameLayout.getTag() == null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:37:0x00b3 A[PHI: r13
      0x00b3: PHI (r13v3 boolean) = (r13v1 boolean), (r13v5 boolean) binds: [B:29:0x00a2, B:35:0x00b0] A[DONT_GENERATE, DONT_INLINE]] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void showMessagesSearchListView(final boolean r17) {
        /*
            Method dump skipped, instructions count: 394
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.showMessagesSearchListView(boolean):void");
    }

    public boolean playFirstUnreadVoiceMessage() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.isRecordingAudioVideo()) {
            return true;
        }
        for (int size = this.messages.size() - 1; size >= 0; size--) {
            MessageObject messageObject = (MessageObject) this.messages.get(size);
            if ((messageObject.isVoice() || messageObject.isRoundVideo()) && messageObject.isContentUnread() && !messageObject.isOut()) {
                MediaController.getInstance().setVoiceMessagesPlaylist(MediaController.getInstance().playMessage(messageObject) ? createVoiceMessagesPlaylist(messageObject, true) : null, true);
                return true;
            }
        }
        if (Build.VERSION.SDK_INT < 23 || getParentActivity() == null || getParentActivity().checkSelfPermission("android.permission.RECORD_AUDIO") == 0) {
            return false;
        }
        getParentActivity().requestPermissions(new String[]{"android.permission.RECORD_AUDIO"}, 3);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openScheduledMessages() {
        openScheduledMessages(0, false);
    }

    private void openScheduledMessages(int i, boolean z) {
        INavigationLayout iNavigationLayout;
        if (AyuState.getAutomaticallyScheduled() || (iNavigationLayout = this.parentLayout) == null || iNavigationLayout.getLastFragment() != this) {
            return;
        }
        Bundle bundle = new Bundle();
        TLRPC.EncryptedChat encryptedChat = this.currentEncryptedChat;
        if (encryptedChat != null) {
            bundle.putInt("enc_id", encryptedChat.f1583id);
        } else {
            TLRPC.Chat chat = this.currentChat;
            if (chat != null) {
                bundle.putLong("chat_id", chat.f1571id);
            } else {
                bundle.putLong("user_id", this.currentUser.f1734id);
            }
        }
        bundle.putInt("chatMode", 1);
        if (z) {
            bundle.putInt("converting_toast_from", i);
            bundle.putBoolean("converting_toast", true);
        }
        ChatActivity chatActivity = new ChatActivity(bundle);
        if (this.isTopic) {
            ForumUtilities.applyTopic(chatActivity, MessagesStorage.TopicKey.m1182of(getDialogId(), getTopicId()));
        }
        chatActivity.chatActivityDelegate = new ChatActivityDelegate() { // from class: org.telegram.ui.ChatActivity.77
            @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
            public /* synthetic */ void onUnpin(boolean z2, boolean z3) {
                ChatActivityDelegate.CC.$default$onUnpin(this, z2, z3);
            }

            @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
            public void openReplyMessage(int i2) {
                ChatActivity.this.scrollToMessageId(i2, 0, true, 0, true, 0);
            }

            @Override // org.telegram.ui.ChatActivity.ChatActivityDelegate
            public void openHashtagSearch(String str) {
                ChatActivity.this.lambda$openHashtagSearch$375(str);
            }
        };
        presentFragment(chatActivity, false);
    }

    public void shareMyContact(final int i, final MessageObject messageObject) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString(C2369R.string.ShareYouPhoneNumberTitle));
        TLRPC.User user = this.currentUser;
        if (user != null) {
            if (user.bot) {
                builder.setMessage(LocaleController.getString(C2369R.string.AreYouSureShareMyContactInfoBot));
            } else {
                int i2 = C2369R.string.AreYouSureShareMyContactInfoUser;
                String str = PhoneFormat.getInstance().format("+" + getUserConfig().getCurrentUser().phone);
                TLRPC.User user2 = this.currentUser;
                builder.setMessage(AndroidUtilities.replaceTags(LocaleController.formatString("AreYouSureShareMyContactInfoUser", i2, str, ContactsController.formatName(user2.first_name, user2.last_name))));
            }
        } else {
            builder.setMessage(LocaleController.getString(C2369R.string.AreYouSureShareMyContactInfo));
        }
        builder.setPositiveButton(LocaleController.getString(C2369R.string.ShareContact), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda322
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i3) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$shareMyContact$128(i, messageObject, alertDialog, i3);
            }
        });
        builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$shareMyContact$128(int i, MessageObject messageObject, AlertDialog alertDialog, int i2) throws Resources.NotFoundException, NumberFormatException {
        if (i == 1) {
            TLRPC.TL_contacts_acceptContact tL_contacts_acceptContact = new TLRPC.TL_contacts_acceptContact();
            tL_contacts_acceptContact.f1620id = getMessagesController().getInputUser(this.currentUser);
            getConnectionsManager().sendRequest(tL_contacts_acceptContact, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda351
                @Override // org.telegram.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                    this.f$0.lambda$shareMyContact$127(tLObject, tL_error);
                }
            });
            return;
        }
        SendMessagesHelper.SendMessageParams sendMessageParamsM1203of = SendMessagesHelper.SendMessageParams.m1203of(getUserConfig().getCurrentUser(), this.dialog_id, messageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, true, 0, 0);
        sendMessageParamsM1203of.quick_reply_shortcut_id = getQuickReplyId();
        sendMessageParamsM1203of.quick_reply_shortcut = this.quickReplyShortcut;
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(sendMessageParamsM1203of);
        if (this.chatMode == 0) {
            moveScrollToLastMessage(false);
        }
        hideFieldPanel(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$shareMyContact$127(TLObject tLObject, TLRPC.TL_error tL_error) {
        if (tL_error != null) {
            return;
        }
        getMessagesController().processUpdates((TLRPC.Updates) tLObject, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showVoiceHint(boolean z, boolean z2) {
        ChatActivityEnterView chatActivityEnterView;
        if (ExteraConfig.voiceHintShowcases >= 10 || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        if ((z && this.voiceHintTextView == null) || this.chatMode != 0 || (chatActivityEnterView = this.chatActivityEnterView) == null || chatActivityEnterView.getAudioVideoButtonContainer() == null || this.chatActivityEnterView.getAudioVideoButtonContainer().getVisibility() != 0 || isInPreviewMode()) {
            return;
        }
        if (this.voiceHintTextView == null) {
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
            if (iIndexOfChild == -1) {
                return;
            }
            HintView hintView = new HintView(getParentActivity(), 9, this.themeDelegate);
            this.voiceHintTextView = hintView;
            chatActivityFragmentView.addView(hintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
        }
        if (z) {
            this.voiceHintTextView.hide();
            return;
        }
        if (this.chatActivityEnterView.hasRecordVideo()) {
            this.voiceHintTextView.setText(LocaleController.getString(z2 ? C2369R.string.HoldToVideo : C2369R.string.HoldToAudio));
        } else {
            this.voiceHintTextView.setText(LocaleController.getString(C2369R.string.HoldToAudioOnly));
        }
        ExteraConfig.voiceHintShowcases++;
        ExteraConfig.editor.putInt("voiceHintShowcases", ExteraConfig.voiceHintShowcases).apply();
        this.voiceHintTextView.showForView(this.chatActivityEnterView.getAudioVideoButtonContainer(), true);
    }

    public boolean checkSlowMode(View view) {
        CharSequence slowModeTimer = this.chatActivityEnterView.getSlowModeTimer();
        if (slowModeTimer == null) {
            return false;
        }
        showSlowModeHint(view, true, slowModeTimer);
        return true;
    }

    public boolean checkSlowModeAlert() {
        CharSequence slowModeTimer = this.chatActivityEnterView.getSlowModeTimer();
        if (slowModeTimer == null) {
            return true;
        }
        new AlertDialog.Builder(getContext()).setTitle(LocaleController.getString(C2369R.string.Slowmode)).setMessage(AndroidUtilities.replaceTags(LocaleController.formatString("SlowModeHint", C2369R.string.SlowModeHint, slowModeTimer))).setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), null).show();
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideHints(boolean z) {
        if (!z) {
            HintView hintView = this.slowModeHint;
            if (hintView != null) {
                hintView.hide();
            }
            HintView hintView2 = this.scheduledOrNoSoundHint;
            if (hintView2 != null) {
                hintView2.hide();
            }
            HintView hintView3 = this.scheduledHint;
            if (hintView3 != null) {
                hintView3.hide();
            }
        }
        HintView hintView4 = this.fwdRestrictedBottomHint;
        if (hintView4 != null) {
            hintView4.hide();
        }
        HintView hintView5 = this.fwdRestrictedTopHint;
        if (hintView5 != null) {
            hintView5.hide();
        }
        HintView hintView6 = this.noSoundHintView;
        if (hintView6 != null) {
            hintView6.hide();
        }
        HintView hintView7 = this.forwardHintView;
        if (hintView7 != null) {
            hintView7.hide();
        }
        HintView hintView8 = this.pollHintView;
        if (hintView8 != null) {
            hintView8.hide();
        }
        HintView hintView9 = this.timerHintView;
        if (hintView9 != null) {
            hintView9.hide();
        }
        ChecksHintView checksHintView = this.checksHintView;
        if (checksHintView != null) {
            checksHintView.hide();
        }
        HintView2 hintView22 = this.bottomGiftHintView;
        if (hintView22 != null) {
            hintView22.hide();
        }
        HintView2 hintView23 = this.bottomSuggestHintView;
        if (hintView23 != null) {
            hintView23.hide();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideSendButtonHints() {
        HintView hintView = this.scheduledOrNoSoundHint;
        if (hintView != null) {
            hintView.hide();
        }
        HintView hintView2 = this.scheduledHint;
        if (hintView2 != null) {
            hintView2.hide();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showSlowModeHint(View view, boolean z, CharSequence charSequence) {
        HintView hintView;
        if (getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        if (z || ((hintView = this.slowModeHint) != null && hintView.getVisibility() == 0)) {
            this.slowModeHint.setText(AndroidUtilities.replaceTags(LocaleController.formatString("SlowModeHint", C2369R.string.SlowModeHint, charSequence)));
            if (z) {
                this.slowModeHint.showForView(view, true);
            }
        }
    }

    public void showTimerHint() {
        String pluralString;
        if (getParentActivity() == null || this.fragmentView == null || this.chatInfo == null) {
            return;
        }
        if (this.timerHintView == null) {
            HintView hintView = new HintView(getParentActivity(), 7, true, this.themeDelegate);
            this.timerHintView = hintView;
            hintView.setAlpha(0.0f);
            this.timerHintView.setVisibility(4);
            this.timerHintView.setShowingDuration(4000L);
            this.contentView.addView(this.timerHintView, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
        }
        int i = this.chatInfo.ttl_period;
        if (i > 86400) {
            pluralString = LocaleController.formatPluralString("Days", i / 86400, new Object[0]);
        } else if (i >= 3600) {
            pluralString = LocaleController.formatPluralString("Hours", i / 3600, new Object[0]);
        } else if (i >= 60) {
            pluralString = LocaleController.formatPluralString("Minutes", i / 60, new Object[0]);
        } else {
            pluralString = LocaleController.formatPluralString("Seconds", i, new Object[0]);
        }
        this.timerHintView.setText(LocaleController.formatString("AutoDeleteSetInfo", C2369R.string.AutoDeleteSetInfo, pluralString));
        this.timerHintView.showForView(this.avatarContainer.getTimeItem(), true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showScheduledHint() {
        TLRPC.ChatFull chatFull;
        boolean z = UserObject.isUserSelf(this.currentUser) || ((chatFull = this.chatInfo) != null && chatFull.slowmode_next_send_date > 0 && this.chatMode == 0);
        if (this.scheduledHintShown || this.scheduledOrNoSoundHintShown || z || SharedConfig.scheduledHintShows >= 3 || this.chatActivityEnterView.isEditingMessage()) {
            return;
        }
        AndroidUtilities.cancelRunOnUIThread(this.showScheduledHintRunnable);
        AndroidUtilities.runOnUIThread(this.showScheduledHintRunnable, 4000L);
    }

    private void showScheduledOrNoSoundHint() {
        TLRPC.ChatFull chatFull;
        boolean z = UserObject.isUserSelf(this.currentUser) || ((chatFull = this.chatInfo) != null && chatFull.slowmode_next_send_date > 0 && this.chatMode == 0) || this.chatMode == 6;
        long jCurrentTimeMillis = System.currentTimeMillis() - SharedConfig.scheduledOrNoSoundHintSeenAt;
        long jCurrentTimeMillis2 = System.currentTimeMillis() - SharedConfig.scheduledHintSeenAt;
        if (z || SharedConfig.scheduledOrNoSoundHintShows >= 3 || jCurrentTimeMillis < 86400000 || jCurrentTimeMillis2 < 86400000 || this.chatActivityEnterView.isEditingMessage()) {
            return;
        }
        AndroidUtilities.cancelRunOnUIThread(this.showScheduledOrNoSoundRunnable);
        AndroidUtilities.runOnUIThread(this.showScheduledOrNoSoundRunnable, 200L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showMediaBannedHint() {
        ChatActivityFragmentView chatActivityFragmentView;
        int iIndexOfChild;
        if (getParentActivity() != null) {
            if ((this.currentChat == null && this.userInfo == null) || this.fragmentView == null) {
                return;
            }
            HintView hintView = this.mediaBanTooltip;
            if ((hintView == null || hintView.getVisibility() != 0) && (iIndexOfChild = (chatActivityFragmentView = this.contentView).indexOfChild(this.chatInputViewsContainer)) != -1) {
                try {
                    this.fragmentView.performHapticFeedback(3, 2);
                } catch (Exception e) {
                    FileLog.m1160e(e);
                }
                if (this.mediaBanTooltip == null) {
                    HintView hintView2 = new HintView(getParentActivity(), 9, this.themeDelegate);
                    this.mediaBanTooltip = hintView2;
                    hintView2.setVisibility(8);
                    chatActivityFragmentView.addView(this.mediaBanTooltip, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
                }
                TLRPC.UserFull userFull = this.userInfo;
                if (userFull != null && userFull.voice_messages_forbidden) {
                    this.mediaBanTooltip.setText(AndroidUtilities.replaceTags(LocaleController.formatString(this.chatActivityEnterView.isInVideoMode() ? C2369R.string.VideoMessagesRestrictedByPrivacy : C2369R.string.VoiceMessagesRestrictedByPrivacy, this.currentUser.first_name)));
                } else if (!ChatObject.canSendVoice(this.currentChat) && !ChatObject.canSendRoundVideo(this.currentChat)) {
                    if (checkCanRemoveRestrictionsByBoosts()) {
                        return;
                    }
                    if (this.chatActivityEnterView.isInVideoMode()) {
                        this.mediaBanTooltip.setText(ChatObject.getRestrictedErrorText(this.currentChat, 21));
                    } else {
                        this.mediaBanTooltip.setText(ChatObject.getRestrictedErrorText(this.currentChat, 20));
                    }
                } else if (ChatObject.isActionBannedByDefault(this.currentChat, 20)) {
                    this.mediaBanTooltip.setText(LocaleController.getString(C2369R.string.GlobalAttachVoiceRestricted));
                } else if (ChatObject.isActionBannedByDefault(this.currentChat, 21)) {
                    this.mediaBanTooltip.setText(LocaleController.getString(C2369R.string.GlobalAttachRoundRestricted));
                } else if (ChatObject.isActionBannedByDefault(this.currentChat, 7)) {
                    this.mediaBanTooltip.setText(LocaleController.getString(C2369R.string.GlobalAttachMediaRestricted));
                } else {
                    TLRPC.TL_chatBannedRights tL_chatBannedRights = this.currentChat.banned_rights;
                    if (tL_chatBannedRights == null) {
                        return;
                    }
                    if (AndroidUtilities.isBannedForever(tL_chatBannedRights)) {
                        this.mediaBanTooltip.setText(LocaleController.getString(C2369R.string.AttachMediaRestrictedForever));
                    } else {
                        this.mediaBanTooltip.setText(LocaleController.formatString("AttachMediaRestricted", C2369R.string.AttachMediaRestricted, LocaleController.formatDateForBan(this.currentChat.banned_rights.until_date)));
                    }
                }
                View sendButton = this.chatActivityEnterView.getSendButton();
                View audioVideoButtonContainer = this.chatActivityEnterView.getAudioVideoButtonContainer();
                if (sendButton.getAlpha() < audioVideoButtonContainer.getAlpha()) {
                    sendButton = audioVideoButtonContainer;
                }
                this.mediaBanTooltip.showForView(sendButton, true);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showNoSoundHint() {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        AnimatedFileDrawable animation;
        if (this.scrollingChatListView || SharedConfig.noSoundHintShowed || this.chatListView == null || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        HintView hintView = this.noSoundHintView;
        if (hintView == null || hintView.getTag() == null) {
            if (this.noSoundHintView == null) {
                ChatActivityFragmentView chatActivityFragmentView = this.contentView;
                int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
                if (iIndexOfChild == -1) {
                    return;
                }
                HintView hintView2 = new HintView(getParentActivity(), 0, this.themeDelegate);
                this.noSoundHintView = hintView2;
                hintView2.setShowingDuration(10000L);
                chatActivityFragmentView.addView(this.noSoundHintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                this.noSoundHintView.setAlpha(0.0f);
                this.noSoundHintView.setVisibility(4);
            }
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.isVideo() && (animation = chatMessageCell.getPhotoImage().getAnimation()) != null && animation.getCurrentProgressMs() >= 3000 && this.noSoundHintView.showForMessageCell(chatMessageCell, true)) {
                    SharedConfig.setNoSoundHintShowed(true);
                    return;
                }
            }
        }
    }

    private void checkChecksHint() {
        if (getMessagesController().pendingSuggestions.contains("NEWCOMER_TICKS")) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda177
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.showChecksHint();
                }
            }, 1000L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showChecksHint() {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        if (this.scrollingChatListView || this.chatListView == null || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        ChecksHintView checksHintView = this.checksHintView;
        if (checksHintView == null || checksHintView.getTag() == null) {
            if (this.checksHintView == null) {
                ChatActivityFragmentView chatActivityFragmentView = this.contentView;
                int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
                if (iIndexOfChild == -1) {
                    return;
                }
                ChecksHintView checksHintView2 = new ChecksHintView(getParentActivity(), this.themeDelegate);
                this.checksHintView = checksHintView2;
                chatActivityFragmentView.addView(checksHintView2, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 10.0f, 0.0f, 10.0f, 0.0f));
                this.checksHintView.setAlpha(0.0f);
                this.checksHintView.setVisibility(4);
            }
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.isOutOwner() && messageObject.isSent() && this.checksHintView.showForMessageCell(chatMessageCell, true)) {
                    getMessagesController().removeSuggestion(0L, "NEWCOMER_TICKS");
                    return;
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showForwardHint(ChatMessageCell chatMessageCell) {
        if (this.scrollingChatListView || this.chatListView == null || getParentActivity() == null || this.fragmentView == null) {
            return;
        }
        if (this.forwardHintView == null) {
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
            if (iIndexOfChild == -1) {
                return;
            }
            HintView hintView = new HintView(getParentActivity(), 1, this.themeDelegate);
            this.forwardHintView = hintView;
            chatActivityFragmentView.addView(hintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
            this.forwardHintView.setAlpha(0.0f);
            this.forwardHintView.setVisibility(4);
        }
        this.forwardHintView.showForMessageCell(chatMessageCell, true);
    }

    private void showTextSelectionHint(MessageObject messageObject) {
        CharSequence charSequence;
        if (getParentActivity() == null || getMessagesController().isChatNoForwards(messageObject.getChatId())) {
            return;
        }
        TLRPC.Message message = messageObject.messageOwner;
        if (message == null || !message.noforwards) {
            ArrayList<MessageObject.TextLayoutBlock> arrayList = messageObject.textLayoutBlocks;
            boolean z = false;
            if (arrayList != null && !arrayList.isEmpty()) {
                charSequence = messageObject.messageText;
                if (messageObject.textLayoutBlocks.size() > 1) {
                    z = true;
                }
            } else {
                charSequence = messageObject.caption;
            }
            if (!z && charSequence != null) {
                z = true;
            }
            if (!z || SharedConfig.textSelectionHintShows > 2 || this.textSelectionHintWasShowed || this.lastTouchY > this.chatActivityEnterView.getTop() - AndroidUtilities.m1146dp(60.0f)) {
                return;
            }
            this.textSelectionHintWasShowed = true;
            SharedConfig.increaseTextSelectionHintShowed();
            if (this.textSelectionHint == null) {
                TextSelectionHint textSelectionHint = new TextSelectionHint(getParentActivity(), this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.78
                    @Override // org.telegram.p023ui.Components.TextSelectionHint, android.view.View
                    protected void onMeasure(int i, int i2) {
                        super.onMeasure(i, i2);
                        updatePosition();
                    }

                    @Override // org.telegram.p023ui.Components.TextSelectionHint, android.view.View
                    protected void onDraw(Canvas canvas) {
                        super.onDraw(canvas);
                        updatePosition();
                    }

                    public void updatePosition() {
                        int i = -(getMeasuredHeight() + AndroidUtilities.m1146dp(16.0f));
                        setTranslationY((ChatActivity.this.chatActivityEnterView.getTop() - ChatActivity.this.contentView.getMeasuredHeight()) - ((r1 + i) * (1.0f - getPrepareProgress())));
                    }
                };
                this.textSelectionHint = textSelectionHint;
                this.contentView.addView(textSelectionHint, LayoutHelper.createFrame(-2, 56.0f, 83, 8.0f, 0.0f, 8.0f, 8.0f));
            }
            this.textSelectionHint.show();
        }
    }

    private boolean showGifHint() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.getVisibility() == 0) {
            SharedPreferences globalMainSettings = MessagesController.getGlobalMainSettings();
            if (globalMainSettings.getBoolean("gifhint", false)) {
                return false;
            }
            globalMainSettings.edit().putBoolean("gifhint", true).apply();
            if (getParentActivity() != null && this.fragmentView != null && this.gifHintTextView == null) {
                if (!this.allowContextBotPanelSecond) {
                    ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
                    if (chatActivityEnterView2 != null) {
                        chatActivityEnterView2.setOpenGifsTabFirst();
                    }
                    return false;
                }
                ChatActivityFragmentView chatActivityFragmentView = this.contentView;
                int iIndexOfChild = chatActivityFragmentView.indexOfChild(this.chatInputViewsContainer);
                if (iIndexOfChild == -1) {
                    return false;
                }
                this.chatActivityEnterView.setOpenGifsTabFirst();
                View view = new View(getParentActivity());
                this.emojiButtonRed = view;
                view.setBackgroundResource(C2369R.drawable.redcircle);
                int i = iIndexOfChild + 1;
                chatActivityFragmentView.addView(this.emojiButtonRed, i, LayoutHelper.createFrame(10, 10.0f, 83, 37.0f, 0.0f, 0.0f, 27.0f));
                HintView hintView = new HintView(getParentActivity(), 9, this.themeDelegate);
                this.gifHintTextView = hintView;
                hintView.setText(LocaleController.getString(C2369R.string.TapHereGifs));
                chatActivityFragmentView.addView(this.gifHintTextView, i, LayoutHelper.createFrame(-2, -2.0f, 83, 5.0f, 0.0f, 5.0f, 3.0f));
                AnimatorSet animatorSet = new AnimatorSet();
                HintView hintView2 = this.gifHintTextView;
                Property property = View.ALPHA;
                animatorSet.playTogether(ObjectAnimator.ofFloat(hintView2, (Property<HintView, Float>) property, 0.0f, 1.0f), ObjectAnimator.ofFloat(this.emojiButtonRed, (Property<View, Float>) property, 0.0f, 1.0f));
                animatorSet.addListener(new C313080());
                animatorSet.setDuration(300L);
                animatorSet.start();
                View emojiButton = this.chatActivityEnterView.getEmojiButton();
                if (emojiButton != null) {
                    this.gifHintTextView.showForView(emojiButton, true);
                }
                return true;
            }
        }
        return false;
    }

    /* renamed from: org.telegram.ui.ChatActivity$80 */
    /* loaded from: classes5.dex */
    class C313080 extends AnimatorListenerAdapter {
        C313080() {
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationEnd(Animator animator) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$80$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAnimationEnd$0();
                }
            }, 2000L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onAnimationEnd$0() {
            if (ChatActivity.this.gifHintTextView == null) {
                return;
            }
            AnimatorSet animatorSet = new AnimatorSet();
            animatorSet.playTogether(ObjectAnimator.ofFloat(ChatActivity.this.gifHintTextView, (Property<HintView, Float>) View.ALPHA, 0.0f));
            animatorSet.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.80.1
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    if (ChatActivity.this.gifHintTextView != null) {
                        ChatActivity.this.gifHintTextView.setVisibility(8);
                    }
                }
            });
            animatorSet.setDuration(300L);
            animatorSet.start();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openAttachMenu() {
        if (getParentActivity() != null) {
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView == null || TextUtils.isEmpty(chatActivityEnterView.getSlowModeTimer())) {
                createChatAttachView();
                this.chatAttachAlert.getPhotoLayout().loadGalleryPhotos();
                int i = Build.VERSION.SDK_INT;
                if (i == 21 || i == 22) {
                    this.chatActivityEnterView.closeKeyboard();
                }
                TLRPC.Chat chat = this.currentChat;
                if (chat != null && this.messageSuggestionParams != null) {
                    this.chatAttachAlert.setMaxSelectedPhotos(1, true);
                } else if (chat != null && !ChatObject.hasAdminRights(chat) && this.currentChat.slowmode_enabled) {
                    this.chatAttachAlert.setMaxSelectedPhotos(10, true);
                } else {
                    this.chatAttachAlert.setMaxSelectedPhotos(-1, true);
                }
                this.chatAttachAlert.enableDefaultMode();
                this.chatAttachAlert.init();
                this.chatAttachAlert.getCommentView().setText(this.chatActivityEnterView.getFieldText());
                ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
                chatAttachAlert.parentThemeDelegate = this.themeDelegate;
                showDialog(chatAttachAlert);
            }
        }
    }

    public void openAttachMenuForCreatingSticker() {
        ContentPreviewViewer.getInstance().setStickerSetForCustomSticker(null);
        if (getParentActivity() == null) {
            return;
        }
        createChatAttachView();
        this.chatAttachAlert.getPhotoLayout().loadGalleryPhotos();
        int i = Build.VERSION.SDK_INT;
        if (i == 21 || i == 22) {
            this.chatActivityEnterView.closeKeyboard();
        }
        this.chatAttachAlert.setMaxSelectedPhotos(1, false);
        this.chatAttachAlert.setOpenWithFrontFaceCamera(true);
        this.chatAttachAlert.enableStickerMode(null);
        this.chatAttachAlert.init();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        chatAttachAlert.parentThemeDelegate = this.themeDelegate;
        if (this.visibleDialog != null) {
            chatAttachAlert.show();
        } else {
            showDialog(chatAttachAlert);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showFloatingDateView(boolean z) {
        ChatActionCell chatActionCell = this.floatingDateView;
        if (chatActionCell == null || this.chatMode == 5) {
            return;
        }
        if (chatActionCell.getTag() == null) {
            AnimatorSet animatorSet = this.floatingDateAnimation;
            if (animatorSet != null) {
                animatorSet.cancel();
            }
            this.floatingDateView.setTag(1);
            AnimatorSet animatorSet2 = new AnimatorSet();
            this.floatingDateAnimation = animatorSet2;
            animatorSet2.setDuration(150L);
            this.floatingDateAnimation.playTogether(ObjectAnimator.ofFloat(this.floatingDateView, (Property<ChatActionCell, Float>) View.ALPHA, 1.0f));
            this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.81
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    if (animator.equals(ChatActivity.this.floatingDateAnimation)) {
                        ChatActivity.this.floatingDateAnimation = null;
                    }
                }
            });
            this.floatingDateAnimation.start();
        }
        if (z) {
            return;
        }
        invalidateMessagesVisiblePart();
        this.hideDateDelay = MediaDataController.MAX_STYLE_RUNS_COUNT;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideFloatingDateView(boolean z) {
        if (this.floatingDateView.getTag() == null || this.currentFloatingDateOnScreen) {
            return;
        }
        if (!this.scrollingFloatingDate || this.currentFloatingTopIsNotMessage) {
            this.floatingDateView.setTag(null);
            if (z) {
                AnimatorSet animatorSet = new AnimatorSet();
                this.floatingDateAnimation = animatorSet;
                animatorSet.setDuration(150L);
                this.floatingDateAnimation.playTogether(ObjectAnimator.ofFloat(this.floatingDateView, (Property<ChatActionCell, Float>) View.ALPHA, 0.0f));
                this.floatingDateAnimation.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.82
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animator) {
                        if (animator.equals(ChatActivity.this.floatingDateAnimation)) {
                            ChatActivity.this.floatingDateAnimation = null;
                        }
                    }
                });
                this.floatingDateAnimation.setStartDelay(this.hideDateDelay);
                this.floatingDateAnimation.start();
            } else {
                AnimatorSet animatorSet2 = this.floatingDateAnimation;
                if (animatorSet2 != null) {
                    animatorSet2.cancel();
                    this.floatingDateAnimation = null;
                }
                this.floatingDateView.setAlpha(0.0f);
            }
            this.hideDateDelay = 500;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showFloatingTopicView(boolean z) {
        TopicSeparator.Cell cell = this.floatingTopicSeparator;
        if (cell == null || this.chatMode == 5) {
            return;
        }
        if (cell.getTag() == null) {
            ValueAnimator valueAnimator = this.floatingTopicAnimation;
            if (valueAnimator != null) {
                valueAnimator.cancel();
            }
            this.floatingTopicSeparator.setTag(1);
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.floatingTopicViewAlpha, 1.0f);
            this.floatingTopicAnimation = valueAnimatorOfFloat;
            valueAnimatorOfFloat.setDuration(150L);
            this.floatingTopicAnimation.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda200
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                    this.f$0.lambda$showFloatingTopicView$129(valueAnimator2);
                }
            });
            this.floatingTopicAnimation.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.83
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    if (animator.equals(ChatActivity.this.floatingTopicAnimation)) {
                        ChatActivity.this.floatingTopicViewAlpha = 1.0f;
                        ChatActivity.this.updateFloatingTopicView();
                        ChatActivity.this.floatingTopicAnimation = null;
                    }
                }
            });
            this.floatingTopicAnimation.start();
        }
        if (z) {
            return;
        }
        invalidateMessagesVisiblePart();
        this.hideDateDelay = MediaDataController.MAX_STYLE_RUNS_COUNT;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showFloatingTopicView$129(ValueAnimator valueAnimator) {
        this.floatingTopicViewAlpha = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        updateFloatingTopicView();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateFloatingTopicView() {
        TopicSeparator.Cell cell = this.floatingTopicSeparator;
        if (cell == null) {
            return;
        }
        cell.setTranslationX(getSideMenuWidth() / 2.0f);
        this.floatingTopicSeparator.setTranslationY((((this.chatListView.getTranslationY() + this.chatListViewPaddingTop) + this.floatingTopicViewOffset) - AndroidUtilities.m1146dp(4.0f)) + AndroidUtilities.m1146dp(28.0f));
        float fClamp = Utilities.clamp(AndroidUtilities.ilerp(this.floatingTopicViewOffset, -this.floatingTopicSeparator.getHeight(), 0.0f), 1.0f, 0.0f);
        this.floatingTopicSeparator.setAlpha(this.floatingTopicViewAlpha * fClamp);
        float fLerp = AndroidUtilities.lerp(0.5f, 1.0f, fClamp);
        this.floatingTopicSeparator.setScaleX(fLerp);
        this.floatingTopicSeparator.setScaleY(fLerp);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideFloatingTopicView(boolean z) {
        if (this.floatingTopicSeparator.getTag() == null || this.currentFloatingTopicOnScreen) {
            return;
        }
        if (!this.scrollingFloatingTopic || this.currentFloatingTopIsNotMessage) {
            this.floatingTopicSeparator.setTag(null);
            if (z) {
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.floatingTopicViewAlpha, 0.0f);
                this.floatingTopicAnimation = valueAnimatorOfFloat;
                valueAnimatorOfFloat.setDuration(150L);
                this.floatingTopicAnimation.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda174
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$hideFloatingTopicView$130(valueAnimator);
                    }
                });
                this.floatingTopicAnimation.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.84
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animator) {
                        if (animator.equals(ChatActivity.this.floatingTopicAnimation)) {
                            ChatActivity.this.floatingTopicViewAlpha = 0.0f;
                            ChatActivity.this.updateFloatingTopicView();
                            ChatActivity.this.floatingTopicAnimation = null;
                        }
                    }
                });
                this.floatingTopicAnimation.setStartDelay(this.hideDateDelay);
                this.floatingTopicAnimation.start();
            } else {
                ValueAnimator valueAnimator = this.floatingTopicAnimation;
                if (valueAnimator != null) {
                    valueAnimator.cancel();
                    this.floatingTopicAnimation = null;
                }
                this.floatingTopicViewAlpha = 0.0f;
                updateFloatingTopicView();
            }
            this.hideDateDelay = 500;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hideFloatingTopicView$130(ValueAnimator valueAnimator) {
        this.floatingTopicViewAlpha = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        updateFloatingTopicView();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onRemoveFromParent() {
        this.removingFromParent = true;
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (playingMessageObject != null && playingMessageObject.isVideo()) {
            MediaController.getInstance().cleanupPlayer(true, true);
        } else {
            MediaController.getInstance().setTextureView(this.videoTextureView, null, null, false);
        }
        StarReactionsOverlay starReactionsOverlay = this.starReactionsOverlay;
        if (starReactionsOverlay != null) {
            starReactionsOverlay.setMessageCell(null);
            AndroidUtilities.removeFromParent(this.starReactionsOverlay);
            this.starReactionsOverlay = null;
        }
        super.onRemoveFromParent();
    }

    protected void setIgnoreAttachOnPause(boolean z) {
        this.ignoreAttachOnPause = z;
    }

    public ChatActivityEnterView getChatActivityEnterViewForStickers() {
        if (this.bottomChannelButtonsLayout.getVisibility() == 0) {
            return null;
        }
        TLRPC.Chat chat = this.currentChat;
        if (chat == null || ChatObject.canSendStickers(chat)) {
            return this.chatActivityEnterView;
        }
        return null;
    }

    public ChatActivityEnterView getChatActivityEnterView() {
        return this.chatActivityEnterView;
    }

    public boolean isKeyboardVisible() {
        return this.contentView.getKeyboardHeight() > AndroidUtilities.m1146dp(20.0f);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkScrollForLoad(boolean z) {
        if (this.chatLayoutManager == null || this.paused || this.chatAdapter.isFrozen || this.waitingForGetDifference) {
            return;
        }
        int i = -1;
        final int i2 = -1;
        final int i3 = 0;
        for (int i4 = 0; i4 < this.chatListView.getChildCount(); i4++) {
            ChatListRecyclerView chatListRecyclerView = this.chatListView;
            int childAdapterPosition = chatListRecyclerView.getChildAdapterPosition(chatListRecyclerView.getChildAt(i4));
            if (childAdapterPosition != -1) {
                if (i2 == -1 || childAdapterPosition < i2) {
                    i2 = childAdapterPosition;
                }
                if (i == -1 || childAdapterPosition > i) {
                    i = childAdapterPosition;
                }
                i3++;
            }
        }
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter.isFiltered) {
            if (chatActivityAdapter.loadingUpRow < 0 || i2 < 0 || this.chatAdapter.loadingUpRow < i2 || this.chatAdapter.loadingUpRow > i) {
                return;
            }
            getMediaDataController().loadMoreSearchMessages(false);
            return;
        }
        final int itemCount = chatActivityAdapter.getItemCount();
        final int i5 = z ? 25 : 5;
        if (this.chatMode == 7) {
            if ((itemCount - i2) - i3 > i5 || this.loading || this.endReached[0]) {
                return;
            }
            this.loading = true;
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            HashtagSearchController hashtagSearchController = HashtagSearchController.getInstance(this.currentAccount);
            String str = this.searchingHashtag;
            int i6 = this.classGuid;
            int i7 = this.searchType;
            int i8 = this.lastLoadIndex;
            this.lastLoadIndex = i8 + 1;
            hashtagSearchController.searchHashtag(str, i6, i7, i8);
            return;
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda168
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkScrollForLoad$131(itemCount, i2, i3, i5);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkScrollForLoad$131(int i, int i2, int i3, int i4) {
        char c;
        long j;
        if ((i - i2) - i3 > i4 || this.loading) {
            c = 0;
            j = 0;
        } else {
            boolean[] zArr = this.endReached;
            if (zArr[0]) {
                c = 0;
                j = 0;
                if (this.mergeDialogId != 0 && !zArr[1]) {
                    this.loading = true;
                    this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                    MessagesController messagesController = getMessagesController();
                    long j2 = this.mergeDialogId;
                    int i5 = this.maxMessageId[1];
                    boolean z = !this.cacheEndReached[1];
                    int i6 = this.minDate[1];
                    int i7 = this.classGuid;
                    int i8 = this.chatMode;
                    long j3 = this.threadMessageId;
                    int i9 = this.replyMaxReadId;
                    int i10 = this.lastLoadIndex;
                    this.lastLoadIndex = i10 + 1;
                    messagesController.loadMessages(j2, 0L, false, 50, i5, 0, z, i6, i7, 0, 0, i8, j3, i9, i10, this.isTopic);
                }
            } else {
                this.loading = true;
                this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
                if (this.messagesByDays.size() != 0) {
                    MessagesController messagesController2 = getMessagesController();
                    long j4 = this.dialog_id;
                    long j5 = this.mergeDialogId;
                    int i11 = this.maxMessageId[0];
                    boolean z2 = !this.cacheEndReached[0];
                    int i12 = this.minDate[0];
                    int i13 = this.classGuid;
                    int i14 = this.chatMode;
                    j = 0;
                    long j6 = this.threadMessageId;
                    int i15 = this.replyMaxReadId;
                    int i16 = this.lastLoadIndex;
                    c = 0;
                    this.lastLoadIndex = i16 + 1;
                    messagesController2.loadMessages(j4, j5, false, 50, i11, 0, z2, i12, i13, 0, 0, i14, j6, i15, i16, this.isTopic);
                } else {
                    c = 0;
                    j = 0;
                    MessagesController messagesController3 = getMessagesController();
                    long j7 = this.dialog_id;
                    long j8 = this.mergeDialogId;
                    boolean z3 = !this.cacheEndReached[0];
                    int i17 = this.minDate[0];
                    int i18 = this.classGuid;
                    int i19 = this.chatMode;
                    long j9 = this.threadMessageId;
                    int i20 = this.replyMaxReadId;
                    int i21 = this.lastLoadIndex;
                    this.lastLoadIndex = i21 + 1;
                    messagesController3.loadMessages(j7, j8, false, 50, 0, 0, z3, i17, i18, 0, 0, i19, j9, i20, i21, this.isTopic);
                }
            }
        }
        if (i3 <= 0 || this.loadingForward || i2 > 10) {
            return;
        }
        if (this.mergeDialogId != j && !this.forwardEndReached[1]) {
            this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
            MessagesController messagesController4 = getMessagesController();
            long j10 = this.mergeDialogId;
            int i22 = this.minMessageId[1];
            int i23 = this.maxDate[1];
            int i24 = this.classGuid;
            int i25 = this.chatMode;
            long j11 = this.threadMessageId;
            int i26 = this.replyMaxReadId;
            int i27 = this.lastLoadIndex;
            this.lastLoadIndex = i27 + 1;
            messagesController4.loadMessages(j10, 0L, false, 50, i22, 0, true, i23, i24, 1, 0, i25, j11, i26, i27, this.isTopic);
            this.loadingForward = true;
            return;
        }
        if (this.forwardEndReached[c]) {
            return;
        }
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        MessagesController messagesController5 = getMessagesController();
        long j12 = this.dialog_id;
        long j13 = this.mergeDialogId;
        int i28 = this.minMessageId[c];
        int i29 = this.maxDate[c];
        int i30 = this.classGuid;
        int i31 = this.chatMode;
        long j14 = this.threadMessageId;
        int i32 = this.replyMaxReadId;
        int i33 = this.lastLoadIndex;
        this.lastLoadIndex = i33 + 1;
        messagesController5.loadMessages(j12, j13, false, 50, i28, 0, true, i29, i30, 1, 0, i31, j14, i32, i33, this.isTopic);
        this.loadingForward = true;
    }

    public void processSelectedAttach(int i) {
        TLRPC.TL_chatBannedRights tL_chatBannedRights;
        if (i == 0) {
            int i2 = Build.VERSION.SDK_INT;
            if (i2 >= 23 && getParentActivity().checkSelfPermission("android.permission.CAMERA") != 0) {
                getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 19);
                return;
            }
            try {
                Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                File fileGeneratePicturePath = AndroidUtilities.generatePicturePath();
                if (fileGeneratePicturePath != null) {
                    if (i2 >= 24) {
                        intent.putExtra("output", FileProvider.getUriForFile(getParentActivity(), ApplicationLoader.getApplicationId() + ".provider", fileGeneratePicturePath));
                        intent.addFlags(2);
                        intent.addFlags(1);
                    } else {
                        intent.putExtra("output", Uri.fromFile(fileGeneratePicturePath));
                    }
                    this.currentPicturePath = fileGeneratePicturePath.getAbsolutePath();
                }
                startActivityForResult(intent, 0);
                return;
            } catch (Exception e) {
                FileLog.m1160e(e);
                return;
            }
        }
        if (i == 1) {
            if (!SystemUtils.isImagesAndVideoPermissionGranted() && Build.VERSION.SDK_INT >= 23) {
                SystemUtils.requestImagesAndVideoPermission(getParentActivity());
            }
            PhotoAlbumPickerActivity photoAlbumPickerActivity = new PhotoAlbumPickerActivity(PhotoAlbumPickerActivity.SELECT_TYPE_ALL, (ChatObject.isChannel(this.currentChat) && (tL_chatBannedRights = this.currentChat.banned_rights) != null && tL_chatBannedRights.send_gifs) ? false : true, true, this);
            TLRPC.Chat chat = this.currentChat;
            if (chat != null && !ChatObject.hasAdminRights(chat) && this.currentChat.slowmode_enabled) {
                photoAlbumPickerActivity.setMaxSelectedPhotos(10, true);
            } else {
                MessageObject messageObject = this.editingMessageObject;
                photoAlbumPickerActivity.setMaxSelectedPhotos(messageObject != null ? 1 : 0, messageObject == null);
            }
            photoAlbumPickerActivity.setDelegate(new PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate() { // from class: org.telegram.ui.ChatActivity.85
                @Override // org.telegram.ui.PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate
                public void didSelectPhotos(ArrayList arrayList, boolean z, int i3) {
                }

                @Override // org.telegram.ui.PhotoAlbumPickerActivity.PhotoAlbumPickerActivityDelegate
                public void startPhotoSelectActivity() {
                    try {
                        Intent intent2 = new Intent();
                        intent2.setType("video/*");
                        intent2.setAction("android.intent.action.GET_CONTENT");
                        intent2.putExtra("android.intent.extra.sizeLimit", FileLoader.DEFAULT_MAX_FILE_SIZE);
                        Intent intent3 = new Intent("android.intent.action.PICK");
                        intent3.setType("image/*");
                        Intent intentCreateChooser = Intent.createChooser(intent3, null);
                        intentCreateChooser.putExtra("android.intent.extra.INITIAL_INTENTS", new Intent[]{intent2});
                        ChatActivity.this.startActivityForResult(intentCreateChooser, 1);
                    } catch (Exception e2) {
                        FileLog.m1160e(e2);
                    }
                }
            });
            presentFragment(photoAlbumPickerActivity);
            return;
        }
        if (i == 2) {
            int i3 = Build.VERSION.SDK_INT;
            if (i3 >= 23 && getParentActivity().checkSelfPermission("android.permission.CAMERA") != 0) {
                try {
                    getParentActivity().requestPermissions(new String[]{"android.permission.CAMERA"}, 20);
                    return;
                } catch (Throwable unused) {
                    return;
                }
            }
            try {
                Intent intent2 = new Intent("android.media.action.VIDEO_CAPTURE");
                File fileGenerateVideoPath = AndroidUtilities.generateVideoPath();
                if (fileGenerateVideoPath != null) {
                    if (i3 >= 24) {
                        intent2.putExtra("output", FileProvider.getUriForFile(getParentActivity(), ApplicationLoader.getApplicationId() + ".provider", fileGenerateVideoPath));
                        intent2.addFlags(2);
                        intent2.addFlags(1);
                    } else {
                        intent2.putExtra("output", Uri.fromFile(fileGenerateVideoPath));
                    }
                    intent2.putExtra("android.intent.extra.sizeLimit", FileLoader.DEFAULT_MAX_FILE_SIZE);
                    this.currentPicturePath = fileGenerateVideoPath.getAbsolutePath();
                }
                startActivityForResult(intent2, 2);
            } catch (Exception e2) {
                FileLog.m1160e(e2);
            }
        }
    }

    public boolean allowSendGifs() {
        TLRPC.TL_chatBannedRights tL_chatBannedRights;
        return (ChatObject.isChannel(this.currentChat) && (tL_chatBannedRights = this.currentChat.banned_rights) != null && tL_chatBannedRights.send_gifs) ? false : true;
    }

    public void openPollCreate(Boolean bool) {
        PollCreateActivity pollCreateActivity = new PollCreateActivity(this, false, bool);
        pollCreateActivity.setDelegate(new PollCreateActivity.PollCreateActivityDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda333
            @Override // org.telegram.ui.PollCreateActivity.PollCreateActivityDelegate
            public final void sendPoll(TLRPC.MessageMedia messageMedia, HashMap map, boolean z, int i) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$openPollCreate$132(messageMedia, map, z, i);
            }
        });
        presentFragment(pollCreateActivity);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openPollCreate$132(TLRPC.MessageMedia messageMedia, HashMap map, boolean z, int i) throws Resources.NotFoundException, NumberFormatException {
        if (checkSlowModeAlert()) {
            SendMessagesHelper.SendMessageParams sendMessageParamsM1195of = SendMessagesHelper.SendMessageParams.m1195of(messageMedia, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) map, z, i, 0);
            sendMessageParamsM1195of.quick_reply_shortcut = this.quickReplyShortcut;
            sendMessageParamsM1195of.quick_reply_shortcut_id = getQuickReplyId();
            getSendMessagesHelper().sendMessage(sendMessageParamsM1195of);
            afterMessageSend();
        }
    }

    @Override // org.telegram.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void didSelectFiles(ArrayList arrayList, String str, ArrayList arrayList2, ArrayList arrayList3, boolean z, int i, int i2, long j, boolean z2, long j2) throws Resources.NotFoundException, NumberFormatException {
        long j3;
        String str2 = null;
        fillEditingMediaWithCaption(str, null);
        if (checkSlowModeAlert()) {
            if (arrayList3.isEmpty() || TextUtils.isEmpty(str)) {
                j3 = j2;
                str2 = str;
            } else {
                SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(str, this.dialog_id, null, null, null, true, arrayList2, null, null, true, 0, 0, null, false);
                sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
                sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
                sendMessageParamsM1191of.invert_media = z2;
                j3 = j2;
                sendMessageParamsM1191of.payStars = j3;
                sendMessageParamsM1191of.monoForumPeer = getSendMonoForumPeerId();
                sendMessageParamsM1191of.suggestionParams = this.messageSuggestionParams;
                SendMessagesHelper.getInstance(this.currentAccount).sendMessage(sendMessageParamsM1191of);
            }
            getSendMessagesHelper().sendMessage(arrayList3, this.dialog_id, false, false, true, 0, null, -1, j3, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
            SendMessagesHelper.prepareSendingDocuments(getAccountInstance(), arrayList, arrayList, null, str2, arrayList2, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, this.editingMessageObject, z, i, i2, null, this.quickReplyShortcut, getQuickReplyId(), j, z2, j2, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
            afterMessageSend();
        }
    }

    @Override // org.telegram.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void didSelectPhotos(ArrayList arrayList, boolean z, int i, int i2, long j) throws Resources.NotFoundException, NumberFormatException {
        fillEditingMediaWithCaption(((SendMessagesHelper.SendingMediaInfo) arrayList.get(0)).caption, ((SendMessagesHelper.SendingMediaInfo) arrayList.get(0)).entities);
        SendMessagesHelper.prepareSendingMedia(getAccountInstance(), arrayList, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, true, false, this.editingMessageObject, z, i, i2, this.chatMode, ((SendMessagesHelper.SendingMediaInfo) arrayList.get(0)).updateStickersOrder, null, this.quickReplyShortcut, getQuickReplyId(), 0L, false, j, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        afterMessageSend();
        if (i != 0) {
            if (this.scheduledMessagesCount == -1) {
                this.scheduledMessagesCount = 0;
            }
            this.scheduledMessagesCount += arrayList.size();
            updateScheduledInterface(true);
        }
    }

    public void didSelectSearchPhotos(ArrayList arrayList, boolean z, int i) throws Resources.NotFoundException, NumberFormatException {
        int i2;
        ArrayList arrayList2 = arrayList;
        if (!arrayList2.isEmpty() && checkSlowModeAlert()) {
            int i3 = 0;
            while (true) {
                if (i3 < arrayList2.size()) {
                    SendMessagesHelper.SendingMediaInfo sendingMediaInfo = (SendMessagesHelper.SendingMediaInfo) arrayList2.get(i3);
                    if (sendingMediaInfo.inlineResult == null && sendingMediaInfo.videoEditedInfo == null) {
                        break;
                    } else {
                        i3++;
                    }
                } else if (!TextUtils.isEmpty(((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).caption)) {
                    SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).caption, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).entities, null, null, z, i, 0, null, false);
                    sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
                    sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
                    SendMessagesHelper.getInstance(this.currentAccount).sendMessage(sendMessageParamsM1191of);
                }
            }
            for (int i4 = 0; i4 < arrayList2.size(); i4 = i2 + 1) {
                SendMessagesHelper.SendingMediaInfo sendingMediaInfo2 = (SendMessagesHelper.SendingMediaInfo) arrayList2.get(i4);
                if (sendingMediaInfo2.inlineResult == null || sendingMediaInfo2.videoEditedInfo != null) {
                    i2 = i4;
                } else {
                    int i5 = i4;
                    SendMessagesHelper.prepareSendingBotContextResult(this, getAccountInstance(), sendingMediaInfo2.inlineResult, sendingMediaInfo2.params, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, z, i, 0, this.quickReplyShortcut, getQuickReplyId(), 0L);
                    arrayList2 = arrayList;
                    arrayList2.remove(i5);
                    i2 = i5 - 1;
                }
            }
            if (arrayList2.isEmpty()) {
                return;
            }
            fillEditingMediaWithCaption(((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).caption, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).entities);
            SendMessagesHelper.prepareSendingMedia(getAccountInstance(), arrayList2, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, false, true, this.editingMessageObject, z, i, 0, this.chatMode, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).updateStickersOrder, null, this.quickReplyShortcut, getQuickReplyId(), 0L, false, 0L, getSendMonoForumPeerId(), this.messageSuggestionParams);
            afterMessageSend();
            if (i != 0) {
                if (this.scheduledMessagesCount == -1) {
                    this.scheduledMessagesCount = 0;
                }
                this.scheduledMessagesCount += arrayList.size();
                updateScheduledInterface(true);
            }
        }
    }

    @Override // org.telegram.ui.Components.ChatAttachAlertDocumentLayout.DocumentSelectActivityDelegate
    public void startDocumentSelectActivity() {
        try {
            Intent intent = new Intent("android.intent.action.GET_CONTENT");
            intent.putExtra("android.intent.extra.ALLOW_MULTIPLE", true);
            intent.setType("*/*");
            startActivityForResult(intent, 21);
        } catch (Exception e) {
            FileLog.m1160e(e);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean dismissDialogOnPause(Dialog dialog) {
        return (dialog == this.chatAttachAlert || dialog == this.chatThemeBottomSheet || (dialog instanceof BotWebViewSheet) || !super.dismissDialogOnPause(dialog)) ? false : true;
    }

    private void cancelSearchLinks() {
        if (this.linkSearchRequestId != 0) {
            getConnectionsManager().cancelRequest(this.linkSearchRequestId, true);
        }
    }

    private void editResetMediaManual() {
        TLRPC.Message message;
        TLRPC.MessageMedia messageMedia;
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject == null || (message = messageObject.messageOwner) == null || (messageMedia = message.media) == null) {
            return;
        }
        messageMedia.manual = false;
    }

    public void checkEditLinkRemoved(CharSequence charSequence) throws Resources.NotFoundException {
        TLRPC.WebPage webPage;
        TLRPC.Message message;
        TLRPC.MessageMedia messageMedia;
        TLRPC.WebPage webPage2;
        MessageObject messageObject = this.editingMessageObject;
        boolean z = (messageObject == null || (message = messageObject.messageOwner) == null || (messageMedia = message.media) == null || (webPage2 = messageMedia.webpage) == null || (webPage2 instanceof TLRPC.TL_webPageEmpty) || !messageMedia.manual) ? false : true;
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams == null || messageObject == null) {
            return;
        }
        int i = messageObject.type;
        if ((i == 0 || i == 19) && (webPage = this.foundWebPage) != null && !messagePreviewParams.hasLink(charSequence, webPage.url) && z) {
            this.foundWebPage = null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setWebPage(null, true);
            }
            MessagePreviewParams messagePreviewParams2 = this.messagePreviewParams;
            if (messagePreviewParams2 != null) {
                int i2 = this.currentAccount;
                CharSequence fieldText = this.chatActivityEnterView.getFieldText();
                MessageObject messageObject2 = this.replyingMessageObject;
                messagePreviewParams2.updateLink(i2, null, fieldText, messageObject2 == this.threadMessageObject ? null : messageObject2, this.replyingQuote, this.editingMessageObject);
            }
            editResetMediaManual();
            fallbackFieldPanel();
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:65:0x00d4  */
    /* JADX WARN: Removed duplicated region for block: B:80:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void searchLinks(final java.lang.CharSequence r18, final boolean r19) throws android.content.res.Resources.NotFoundException {
        /*
            Method dump skipped, instructions count: 273
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.searchLinks(java.lang.CharSequence, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$139(final CharSequence charSequence, final MessagesController messagesController, final boolean z) {
        boolean z2;
        CharSequence charSequenceJoin;
        URLSpanReplacement[] uRLSpanReplacementArr;
        if (this.linkSearchRequestId != 0) {
            getConnectionsManager().cancelRequest(this.linkSearchRequestId, true);
            this.linkSearchRequestId = 0;
            z2 = true;
        } else {
            z2 = false;
        }
        ArrayList arrayList = null;
        try {
            Matcher matcher = AndroidUtilities.WEB_URL.matcher(charSequence);
            while (matcher.find()) {
                if (matcher.start() <= 0 || charSequence.charAt(matcher.start() - 1) != '@') {
                    if (arrayList == null) {
                        arrayList = new ArrayList();
                    }
                    arrayList.add(charSequence.subSequence(matcher.start(), matcher.end()));
                }
            }
            if ((charSequence instanceof Spannable) && (uRLSpanReplacementArr = (URLSpanReplacement[]) ((Spannable) charSequence).getSpans(0, charSequence.length(), URLSpanReplacement.class)) != null && uRLSpanReplacementArr.length > 0) {
                if (arrayList == null) {
                    arrayList = new ArrayList();
                }
                for (URLSpanReplacement uRLSpanReplacement : uRLSpanReplacementArr) {
                    arrayList.add(uRLSpanReplacement.getURL());
                }
            }
            if (arrayList != null && this.foundUrls != null && arrayList.size() == this.foundUrls.size()) {
                boolean z3 = true;
                for (int i = 0; i < arrayList.size(); i++) {
                    if (!TextUtils.equals((CharSequence) arrayList.get(i), (CharSequence) this.foundUrls.get(i))) {
                        z3 = false;
                    }
                }
                if (z3 && !z2) {
                    return;
                }
            }
            this.foundUrls = arrayList;
        } catch (Exception e) {
            FileLog.m1160e(e);
            String lowerCase = charSequence.toString().toLowerCase();
            if (charSequence.length() < 13 || !(lowerCase.contains("http://") || lowerCase.contains("https://"))) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda367
                    @Override // java.lang.Runnable
                    public final void run() throws Resources.NotFoundException {
                        this.f$0.lambda$searchLinks$134();
                    }
                });
                return;
            }
            charSequenceJoin = charSequence;
        }
        if (arrayList == null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda366
                @Override // java.lang.Runnable
                public final void run() throws Resources.NotFoundException {
                    this.f$0.lambda$searchLinks$133();
                }
            });
            return;
        }
        charSequenceJoin = TextUtils.join(" ", arrayList);
        if (arrayList != null && !arrayList.isEmpty()) {
            ((CharSequence) arrayList.get(0)).toString();
        }
        if (this.currentEncryptedChat != null && messagesController.secretWebpagePreview == 2) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda368
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$searchLinks$136(messagesController, charSequence, z);
                }
            });
            return;
        }
        final TL_account.getWebPagePreview getwebpagepreview = new TL_account.getWebPagePreview();
        if (charSequenceJoin instanceof String) {
            getwebpagepreview.message = (String) charSequenceJoin;
        } else {
            getwebpagepreview.message = charSequenceJoin.toString();
        }
        TLRPC.WebPage webPage = this.foundWebPage;
        if (webPage == null || !getwebpagepreview.message.equals(webPage.displayedText)) {
            final int i2 = this.waitingForWebpageId + 1;
            this.waitingForWebpageId = i2;
            requestLinkPreviewCached(getwebpagepreview, new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda369
                @Override // org.telegram.messenger.Utilities.Callback2
                public final void run(Object obj, Object obj2) {
                    this.f$0.lambda$searchLinks$138(i2, getwebpagepreview, (Boolean) obj, (TLRPC.WebPage) obj2);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$133() throws Resources.NotFoundException {
        this.foundWebPage = null;
        fallbackFieldPanel();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$134() throws Resources.NotFoundException {
        this.foundWebPage = null;
        fallbackFieldPanel();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$136(final MessagesController messagesController, final CharSequence charSequence, final boolean z) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString(C2369R.string.AppName));
        builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda446
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) throws Resources.NotFoundException {
                this.f$0.lambda$searchLinks$135(messagesController, charSequence, z, alertDialog, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
        builder.setMessage(LocaleController.getString(C2369R.string.SecretLinkPreviewAlert));
        showDialog(builder.create());
        messagesController.secretWebpagePreview = 0;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", messagesController.secretWebpagePreview).commit();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$135(MessagesController messagesController, CharSequence charSequence, boolean z, AlertDialog alertDialog, int i) throws Resources.NotFoundException {
        messagesController.secretWebpagePreview = 1;
        MessagesController.getGlobalMainSettings().edit().putInt("secretWebpage2", getMessagesController().secretWebpagePreview).commit();
        this.foundUrls = null;
        searchLinks(charSequence, z);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$138(final int i, final TL_account.getWebPagePreview getwebpagepreview, final Boolean bool, final TLRPC.WebPage webPage) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda439
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException {
                this.f$0.lambda$searchLinks$137(i, bool, webPage, getwebpagepreview);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$searchLinks$137(int i, Boolean bool, TLRPC.WebPage webPage, TL_account.getWebPagePreview getwebpagepreview) throws Resources.NotFoundException {
        if (this.waitingForWebpageId != i) {
            return;
        }
        if (bool.booleanValue()) {
            this.foundWebPage = webPage;
            String str = getwebpagepreview.message;
            webPage.display_url = str;
            if (!(webPage instanceof TLRPC.TL_webPage) && !(webPage instanceof TLRPC.TL_webPagePending)) {
                if (webPage != null) {
                    this.foundWebPage = null;
                    MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
                    if (messagePreviewParams != null) {
                        int i2 = this.currentAccount;
                        CharSequence fieldText = this.chatActivityEnterView.getFieldText();
                        MessageObject messageObject = this.replyingMessageObject;
                        messagePreviewParams.updateLink(i2, null, fieldText, messageObject == this.threadMessageObject ? null : messageObject, this.replyingQuote, this.editingMessageObject);
                    }
                    fallbackFieldPanel();
                    return;
                }
                return;
            }
            if (webPage instanceof TLRPC.TL_webPagePending) {
                this.pendingLinkSearchString = str;
            }
            if (this.currentEncryptedChat != null && (webPage instanceof TLRPC.TL_webPagePending)) {
                webPage.url = str;
            }
            MessagePreviewParams messagePreviewParams2 = this.messagePreviewParams;
            if (messagePreviewParams2 != null) {
                int i3 = this.currentAccount;
                CharSequence fieldText2 = this.chatActivityEnterView.getFieldText();
                MessageObject messageObject2 = this.replyingMessageObject;
                messagePreviewParams2.updateLink(i3, null, fieldText2, messageObject2 == this.threadMessageObject ? null : messageObject2, this.replyingQuote, this.editingMessageObject);
            }
            showFieldPanelForWebPage(true, this.foundWebPage, false);
            return;
        }
        this.foundWebPage = null;
        fallbackFieldPanel();
    }

    private void requestLinkPreviewCached(final TL_account.getWebPagePreview getwebpagepreview, final Utilities.Callback2 callback2) {
        if (this.lastLinkPreviewResults == null) {
            this.lastLinkPreviewResults = new HashMap();
        }
        TLRPC.WebPage webPage = (TLRPC.WebPage) this.lastLinkPreviewResults.get(getwebpagepreview.message);
        if (webPage != null) {
            callback2.run(Boolean.TRUE, webPage);
        } else {
            requestLinkPreview(getwebpagepreview, new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda465
                @Override // org.telegram.messenger.Utilities.Callback2
                public final void run(Object obj, Object obj2) {
                    this.f$0.lambda$requestLinkPreviewCached$140(getwebpagepreview, callback2, (Boolean) obj, (TLRPC.WebPage) obj2);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$requestLinkPreviewCached$140(TL_account.getWebPagePreview getwebpagepreview, Utilities.Callback2 callback2, Boolean bool, TLRPC.WebPage webPage) {
        if (bool.booleanValue() && !(webPage instanceof TLRPC.TL_webPagePending)) {
            Iterator it = this.lastLinkPreviewResults.keySet().iterator();
            while (it.hasNext() && this.lastLinkPreviewResults.size() > 5) {
                it.next();
                it.remove();
            }
            this.lastLinkPreviewResults.put(getwebpagepreview.message, webPage);
        }
        callback2.run(bool, webPage);
    }

    private void requestLinkPreview(TL_account.getWebPagePreview getwebpagepreview, final Utilities.Callback2 callback2) {
        cancelSearchLinks();
        this.linkSearchRequestId = getConnectionsManager().sendRequest(getwebpagepreview, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda469
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$requestLinkPreview$146(callback2, tLObject, tL_error);
            }
        });
        getConnectionsManager().bindRequestToGuid(this.linkSearchRequestId, this.classGuid);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$requestLinkPreview$146(final Utilities.Callback2 callback2, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda484
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$requestLinkPreview$145(tLObject, callback2);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:7:0x0025  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$requestLinkPreview$145(org.telegram.tgnet.TLObject r5, final org.telegram.messenger.Utilities.Callback2 r6) {
        /*
            r4 = this;
            r0 = 0
            r4.linkSearchRequestId = r0
            boolean r1 = r5 instanceof org.telegram.tgnet.tl.TL_account.webPagePreview
            r2 = 0
            if (r1 == 0) goto L25
            org.telegram.tgnet.tl.TL_account$webPagePreview r5 = (org.telegram.tgnet.tl.TL_account.webPagePreview) r5
            org.telegram.messenger.MessagesController r1 = r4.getMessagesController()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$User> r3 = r5.users
            r1.putUsers(r3, r0)
            org.telegram.messenger.MessagesController r1 = r4.getMessagesController()
            java.util.ArrayList<org.telegram.tgnet.TLRPC$Chat> r3 = r5.chats
            r1.putChats(r3, r0)
            org.telegram.tgnet.TLRPC$MessageMedia r5 = r5.media
            boolean r1 = r5 instanceof org.telegram.tgnet.TLRPC.TL_messageMediaWebPage
            if (r1 == 0) goto L25
            org.telegram.tgnet.TLRPC$TL_messageMediaWebPage r5 = (org.telegram.tgnet.TLRPC.TL_messageMediaWebPage) r5
            goto L26
        L25:
            r5 = r2
        L26:
            if (r5 == 0) goto L96
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            if (r1 == 0) goto L87
            java.lang.String r3 = "telegram_story"
            java.lang.String r1 = r1.type
            boolean r1 = r3.equals(r1)
            if (r1 == 0) goto L87
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            java.util.ArrayList r1 = r1.attributes
            if (r1 == 0) goto L61
        L3d:
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            java.util.ArrayList r1 = r1.attributes
            int r1 = r1.size()
            if (r0 >= r1) goto L61
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            java.util.ArrayList r1 = r1.attributes
            java.lang.Object r1 = r1.get(r0)
            boolean r1 = r1 instanceof org.telegram.tgnet.TLRPC.TL_webPageAttributeStory
            if (r1 == 0) goto L5e
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            java.util.ArrayList r1 = r1.attributes
            java.lang.Object r0 = r1.get(r0)
            org.telegram.tgnet.TLRPC$TL_webPageAttributeStory r0 = (org.telegram.tgnet.TLRPC.TL_webPageAttributeStory) r0
            goto L62
        L5e:
            int r0 = r0 + 1
            goto L3d
        L61:
            r0 = r2
        L62:
            if (r0 != 0) goto L6a
            java.lang.Boolean r5 = java.lang.Boolean.FALSE
            r6.run(r5, r2)
            return
        L6a:
            org.telegram.tgnet.tl.TL_stories$StoryItem r1 = r0.storyItem
            if (r1 == 0) goto L76
            java.lang.Boolean r0 = java.lang.Boolean.TRUE
            org.telegram.tgnet.TLRPC$WebPage r5 = r5.webpage
            r6.run(r0, r5)
            return
        L76:
            org.telegram.messenger.MessagesStorage r1 = r4.getMessagesStorage()
            org.telegram.messenger.DispatchQueue r1 = r1.getStorageQueue()
            org.telegram.ui.ChatActivity$$ExternalSyntheticLambda487 r2 = new org.telegram.ui.ChatActivity$$ExternalSyntheticLambda487
            r2.<init>()
            r1.postRunnable(r2)
            return
        L87:
            org.telegram.tgnet.TLRPC$WebPage r1 = r5.webpage
            if (r1 == 0) goto L8c
            r0 = 1
        L8c:
            java.lang.Boolean r0 = java.lang.Boolean.valueOf(r0)
            org.telegram.tgnet.TLRPC$WebPage r5 = r5.webpage
            r6.run(r0, r5)
            return
        L96:
            java.lang.Boolean r5 = java.lang.Boolean.FALSE
            r6.run(r5, r2)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$requestLinkPreview$145(org.telegram.tgnet.TLObject, org.telegram.messenger.Utilities$Callback2):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$requestLinkPreview$144(TLRPC.TL_messageMediaWebPage tL_messageMediaWebPage, TLRPC.TL_webPageAttributeStory tL_webPageAttributeStory, final Utilities.Callback2 callback2) {
        try {
            final LongSparseArray longSparseArray = new LongSparseArray();
            TLRPC.TL_message tL_message = new TLRPC.TL_message();
            tL_message.message = "";
            tL_message.f1597id = 0;
            tL_message.media = tL_messageMediaWebPage;
            ArrayList arrayList = new ArrayList();
            arrayList.add(new MessageObject(this.currentAccount, tL_message, false, false));
            longSparseArray.put(DialogObject.getPeerDialogId(tL_webPageAttributeStory.peer), arrayList);
            getMessagesController().getStoriesController().getStoriesStorage().fillMessagesWithStories(longSparseArray, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda488
                @Override // java.lang.Runnable
                public final void run() {
                    ChatActivity.m6449$r8$lambda$7LjDKixKF8ZFAHAmNjEtGHHgJk(longSparseArray, callback2);
                }
            }, this.classGuid, false, null);
        } catch (Exception unused) {
        }
    }

    /* renamed from: $r8$lambda$7LjDKixKF8ZFAHAmNjEtG-HHgJk, reason: not valid java name */
    public static /* synthetic */ void m6449$r8$lambda$7LjDKixKF8ZFAHAmNjEtGHHgJk(LongSparseArray longSparseArray, final Utilities.Callback2 callback2) {
        TLRPC.Message message;
        TLRPC.MessageMedia messageMedia;
        TLRPC.WebPage webPage;
        MessageObject messageObject = (longSparseArray.size() == 1 && longSparseArray.valueAt(0) != null && ((ArrayList) longSparseArray.valueAt(0)).size() == 1) ? (MessageObject) ((ArrayList) longSparseArray.valueAt(0)).get(0) : null;
        if (messageObject != null && (message = messageObject.messageOwner) != null && (messageMedia = message.media) != null && (webPage = messageMedia.webpage) != null && webPage.attributes != null) {
            for (int i = 0; i < messageObject.messageOwner.media.webpage.attributes.size(); i++) {
                TLRPC.WebPageAttribute webPageAttribute = (TLRPC.WebPageAttribute) messageObject.messageOwner.media.webpage.attributes.get(i);
                if ((webPageAttribute instanceof TLRPC.TL_webPageAttributeStory) && ((TLRPC.TL_webPageAttributeStory) webPageAttribute).storyItem != null) {
                    final TLRPC.WebPage webPage2 = messageObject.messageOwner.media.webpage;
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda113
                        @Override // java.lang.Runnable
                        public final void run() {
                            callback2.run(Boolean.TRUE, webPage2);
                        }
                    });
                    return;
                }
            }
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda114
            @Override // java.lang.Runnable
            public final void run() {
                callback2.run(Boolean.FALSE, null);
            }
        });
    }

    private void forwardMessages(ArrayList arrayList, boolean z, boolean z2, boolean z3, int i, long j) {
        forwardMessages(arrayList, z, z2, z3, i, this.dialog_id, j);
    }

    private void forwardMessages(ArrayList arrayList, boolean z, boolean z2, boolean z3, int i, long j, long j2) {
        if (arrayList == null || arrayList.isEmpty() || !checkSlowModeAlert()) {
            return;
        }
        if ((i != 0) == (this.chatMode == 1)) {
            this.waitingForSendingMessageLoad = true;
        }
        int iSendMessage = getSendMessagesHelper().sendMessage(arrayList, j, z, z2, z3, i, getThreadMessage(), -1, j2, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        AlertsCreator.showSendMediaAlert(iSendMessage, this, this.themeDelegate);
        if (iSendMessage != 0 || AyuState.getAutomaticallyScheduled()) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda250
                @Override // java.lang.Runnable
                public final void run() throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$forwardMessages$147();
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$forwardMessages$147() throws Resources.NotFoundException, NumberFormatException {
        this.waitingForSendingMessageLoad = false;
        hideFieldPanel(true);
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public boolean shouldShowImport() {
        return this.openImport;
    }

    public void setOpenImport() {
        this.openImport = true;
    }

    private void checkBotKeyboard() throws Resources.NotFoundException, NumberFormatException {
        MessageObject messageObject;
        StringBuilder sb;
        long topicId;
        if (this.chatActivityEnterView == null || (messageObject = this.botButtons) == null || this.userBlocked) {
            return;
        }
        if (messageObject.messageOwner.reply_markup instanceof TLRPC.TL_replyKeyboardForceReply) {
            SharedPreferences mainSettings = MessagesController.getMainSettings(this.currentAccount);
            if (this.isTopic) {
                sb = new StringBuilder();
                sb.append(this.dialog_id);
                sb.append("_");
                topicId = getTopicId();
            } else {
                sb = new StringBuilder();
                sb.append("");
                topicId = this.dialog_id;
            }
            sb.append(topicId);
            if (mainSettings.getInt("answered_" + sb.toString(), 0) != this.botButtons.getId()) {
                if (this.replyingMessageObject == null || this.chatActivityEnterView.getFieldText() == null) {
                    MessageObject messageObject2 = this.botButtons;
                    this.botReplyButtons = messageObject2;
                    this.chatActivityEnterView.setButtons(messageObject2);
                    showFieldPanelForReply(this.botButtons);
                    return;
                }
                return;
            }
            return;
        }
        MessageObject messageObject3 = this.replyingMessageObject;
        if (messageObject3 != null && this.botReplyButtons == messageObject3) {
            this.botReplyButtons = null;
            hideFieldPanel(true);
        }
        this.chatActivityEnterView.setButtons(this.botButtons);
    }

    /* loaded from: classes5.dex */
    public static class ReplyQuote {
        public int end;
        public ArrayList entities;
        public int length;
        public MessageObject message;
        public int offset;
        public boolean outdated;
        public final long peerId;
        public int start;
        public TLRPC.TodoItem task;
        public int task_id;
        public String text;
        public boolean todo;

        private ReplyQuote(long j, MessageObject messageObject, int i, int i2) throws NumberFormatException {
            this.peerId = j;
            this.message = messageObject;
            this.start = i;
            this.end = i2;
            this.todo = false;
            this.task_id = -1;
            update();
        }

        private ReplyQuote(long j, MessageObject messageObject, int i) throws NumberFormatException {
            this.peerId = j;
            this.message = messageObject;
            this.start = -1;
            this.end = -1;
            this.todo = true;
            this.task_id = i;
            update();
        }

        public static ReplyQuote from(MessageObject messageObject, String str, int i) throws NumberFormatException {
            TLRPC.Message message;
            String str2;
            int iFindQuoteStart;
            if (messageObject == null || (message = messageObject.messageOwner) == null || (str2 = message.message) == null || str == null || (iFindQuoteStart = MessageObject.findQuoteStart(str2, str, i)) < 0) {
                return null;
            }
            return new ReplyQuote(messageObject.getDialogId(), messageObject, iFindQuoteStart, iFindQuoteStart + str.length());
        }

        public static ReplyQuote from(MessageObject messageObject, int i) {
            TLRPC.Message message;
            if (messageObject == null || (message = messageObject.messageOwner) == null || !(message.media instanceof TLRPC.TL_messageMediaToDo)) {
                return null;
            }
            return new ReplyQuote(messageObject.getDialogId(), messageObject, i);
        }

        public static ReplyQuote from(MessageObject messageObject) {
            TLRPC.Message message;
            if (messageObject == null || (message = messageObject.messageOwner) == null || message.message == null) {
                return null;
            }
            return from(messageObject, 0, Math.min(MessagesController.getInstance(messageObject.currentAccount).quoteLengthMax, messageObject.messageOwner.message.length()));
        }

        public static ReplyQuote from(MessageObject messageObject, int i, int i2) {
            if (messageObject == null) {
                return null;
            }
            return new ReplyQuote(messageObject.getDialogId(), messageObject, i, i2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* JADX WARN: Multi-variable type inference failed */
        /* JADX WARN: Removed duplicated region for block: B:77:0x012c  */
        /* JADX WARN: Type inference failed for: r6v15, types: [org.telegram.tgnet.TLRPC$TL_messageEntitySpoiler] */
        /* JADX WARN: Type inference failed for: r6v16, types: [org.telegram.tgnet.TLRPC$TL_messageEntityStrike] */
        /* JADX WARN: Type inference failed for: r6v17, types: [org.telegram.tgnet.TLRPC$TL_messageEntityUnderline] */
        /* JADX WARN: Type inference failed for: r6v18, types: [org.telegram.tgnet.TLRPC$TL_messageEntityItalic] */
        /* JADX WARN: Type inference failed for: r6v20, types: [org.telegram.tgnet.TLRPC$TL_messageEntityBold] */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean update() throws java.lang.NumberFormatException {
            /*
                Method dump skipped, instructions count: 449
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ReplyQuote.update():boolean");
        }

        public boolean checkEdit(MessageObject messageObject) throws NumberFormatException {
            TLRPC.Message message;
            String str;
            int i;
            int i2;
            if (messageObject == null || (message = messageObject.messageOwner) == null || (str = message.message) == null) {
                FileLog.m1158e("ReplyQuote.checkEdit: message is null");
                this.outdated = false;
                return false;
            }
            int i3 = this.end;
            if (i3 < this.start || i3 > str.length() || this.start > messageObject.messageOwner.message.length() || (i = this.start) < 0 || (i2 = this.end) < 0) {
                FileLog.m1158e("ReplyQuote.checkEdit: start/end are invalid (" + this.start + ", " + this.end + ", len=" + messageObject.messageOwner.message.length() + ")");
                this.outdated = false;
                return false;
            }
            if (TextUtils.equals(this.text, messageObject.messageOwner.message.substring(i, i2))) {
                this.message = messageObject;
                update();
                this.outdated = false;
                return false;
            }
            int iIndexOf = messageObject.messageOwner.message.indexOf(this.text);
            if (iIndexOf >= 0) {
                this.message = messageObject;
                this.end = (this.end - this.start) + iIndexOf;
                this.start = iIndexOf;
                update();
                this.outdated = false;
                return false;
            }
            this.message = messageObject;
            this.start = 0;
            this.end = messageObject.messageOwner.message.length();
            update();
            this.outdated = true;
            return true;
        }

        public String getText() {
            return this.text;
        }

        public boolean isValid() {
            if (this.todo) {
                return this.task != null;
            }
            return !TextUtils.isEmpty(this.text);
        }

        public ArrayList getEntities() {
            return this.entities;
        }

        public ArrayList getFilteredEntities() {
            ArrayList entities = getEntities();
            if (entities == null) {
                return entities;
            }
            ArrayList arrayList = new ArrayList(entities);
            MessageObject messageObject = this.message;
            LocaleUtils.replaceCustomEmojis(messageObject.currentAccount, messageObject.getDialogId(), arrayList, true);
            return arrayList;
        }
    }

    public void hideFieldPanel(boolean z) throws Resources.NotFoundException, NumberFormatException {
        showFieldPanel(false, null, null, null, null, true, 0, null, false, 0L, z);
    }

    public void hideFieldPanel(boolean z, int i, long j, boolean z2) throws Resources.NotFoundException, NumberFormatException {
        showFieldPanel(false, null, null, null, null, z, i, null, false, j, z2);
    }

    public void showFieldPanelForWebPage(boolean z, TLRPC.WebPage webPage, boolean z2) {
        showFieldPanel(z, null, null, null, webPage, true, 0, null, z2, 0L, true);
    }

    public void showFieldPanelForForward(boolean z, ArrayList arrayList) {
        showFieldPanel(z, null, null, arrayList, null, true, 0, null, false, 0L, true);
    }

    public void showFieldPanelForReply(MessageObject messageObject) {
        showFieldPanel(true, messageObject, null, null, null, true, 0, null, false, 0L, true);
    }

    public void showFieldPanelForReplyQuote(MessageObject messageObject, ReplyQuote replyQuote) {
        showFieldPanel(true, messageObject, null, null, null, true, 0, replyQuote, false, 0L, true);
    }

    public void showFieldPanelForEdit(boolean z, MessageObject messageObject) {
        showFieldPanel(z, null, messageObject, null, null, true, 0, null, false, 0L, true);
    }

    public void showFieldPanelForSuggestionParams(MessageSuggestionParams messageSuggestionParams) throws Resources.NotFoundException {
        showFieldPanel(true, null, null, null, null, true, 0, null, false, 0L, messageSuggestionParams, true);
    }

    public void showFieldPanel(boolean z, MessageObject messageObject, MessageObject messageObject2, ArrayList arrayList, TLRPC.WebPage webPage, boolean z2, int i, ReplyQuote replyQuote, boolean z3, long j, boolean z4) throws Resources.NotFoundException, NumberFormatException {
        showFieldPanel(z, messageObject, messageObject2, arrayList, webPage, z2, i, replyQuote, z3, j, null, z4);
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:169:0x041a  */
    /* JADX WARN: Removed duplicated region for block: B:184:0x0465  */
    /* JADX WARN: Removed duplicated region for block: B:190:0x0476  */
    /* JADX WARN: Removed duplicated region for block: B:193:0x0487  */
    /* JADX WARN: Removed duplicated region for block: B:201:0x04b5  */
    /* JADX WARN: Removed duplicated region for block: B:214:0x0511  */
    /* JADX WARN: Removed duplicated region for block: B:217:0x0516  */
    /* JADX WARN: Removed duplicated region for block: B:221:0x0532  */
    /* JADX WARN: Removed duplicated region for block: B:255:0x05ee  */
    /* JADX WARN: Removed duplicated region for block: B:260:0x060d  */
    /* JADX WARN: Removed duplicated region for block: B:268:0x064a  */
    /* JADX WARN: Removed duplicated region for block: B:277:0x0668  */
    /* JADX WARN: Removed duplicated region for block: B:285:0x067d  */
    /* JADX WARN: Removed duplicated region for block: B:289:0x068d  */
    /* JADX WARN: Removed duplicated region for block: B:293:0x06cd  */
    /* JADX WARN: Removed duplicated region for block: B:294:0x06d0  */
    /* JADX WARN: Removed duplicated region for block: B:301:0x06ea  */
    /* JADX WARN: Removed duplicated region for block: B:302:0x06ec  */
    /* JADX WARN: Removed duplicated region for block: B:309:0x0755  */
    /* JADX WARN: Removed duplicated region for block: B:346:0x0800  */
    /* JADX WARN: Removed duplicated region for block: B:614:0x0def  */
    /* JADX WARN: Removed duplicated region for block: B:615:0x0df1  */
    /* JADX WARN: Removed duplicated region for block: B:635:0x0e6f  */
    /* JADX WARN: Removed duplicated region for block: B:637:0x0e75  */
    /* JADX WARN: Removed duplicated region for block: B:665:0x0f0f  */
    /* JADX WARN: Type inference failed for: r12v10 */
    /* JADX WARN: Type inference failed for: r12v11, types: [org.telegram.messenger.MessageObject, org.telegram.messenger.MessageObject$GroupedMessages] */
    /* JADX WARN: Type inference failed for: r12v67 */
    /* JADX WARN: Type inference failed for: r3v101 */
    /* JADX WARN: Type inference failed for: r3v58 */
    /* JADX WARN: Type inference failed for: r3v59, types: [org.telegram.messenger.MessageObject, org.telegram.messenger.MessageObject$GroupedMessages] */
    /* JADX WARN: Type inference failed for: r3v79, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v80, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v81, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v83, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v88, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v90, types: [android.text.SpannableStringBuilder, java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r3v96, types: [java.lang.CharSequence] */
    /* JADX WARN: Type inference failed for: r4v63, types: [org.telegram.ui.Components.ChatActivityEnterView] */
    /* JADX WARN: Type inference failed for: r5v41, types: [org.telegram.ui.Components.ChatActivityEnterView] */
    /* JADX WARN: Type inference failed for: r6v80, types: [java.lang.CharSequence] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void showFieldPanel(boolean r27, org.telegram.messenger.MessageObject r28, org.telegram.messenger.MessageObject r29, java.util.ArrayList r30, org.telegram.tgnet.TLRPC.WebPage r31, boolean r32, int r33, org.telegram.ui.ChatActivity.ReplyQuote r34, boolean r35, long r36, org.telegram.messenger.MessageSuggestionParams r38, boolean r39) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 4214
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.showFieldPanel(boolean, org.telegram.messenger.MessageObject, org.telegram.messenger.MessageObject, java.util.ArrayList, org.telegram.tgnet.TLRPC$WebPage, boolean, int, org.telegram.ui.ChatActivity$ReplyQuote, boolean, long, org.telegram.messenger.MessageSuggestionParams, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showFieldPanel$148() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || this.fieldPanelShown == 5) {
            return;
        }
        chatActivityEnterView.openKeyboard();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showFieldPanel$149() {
        this.showTapForForwardingOptionsHit = !this.showTapForForwardingOptionsHit;
        this.replyObjectTextView.setPivotX(0.0f);
        this.replyObjectHintTextView.setPivotX(0.0f);
        if (this.showTapForForwardingOptionsHit) {
            this.replyObjectTextView.animate().alpha(0.0f).scaleX(0.98f).scaleY(0.98f).setDuration(150L).start();
            this.replyObjectHintTextView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
        } else {
            this.replyObjectTextView.animate().alpha(1.0f).scaleX(1.0f).scaleY(1.0f).setDuration(150L).start();
            this.replyObjectHintTextView.animate().alpha(0.0f).scaleX(0.98f).scaleY(0.98f).setDuration(150L).start();
        }
        AndroidUtilities.runOnUIThread(this.tapForForwardingOptionsHitRunnable, 6000L);
    }

    private void moveScrollToLastMessage(boolean z) {
        PinchToZoomHelper pinchToZoomHelper;
        if (this.chatListView == null || this.messages.isEmpty() || (pinchToZoomHelper = this.pinchToZoomHelper) == null || pinchToZoomHelper.isInOverlayMode()) {
            return;
        }
        this.chatLayoutManager.scrollToPositionWithOffset(z ? getSponsoredMessagesCount() : 0, 0);
        this.chatListView.stopScroll();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Runnable sendSecretMessageRead(final MessageObject messageObject, boolean z) {
        if (messageObject == null || messageObject.isOut() || !messageObject.isSecretMedia()) {
            return null;
        }
        TLRPC.Message message = messageObject.messageOwner;
        if (message.destroyTime != 0 || message.ttl <= 0) {
            return null;
        }
        if (!AyuState.getAllowReadSecretMedia()) {
            if (z) {
                return null;
            }
            return new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda120
                @Override // java.lang.Runnable
                public final void run() {
                    ChatActivity.$r8$lambda$ruS_3VNQZ8HYHzLbjynav7GbSe8();
                }
            };
        }
        if (z) {
            TLRPC.Message message2 = messageObject.messageOwner;
            int i = message2.ttl;
            boolean z2 = i != Integer.MAX_VALUE;
            int i2 = i == Integer.MAX_VALUE ? 0 : i;
            if (!AyuConfig.saveDeletedMessages) {
                message2.destroyTime = getConnectionsManager().getCurrentTime() + i2;
            }
            if (this.currentEncryptedChat != null) {
                getMessagesController().markMessageAsRead(this.dialog_id, messageObject.messageOwner.random_id, i2);
            } else {
                getMessagesController().markMessageAsRead2(this.dialog_id, messageObject.getId(), null, i2, 0L, z2);
            }
            return null;
        }
        return new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda121
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$sendSecretMessageRead$151(messageObject);
            }
        };
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$sendSecretMessageRead$151(MessageObject messageObject) {
        TLRPC.Message message = messageObject.messageOwner;
        int i = message.ttl;
        boolean z = i != Integer.MAX_VALUE;
        int i2 = i == Integer.MAX_VALUE ? 0 : i;
        if (!AyuConfig.saveDeletedMessages) {
            message.destroyTime = getConnectionsManager().getCurrentTime() + i2;
            messageObject.messageOwner.destroyTimeMillis = (i2 * 1000) + getConnectionsManager().getCurrentTimeMillis();
        }
        if (this.currentEncryptedChat != null) {
            getMessagesController().markMessageAsRead(this.dialog_id, messageObject.messageOwner.random_id, i2);
        } else {
            getMessagesController().markMessageAsRead2(this.dialog_id, messageObject.getId(), null, i2, 0L, z);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Runnable sendSecretMediaDelete(final MessageObject messageObject) {
        if (messageObject == null || messageObject.isOut() || !messageObject.isSecretMedia() || messageObject.messageOwner.ttl != Integer.MAX_VALUE) {
            return null;
        }
        final long jCreateDeleteShowOnceTask = getMessagesController().createDeleteShowOnceTask(this.dialog_id, messageObject.getId());
        messageObject.forceExpired = !AyuConfig.saveDeletedMessages;
        if (messageObject.isOutOwner() || (!messageObject.isRoundOnce() && !messageObject.isVoiceOnce())) {
            ArrayList arrayList = new ArrayList();
            arrayList.add(messageObject);
            updateMessages(arrayList, true);
        }
        return new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda370
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$sendSecretMediaDelete$152(jCreateDeleteShowOnceTask, messageObject);
            }
        };
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$sendSecretMediaDelete$152(long j, MessageObject messageObject) {
        getMessagesController().lambda$checkDeletingTask$80(j, this.dialog_id, messageObject.getId());
    }

    private void clearChatData(boolean z) {
        this.messages.clear();
        this.messagesByDays.clear();
        this.messagesByDaysSorted.clear();
        this.waitingForLoad.clear();
        this.groupedMessagesMap.clear();
        this.threadMessageAdded = false;
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            showProgressView(chatActivityAdapter.botInfoRow < 0);
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            chatListRecyclerView.setEmptyView(null);
        }
        for (int i = 0; i < 2; i++) {
            this.messagesDict[i].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[i] = Integer.MAX_VALUE;
                this.minMessageId[i] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[i] = Integer.MIN_VALUE;
                this.minMessageId[i] = Integer.MAX_VALUE;
            }
            this.maxDate[i] = Integer.MIN_VALUE;
            this.minDate[i] = 0;
            this.endReached[i] = false;
            this.cacheEndReached[i] = false;
            this.forwardEndReached[i] = true;
        }
        if (z) {
            this.first = true;
            this.firstLoading = true;
            this.loading = true;
            this.loadingForward = false;
        }
        this.waitingForReplyMessageLoad = false;
        this.startLoadFromMessageId = 0;
        this.showScrollToMessageError = false;
        this.last_message_id = 0;
        this.unreadMessageObject = null;
        this.createUnreadMessageAfterId = 0;
        this.createUnreadMessageAfterIdLoading = false;
        this.needSelectFromMessageId = false;
        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
        if (chatActivityAdapter2 == null || chatActivityAdapter2.isFiltered) {
            return;
        }
        chatActivityAdapter2.notifyDataSetChanged(false);
    }

    public void scrollToLastMessage(boolean z, boolean z2) {
        scrollToLastMessage(z, z2, null);
    }

    public void scrollToLastMessage(boolean z, final boolean z2, Runnable runnable) {
        ArrayList arrayList;
        int i;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null || chatListRecyclerView.isFastScrollAnimationRunning()) {
            return;
        }
        final int iMin = 0;
        this.forceNextPinnedMessageId = 0;
        this.nextScrollToMessageId = 0;
        this.forceScrollToFirst = false;
        this.chatScrollHelper.setScrollDirection(0);
        if (this.forwardEndReached[0] && this.first_unread_id == 0 && this.startLoadFromMessageId == 0) {
            this.sideControlsButtonsLayout.setButtonLoading(0, false, true);
            if (this.chatLayoutManager.findFirstCompletelyVisibleItemPosition() == 0) {
                this.canShowPagedownButton = false;
                updatePagedownButtonVisibility(true);
                removeSelectedMessageHighlight();
                updateVisibleRows();
                return;
            }
            this.chatAdapter.updateRowsSafe();
            this.chatScrollHelperCallback.scrollTo = null;
            if (z) {
                int i2 = 0;
                while (i2 < this.messages.size() && ((MessageObject) this.messages.get(i2)).isSponsored()) {
                    i2++;
                    z2 = false;
                }
                iMin = i2;
            }
            if (z2 && (arrayList = this.messages) != null && !arrayList.isEmpty() && this.messages.get(iMin) != null) {
                long groupId = ((MessageObject) this.messages.get(iMin)).getGroupId();
                while (groupId != 0 && (i = iMin + 1) < this.messages.size() && groupId == ((MessageObject) this.messages.get(i)).getGroupId()) {
                    iMin = i;
                }
            }
            ArrayList arrayList2 = this.messages;
            if (arrayList2 != null && !arrayList2.isEmpty()) {
                iMin = Math.min(iMin, this.messages.size() - 1);
            }
            new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda225
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$scrollToLastMessage$153(iMin, z2);
                }
            }.run();
            return;
        }
        AlertDialog alertDialog = this.progressDialog;
        if (alertDialog != null) {
            alertDialog.dismiss();
        }
        updatePinnedListButton(false);
        if (runnable != null) {
            runnable.run();
        } else {
            resetProgressDialogLoading();
            AlertDialog alertDialog2 = new AlertDialog(getParentActivity(), 3, this.themeDelegate);
            this.progressDialog = alertDialog2;
            alertDialog2.setOnCancelListener(this.postponedScrollCancelListener);
            this.progressDialog.showDelayed(1000L);
        }
        this.postponedScrollToLastMessageQueryIndex = this.lastLoadIndex;
        this.fakePostponedScroll = false;
        this.postponedScrollMessageId = 0;
        this.postponedScrollIsCanceled = false;
        this.waitingForLoad.clear();
        this.waitingForLoad.add(Integer.valueOf(this.lastLoadIndex));
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda226
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$scrollToLastMessage$155();
            }
        }, 0L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$scrollToLastMessage$153(int i, boolean z) {
        RecyclerAnimationScrollHelper recyclerAnimationScrollHelper = this.chatScrollHelper;
        this.chatScrollHelperCallback.position = i;
        this.chatScrollHelperCallback.offset = 0;
        boolean z2 = !z;
        this.chatScrollHelperCallback.bottom = z2;
        recyclerAnimationScrollHelper.scrollToPosition(i, 0, z2, true, true);
        this.canShowPagedownButton = false;
        updatePagedownButtonVisibility(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$scrollToLastMessage$155() {
        MessagesController messagesController = getMessagesController();
        long j = this.dialog_id;
        long j2 = this.mergeDialogId;
        int i = this.classGuid;
        int i2 = this.chatMode;
        long j3 = this.threadMessageId;
        int i3 = this.replyMaxReadId;
        int i4 = this.lastLoadIndex;
        this.lastLoadIndex = i4 + 1;
        messagesController.loadMessages(j, j2, false, 30, 0, 0, true, 0, i, 0, 0, i2, j3, i3, i4, this.isTopic);
    }

    public void updateTextureViewPosition(boolean z, boolean z2) {
        boolean z3;
        MessageObject playingMessageObject;
        if (this.fragmentView != null && !this.paused) {
            int childCount = this.chatListView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    z3 = false;
                    break;
                }
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    MessageObject messageObject = chatMessageCell.getMessageObject();
                    if (this.videoPlayerContainer != null && ((messageObject.isRoundVideo() || messageObject.isVideo()) && !messageObject.isVoiceTranscriptionOpen() && MediaController.getInstance().isPlayingMessage(messageObject))) {
                        ImageReceiver photoImage = chatMessageCell.getPhotoImage();
                        this.videoPlayerContainer.setTranslationX(photoImage.getImageX() + chatMessageCell.getX());
                        this.videoPlayerContainer.setTranslationY((((chatMessageCell.getY() + chatMessageCell.getPaddingTop()) + photoImage.getImageY()) + this.chatListView.getY()) - this.videoPlayerContainer.getTop());
                        FrameLayout.LayoutParams layoutParams = (FrameLayout.LayoutParams) this.videoPlayerContainer.getLayoutParams();
                        if (messageObject.isRoundVideo()) {
                            this.videoPlayerContainer.setTag(C2369R.id.parent_tag, null);
                            if (layoutParams.width != AndroidUtilities.roundPlayingMessageSize(isSideMenued()) || layoutParams.height != AndroidUtilities.roundPlayingMessageSize(isSideMenued())) {
                                int iRoundPlayingMessageSize = AndroidUtilities.roundPlayingMessageSize(isSideMenued());
                                layoutParams.height = iRoundPlayingMessageSize;
                                layoutParams.width = iRoundPlayingMessageSize;
                                this.aspectRatioFrameLayout.setResizeMode(0);
                                this.videoPlayerContainer.setLayoutParams(layoutParams);
                            }
                            float fRoundPlayingMessageSize = (AndroidUtilities.roundPlayingMessageSize(isSideMenued()) + (AndroidUtilities.roundMessageInset * 2)) / AndroidUtilities.roundPlayingMessageSize(isSideMenued());
                            float imageWidth = chatMessageCell.getPhotoImage().getImageWidth() / AndroidUtilities.roundPlayingMessageSize(isSideMenued());
                            if (this.videoPlayerContainer.getScaleX() != imageWidth) {
                                this.videoPlayerContainer.invalidate();
                                this.fragmentView.invalidate();
                            }
                            this.videoPlayerContainer.setPivotX(0.0f);
                            this.videoPlayerContainer.setPivotY(0.0f);
                            this.videoPlayerContainer.setScaleX(imageWidth);
                            this.videoPlayerContainer.setScaleY(imageWidth);
                            this.videoTextureView.setScaleX(fRoundPlayingMessageSize);
                            this.videoTextureView.setScaleY(fRoundPlayingMessageSize);
                        } else {
                            this.videoPlayerContainer.setTag(C2369R.id.parent_tag, photoImage);
                            if (layoutParams.width != photoImage.getImageWidth() || layoutParams.height != photoImage.getImageHeight()) {
                                this.aspectRatioFrameLayout.setResizeMode(3);
                                layoutParams.width = (int) photoImage.getImageWidth();
                                layoutParams.height = (int) photoImage.getImageHeight();
                                this.videoPlayerContainer.setLayoutParams(layoutParams);
                            }
                            this.videoTextureView.setScaleX(1.0f);
                            this.videoTextureView.setScaleY(1.0f);
                        }
                        this.fragmentView.invalidate();
                        this.videoPlayerContainer.invalidate();
                        z3 = true;
                    }
                }
                i++;
            }
            if (z && this.videoPlayerContainer != null && (playingMessageObject = MediaController.getInstance().getPlayingMessageObject()) != null && playingMessageObject.eventId == 0) {
                if (!z3) {
                    if (this.checkTextureViewPosition && playingMessageObject.isVideo()) {
                        MediaController.getInstance().cleanupPlayer(true, true);
                        return;
                    }
                    this.videoPlayerContainer.setTranslationY((-AndroidUtilities.roundPlayingMessageSize(isSideMenued())) - 100);
                    this.fragmentView.invalidate();
                    if (playingMessageObject.isRoundVideo() || playingMessageObject.isVideo()) {
                        if (this.checkTextureViewPosition || PipRoundVideoView.getInstance() != null) {
                            MediaController.getInstance().setCurrentVideoVisible(false);
                        } else if (z2) {
                            scrollToMessageId(playingMessageObject.getId(), 0, false, 0, true, 0);
                        }
                    }
                } else {
                    MediaController.getInstance().setCurrentVideoVisible(true);
                    if (playingMessageObject.isRoundVideo() || this.scrollToVideo) {
                        return;
                    }
                    this.chatListView.invalidate();
                }
            }
        }
    }

    public void invalidateMessagesVisiblePart() {
        this.invalidateMessagesVisiblePart = true;
        View view = this.fragmentView;
        if (view != null) {
            view.invalidate();
        }
    }

    private Integer findClosest(ArrayList arrayList, int i, int[] iArr) {
        if (arrayList.isEmpty()) {
            return 0;
        }
        Integer num = (Integer) arrayList.get(0);
        if (i >= num.intValue()) {
            iArr[0] = 0;
            return num;
        }
        int size = arrayList.size();
        int i2 = size - 1;
        Integer num2 = (Integer) arrayList.get(i2);
        if (i <= num2.intValue()) {
            iArr[0] = i2;
            return num2;
        }
        int i3 = 0;
        int i4 = 0;
        while (i3 < size) {
            i4 = (i3 + size) / 2;
            Integer num3 = (Integer) arrayList.get(i4);
            if (num3.intValue() == i) {
                iArr[0] = i4;
                return num3;
            }
            if (i < num3.intValue()) {
                if (i4 > 0) {
                    int i5 = i4 - 1;
                    Integer num4 = (Integer) arrayList.get(i5);
                    if (i > num4.intValue()) {
                        iArr[0] = i5;
                        return num4;
                    }
                }
                i3 = i4 + 1;
            } else {
                if (i4 > 0 && i < ((Integer) arrayList.get(i4 - 1)).intValue()) {
                    iArr[0] = i4;
                    return num3;
                }
                size = i4;
            }
        }
        iArr[0] = i4;
        return (Integer) arrayList.get(i4);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessagesVisiblePart$156(MessageObject messageObject) {
        if (messageObject.isVideo()) {
            openPhotoViewerForMessage(null, messageObject);
        } else {
            MediaController.getInstance().playMessage(messageObject);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:102:0x01f6  */
    /* JADX WARN: Removed duplicated region for block: B:118:0x0225  */
    /* JADX WARN: Removed duplicated region for block: B:121:0x0231  */
    /* JADX WARN: Removed duplicated region for block: B:226:0x04e1  */
    /* JADX WARN: Removed duplicated region for block: B:227:0x04e3  */
    /* JADX WARN: Removed duplicated region for block: B:234:0x04f2  */
    /* JADX WARN: Removed duplicated region for block: B:236:0x04f8  */
    /* JADX WARN: Removed duplicated region for block: B:239:0x04ff  */
    /* JADX WARN: Removed duplicated region for block: B:256:0x0542  */
    /* JADX WARN: Removed duplicated region for block: B:258:0x054f  */
    /* JADX WARN: Removed duplicated region for block: B:313:0x0675  */
    /* JADX WARN: Removed duplicated region for block: B:344:0x06cb  */
    /* JADX WARN: Removed duplicated region for block: B:354:0x06ec A[PHI: r6
      0x06ec: PHI (r6v34 int) = (r6v33 int), (r6v35 int) binds: [B:353:0x06ea, B:348:0x06dc] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:356:0x06f4  */
    /* JADX WARN: Removed duplicated region for block: B:359:0x06fd A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:410:0x07d2  */
    /* JADX WARN: Removed duplicated region for block: B:413:0x07e2  */
    /* JADX WARN: Removed duplicated region for block: B:420:0x07f4  */
    /* JADX WARN: Removed duplicated region for block: B:49:0x0114 A[PHI: r2
      0x0114: PHI (r2v122 int) = (r2v2 int), (r2v180 int) binds: [B:41:0x0107, B:47:0x0111] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:72:0x016b  */
    /* JADX WARN: Removed duplicated region for block: B:88:0x01bf  */
    /* JADX WARN: Removed duplicated region for block: B:89:0x01c2  */
    /* JADX WARN: Removed duplicated region for block: B:92:0x01cb  */
    /* JADX WARN: Removed duplicated region for block: B:95:0x01db  */
    /* JADX WARN: Removed duplicated region for block: B:97:0x01e3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateMessagesVisiblePart(boolean r80) {
        /*
            Method dump skipped, instructions count: 4005
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateMessagesVisiblePart(boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessagesVisiblePart$157() {
        updatePinnedMessageView(this.openAnimationStartTime != 0 && SystemClock.elapsedRealtime() >= this.openAnimationStartTime + 150);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateMessagesVisiblePart$159(boolean z) {
        lambda$updateMessagesVisiblePart$158(z, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public float getServiceTop(View view) {
        return ((view.getY() + (isKeyboardVisible() ? this.chatListView.getTop() : this.actionBar.getMeasuredHeight())) - this.contentView.getBackgroundTranslationY()) - ((1.0f - this.contentPanTranslationT) * this.chatListViewPaddingTop);
    }

    public int getServiceHeight(View view) {
        return this.contentView.getBackgroundSizeY();
    }

    private boolean pinnedOnlyStarterMessage() {
        return this.pinnedMessageIds.size() == 1 && this.topicStarterMessageObject != null && ((Integer) this.pinnedMessageIds.get(0)).intValue() == this.topicStarterMessageObject.getId();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void inlineUpdate1() {
        int i = this.prevSetUnreadCount;
        int i2 = this.newUnreadMessageCount;
        if (i != i2) {
            this.prevSetUnreadCount = i2;
            this.sideControlsButtonsLayout.setButtonCount(0, i2, this.openAnimationEnded);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void inlineUpdate2() {
        int i = this.prevSetUnreadCount;
        int i2 = this.newUnreadMessageCount;
        if (i != i2) {
            this.prevSetUnreadCount = i2;
            this.sideControlsButtonsLayout.setButtonCount(0, i2, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void toggleMute(boolean z) {
        if (getMessagesController().isDialogMuted(this.dialog_id, getTopicId())) {
            getNotificationsController().muteDialog(this.dialog_id, getTopicId(), false);
            if (z) {
                return;
            }
            BulletinFactory.createMuteBulletin(this, false, this.themeDelegate).show();
            return;
        }
        if (z) {
            getNotificationsController().muteDialog(this.dialog_id, getTopicId(), true);
            return;
        }
        BottomSheet bottomSheetCreateMuteAlert = AlertsCreator.createMuteAlert(this, this.dialog_id, getTopicId(), this.themeDelegate);
        bottomSheetCreateMuteAlert.setCalcMandatoryInsets(isKeyboardVisible());
        showDialog(bottomSheetCreateMuteAlert);
    }

    private int getScrollOffsetForMessage(MessageObject messageObject) {
        return getScrollOffsetForMessage(getHeightForMessage(messageObject, !TextUtils.isEmpty(this.highlightMessageQuote))) - scrollOffsetForQuote(messageObject);
    }

    private int getScrollOffsetForMessage(int i) {
        return (int) Math.max(-AndroidUtilities.m1146dp(2.0f), (((((this.chatListView.getMeasuredHeight() - this.blurredViewBottomOffset) - this.chatListViewPaddingTop) - this.windowInsetsStateHolder.getCurrentMaxBottomInset()) - AndroidUtilities.m1146dp(53.0f)) - i) / 2.0f);
    }

    private int scrollOffsetForQuote(MessageObject messageObject) {
        ArrayList<MessageObject.TextLayoutBlock> arrayList;
        CharSequence charSequence;
        int iM1146dp;
        ChatMessageCell chatMessageCell;
        MessageObject.TextLayoutBlocks textLayoutBlocks;
        int iFindQuoteStart;
        float lineTop;
        MessageObject.TextLayoutBlocks textLayoutBlocks2;
        MessageObject messageObject2;
        if (TextUtils.isEmpty(this.highlightMessageQuote) || messageObject == null) {
            ChatMessageCell chatMessageCell2 = this.dummyMessageCell;
            if (chatMessageCell2 != null) {
                chatMessageCell2.computedGroupCaptionY = 0;
                chatMessageCell2.computedCaptionLayout = null;
            }
            return 0;
        }
        if (messageObject.getGroupId() != 0) {
            MessageObject.GroupedMessages group = getGroup(messageObject.getGroupId());
            ChatMessageCell chatMessageCell3 = this.dummyMessageCell;
            if (chatMessageCell3 == null || (textLayoutBlocks2 = chatMessageCell3.computedCaptionLayout) == null || group == null || (messageObject2 = group.captionMessage) == null) {
                if (chatMessageCell3 != null) {
                    chatMessageCell3.computedGroupCaptionY = 0;
                    chatMessageCell3.computedCaptionLayout = null;
                }
                return 0;
            }
            iM1146dp = chatMessageCell3.computedGroupCaptionY;
            charSequence = messageObject2.caption;
            arrayList = textLayoutBlocks2.textLayoutBlocks;
        } else if (!TextUtils.isEmpty(messageObject.caption) && (chatMessageCell = this.dummyMessageCell) != null && (textLayoutBlocks = chatMessageCell.captionLayout) != null) {
            iM1146dp = (int) chatMessageCell.captionY;
            charSequence = messageObject.caption;
            arrayList = textLayoutBlocks.textLayoutBlocks;
        } else {
            CharSequence charSequence2 = messageObject.messageText;
            arrayList = messageObject.textLayoutBlocks;
            ChatMessageCell chatMessageCell4 = this.dummyMessageCell;
            if (chatMessageCell4 == null || !chatMessageCell4.linkPreviewAbove) {
                charSequence = charSequence2;
                iM1146dp = 0;
            } else {
                iM1146dp = chatMessageCell4.linkPreviewHeight + AndroidUtilities.m1146dp(10.0f);
                charSequence = charSequence2;
            }
        }
        ChatMessageCell chatMessageCell5 = this.dummyMessageCell;
        if (chatMessageCell5 != null) {
            chatMessageCell5.computedGroupCaptionY = 0;
            chatMessageCell5.computedCaptionLayout = null;
        }
        if (arrayList == null || charSequence == null || (iFindQuoteStart = MessageObject.findQuoteStart(charSequence.toString(), this.highlightMessageQuote, this.highlightMessageQuoteOffset)) < 0) {
            return 0;
        }
        for (int i = 0; i < arrayList.size(); i++) {
            MessageObject.TextLayoutBlock textLayoutBlock = arrayList.get(i);
            String string = textLayoutBlock.textLayout.getText().toString();
            int i2 = textLayoutBlock.charactersOffset;
            if (iFindQuoteStart > i2) {
                if (iFindQuoteStart - i2 > string.length() - 1) {
                    lineTop = iM1146dp + ((int) (textLayoutBlock.textYOffset(arrayList) + textLayoutBlock.padTop + textLayoutBlock.height));
                } else {
                    lineTop = r5.getLineTop(r5.getLineForOffset(iFindQuoteStart - textLayoutBlock.charactersOffset)) + iM1146dp + textLayoutBlock.textYOffset(arrayList) + textLayoutBlock.padTop;
                }
                if (lineTop > AndroidUtilities.displaySize.y * (isKeyboardVisible() ? 0.7f : 0.5f)) {
                    return (int) (lineTop - (AndroidUtilities.displaySize.y * (isKeyboardVisible() ? 0.7f : 0.5f)));
                }
                return 0;
            }
        }
        return 0;
    }

    private int getHeightForMessage(MessageObject messageObject, boolean z) {
        boolean z2 = false;
        if (getParentActivity() == null) {
            return 0;
        }
        if (this.dummyMessageCell == null) {
            this.dummyMessageCell = new ChatMessageCell(getParentActivity(), this.currentAccount, true, this.sharedResources, this.themeDelegate);
        }
        this.dummyMessageCell.isChat = this.currentChat != null || UserObject.isUserSelf(this.currentUser);
        ChatMessageCell chatMessageCell = this.dummyMessageCell;
        int i = this.chatMode;
        chatMessageCell.isSavedChat = i == 3;
        chatMessageCell.isSavedPreviewChat = i == 3 && this.isInsideContainer;
        TLRPC.User user = this.currentUser;
        chatMessageCell.isBot = user != null && user.bot;
        if (ChatObject.isChannel(this.currentChat) && this.currentChat.megagroup) {
            z2 = true;
        }
        chatMessageCell.isMegagroup = z2;
        this.dummyMessageCell.isAllChats = isAllChats();
        this.dummyMessageCell.isSideMenued = isSideMenued();
        this.dummyMessageCell.isSideMenuEnabled = isSideMenuEnabled();
        return this.dummyMessageCell.computeHeight(messageObject, (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId()), z);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startMessageUnselect() {
        Runnable runnable = this.unselectRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        Runnable runnable2 = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda157
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$startMessageUnselect$160();
            }
        };
        this.unselectRunnable = runnable2;
        AndroidUtilities.runOnUIThread(runnable2, this.highlightMessageQuote != null ? 2500L : 1000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$startMessageUnselect$160() {
        this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
        this.highlightMessageQuoteFirst = false;
        this.highlightMessageQuoteFirstTime = 0L;
        this.highlightMessageQuote = null;
        this.highlightTaskId = null;
        this.highlightMessageQuoteOffset = -1;
        this.showNoQuoteAlert = false;
        updateVisibleRows();
        this.unselectRunnable = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void removeSelectedMessageHighlight() {
        if (this.highlightMessageQuote == null && this.highlightTaskId == null) {
            Runnable runnable = this.unselectRunnable;
            if (runnable != null) {
                AndroidUtilities.cancelRunOnUIThread(runnable);
                this.unselectRunnable = null;
            }
            this.highlightMessageId = ConnectionsManager.DEFAULT_DATACENTER_ID;
            this.highlightMessageQuoteFirst = false;
            this.highlightMessageQuoteFirstTime = 0L;
            this.highlightMessageQuote = null;
            this.highlightTaskId = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void resetProgressDialogLoading() {
        this.progressDialogLinkSpan = null;
        this.progressDialogAtMessageId = 0;
        this.progressDialogAtMessageType = -1;
        this.progressDialogBotButtonUrl = null;
        this.progressDialogCurrent = null;
        this.sideControlsButtonsLayout.setButtonLoading(0, false, true);
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public void scrollToMessageId(int i, int i2, boolean z, int i3, boolean z2, int i4) {
        scrollToMessageId(i, i2, z, i3, z2, i4, null, null);
    }

    /* JADX WARN: Removed duplicated region for block: B:111:0x01e9 A[LOOP:0: B:80:0x0143->B:111:0x01e9, LOOP_END] */
    /* JADX WARN: Removed duplicated region for block: B:115:0x0230  */
    /* JADX WARN: Removed duplicated region for block: B:117:0x0233  */
    /* JADX WARN: Removed duplicated region for block: B:151:0x0308  */
    /* JADX WARN: Removed duplicated region for block: B:157:0x031f  */
    /* JADX WARN: Removed duplicated region for block: B:165:0x01aa A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:25:0x005a  */
    /* JADX WARN: Removed duplicated region for block: B:33:0x006b  */
    /* JADX WARN: Removed duplicated region for block: B:63:0x00e3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void scrollToMessageId(int r27, int r28, boolean r29, int r30, boolean r31, int r32, java.lang.Integer r33, java.lang.Runnable r34) {
        /*
            Method dump skipped, instructions count: 852
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.scrollToMessageId(int, int, boolean, int, boolean, int, java.lang.Integer, java.lang.Runnable):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$scrollToMessageId$161() {
        int i = this.nextScrollToMessageId;
        if (i != 0) {
            scrollToMessageId(i, this.nextScrollFromMessageId, this.nextScrollSelect, this.nextScrollLoadIndex, this.nextScrollForce, this.nextScrollForcePinnedMessageId);
            this.nextScrollToMessageId = 0;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$scrollToMessageId$162(DialogInterface dialogInterface) {
        showPinnedProgress(false);
    }

    private void showPinnedProgress(boolean z) {
        if (z) {
            if (this.updatePinnedProgressRunnable == null) {
                Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda141
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$showPinnedProgress$163();
                    }
                };
                this.updatePinnedProgressRunnable = runnable;
                AndroidUtilities.runOnUIThread(runnable, 100L);
                return;
            }
            return;
        }
        Runnable runnable2 = this.updatePinnedProgressRunnable;
        if (runnable2 != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable2);
        }
        this.updatePinnedProgressRunnable = null;
        this.pinnedProgressIsShowing = false;
        updatePinnedListButton(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showPinnedProgress$163() {
        this.pinnedProgressIsShowing = true;
        updatePinnedListButton(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updatePagedownButtonVisibility(boolean z) {
        if (this.sideControlsButtonsLayout == null) {
            return;
        }
        boolean z2 = (!this.canShowPagedownButton || this.textSelectionHelper.isInSelectionMode() || this.chatActivityEnterView.isRecordingAudioVideo() || this.isInsideContainer || (this.searching && !getMediaDataController().searchResultMessages.isEmpty())) ? false : true;
        if (z2) {
            if (z && (this.openAnimationStartTime == 0 || SystemClock.elapsedRealtime() < this.openAnimationStartTime + 150)) {
                z = false;
            }
            this.pagedownButtonShowedByScroll = false;
        } else {
            this.returnToMessageIdStack.clear();
            this.newUnreadMessageCount = 0;
        }
        this.sideControlsButtonsLayout.showButton(0, z2, z);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateSearchUpDownButtonVisibility(boolean z) {
        if (this.sideControlsButtonsLayout == null) {
            return;
        }
        boolean z2 = !(getMediaDataController().searchResultMessages.isEmpty() || !this.searching || this.searchingFiltered) || (this.chatMode == 7 && this.searchType == 2 && !this.messages.isEmpty());
        this.sideControlsButtonsLayout.showButton(4, z2, z);
        this.sideControlsButtonsLayout.showButton(3, z2, z);
        if (z2) {
            this.sideControlsButtonsLayout.showButton(0, false, z);
        }
        if (!z2) {
            this.returnToMessageIdStack.clear();
        }
        this.contentView.invalidate();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showMentionDownButton(boolean z, boolean z2) {
        ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout = this.sideControlsButtonsLayout;
        if (chatActivitySideControlsButtonsLayout == null) {
            return;
        }
        chatActivitySideControlsButtonsLayout.showButton(1, z && !ChatObject.isMonoForum(this.currentChat), z2);
        if (z) {
            return;
        }
        this.returnToMessageIdStack.clear();
    }

    public boolean isShouldHaveLightNavigationBarIcons() {
        if (!this.shouldHaveLightNavigationBarIcons) {
            return false;
        }
        if (!this.windowInsetsStateHolder.inAppViewIsVisible()) {
            return true;
        }
        ThemeDelegate themeDelegate = this.themeDelegate;
        return themeDelegate != null && themeDelegate.isDark;
    }

    public class ChatActivityFragmentView extends SizeNotifierFrameLayout {
        int backgroundColor;
        Paint backgroundPaint;
        ArrayList drawCaptionAfter;
        ArrayList drawNamesAfter;
        ArrayList drawReactionsAfter;
        ArrayList drawTimeAfter;
        int inputFieldHeight;
        int lastHeight;
        int lastWidth;
        private boolean pressActionBar;
        private long pressTime;
        private final RectF tmpViewRectF;

        /* renamed from: x */
        private float f1829x;

        /* renamed from: y */
        private float f1830y;

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        public void invalidateBlur() {
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected boolean invalidateOptimized() {
            return true;
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        public void updateBlurContent() {
        }

        public ChatActivity getChatActivity() {
            return ChatActivity.this;
        }

        public ChatActivityFragmentView(Context context, INavigationLayout iNavigationLayout) {
            super(context, iNavigationLayout);
            this.inputFieldHeight = 0;
            this.drawTimeAfter = new ArrayList();
            this.drawNamesAfter = new ArrayList();
            this.drawCaptionAfter = new ArrayList();
            this.drawReactionsAfter = new ArrayList();
            this.tmpViewRectF = new RectF();
            this.adjustPanLayoutHelper = new AdjustPanLayoutHelper(this) { // from class: org.telegram.ui.ChatActivity.ChatActivityFragmentView.1
                @Override // org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper
                protected void onTransitionStart(boolean z, int i) {
                    ChatActivity.this.wasManualScroll = true;
                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                    if (chatActivityEnterView != null) {
                        chatActivityEnterView.onAdjustPanTransitionStart(z, i);
                    }
                    MentionsContainerView unused = ChatActivity.this.mentionContainer;
                    if (ChatActivity.this.mediaBanTooltip != null) {
                        ChatActivity.this.mediaBanTooltip.hide(false);
                    }
                    if (ChatActivity.this.factCheckHint != null) {
                        ChatActivity.this.factCheckHint.hide();
                    }
                }

                @Override // org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper
                protected void onTransitionEnd() {
                    ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                    if (chatActivityEnterView != null) {
                        chatActivityEnterView.onAdjustPanTransitionEnd();
                    }
                    MentionsContainerView unused = ChatActivity.this.mentionContainer;
                    if (ChatActivity.this.voiceHintTextView == null || ChatActivity.this.voiceHintTextView.getVisibility() != 0) {
                        return;
                    }
                    ChatActivity.this.voiceHintTextView.showForView(ChatActivity.this.chatActivityEnterView.getAudioVideoButtonContainer(), false);
                }

                @Override // org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper
                protected void onPanTranslationUpdate(float f, float f2, boolean z) {
                    if (ChatActivity.this.getParentLayout() == null || !ChatActivity.this.getParentLayout().isPreviewOpenAnimationInProgress()) {
                        ChatActivity.this.contentPanTranslation = f;
                        ChatActivity.this.contentPanTranslationT = f2;
                        ChatActivityFragmentView chatActivityFragmentView = ChatActivity.this.contentView;
                        if (chatActivityFragmentView != null) {
                            chatActivityFragmentView.updateBlurContent();
                        }
                        ChatAttachAlert chatAttachAlert = ChatActivity.this.chatAttachAlert;
                        if (chatAttachAlert == null || !chatAttachAlert.isShowing()) {
                            ((BaseFragment) ChatActivity.this).actionBar.setTranslationY(f);
                            if (ChatActivity.this.tagSelector != null) {
                                ChatActivity.this.tagSelector.setTranslationY(ChatActivity.this.contentPanTranslation + (ChatActivity.this.actionBarSearchTags != null ? r3.getCurrentHeight() : 0));
                            }
                            if (ChatActivity.this.savedMessagesSearchHint != null) {
                                ChatActivity.this.savedMessagesSearchHint.setTranslationY(f);
                            }
                            if (ChatActivity.this.savedMessagesHint != null) {
                                ChatActivity.this.savedMessagesHint.setTranslationY(f);
                            }
                            SearchTagsList searchTagsList = ChatActivity.this.actionBarSearchTags;
                            if (searchTagsList != null) {
                                searchTagsList.setTranslationY(f);
                            }
                            TopicsTabsView topicsTabsView = ChatActivity.this.topicsTabs;
                            if (topicsTabsView != null) {
                                topicsTabsView.setTranslationY(f);
                            }
                            ChatSearchTabs chatSearchTabs = ChatActivity.this.hashtagSearchTabs;
                            if (chatSearchTabs != null) {
                                chatSearchTabs.setTranslationY(f);
                            }
                            if (ChatActivity.this.emptyViewContainer != null) {
                                ChatActivity.this.emptyViewContainer.setTranslationY(f / 2.0f);
                            }
                            if (ChatActivity.this.hashtagHistoryView != null) {
                                ChatActivity.this.hashtagHistoryView.setTranslationY(ChatActivity.this.getHashtagTabsHeight() + f);
                                ChatActivity.this.hashtagHistoryView.emptyView.setTranslationY((-f) / 2.0f);
                            }
                            if (ChatActivity.this.messagesSearchListContainer != null) {
                                ChatActivity.this.messagesSearchListContainer.setTranslationY(ChatActivity.this.getHashtagTabsHeight() + f);
                            }
                            if (ChatActivity.this.hashtagSearchEmptyView != null) {
                                ChatActivity.this.hashtagSearchEmptyView.setTranslationY((-f) / 2.0f);
                            }
                            if (ChatActivity.this.searchViewPager != null) {
                                View currentView = ChatActivity.this.searchViewPager.getCurrentView();
                                if (currentView instanceof ChatActivityContainer) {
                                    ChatActivity chatActivity = ((ChatActivityContainer) currentView).chatActivity;
                                    if (chatActivity.messagesSearchListContainer != null) {
                                        chatActivity.messagesSearchListContainer.setTranslationY(ChatActivity.this.getHashtagTabsHeight() + f);
                                    }
                                    if (chatActivity.hashtagSearchEmptyView != null) {
                                        chatActivity.hashtagSearchEmptyView.setTranslationY((-f) / 2.0f);
                                    }
                                }
                            }
                            ChatActivity.this.progressView.setTranslationY(f / 2.0f);
                            int i = (int) f;
                            ChatActivity.this.contentView.setBackgroundTranslation(i);
                            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
                            if (instantCameraView != null) {
                                instantCameraView.onPanTranslationUpdate(f);
                            }
                            if (ChatActivity.this.blurredView != null) {
                                ChatActivity.this.blurredView.drawable.onPanTranslationUpdate(f);
                            }
                            ChatActivity.this.setFragmentPanTranslationOffset(i);
                            ChatActivity.this.invalidateChatListViewTopPadding();
                            ChatActivity.this.invalidateMessagesVisiblePart();
                        } else {
                            ChatActivityFragmentView.this.setNonNoveTranslation(f);
                        }
                        ChatActivity.this.chatListView.invalidate();
                        ChatActivity.this.updateBulletinLayout();
                        ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                        if (chatActivityEnterView != null) {
                            chatActivityEnterView.onAdjustPanTransitionUpdate(f, f2, z);
                        }
                        MentionsContainerView unused = ChatActivity.this.mentionContainer;
                        if (AndroidUtilities.isTablet() && (ChatActivity.this.getParentActivity() instanceof LaunchActivity)) {
                            BaseFragment lastFragment = ((LaunchActivity) ChatActivity.this.getParentActivity()).getActionBarLayout().getLastFragment();
                            if (lastFragment instanceof DialogsActivity) {
                                ((DialogsActivity) lastFragment).setPanTranslationOffset(f);
                            }
                        }
                        if (ChatActivity.this.voiceHintTextView != null && ChatActivity.this.voiceHintTextView.getVisibility() == 0) {
                            ChatActivity.this.voiceHintTextView.showForView(ChatActivity.this.chatActivityEnterView.getAudioVideoButtonContainer(), false);
                        }
                        if (ChatActivity.this.fragmentContextView != null) {
                            ChatActivity.this.fragmentContextView.onPanTranslationUpdate(f);
                        }
                    }
                }

                @Override // org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper
                protected boolean heightAnimationEnabled() {
                    ChatAttachAlert chatAttachAlert;
                    INavigationLayout parentLayout = ChatActivity.this.getParentLayout();
                    ChatActivity chatActivity = ChatActivity.this;
                    if (chatActivity.isInsideContainer || ((BaseFragment) chatActivity).inPreviewMode || ((BaseFragment) ChatActivity.this).inBubbleMode || AndroidUtilities.isInMultiwindow || parentLayout == null || ChatActivity.this.fixedKeyboardHeight > 0 || System.currentTimeMillis() - ChatActivity.this.activityResumeTime < 250) {
                        return false;
                    }
                    if ((ChatActivity.this != parentLayout.getLastFragment() || !parentLayout.isTransitionAnimationInProgress()) && !parentLayout.isPreviewOpenAnimationInProgress() && !((BaseFragment) ChatActivity.this).isPaused) {
                        ChatActivity chatActivity2 = ChatActivity.this;
                        if (chatActivity2.openAnimationEnded && ((chatAttachAlert = chatActivity2.chatAttachAlert) == null || !chatAttachAlert.isShowing())) {
                            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
                            return chatActivityEnterView == null || chatActivityEnterView.getTrendingStickersAlert() == null || !ChatActivity.this.chatActivityEnterView.getTrendingStickersAlert().isShowing();
                        }
                    }
                    return false;
                }

                @Override // org.telegram.p023ui.ActionBar.AdjustPanLayoutHelper
                protected int startOffset() {
                    if (ChatActivityFragmentView.this.getKeyboardHeight() > AndroidUtilities.m1146dp(20.0f) || !ChatActivity.this.chatActivityEnterView.isPopupShowing()) {
                        return 0;
                    }
                    return ChatActivity.this.chatActivityEnterView.getEmojiPadding();
                }
            };
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        public void drawBlurRect(Canvas canvas, float f, Rect rect, Paint paint, boolean z) {
            Canvas canvas2;
            int iAlpha = Color.alpha(Theme.getColor(SharedConfig.getDevicePerformanceClass() == 2 ? Theme.key_chat_BlurAlpha : Theme.key_chat_BlurAlphaSlow, getResourceProvider()));
            int i = 255;
            if (iAlpha == 255 && ExteraConfig.forceBlur) {
                iAlpha = DataTypes.EMPTY;
            }
            BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode = ChatActivity.this.glassBackgroundSourceFrostedRenderNode;
            if (blurredBackgroundSourceRenderNode == null || iAlpha >= 255) {
                canvas2 = canvas;
            } else {
                canvas.save();
                canvas.translate(0.0f, -f);
                canvas2 = canvas;
                blurredBackgroundSourceRenderNode.draw(canvas2, rect.left, rect.top + f, rect.right, rect.bottom + f);
                canvas2.restore();
                i = iAlpha;
            }
            int alpha = paint.getAlpha();
            paint.setAlpha(i);
            canvas2.drawRect(rect, paint);
            paint.setAlpha(alpha);
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        public void onUpdateBackgroundDrawable(Drawable drawable) throws InterruptedException {
            super.onUpdateBackgroundDrawable(drawable);
            if (drawable instanceof MotionBackgroundDrawable) {
                ((MotionBackgroundDrawable) drawable).setFastRenderAllowed();
            }
            BlurredBackgroundSource blurredBackgroundSourceUpdateSourceFromBackgroundViewDrawable = ChatActivity.this.wallpaperBitmapProvider.updateSourceFromBackgroundViewDrawable(drawable);
            ChatActivity.this.shouldHaveLightNavigationBarIcons = AndroidUtilities.computePerceivedBrightness(ChatActivity.this.wallpaperBitmapProvider.getNavigationBarColor(blurredBackgroundSourceUpdateSourceFromBackgroundViewDrawable)) <= 0.9f;
            ChatActivity.this.navbarContentSourceWallpaper.setSource(blurredBackgroundSourceUpdateSourceFromBackgroundViewDrawable);
            if (ChatActivity.this.chatInputViewsContainer != null) {
                ChatActivity.this.chatInputViewsContainer.invalidate();
                ChatActivity.this.chatInputViewsContainer.getFadeView().invalidate();
            }
            ChatActivity.this.invalidateAllGlassAttachedViews();
            ChatActivity.this.checkSystemBarColors();
        }

        public void drawList(Canvas canvas, RectF rectF) {
            long jUptimeMillis = SystemClock.uptimeMillis();
            canvas.save();
            canvas.clipRect(rectF);
            canvas.translate(0.0f, ChatActivity.this.chatListView.getY());
            ChatActivity.this.chatListView.drawChatBackgroundElements(canvas);
            for (int i = 0; i < ChatActivity.this.chatListView.getChildCount(); i++) {
                View childAt = ChatActivity.this.chatListView.getChildAt(i);
                this.tmpViewRectF.set(childAt.getX(), childAt.getY() + ChatActivity.this.chatListView.getY(), childAt.getX() + childAt.getWidth(), childAt.getY() + ChatActivity.this.chatListView.getY() + childAt.getHeight());
                if (this.tmpViewRectF.intersect(rectF)) {
                    if (childAt instanceof ChatMessageCell) {
                        canvas.save();
                        canvas.translate(childAt.getX(), childAt.getY());
                        ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                        if (chatMessageCell.drawBackgroundInParent()) {
                            canvas.save();
                            canvas.translate(0.0f, chatMessageCell.starsPriceTopPadding);
                            chatMessageCell.drawBackgroundInternal(canvas, true);
                            canvas.restore();
                        }
                        canvas.restore();
                        ChatActivity.this.chatListView.drawChild(canvas, childAt, jUptimeMillis);
                        if (chatMessageCell.hasOutboundsContent()) {
                            canvas.save();
                            canvas.translate(chatMessageCell.getX(), chatMessageCell.getY());
                            chatMessageCell.drawOutboundsContent(canvas);
                            canvas.restore();
                        }
                    } else if (childAt instanceof ChatActionCell) {
                        ChatActivity.this.chatListView.drawChild(canvas, childAt, jUptimeMillis);
                        canvas.save();
                        canvas.translate(childAt.getX(), childAt.getY());
                        ((ChatActionCell) childAt).drawOutboundsContent(canvas);
                        canvas.restore();
                    } else {
                        ChatActivity.this.chatListView.drawChild(canvas, childAt, jUptimeMillis);
                    }
                }
            }
            ChatActivity.this.chatListView.drawChatForegroundElements(canvas);
            canvas.restore();
        }

        @Override // android.view.ViewGroup
        public void addView(View view, int i, ViewGroup.LayoutParams layoutParams) {
            ChatActivityEnterView.ControlsView controlsView;
            super.addView(view, i, layoutParams);
            ChatActivity chatActivity = ChatActivity.this;
            ChatActivityEnterView chatActivityEnterView = chatActivity.chatActivityEnterView;
            if (chatActivityEnterView != null && view == chatActivityEnterView.botCommandsMenuContainer) {
                BotCommandsMenuContainer botCommandsMenuContainer = (BotCommandsMenuContainer) view;
                botCommandsMenuContainer.setBackgroundDrawable(chatActivity.glassBackgroundDrawableFactory.create(botCommandsMenuContainer.listView, ChatActivity.this.blurredBackgroundColorProviderWhite));
            }
            ChatActivity chatActivity2 = ChatActivity.this;
            ChatActivityEnterView chatActivityEnterView2 = chatActivity2.chatActivityEnterView;
            if (chatActivityEnterView2 == null || view != (controlsView = chatActivityEnterView2.controlsView)) {
                return;
            }
            controlsView.setBlurredBackgroundFactory(chatActivity2.glassBackgroundDrawableFactory);
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected int getScrollOffset() {
            return ChatActivity.this.chatListView.computeVerticalScrollOffset();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected float getBottomOffset() {
            return ChatActivity.this.chatListView.getBottom();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected float getListTranslationY() {
            return ChatActivity.this.chatListView.getTranslationY();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout, android.view.ViewGroup, android.view.View
        protected void onAttachedToWindow() {
            super.onAttachedToWindow();
            ChatActivity chatActivity = ChatActivity.this;
            if (!chatActivity.isInsideContainer) {
                if (((BaseFragment) chatActivity).parentLayout != null && ((BaseFragment) ChatActivity.this).parentLayout.isSheet()) {
                    this.adjustPanLayoutHelper.setResizableView((FrameLayout) ((BaseFragment) ChatActivity.this).parentLayout.getView().getParent().getParent().getParent().getParent());
                }
            } else {
                this.adjustPanLayoutHelper.setResizableView(chatActivity.contentView);
            }
            this.adjustPanLayoutHelper.onAttach();
            ChatActivity.this.chatActivityEnterView.setAdjustPanLayoutHelper(this.adjustPanLayoutHelper);
            MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
            if (playingMessageObject != null && ((playingMessageObject.isRoundVideo() || playingMessageObject.isVideo()) && playingMessageObject.eventId == 0 && playingMessageObject.getDialogId() == ChatActivity.this.dialog_id)) {
                MediaController.getInstance().setTextureView(ChatActivity.this.createTextureView(false), ChatActivity.this.aspectRatioFrameLayout, ChatActivity.this.videoPlayerContainer, true);
            }
            if (ChatActivity.this.pullingDownDrawable != null) {
                ChatActivity.this.pullingDownDrawable.onAttach();
            }
            ChatActivity.this.emojiAnimationsOverlay.onAttachedToWindow();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout, android.view.ViewGroup, android.view.View
        protected void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            this.adjustPanLayoutHelper.onDetach();
            if (ChatActivity.this.pullingDownDrawable != null) {
                ChatActivity.this.pullingDownDrawable.onDetach();
                ChatActivity.this.pullingDownDrawable = null;
            }
            ChatActivity.this.emojiAnimationsOverlay.onDetachedFromWindow();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityFragmentView$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    ReactionsEffectOverlay.removeCurrent(true);
                }
            });
        }

        /* JADX WARN: Removed duplicated region for block: B:88:0x0212  */
        /* JADX WARN: Removed duplicated region for block: B:91:0x024f  */
        @Override // android.view.ViewGroup, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean dispatchTouchEvent(android.view.MotionEvent r19) {
            /*
                Method dump skipped, instructions count: 759
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityFragmentView.dispatchTouchEvent(android.view.MotionEvent):boolean");
        }

        @Override // android.view.View
        protected void onDraw(Canvas canvas) {
            if (getTag(67108867) != null) {
                return;
            }
            if (getTag(67108867) != null || ChatActivity.this.blurredView == null || !ChatActivity.this.blurredView.fullyDrawing() || ChatActivity.this.blurredView.getTag() == null) {
                super.onDraw(canvas);
            }
        }

        /* JADX WARN: Code restructure failed: missing block: B:23:0x0055, code lost:
        
            if (r10 != r8.this$0.topUndoView) goto L25;
         */
        /* JADX WARN: Code restructure failed: missing block: B:66:0x00f2, code lost:
        
            return false;
         */
        /* JADX WARN: Removed duplicated region for block: B:116:0x0248  */
        /* JADX WARN: Removed duplicated region for block: B:154:0x0364  */
        /* JADX WARN: Removed duplicated region for block: B:97:0x0166  */
        @Override // android.view.ViewGroup
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected boolean drawChild(android.graphics.Canvas r9, android.view.View r10, long r11) {
            /*
                Method dump skipped, instructions count: 919
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityFragmentView.drawChild(android.graphics.Canvas, android.view.View, long):boolean");
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected boolean isActionBarVisible() {
            return ((BaseFragment) ChatActivity.this).actionBar.getVisibility() == 0;
        }

        private void drawChildElement(Canvas canvas, float f, ChatMessageCell chatMessageCell, int i) {
            Canvas canvas2;
            ChatMessageCell chatMessageCell2;
            int iSave = canvas.save();
            float left = ChatActivity.this.chatListView.getLeft() + chatMessageCell.getX();
            float y = ChatActivity.this.chatListView.getY() + chatMessageCell.getY() + chatMessageCell.getPaddingTop();
            float alpha = chatMessageCell.shouldDrawAlphaLayer() ? chatMessageCell.getAlpha() : 1.0f;
            float left2 = ChatActivity.this.chatListView.getLeft();
            float right = ChatActivity.this.chatListView.getRight();
            float y2 = ChatActivity.this.chatListView.getY() + ChatActivity.this.chatListView.getMeasuredHeight();
            ChatActivity chatActivity = ChatActivity.this;
            canvas.clipRect(left2, f, right, (((y2 - chatActivity.blurredViewBottomOffset) - chatActivity.windowInsetsStateHolder.getCurrentMaxBottomInset()) - ChatActivity.this.inputIslandHeightCurrent) - AndroidUtilities.m1146dp(9.0f));
            canvas.translate(left, y);
            chatMessageCell.setInvalidatesParent(true);
            if (i == 0) {
                chatMessageCell.drawTime(canvas, alpha, true);
            } else if (i == 1) {
                chatMessageCell.drawNamesLayout(canvas, alpha);
            } else if (i == 2) {
                chatMessageCell.drawCaptionLayout(canvas, chatMessageCell.getCurrentPosition() != null && (chatMessageCell.getCurrentPosition().flags & 1) == 0, alpha);
            } else if (i == 3) {
                boolean z = chatMessageCell.getCurrentPosition() != null && (chatMessageCell.getCurrentPosition().flags & 1) == 0;
                chatMessageCell.drawCommentLayout(canvas, alpha);
                if (!z) {
                    chatMessageCell.drawReactionsLayout(canvas, alpha, null);
                }
            } else {
                if (i == 4 && ((chatMessageCell.getCurrentPosition() == null || (1 & chatMessageCell.getCurrentPosition().flags) != 0) && ChatActivity.this.scrimViewReaction != null)) {
                    float f2 = (ChatActivity.this.scrimPaintAlpha * ChatActivity.this.scrimViewAlpha) / 0.2f;
                    canvas.save();
                    chatMessageCell.drawScrimReaction(canvas, ChatActivity.this.scrimViewReaction, f2, ChatActivity.this.scrimProgressDirection);
                    canvas.restore();
                    canvas.restore();
                    canvas.save();
                    canvas.translate(left, y);
                    canvas2 = canvas;
                    chatMessageCell2 = chatMessageCell;
                    chatMessageCell2.drawScrimReactionPreview(this, canvas2, ChatActivity.this.scrimViewReactionOffset, ChatActivity.this.scrimViewReaction, f2);
                    canvas2.restore();
                }
                chatMessageCell2.setInvalidatesParent(false);
                canvas2.restoreToCount(iSave);
            }
            canvas2 = canvas;
            chatMessageCell2 = chatMessageCell;
            chatMessageCell2.setInvalidatesParent(false);
            canvas2.restoreToCount(iSave);
        }

        /* JADX WARN: Removed duplicated region for block: B:305:0x0ab1  */
        /* JADX WARN: Removed duplicated region for block: B:398:0x0f3a  */
        /* JADX WARN: Removed duplicated region for block: B:399:0x0f98  */
        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout, android.view.ViewGroup, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void dispatchDraw(android.graphics.Canvas r33) {
            /*
                Method dump skipped, instructions count: 4803
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityFragmentView.dispatchDraw(android.graphics.Canvas):void");
        }

        /* JADX WARN: Removed duplicated region for block: B:133:0x033f  */
        /* JADX WARN: Removed duplicated region for block: B:144:0x038b  */
        /* JADX WARN: Removed duplicated region for block: B:234:0x060f  */
        @Override // android.widget.FrameLayout, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void onMeasure(int r21, int r22) {
            /*
                Method dump skipped, instructions count: 1859
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityFragmentView.onMeasure(int, int):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onMeasure$1(int i) {
            ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(i, ChatActivity.this.scrollToOffsetOnRecreate);
        }

        @Override // android.view.View, android.view.ViewParent
        public void requestLayout() {
            if (ChatActivity.this.globalIgnoreLayout) {
                return;
            }
            super.requestLayout();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        public int getKeyboardHeight() {
            if (ChatActivity.this.isInsideContainer) {
                return 0;
            }
            return super.getKeyboardHeight();
        }

        /* JADX WARN: Removed duplicated region for block: B:128:0x0232  */
        /* JADX WARN: Removed duplicated region for block: B:22:0x004f  */
        /* JADX WARN: Removed duplicated region for block: B:34:0x0089  */
        /* JADX WARN: Removed duplicated region for block: B:37:0x009c  */
        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout, android.widget.FrameLayout, android.view.ViewGroup, android.view.View
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        protected void onLayout(boolean r11, int r12, int r13, int r14, int r15) {
            /*
                Method dump skipped, instructions count: 688
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityFragmentView.onLayout(boolean, int, int, int, int):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public void setNonNoveTranslation(float f) {
            ChatActivity.this.contentView.setTranslationY(f);
            ((BaseFragment) ChatActivity.this).actionBar.setTranslationY(0.0f);
            if (ChatActivity.this.tagSelector != null) {
                ChatActivity.this.tagSelector.setTranslationY(ChatActivity.this.actionBarSearchTags != null ? r2.getCurrentHeight() : 0);
            }
            if (ChatActivity.this.savedMessagesSearchHint != null) {
                ChatActivity.this.savedMessagesSearchHint.setTranslationY(0.0f);
            }
            if (ChatActivity.this.savedMessagesHint != null) {
                ChatActivity.this.savedMessagesHint.setTranslationY(0.0f);
            }
            SearchTagsList searchTagsList = ChatActivity.this.actionBarSearchTags;
            if (searchTagsList != null) {
                searchTagsList.setTranslationY(0.0f);
            }
            TopicsTabsView topicsTabsView = ChatActivity.this.topicsTabs;
            if (topicsTabsView != null) {
                topicsTabsView.setTranslationY(0.0f);
            }
            ChatSearchTabs chatSearchTabs = ChatActivity.this.hashtagSearchTabs;
            if (chatSearchTabs != null) {
                chatSearchTabs.setTranslationY(0.0f);
            }
            ChatActivity.this.emptyViewContainer.setTranslationY(0.0f);
            ChatActivity.this.progressView.setTranslationY(0.0f);
            ChatActivity.this.contentPanTranslation = 0.0f;
            ChatActivity.this.contentPanTranslationT = 0.0f;
            ChatActivity.this.contentView.setBackgroundTranslation(0);
            ChatActivityFragmentView chatActivityFragmentView = ChatActivity.this.contentView;
            if (chatActivityFragmentView != null) {
                chatActivityFragmentView.updateBlurContent();
            }
            InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
            if (instantCameraView != null) {
                instantCameraView.onPanTranslationUpdate(0.0f);
            }
            if (ChatActivity.this.blurredView != null) {
                ChatActivity.this.blurredView.drawable.onPanTranslationUpdate(0.0f);
            }
            ChatActivity.this.setFragmentPanTranslationOffset(0);
            ChatActivity.this.invalidateChatListViewTopPadding();
        }

        @Override // android.view.View
        public void setPadding(int i, int i2, int i3, int i4) {
            ChatActivity.this.contentPaddingTop = i2;
            ChatActivity.this.invalidateChatListViewTopPadding();
            ChatActivity.this.invalidateMessagesVisiblePart();
        }

        @Override // android.view.ViewGroup, android.view.View
        public boolean dispatchKeyEvent(KeyEvent keyEvent) {
            MessagePreviewView messagePreviewView;
            if (keyEvent.getKeyCode() == 4 && keyEvent.getAction() == 1 && (messagePreviewView = ChatActivity.this.forwardingPreviewView) != null && messagePreviewView.isShowing()) {
                ChatActivity.this.forwardingPreviewView.dismiss(true);
                return true;
            }
            if (keyEvent.getKeyCode() == 111) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.editingMessageObject != null) {
                    chatActivity.replyCloseImageView.performClick();
                    return true;
                }
            }
            return super.dispatchKeyEvent(keyEvent);
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected Drawable getNewDrawable() {
            Drawable wallpaperDrawable = ChatActivity.this.themeDelegate.getWallpaperDrawable();
            return wallpaperDrawable != null ? wallpaperDrawable : super.getNewDrawable();
        }

        @Override // org.telegram.p023ui.Components.SizeNotifierFrameLayout
        protected boolean getNewDrawableMotion() {
            if (ChatActivity.this.themeDelegate.wallpaper == null) {
                return super.getNewDrawableMotion();
            }
            return ChatActivity.this.themeDelegate.wallpaper.settings != null && ChatActivity.this.themeDelegate.wallpaper.settings.motion;
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:45:0x0197  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void updateSecretStatus() {
        /*
            Method dump skipped, instructions count: 720
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateSecretStatus():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateSecretStatus$164(View view) {
        LimitReachedBottomSheet.openBoostsForRemoveRestrictions(this, this.boostsStatus, this.canApplyBoosts, this.dialog_id, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$updateSecretStatus$165(View view) {
        return AyuForward.stop(getDialogId());
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onRequestPermissionsResultFragment(int i, String[] strArr, int[] iArr) {
        ChatAttachAlert chatAttachAlert;
        ChatAttachAlert chatAttachAlert2;
        boolean z;
        ChatAttachAlert chatAttachAlert3;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.onRequestPermissionsResultFragment(i, strArr, iArr);
        }
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null && mentionsContainerView.getAdapter() != null) {
            this.mentionContainer.getAdapter().onRequestPermissionsResultFragment(i, strArr, iArr);
        }
        if (i == 4) {
            ChatAttachAlert chatAttachAlert4 = this.chatAttachAlert;
            if (chatAttachAlert4 != null) {
                chatAttachAlert4.getPhotoLayout().checkStorage();
            }
            ChatThemeBottomSheet chatThemeBottomSheet = this.chatThemeBottomSheet;
            if (chatThemeBottomSheet == null || (chatAttachAlert3 = chatThemeBottomSheet.chatAttachAlert) == null) {
                return;
            }
            chatAttachAlert3.getPhotoLayout().checkStorage();
            return;
        }
        if ((i == 5 || i == 30) && (chatAttachAlert = this.chatAttachAlert) != null) {
            chatAttachAlert.onRequestPermissionsResultFragment(i, strArr, iArr);
            return;
        }
        if ((i == 17 || i == 18) && (chatAttachAlert2 = this.chatAttachAlert) != null) {
            chatAttachAlert2.getPhotoLayout().checkCamera(iArr.length > 0 && iArr[0] == 0);
            this.chatAttachAlert.getPhotoLayout().checkStorage();
            return;
        }
        if (i == 21) {
            if (getParentActivity() == null || iArr == null || iArr.length == 0 || iArr[0] == 0) {
                return;
            }
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setTitle(LocaleController.getString(C2369R.string.AppName));
            builder.setMessage(LocaleController.getString(C2369R.string.PermissionNoAudioVideoWithHint));
            builder.setNegativeButton(LocaleController.getString(C2369R.string.PermissionOpenSettings), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda96
                @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                public final void onClick(AlertDialog alertDialog, int i2) {
                    this.f$0.lambda$onRequestPermissionsResultFragment$166(alertDialog, i2);
                }
            });
            builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), null);
            builder.show();
            return;
        }
        if (i == 19 && iArr != null && iArr.length > 0 && iArr[0] == 0) {
            processSelectedAttach(0);
            return;
        }
        if (i == 20 && iArr != null && iArr.length > 0 && iArr[0] == 0) {
            processSelectedAttach(2);
            return;
        }
        if (((i == 101 || i == 102) && this.currentUser != null) || (i == 103 && this.currentChat != null)) {
            int length = iArr.length;
            int i2 = 0;
            while (true) {
                if (i2 >= length) {
                    z = true;
                    break;
                } else {
                    if (iArr[i2] != 0) {
                        z = false;
                        break;
                    }
                    i2++;
                }
            }
            if (iArr.length <= 0 || !z) {
                VoIPHelper.permissionDenied(getParentActivity(), null, i);
                return;
            }
            if (i == 103) {
                VoIPHelper.startCall(this.currentChat, (TLRPC.InputPeer) null, (String) null, this.createGroupCall, getParentActivity(), this, getAccountInstance());
                return;
            }
            TLRPC.User user = this.currentUser;
            boolean z2 = i == 102;
            TLRPC.UserFull userFull = this.userInfo;
            VoIPHelper.startCall(user, z2, userFull != null && userFull.video_calls_available, getParentActivity(), getMessagesController().getUserFull(this.currentUser.f1734id), getAccountInstance());
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onRequestPermissionsResultFragment$166(AlertDialog alertDialog, int i) {
        try {
            Intent intent = new Intent("android.settings.APPLICATION_DETAILS_SETTINGS");
            intent.setData(Uri.parse("package:" + ApplicationLoader.applicationContext.getPackageName()));
            getParentActivity().startActivity(intent);
        } catch (Exception e) {
            FileLog.m1160e(e);
        }
    }

    private void checkActionBarMenu(boolean z) {
        TLRPC.User user;
        TLRPC.UserFull userFull;
        TLRPC.ChatFull chatFull;
        TLRPC.ChatFull chatFull2;
        TLRPC.EncryptedChat encryptedChat = this.currentEncryptedChat;
        if ((encryptedChat != null && !(encryptedChat instanceof TLRPC.TL_encryptedChat)) || ((this.currentChat != null && (this.chatMode != 0 || this.threadMessageId != 0 || (chatFull = this.chatInfo) == null || chatFull.ttl_period == 0)) || ((user = this.currentUser) != null && (UserObject.isDeleted(user) || (this.currentEncryptedChat == null && ((userFull = this.userInfo) == null || userFull.ttl_period == 0)))))) {
            ActionBarMenuItem.Item item = this.timeItem2;
            if (item != null) {
                item.setVisibility(8);
            }
            ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
            if (chatAvatarContainer != null) {
                chatAvatarContainer.hideTimeItem(z);
            }
        } else {
            ActionBarMenuItem.Item item2 = this.timeItem2;
            if (item2 != null) {
                item2.setVisibility(0);
            }
            ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
            if (chatAvatarContainer2 != null) {
                chatAvatarContainer2.showTimeItem(z);
            }
        }
        ActionBarMenuItem.Item item3 = this.viewAsTopics;
        if (item3 != null) {
            TLRPC.Chat chat = this.currentChat;
            item3.setVisibility((chat == null || !chat.forum) ? 8 : 0);
        }
        ChatAvatarContainer chatAvatarContainer3 = this.avatarContainer;
        boolean z2 = true;
        if (chatAvatarContainer3 != null) {
            TLRPC.Chat chat2 = this.currentChat;
            chatAvatarContainer3.setStars((chat2 == null || (chat2.flags2 & 2048) == 0) ? false : true, z);
            TLRPC.EncryptedChat encryptedChat2 = this.currentEncryptedChat;
            if (encryptedChat2 != null) {
                this.avatarContainer.setTime(encryptedChat2.ttl, z);
            } else {
                TLRPC.UserFull userFull2 = this.userInfo;
                if (userFull2 != null) {
                    this.avatarContainer.setTime(userFull2.ttl_period, z);
                } else {
                    TLRPC.ChatFull chatFull3 = this.chatInfo;
                    if (chatFull3 != null) {
                        this.avatarContainer.setTime(chatFull3.ttl_period, z);
                    }
                }
            }
        }
        if (this.clearHistoryItem != null && (chatFull2 = this.chatInfo) != null) {
            if (!chatFull2.can_delete_channel && ChatObject.isChannel(this.currentChat)) {
                TLRPC.Chat chat3 = this.currentChat;
                if (!chat3.megagroup || ChatObject.isPublic(chat3)) {
                    z2 = false;
                }
            }
            this.clearHistoryItem.setVisibility(z2 ? 0 : 8);
        }
        checkAndUpdateAvatar();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getMessageType(MessageObject messageObject) {
        String str;
        String str2;
        if (messageObject == null) {
            return -1;
        }
        boolean z = false;
        if (this.currentEncryptedChat == null) {
            if (messageObject.isEditing()) {
                return -1;
            }
            if (messageObject.getId() <= 0 && messageObject.isOut()) {
                if (messageObject.isSendError()) {
                    return !messageObject.isMediaEmpty() ? 0 : 20;
                }
                return -1;
            }
            if (messageObject.isAnimatedEmoji()) {
                return 2;
            }
            int i = messageObject.type;
            if (i == 6) {
                return -1;
            }
            if (i == 10 || i == 31 || i == 11 || i == 21 || i == 30 || messageObject.isWallpaperAction()) {
                return messageObject.getId() == 0 ? -1 : 1;
            }
            if (messageObject.isVoice()) {
                return 2;
            }
            if (messageObject.isSticker() || messageObject.isAnimatedSticker()) {
                TLRPC.InputStickerSet inputStickerSet = messageObject.getInputStickerSet();
                return inputStickerSet instanceof TLRPC.TL_inputStickerSetID ? !getMediaDataController().isStickerPackInstalled(inputStickerSet.f1596id) ? 7 : 9 : (!(inputStickerSet instanceof TLRPC.TL_inputStickerSetShortName) || getMediaDataController().isStickerPackInstalled(inputStickerSet.short_name)) ? 9 : 7;
            }
            if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TLRPC.TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
                if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                    z = true;
                }
                if ((z || !messageObject.mediaExists()) ? z : true) {
                    if (messageObject.getDocument() != null && !messageObject.isMusic() && (str2 = messageObject.getDocument().mime_type) != null) {
                        if (PreferencesUtils.getInstance().isBackup(messageObject)) {
                            return 30;
                        }
                        if (messageObject.getDocumentName().toLowerCase().endsWith("attheme")) {
                            return 10;
                        }
                        if (str2.endsWith("/xml")) {
                            return 5;
                        }
                        if ((!messageObject.isNewGif() && str2.endsWith("/mp4")) || str2.endsWith("/png") || str2.endsWith("/jpg") || str2.endsWith("/jpeg")) {
                            return 6;
                        }
                    }
                    return 4;
                }
            } else {
                if (messageObject.type == 12) {
                    return 8;
                }
                if (messageObject.isMediaEmpty()) {
                    return 3;
                }
            }
            return 2;
        }
        if (messageObject.isSending()) {
            return -1;
        }
        if (messageObject.isAnimatedEmoji()) {
            return 2;
        }
        if (messageObject.type == 6) {
            return -1;
        }
        if (messageObject.isSendError()) {
            return !messageObject.isMediaEmpty() ? 0 : 20;
        }
        int i2 = messageObject.type;
        if (i2 == 10 || i2 == 11) {
            return (messageObject.getId() == 0 || messageObject.isSending()) ? -1 : 1;
        }
        if (messageObject.isVoice()) {
            return 2;
        }
        if (!messageObject.isAnimatedEmoji() && (messageObject.isSticker() || messageObject.isAnimatedSticker())) {
            TLRPC.InputStickerSet inputStickerSet2 = messageObject.getInputStickerSet();
            if ((inputStickerSet2 instanceof TLRPC.TL_inputStickerSetShortName) && !getMediaDataController().isStickerPackInstalled(inputStickerSet2.short_name)) {
                return 7;
            }
        } else if (!messageObject.isRoundVideo() && ((messageObject.messageOwner.media instanceof TLRPC.TL_messageMediaPhoto) || messageObject.getDocument() != null || messageObject.isMusic() || messageObject.isVideo())) {
            if (!TextUtils.isEmpty(messageObject.messageOwner.attachPath) && new File(messageObject.messageOwner.attachPath).exists()) {
                z = true;
            }
            if ((z || !FileLoader.getInstance(this.currentAccount).getPathToMessage(messageObject.messageOwner).exists()) ? z : true) {
                if (messageObject.getDocument() != null && (str = messageObject.getDocument().mime_type) != null && str.endsWith("text/xml")) {
                    return 5;
                }
                if (messageObject.messageOwner.ttl <= 0) {
                    return 4;
                }
            }
        } else {
            if (messageObject.type == 12) {
                return 8;
            }
            if (messageObject.isMediaEmpty()) {
                return 3;
            }
        }
        return 2;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void addToSelectedMessages(MessageObject messageObject, boolean z) {
        addToSelectedMessages(messageObject, z, true);
    }

    /* JADX WARN: Removed duplicated region for block: B:344:0x0561  */
    /* JADX WARN: Removed duplicated region for block: B:389:0x061c  */
    /* JADX WARN: Removed duplicated region for block: B:396:0x0641  */
    /* JADX WARN: Removed duplicated region for block: B:398:0x0646  */
    /* JADX WARN: Removed duplicated region for block: B:401:0x0657  */
    /* JADX WARN: Removed duplicated region for block: B:421:0x06dd  */
    /* JADX WARN: Removed duplicated region for block: B:439:0x077b  */
    /* JADX WARN: Removed duplicated region for block: B:446:0x0795  */
    /* JADX WARN: Removed duplicated region for block: B:480:0x07ee  */
    /* JADX WARN: Removed duplicated region for block: B:525:0x0850  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void addToSelectedMessages(org.telegram.messenger.MessageObject r30, boolean r31, boolean r32) {
        /*
            Method dump skipped, instructions count: 2137
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.addToSelectedMessages(org.telegram.messenger.MessageObject, boolean, boolean):void");
    }

    /* JADX WARN: Removed duplicated region for block: B:20:0x004b  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void updateSelectedMessageReactions() {
        /*
            r7 = this;
            long r0 = r7.getDialogId()
            org.telegram.messenger.UserConfig r2 = r7.getUserConfig()
            long r2 = r2.getClientUserId()
            r4 = 0
            r5 = 1
            int r6 = (r0 > r2 ? 1 : (r0 == r2 ? 0 : -1))
            if (r6 != 0) goto La4
            java.util.ArrayList r0 = new java.util.ArrayList
            r0.<init>()
            r1 = 0
        L18:
            org.telegram.ui.ChatActivity$SparseArrayWithTouch[] r2 = r7.selectedMessagesIds
            int r2 = r2.length
            if (r1 >= r2) goto L54
            r2 = 0
        L1e:
            org.telegram.ui.ChatActivity$SparseArrayWithTouch[] r3 = r7.selectedMessagesIds
            r3 = r3[r1]
            int r3 = r3.size()
            if (r2 >= r3) goto L51
            org.telegram.ui.ChatActivity$SparseArrayWithTouch[] r3 = r7.selectedMessagesIds
            r3 = r3[r1]
            java.lang.Object r3 = r3.valueAt(r2)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            boolean r6 = r3.hasValidGroupId()
            if (r6 == 0) goto L4b
            org.telegram.messenger.MessageObject$GroupedMessages r6 = r7.getValidGroupedMessage(r3)
            if (r6 == 0) goto L43
            org.telegram.messenger.MessageObject$GroupedMessagePosition r6 = r6.getPosition(r3)
            goto L44
        L43:
            r6 = 0
        L44:
            if (r6 == 0) goto L4e
            boolean r6 = r6.last
            if (r6 != 0) goto L4b
            goto L4e
        L4b:
            r0.add(r3)
        L4e:
            int r2 = r2 + 1
            goto L1e
        L51:
            int r1 = r1 + 1
            goto L18
        L54:
            org.telegram.ui.Components.ReactionsContainerLayout r1 = r7.tagSelector
            if (r1 == 0) goto L82
            r1.setSelectedReactionsInclusive(r0)
            org.telegram.ui.Components.ReactionsContainerLayout r0 = r7.tagSelector
            java.util.HashSet r0 = r0.getSelectedReactions()
            boolean r0 = r0.isEmpty()
            r1 = r0 ^ 1
            org.telegram.ui.Components.ReactionsContainerLayout r2 = r7.tagSelector
            if (r0 == 0) goto L6e
            int r0 = org.telegram.messenger.C2369R.string.SavedTagReactionsSelectedAddHint
            goto L70
        L6e:
            int r0 = org.telegram.messenger.C2369R.string.SavedTagReactionsSelectedEditHint
        L70:
            java.lang.String r0 = org.telegram.messenger.LocaleController.getString(r0)
            r2.setHint(r0)
            org.telegram.ui.ChatActivity$$ExternalSyntheticLambda142 r0 = new org.telegram.ui.ChatActivity$$ExternalSyntheticLambda142
            r0.<init>()
            r2 = 120(0x78, double:5.93E-322)
            org.telegram.messenger.AndroidUtilities.runOnUIThread(r0, r2)
            goto L8c
        L82:
            java.util.HashSet r0 = org.telegram.p023ui.Components.ReactionsContainerLayout.getInclusiveReactions(r0)
            boolean r0 = r0.isEmpty()
            r1 = r0 ^ 1
        L8c:
            org.telegram.ui.ActionBar.ActionBar r0 = r7.actionBar
            org.telegram.ui.ActionBar.ActionBarMenu r0 = r0.createActionMode()
            r2 = 28
            org.telegram.ui.ActionBar.ActionBarMenuItem r0 = r0.getItem(r2)
            if (r0 == 0) goto La4
            if (r1 == 0) goto L9f
            int r1 = org.telegram.messenger.C2369R.drawable.menu_tag_edit
            goto La1
        L9f:
            int r1 = org.telegram.messenger.C2369R.drawable.menu_tag_plus
        La1:
            r0.setIcon(r1, r5)
        La4:
            boolean r0 = com.exteragram.messenger.ExteraConfig.hideReactions
            if (r0 == 0) goto La9
            goto Le4
        La9:
            org.telegram.ui.Components.Reactions.ChatSelectionReactionMenuOverlay r0 = r7.selectionReactionsOverlay
            if (r0 == 0) goto Le4
            java.util.ArrayList r0 = new java.util.ArrayList
            r0.<init>()
            org.telegram.ui.ChatActivity$SparseArrayWithTouch[] r1 = r7.selectedMessagesIds
            r1 = r1[r4]
            r2 = 0
        Lb7:
            int r3 = r1.size()
            if (r2 >= r3) goto Lc9
            java.lang.Object r3 = r1.valueAt(r2)
            org.telegram.messenger.MessageObject r3 = (org.telegram.messenger.MessageObject) r3
            r0.add(r3)
            int r2 = r2 + 1
            goto Lb7
        Lc9:
            org.telegram.ui.ChatActivity$SparseArrayWithTouch[] r1 = r7.selectedMessagesIds
            r1 = r1[r5]
        Lcd:
            int r2 = r1.size()
            if (r4 >= r2) goto Ldf
            java.lang.Object r2 = r1.valueAt(r4)
            org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
            r0.add(r2)
            int r4 = r4 + 1
            goto Lcd
        Ldf:
            org.telegram.ui.Components.Reactions.ChatSelectionReactionMenuOverlay r1 = r7.selectionReactionsOverlay
            r1.setSelectedMessages(r0)
        Le4:
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateSelectedMessageReactions():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateSelectedMessageReactions$167() {
        ReactionsContainerLayout reactionsContainerLayout = this.tagSelector;
        if (reactionsContainerLayout != null) {
            reactionsContainerLayout.requestLayout();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void processRowSelect(View view, boolean z, float f, float f2) {
        MessageObject messageObject;
        int i;
        if (view instanceof ChatMessageCell) {
            ChatMessageCell chatMessageCell = (ChatMessageCell) view;
            messageObject = chatMessageCell.getMessageObject();
            chatMessageCell.setLastTouchCoords(f, f2);
        } else if (view instanceof ChatActionCell) {
            messageObject = ((ChatActionCell) view).getMessageObject();
        } else if (view instanceof DummyView) {
            return;
        } else {
            messageObject = null;
        }
        int messageType = getMessageType(messageObject);
        if ((messageObject == null || !messageObject.isAnyGift()) && messageType >= 2 && messageType != 20 && messageType != 21) {
            if (messageObject == null || !((i = messageObject.type) == 27 || i == 30)) {
                if (messageObject == null || !messageObject.isWallpaperAction()) {
                    addToSelectedMessages(messageObject, z);
                    if (!isReport() && messageObject != null) {
                        ArrayList arrayList = new ArrayList();
                        int i2 = 1;
                        while (true) {
                            if (i2 < 0) {
                                break;
                            }
                            for (int i3 = 0; i3 < this.selectedMessagesIds[i2].size(); i3++) {
                                arrayList.add(Integer.valueOf(this.selectedMessagesIds[i2].keyAt(i3)));
                            }
                            i2--;
                        }
                        int id = messageObject.getId();
                        Integer numValueOf = Integer.valueOf(id);
                        if (arrayList.contains(numValueOf)) {
                            if (!this.selectedMessagesIds[0].withTouch.contains(numValueOf)) {
                                ArrayList arrayList2 = this.selectedMessagesIds[0].withTouch;
                                if (!arrayList2.isEmpty()) {
                                    Collections.sort(arrayList2);
                                    if (((Integer) arrayList2.get(0)).intValue() <= id || ((Integer) arrayList2.get(arrayList2.size() - 1)).intValue() >= id) {
                                        this.selectedMessagesIds[0].withTouch.clear();
                                        int size = arrayList.size();
                                        int i4 = 0;
                                        while (i4 < size) {
                                            Object obj = arrayList.get(i4);
                                            i4++;
                                            this.selectedMessagesIds[0].withTouch.add((Integer) obj);
                                        }
                                    } else {
                                        this.selectedMessagesIds[0].withTouch.add(numValueOf);
                                    }
                                }
                            }
                        } else {
                            this.selectedMessagesIds[0].withTouch.remove(numValueOf);
                        }
                    }
                    updateActionModeTitle();
                    updateVisibleRows();
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateActionModeTitle() {
        if (!isReport()) {
            if (this.actionBar.isActionModeShowed() && this.selectedMessagesCountTextView != null) {
                if (this.selectedMessagesIds[0].size() == 0 && this.selectedMessagesIds[1].size() == 0) {
                    return;
                }
                this.selectedMessagesCountTextView.setNumber(this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size(), true);
                return;
            }
            return;
        }
        int size = this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size();
        if (size == 0) {
            this.bottomOverlayChatText.setText(LocaleController.getString(C2369R.string.ReportMessagesNoCaps));
            this.bottomOverlayChatText.setAlpha(0.5f);
            this.bottomOverlayChatText.setEnabled(false);
        } else {
            this.bottomOverlayChatText.setText(LocaleController.formatString(C2369R.string.ReportMessagesCountNoCaps, LocaleController.formatPluralString("messages", size, new Object[0])).toUpperCase());
            this.bottomOverlayChatText.setAlpha(1.0f);
            this.bottomOverlayChatText.setEnabled(true);
        }
    }

    public void updateTitle(boolean z) {
        TLRPC.Chat chat;
        TLRPC.Chat chat2;
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer == null) {
            return;
        }
        int i = this.chatMode;
        if (i != 8 || (chat2 = this.currentChat) == null) {
            if (i == 5) {
                if ("hello".equalsIgnoreCase(this.quickReplyShortcut)) {
                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.BusinessGreet));
                } else if ("away".equalsIgnoreCase(this.quickReplyShortcut)) {
                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.BusinessAway));
                } else {
                    this.avatarContainer.setTitle(this.quickReplyShortcut);
                }
            } else if (i != 6) {
                TLRPC.User user = null;
                if (i == 3) {
                    long j = this.threadMessageId;
                    if (j > 0) {
                        user = getMessagesController().getUser(Long.valueOf(j));
                        chat = null;
                    } else {
                        chat = getMessagesController().getChat(Long.valueOf(-j));
                    }
                    if (UserObject.isReplyUser(user)) {
                        this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.RepliesTitle));
                    } else if (UserObject.isAnonymous(user)) {
                        this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.AnonymousForward));
                    } else if (UserObject.isUserSelf(user)) {
                        this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.MyNotes));
                    } else if (user != null) {
                        this.avatarContainer.setTitle(AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(UserObject.getUserName(user))));
                    } else if (chat != null) {
                        this.avatarContainer.setTitle(AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(chat.title)));
                    } else {
                        this.avatarContainer.setTitle("");
                    }
                } else if (isThreadChat() && !UserObject.isBotForum(this.currentUser)) {
                    if (this.isTopic) {
                        updateTopicHeader();
                    } else if (this.isComments) {
                        if (this.threadMessageObject.hasReplies()) {
                            this.avatarContainer.setTitle(LocaleController.formatPluralString("Comments", this.threadMessageObject.getRepliesCount(), new Object[0]));
                        } else {
                            this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.CommentsTitle));
                        }
                    } else {
                        this.avatarContainer.setTitle(LocaleController.formatPluralString("Replies", this.threadMessageObject.getRepliesCount(), new Object[0]));
                    }
                } else if (UserObject.isReplyUser(this.currentUser)) {
                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.RepliesTitle));
                } else if (UserObject.isAnonymous(this.currentUser)) {
                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.AnonymousForward));
                } else {
                    int i2 = this.chatMode;
                    if (i2 == 1) {
                        if (UserObject.isUserSelf(this.currentUser)) {
                            this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.Reminders));
                        } else {
                            this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.ScheduledMessages));
                        }
                    } else if (i2 == 2) {
                        this.avatarContainer.setTitle(LocaleController.formatPluralString("PinnedMessagesCount", getPinnedMessagesCount(), new Object[0]));
                    } else {
                        TLRPC.Chat chat3 = this.currentChat;
                        if (chat3 != null) {
                            ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
                            String strRemoveRTL = AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(chat3.title));
                            TLRPC.Chat chat4 = this.currentChat;
                            chatAvatarContainer2.setTitle(strRemoveRTL, chat4.scam, chat4.fake, chat4.verified, false, BadgesController.INSTANCE.getBadge(chat4), this.currentChat.emoji_status, z);
                        } else {
                            TLRPC.User user2 = this.currentUser;
                            if (user2 != null) {
                                if (user2.self) {
                                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.SavedMessages));
                                } else {
                                    ChatAvatarContainer chatAvatarContainer3 = this.avatarContainer;
                                    String strRemoveRTL2 = AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(UserObject.getUserName(user2)));
                                    TLRPC.User user3 = this.currentUser;
                                    chatAvatarContainer3.setTitle(strRemoveRTL2, user3.scam, user3.fake, user3.verified, getMessagesController().isPremiumUser(this.currentUser), BadgesController.INSTANCE.getBadge(this.currentUser), MessagesController.isSupportUser(this.currentUser) ? null : this.currentUser.emoji_status, z);
                                }
                            }
                        }
                    }
                }
            } else if (!TextUtils.isEmpty(this.businessLink.title)) {
                this.avatarContainer.setTitle(this.businessLink.title);
            } else {
                this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.BusinessLink));
            }
        } else if (this.isSubscriberSuggestions) {
            String monoForumTitle = ForumUtilities.getMonoForumTitle(this.currentAccount, chat2);
            TLRPC.Chat chat5 = this.currentChat;
            chatAvatarContainer.setTitle(monoForumTitle, chat5.scam, chat5.fake, chat5.verified, false, BadgesController.INSTANCE.getBadge(chat5), null, z);
        } else if (ChatObject.isMonoForum(chat2)) {
            long j2 = this.threadMessageId;
            if (j2 == 0) {
                TLRPC.Chat chat6 = this.currentChat;
                if (chat6.linked_monoforum_id != 0) {
                    TLRPC.Chat chat7 = getMessagesController().getChat(Long.valueOf(this.currentChat.linked_monoforum_id));
                    if (chat7 == null) {
                        chat7 = this.currentChat;
                    }
                    this.avatarContainer.setTitle(AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(chat7.title)), chat7.scam, chat7.fake, chat7.verified, false, BadgesController.INSTANCE.getBadge(chat7), chat7.emoji_status, z);
                } else {
                    ChatAvatarContainer chatAvatarContainer4 = this.avatarContainer;
                    String strRemoveRTL3 = AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(chat6.title));
                    TLRPC.Chat chat8 = this.currentChat;
                    chatAvatarContainer4.setTitle(strRemoveRTL3, chat8.scam, chat8.fake, chat8.verified, false, BadgesController.INSTANCE.getBadge(chat8), this.currentChat.emoji_status, z);
                }
            } else if (j2 > 0) {
                TLRPC.User user4 = getMessagesController().getUser(Long.valueOf(this.threadMessageId));
                this.avatarContainer.setTitle(AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(UserObject.getUserName(user4))), user4.scam, user4.fake, user4.verified, user4.premium, BadgesController.INSTANCE.getBadge(user4), user4.emoji_status, z);
            } else {
                TLRPC.Chat chat9 = getMessagesController().getChat(Long.valueOf(-this.threadMessageId));
                if (chat9 == null) {
                    chat9 = this.currentChat;
                }
                this.avatarContainer.setTitle(AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(chat9.title)), chat9.scam, chat9.fake, chat9.verified, false, BadgesController.INSTANCE.getBadge(this.currentChat), chat9.emoji_status, z);
            }
        } else {
            ChatAvatarContainer chatAvatarContainer5 = this.avatarContainer;
            String strRemoveRTL4 = AndroidUtilities.removeRTL(AndroidUtilities.removeDiacritics(this.currentChat.title));
            TLRPC.Chat chat10 = this.currentChat;
            chatAvatarContainer5.setTitle(strRemoveRTL4, chat10.scam, chat10.fake, chat10.verified, false, BadgesController.INSTANCE.getBadge(chat10), this.currentChat.emoji_status, z);
        }
        setParentActivityTitle(this.avatarContainer.getTitleTextView().getText());
        updateTitleIcons();
    }

    public void updateTopicTitleIcon() {
        ChatAvatarContainer chatAvatarContainer;
        ChatAvatarContainer chatAvatarContainer2;
        if (UserObject.isBotForum(this.currentUser) && (chatAvatarContainer2 = this.avatarContainer) != null) {
            chatAvatarContainer2.getAvatarImageView().setVisibility(0);
            this.avatarContainer.checkAndUpdateAvatar();
        } else {
            if (this.forumTopic == null || (chatAvatarContainer = this.avatarContainer) == null) {
                return;
            }
            chatAvatarContainer.getAvatarImageView().setVisibility(0);
            ForumUtilities.setTopicIcon(this.avatarContainer.getAvatarImageView(), this.forumTopic, true, true, this.themeDelegate);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getPinnedMessagesCount() {
        return Math.max(this.loadedPinnedMessagesCount, this.totalPinnedMessagesCount);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateTopicButtons() {
        TLRPC.TL_forumTopic tL_forumTopic;
        ActionBarMenuItem.Item item = this.closeTopicItem;
        if (item != null) {
            TLRPC.Chat chat = this.currentChat;
            item.setVisibility((chat == null || !ChatObject.canManageTopic(this.currentAccount, chat, this.forumTopic) || (tL_forumTopic = this.forumTopic) == null || tL_forumTopic.closed) ? 8 : 0);
        }
    }

    private void updateBotButtons() {
        TLRPC.User user;
        boolean z;
        int i;
        if (this.headerItem == null || (user = this.currentUser) == null || this.currentEncryptedChat != null || !user.bot) {
            return;
        }
        boolean z2 = false;
        if (this.botInfo.size() != 0) {
            boolean z3 = false;
            z = false;
            for (int i2 = 0; i2 < this.botInfo.size(); i2++) {
                TL_bots.BotInfo botInfo = (TL_bots.BotInfo) this.botInfo.valueAt(i2);
                while (i < botInfo.commands.size()) {
                    TLRPC.TL_botCommand tL_botCommand = botInfo.commands.get(i);
                    if (tL_botCommand.command.equalsIgnoreCase("help")) {
                        z3 = true;
                    } else if (tL_botCommand.command.equalsIgnoreCase("settings")) {
                        z = true;
                    }
                    i = (z && z3) ? 0 : i + 1;
                }
            }
            z2 = z3;
        } else {
            z = false;
        }
        if (z2) {
            this.headerItem.showSubItem(30);
        } else {
            this.headerItem.hideSubItem(30);
        }
        if (z) {
            this.headerItem.showSubItem(31);
        } else {
            this.headerItem.hideSubItem(31);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateTitleIcons() {
        updateTitleIcons(false);
    }

    private void updateTitleIcons(boolean z) {
        ActionBarMenuItem.Item item;
        if (this.avatarContainer != null) {
            int i = this.chatMode;
            if (i == 0 || i == 8) {
                boolean zIsDialogMuted = getMessagesController().isDialogMuted(this.dialog_id, getTopicId());
                if (z) {
                    zIsDialogMuted = !zIsDialogMuted;
                }
                Drawable botVerificationDrawable = null;
                Drawable themedDrawable = (UserObject.isReplyUser(this.currentUser) || (isThreadChat() && !this.isTopic) || !zIsDialogMuted) ? null : getThemedDrawable("drawableMuteIcon");
                if (this.currentEncryptedChat != null) {
                    botVerificationDrawable = getThemedDrawable("drawableLockIcon");
                } else {
                    TLRPC.Chat chat = this.currentChat;
                    if (chat != null) {
                        botVerificationDrawable = this.avatarContainer.getBotVerificationDrawable(DialogObject.getBotVerificationIcon(chat), false);
                    } else {
                        TLRPC.User user = this.currentUser;
                        if (user != null && !UserObject.isUserSelf(user)) {
                            botVerificationDrawable = this.avatarContainer.getBotVerificationDrawable(DialogObject.getBotVerificationIcon(this.currentUser), false);
                        }
                    }
                }
                this.avatarContainer.setTitleIcons(botVerificationDrawable, themedDrawable);
                if (!z && (item = this.muteItem) != null) {
                    if (zIsDialogMuted) {
                        item.setRightIconVisibility(8);
                        this.muteItem.setText(LocaleController.getString(C2369R.string.Unmute));
                        this.muteItem.setIcon(C2369R.drawable.msg_mute);
                    } else {
                        item.setRightIconVisibility(0);
                        if (getMessagesController().isDialogNotificationsSoundEnabled(this.dialog_id, getTopicId())) {
                            this.muteItem.setText(LocaleController.getString(C2369R.string.Mute));
                            this.muteItem.setIcon(C2369R.drawable.msg_unmute);
                        } else {
                            this.muteItem.setText(LocaleController.getString(C2369R.string.Mute));
                            this.muteItem.setIcon(C2369R.drawable.msg_silent);
                        }
                    }
                }
                ChatNotificationsPopupWrapper chatNotificationsPopupWrapper = this.chatNotificationsPopupWrapper;
                if (chatNotificationsPopupWrapper != null) {
                    chatNotificationsPopupWrapper.lambda$update$11(this.dialog_id, getTopicId(), null);
                }
            }
        }
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public void checkAndUpdateAvatar() {
        if (this.isTopic) {
            return;
        }
        if (this.currentUser != null) {
            TLRPC.User user = getMessagesController().getUser(Long.valueOf(this.currentUser.f1734id));
            if (user == null) {
                return;
            } else {
                this.currentUser = user;
            }
        } else if (this.currentChat != null) {
            TLRPC.Chat chat = getMessagesController().getChat(Long.valueOf(this.currentChat.f1571id));
            if (chat == null) {
                return;
            } else {
                this.currentChat = chat;
            }
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.checkAndUpdateAvatar();
        }
    }

    public void openVideoEditor(String str, String str2) throws Resources.NotFoundException, NumberFormatException {
        if (getParentActivity() != null) {
            final Bitmap bitmapCreateVideoThumbnail = SendMessagesHelper.createVideoThumbnail(str, 1);
            PhotoViewer.getInstance().setParentActivity(this, this.themeDelegate);
            final ArrayList arrayList = new ArrayList();
            MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, 0, 0L, str, 0, true, 0, 0, 0L);
            photoEntry.caption = str2;
            arrayList.add(photoEntry);
            if (PhotoViewer.getInstance().isVisible()) {
                PhotoViewer.getInstance().closePhoto(false, false);
            }
            PhotoViewer.getInstance().openPhotoForSelect(arrayList, 0, 0, false, new PhotoViewer.EmptyPhotoViewerProvider() { // from class: org.telegram.ui.ChatActivity.88
                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public boolean canCaptureMorePhotos() {
                    return false;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public boolean canScrollAway() {
                    return false;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i) {
                    return new ImageReceiver.BitmapHolder(bitmapCreateVideoThumbnail, (String) null, 0);
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, int i3, boolean z2) {
                    ChatActivity.this.sendMedia((MediaController.PhotoEntry) arrayList.get(0), videoEditedInfo, z, i2, 0, z2, 0L);
                }
            }, this);
            return;
        }
        fillEditingMediaWithCaption(str2, null);
        SendMessagesHelper.prepareSendingVideo(getAccountInstance(), str, null, null, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, null, 0, this.editingMessageObject, true, 0, 0, false, false, null, this.quickReplyShortcut, getQuickReplyId(), 0L, 0L, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        afterMessageSend();
    }

    /* JADX WARN: Unreachable blocks removed: 2, instructions: 2 */
    public static ArrayList createEntriesFromMedia(ArrayList arrayList, boolean z, CharSequence charSequence) throws IOException {
        ArrayList arrayList2 = new ArrayList();
        for (int i = 0; i < arrayList.size(); i++) {
            SendMessagesHelper.SendingMediaInfo sendingMediaInfo = (SendMessagesHelper.SendingMediaInfo) arrayList.get(i);
            String absolutePath = sendingMediaInfo.path;
            if (absolutePath == null) {
                if (sendingMediaInfo.uri != null) {
                    try {
                        File fileGeneratePicturePath = AndroidUtilities.generatePicturePath(z, "");
                        InputStream inputStreamOpenInputStream = ApplicationLoader.applicationContext.getContentResolver().openInputStream(sendingMediaInfo.uri);
                        FileOutputStream fileOutputStream = new FileOutputStream(fileGeneratePicturePath);
                        byte[] bArr = new byte[8192];
                        while (true) {
                            int i2 = inputStreamOpenInputStream.read(bArr);
                            if (i2 <= 0) {
                                break;
                            }
                            fileOutputStream.write(bArr, 0, i2);
                            fileOutputStream.flush();
                        }
                        inputStreamOpenInputStream.close();
                        fileOutputStream.close();
                        absolutePath = fileGeneratePicturePath.getAbsolutePath();
                    } catch (Exception e) {
                        FileLog.m1160e(e);
                    }
                } else {
                    absolutePath = null;
                }
            }
            String str = absolutePath;
            if (str != null) {
                Pair<Integer, Integer> imageOrientation = AndroidUtilities.getImageOrientation(str);
                MediaController.PhotoEntry orientation = new MediaController.PhotoEntry(0, 0, 0L, str, ((Integer) imageOrientation.first).intValue(), sendingMediaInfo.isVideo, 0, 0, 0L).setOrientation(imageOrientation);
                if (i == arrayList.size() - 1 && charSequence != null) {
                    orientation.caption = charSequence;
                }
                arrayList2.add(orientation);
            }
        }
        return arrayList2;
    }

    public boolean openPhotosEditor(ArrayList arrayList, CharSequence charSequence) throws Resources.NotFoundException, IOException, NumberFormatException {
        final ArrayList arrayListCreateEntriesFromMedia = createEntriesFromMedia(arrayList, isSecretChat(), charSequence);
        if (arrayListCreateEntriesFromMedia.isEmpty()) {
            return false;
        }
        if (getParentActivity() != null) {
            final boolean[] zArr = new boolean[arrayListCreateEntriesFromMedia.size()];
            Arrays.fill(zArr, true);
            PhotoViewer.getInstance().setParentActivity(this, this.themeDelegate);
            PhotoViewer.getInstance().openPhotoForSelect(new ArrayList(arrayListCreateEntriesFromMedia), arrayListCreateEntriesFromMedia.size() - 1, 0, false, new PhotoViewer.EmptyPhotoViewerProvider() { // from class: org.telegram.ui.ChatActivity.89
                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public boolean canScrollAway() {
                    return false;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public ImageReceiver.BitmapHolder getThumbForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i) {
                    return null;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public int setPhotoChecked(int i, VideoEditedInfo videoEditedInfo) {
                    return i;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, int i3, boolean z2) throws Resources.NotFoundException, NumberFormatException {
                    for (int size = arrayListCreateEntriesFromMedia.size() - 1; size >= 0; size--) {
                        if (!zArr[size]) {
                            arrayListCreateEntriesFromMedia.remove(size);
                        }
                    }
                    ChatActivity.this.sendPhotosGroup(arrayListCreateEntriesFromMedia, z, i2, z2);
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public boolean isPhotoChecked(int i) {
                    return zArr[i];
                }
            }, this);
        } else {
            fillEditingMediaWithCaption(charSequence, null);
            sendPhotosGroup(arrayListCreateEntriesFromMedia, false, 0, false);
            afterMessageSend();
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void sendPhotosGroup(ArrayList arrayList, boolean z, int i, boolean z2) throws Resources.NotFoundException, NumberFormatException {
        String str;
        if (!arrayList.isEmpty()) {
            ArrayList arrayList2 = new ArrayList();
            int size = arrayList.size();
            int i2 = 0;
            while (i2 < size) {
                Object obj = arrayList.get(i2);
                i2++;
                MediaController.PhotoEntry photoEntry = (MediaController.PhotoEntry) obj;
                SendMessagesHelper.SendingMediaInfo sendingMediaInfo = new SendMessagesHelper.SendingMediaInfo();
                if (!photoEntry.isVideo && (str = photoEntry.imagePath) != null) {
                    sendingMediaInfo.path = str;
                    if (photoEntry.highQuality) {
                        sendingMediaInfo.originalPhotoEntry = photoEntry.clone();
                    }
                } else {
                    String str2 = photoEntry.path;
                    if (str2 != null) {
                        sendingMediaInfo.path = str2;
                    }
                }
                sendingMediaInfo.thumbPath = photoEntry.thumbPath;
                sendingMediaInfo.coverPath = photoEntry.coverPath;
                sendingMediaInfo.isVideo = photoEntry.isVideo;
                CharSequence charSequence = photoEntry.caption;
                sendingMediaInfo.caption = charSequence != null ? charSequence.toString() : null;
                sendingMediaInfo.entities = photoEntry.entities;
                sendingMediaInfo.masks = photoEntry.stickers;
                sendingMediaInfo.ttl = photoEntry.ttl;
                VideoEditedInfo videoEditedInfo = photoEntry.editedInfo;
                sendingMediaInfo.videoEditedInfo = videoEditedInfo;
                sendingMediaInfo.canDeleteAfter = photoEntry.canDeleteAfter;
                sendingMediaInfo.hasMediaSpoilers = photoEntry.hasSpoiler;
                sendingMediaInfo.highQuality = videoEditedInfo == null && photoEntry.highQuality;
                arrayList2.add(sendingMediaInfo);
                photoEntry.reset();
            }
            fillEditingMediaWithCaption(((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).caption, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).entities);
            SendMessagesHelper.prepareSendingMedia(getAccountInstance(), arrayList2, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, z2, true, null, z, i, 0, this.chatMode, ((SendMessagesHelper.SendingMediaInfo) arrayList2.get(0)).updateStickersOrder, null, this.quickReplyShortcut, getQuickReplyId(), 0L, false, 0L, getSendMonoForumPeerId(), this.messageSuggestionParams);
            afterMessageSend();
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setFieldText("");
            }
        }
        if (i != 0) {
            if (this.scheduledMessagesCount == -1) {
                this.scheduledMessagesCount = 0;
            }
            this.scheduledMessagesCount += arrayList.size();
            updateScheduledInterface(true);
        }
    }

    /* JADX WARN: Removed duplicated region for block: B:18:0x0040  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void openEditingMessageInPhotoEditor() {
        /*
            Method dump skipped, instructions count: 272
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.openEditingMessageInPhotoEditor():void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:54:0x00c4  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public org.telegram.ui.PhotoViewer.PlaceProviderObject getPlaceForPhoto(org.telegram.messenger.MessageObject r17, org.telegram.tgnet.TLRPC.FileLocation r18, int r19, boolean r20, boolean r21) {
        /*
            Method dump skipped, instructions count: 329
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.getPlaceForPhoto(org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$FileLocation, int, boolean, boolean):org.telegram.ui.PhotoViewer$PlaceProviderObject");
    }

    private void showAttachmentError() {
        if (getParentActivity() == null) {
            return;
        }
        BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.UnsupportedAttachment), this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void fillEditingMediaWithCaption(CharSequence charSequence, ArrayList arrayList) {
        if (this.editingMessageObject == null) {
            return;
        }
        if (!TextUtils.isEmpty(charSequence)) {
            MessageObject messageObject = this.editingMessageObject;
            messageObject.editingMessage = charSequence;
            messageObject.editingMessageEntities = arrayList;
            return;
        }
        if (this.editingMessageObject.isMediaEmpty()) {
            MessageObject messageObject2 = this.editingMessageObject;
            messageObject2.editingMessage = "";
            messageObject2.editingMessageEntities = new ArrayList<>();
            return;
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            this.editingMessageObject.editingMessage = chatActivityEnterView.getFieldText();
            MessageObject messageObject3 = this.editingMessageObject;
            if (messageObject3.editingMessage != null || TextUtils.isEmpty(messageObject3.messageOwner.message)) {
                return;
            }
            this.editingMessageObject.editingMessage = "";
        }
    }

    private void sendUriAsDocument(Uri uri) throws Resources.NotFoundException, NumberFormatException {
        sendUriAsDocument(uri, true, 0);
    }

    private void sendUriAsDocument(Uri uri, boolean z, int i) throws Resources.NotFoundException, NumberFormatException {
        Uri uri2;
        String str;
        String str2;
        if (uri == null) {
            return;
        }
        String string = uri.toString();
        boolean z2 = true;
        if (string.contains("com.google.android.apps.photos.contentprovider")) {
            try {
                String str3 = string.split("/1/")[1];
                int iIndexOf = str3.indexOf("/ACTUAL");
                uri2 = iIndexOf != -1 ? Uri.parse(URLDecoder.decode(str3.substring(0, iIndexOf), "UTF-8")) : uri;
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        } else {
            uri2 = uri;
        }
        String path = AndroidUtilities.getPath(uri2);
        if (BuildVars.NO_SCOPED_STORAGE) {
            if (path == null) {
                String string2 = uri2.toString();
                String strCopyFileToCache = MediaController.copyFileToCache(uri2, "file");
                if (strCopyFileToCache == null) {
                    showAttachmentError();
                    return;
                } else {
                    str2 = string2;
                    str = strCopyFileToCache;
                }
            } else {
                str = path;
                str2 = str;
            }
            z2 = false;
        } else {
            str = path;
            str2 = str;
        }
        fillEditingMediaWithCaption(null, null);
        if (z2) {
            SendMessagesHelper.prepareSendingDocument(getAccountInstance(), null, null, uri2, null, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, this.editingMessageObject, z, i, null, this.quickReplyShortcut, getQuickReplyId(), false);
        } else {
            SendMessagesHelper.prepareSendingDocument(getAccountInstance(), str, str2, null, null, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, this.editingMessageObject, z, i, null, this.quickReplyShortcut, getQuickReplyId(), false);
        }
        hideFieldPanel(false);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onActivityResultFragment(int i, int i2, final Intent intent) throws Resources.NotFoundException, NumberFormatException {
        String path;
        super.onActivityResultFragment(i, i2, intent);
        if (i2 == -1) {
            if (i == 0 || i == 2) {
                createChatAttachView();
                ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
                if (chatAttachAlert != null) {
                    chatAttachAlert.getPhotoLayout().onActivityResultFragment(i, intent, this.currentPicturePath);
                }
                this.currentPicturePath = null;
                return;
            }
            if (i == 1) {
                if (intent == null || intent.getData() == null) {
                    showAttachmentError();
                    return;
                }
                final Uri data = intent.getData();
                if (data.toString().contains(MediaStreamTrack.VIDEO_TRACK_KIND)) {
                    try {
                        path = AndroidUtilities.getPath(data);
                    } catch (Exception e) {
                        FileLog.m1160e(e);
                        path = null;
                    }
                    if (path == null) {
                        showAttachmentError();
                    }
                    if (this.paused) {
                        this.startVideoEdit = path;
                    } else {
                        openVideoEditor(path, null);
                    }
                } else if (this.editingMessageObject == null && this.chatMode == 1) {
                    AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda106
                        @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                        public final void didSelectDate(boolean z, int i3, int i4) {
                            this.f$0.lambda$onActivityResultFragment$168(data, z, i3, i4);
                        }
                    }, this.themeDelegate);
                } else {
                    fillEditingMediaWithCaption(null, null);
                    SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), null, data, this.dialog_id, this.replyingMessageObject, getThreadMessage(), this.replyingQuote, null, null, null, null, 0, this.editingMessageObject, true, 0, this.chatMode, this.quickReplyShortcut, getQuickReplyId());
                }
                afterMessageSend();
                return;
            }
            if (i == 21) {
                if (intent == null) {
                    showAttachmentError();
                    return;
                }
                if (this.editingMessageObject == null && this.chatMode == 1) {
                    if (intent.getData() != null) {
                        ChatAttachAlert chatAttachAlert2 = this.chatAttachAlert;
                        if (chatAttachAlert2 != null) {
                            chatAttachAlert2.lambda$new$0();
                        }
                        AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda107
                            @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                            public final void didSelectDate(boolean z, int i3, int i4) throws Resources.NotFoundException, NumberFormatException {
                                this.f$0.lambda$onActivityResultFragment$169(intent, z, i3, i4);
                            }
                        }, this.themeDelegate);
                        return;
                    }
                    if (intent.getClipData() != null) {
                        ChatAttachAlert chatAttachAlert3 = this.chatAttachAlert;
                        if (chatAttachAlert3 != null) {
                            chatAttachAlert3.lambda$new$0();
                        }
                        AlertsCreator.createScheduleDatePickerDialog(getParentActivity(), this.dialog_id, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda108
                            @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                            public final void didSelectDate(boolean z, int i3, int i4) throws Resources.NotFoundException, NumberFormatException {
                                this.f$0.lambda$onActivityResultFragment$170(intent, z, i3, i4);
                            }
                        }, this.themeDelegate);
                        return;
                    }
                    showAttachmentError();
                } else {
                    fillEditingMediaWithCaption(null, null);
                    if (intent.getData() != null) {
                        sendUriAsDocument(intent.getData());
                    } else if (intent.getClipData() != null) {
                        ClipData clipData = intent.getClipData();
                        for (int i3 = 0; i3 < clipData.getItemCount(); i3++) {
                            sendUriAsDocument(clipData.getItemAt(i3).getUri());
                        }
                    } else {
                        showAttachmentError();
                    }
                }
                ChatAttachAlert chatAttachAlert4 = this.chatAttachAlert;
                if (chatAttachAlert4 != null) {
                    chatAttachAlert4.lambda$new$0();
                }
                afterMessageSend();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onActivityResultFragment$168(Uri uri, boolean z, int i, int i2) {
        fillEditingMediaWithCaption(null, null);
        SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), null, uri, this.dialog_id, this.replyingMessageObject, getThreadMessage(), this.replyingQuote, null, null, null, null, 0, this.editingMessageObject, z, i, this.chatMode, this.quickReplyShortcut, getQuickReplyId());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onActivityResultFragment$169(Intent intent, boolean z, int i, int i2) throws Resources.NotFoundException, NumberFormatException {
        fillEditingMediaWithCaption(null, null);
        sendUriAsDocument(intent.getData(), z, i);
        afterMessageSend();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onActivityResultFragment$170(Intent intent, boolean z, int i, int i2) throws Resources.NotFoundException, NumberFormatException {
        fillEditingMediaWithCaption(null, null);
        ClipData clipData = intent.getClipData();
        for (int i3 = 0; i3 < clipData.getItemCount(); i3++) {
            sendUriAsDocument(clipData.getItemAt(i3).getUri(), z, i);
        }
        afterMessageSend();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void saveSelfArgs(Bundle bundle) {
        String str = this.currentPicturePath;
        if (str != null) {
            bundle.putString("path", str);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void restoreSelfArgs(Bundle bundle) {
        this.currentPicturePath = bundle.getString("path");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isSkeletonVisible() {
        FrameLayout frameLayout;
        if (this.justCreatedTopic || this.justCreatedChat || this.currentUser != null || this.chatListView == null || !SharedConfig.animationsEnabled() || !getLiteModeChat()) {
            return false;
        }
        int i = ConnectionsManager.DEFAULT_DATACENTER_ID;
        int height = 0;
        for (int i2 = 0; i2 < this.chatListView.getChildCount(); i2++) {
            height += this.chatListView.getChildAt(i2).getHeight();
            int top = this.chatListView.getChildAt(i2).getTop();
            if (top < i) {
                i = top;
            }
        }
        float f = i;
        if (f <= this.chatListViewPaddingTop) {
            checkDispatchHideSkeletons(this.fragmentBeginToShow);
        }
        boolean[] zArr = this.endReached;
        boolean z = (!zArr[0] || (!(this.mergeDialogId == 0 || zArr[1]) || this.messages.isEmpty())) && this.loading && f > this.chatListViewPaddingTop && (!this.messages.isEmpty() ? height == 0 : !this.animateProgressViewTo);
        if (z && this.inTransitionAnimation && (frameLayout = this.emptyViewContainer) != null && frameLayout.getVisibility() == 0 && this.emptyViewContainer.getChildCount() > 0) {
            return false;
        }
        if (!z && this.startMessageAppearTransitionMs == 0) {
            checkDispatchHideSkeletons(this.fragmentBeginToShow);
        }
        if (SharedConfig.getDevicePerformanceClass() != 0 && !this.fromPullingDownTransition && this.fragmentBeginToShow) {
            boolean z2 = z && this.startMessageAppearTransitionMs == 0;
            Drawable wallpaperDrawable = this.themeDelegate.getWallpaperDrawable();
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (chatActivityFragmentView != null) {
                wallpaperDrawable = chatActivityFragmentView.getBackgroundImage();
            }
            if (wallpaperDrawable instanceof MotionBackgroundDrawable) {
                MotionBackgroundDrawable motionBackgroundDrawable = (MotionBackgroundDrawable) wallpaperDrawable;
                if (motionBackgroundDrawable.isIndeterminateAnimation() != z2) {
                    if (!z2) {
                        motionBackgroundDrawable.generateNextGradient();
                    }
                    motionBackgroundDrawable.setIndeterminateAnimation(z2);
                    motionBackgroundDrawable.setIndeterminateSpeedScale(z2 ? 1.5f : 1.0f);
                    motionBackgroundDrawable.updateAnimation(true);
                } else if (z2) {
                    motionBackgroundDrawable.updateAnimation(false);
                }
            }
        }
        return z || (this.startMessageAppearTransitionMs != 0 && System.currentTimeMillis() - this.startMessageAppearTransitionMs <= 200);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkDispatchHideSkeletons(boolean z) {
        if (this.startMessageAppearTransitionMs == 0) {
            if (z && !this.messageSkeletons.isEmpty()) {
                this.startMessageAppearTransitionMs = System.currentTimeMillis();
            } else {
                this.startMessageAppearTransitionMs = 1L;
            }
            isSkeletonVisible();
            ChatListRecyclerView chatListRecyclerView = this.chatListView;
            if (chatListRecyclerView != null) {
                chatListRecyclerView.invalidate();
            }
        }
    }

    private void removeUnreadPlane(boolean z) {
        MessageObject messageObject = this.unreadMessageObject;
        if (messageObject != null) {
            if (z) {
                boolean[] zArr = this.forwardEndReached;
                zArr[1] = true;
                zArr[0] = true;
                this.first_unread_id = 0;
                this.last_message_id = 0;
            }
            this.createUnreadMessageAfterId = 0;
            this.createUnreadMessageAfterIdLoading = false;
            removeMessageObject(messageObject);
            this.unreadMessageObject = null;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$171() {
        getNotificationCenter().onAnimationFinish(this.transitionAnimationIndex);
    }

    /*  JADX ERROR: NullPointerException in pass: LoopRegionVisitor
        java.lang.NullPointerException: Cannot invoke "jadx.core.dex.instructions.args.SSAVar.use(jadx.core.dex.instructions.args.RegisterArg)" because "ssaVar" is null
        	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:493)
        	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:496)
        */
    /* JADX WARN: Multi-variable search skipped. Vars limit reached: 5274 (expected less than 5000) */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:1075:0x1453  */
    /* JADX WARN: Removed duplicated region for block: B:1088:0x14a9  */
    /* JADX WARN: Removed duplicated region for block: B:1093:0x14ca  */
    /* JADX WARN: Removed duplicated region for block: B:1107:0x1503  */
    /* JADX WARN: Removed duplicated region for block: B:1112:0x1515  */
    /* JADX WARN: Removed duplicated region for block: B:1117:0x1521  */
    /* JADX WARN: Removed duplicated region for block: B:1124:0x1539  */
    /* JADX WARN: Removed duplicated region for block: B:1149:0x15ab  */
    /* JADX WARN: Removed duplicated region for block: B:1152:0x15b2  */
    /* JADX WARN: Removed duplicated region for block: B:1200:0x1689  */
    /* JADX WARN: Removed duplicated region for block: B:1208:0x16bd  */
    /* JADX WARN: Removed duplicated region for block: B:1252:0x17c1  */
    /* JADX WARN: Removed duplicated region for block: B:1255:0x17c9  */
    /* JADX WARN: Removed duplicated region for block: B:1258:0x17d7  */
    /* JADX WARN: Removed duplicated region for block: B:1274:0x1816  */
    /* JADX WARN: Removed duplicated region for block: B:1278:0x182c  */
    /* JADX WARN: Removed duplicated region for block: B:1281:0x1837  */
    /* JADX WARN: Removed duplicated region for block: B:1284:0x183d  */
    /* JADX WARN: Removed duplicated region for block: B:1287:0x1845  */
    /* JADX WARN: Removed duplicated region for block: B:1290:0x184c  */
    /* JADX WARN: Removed duplicated region for block: B:1295:0x1861 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:1298:0x186b  */
    /* JADX WARN: Removed duplicated region for block: B:1381:0x19de  */
    /* JADX WARN: Removed duplicated region for block: B:138:0x0353  */
    /* JADX WARN: Removed duplicated region for block: B:140:0x0356  */
    /* JADX WARN: Removed duplicated region for block: B:1520:0x1bd4  */
    /* JADX WARN: Removed duplicated region for block: B:1685:0x1ed9  */
    /* JADX WARN: Removed duplicated region for block: B:1694:0x1ef0  */
    /* JADX WARN: Removed duplicated region for block: B:169:0x0416  */
    /* JADX WARN: Removed duplicated region for block: B:187:0x048c  */
    /* JADX WARN: Removed duplicated region for block: B:1881:0x228b  */
    /* JADX WARN: Removed duplicated region for block: B:1967:0x2431  */
    /* JADX WARN: Removed duplicated region for block: B:1987:0x2472  */
    /* JADX WARN: Removed duplicated region for block: B:1991:0x2486  */
    /* JADX WARN: Removed duplicated region for block: B:1995:0x24ac  */
    /* JADX WARN: Removed duplicated region for block: B:1998:0x24b4  */
    /* JADX WARN: Removed duplicated region for block: B:2001:0x24e3  */
    /* JADX WARN: Removed duplicated region for block: B:2009:0x2524  */
    /* JADX WARN: Removed duplicated region for block: B:2020:0x2552  */
    /* JADX WARN: Removed duplicated region for block: B:2031:0x256a  */
    /* JADX WARN: Removed duplicated region for block: B:2064:0x2614 A[EDGE_INSN: B:4395:0x2614->B:2064:0x2614 BREAK  A[LOOP:56: B:3020:0x3875->B:3049:0x3907]] */
    /* JADX WARN: Removed duplicated region for block: B:217:0x0527  */
    /* JADX WARN: Removed duplicated region for block: B:2183:0x283e  */
    /* JADX WARN: Removed duplicated region for block: B:219:0x052d  */
    /* JADX WARN: Removed duplicated region for block: B:2450:0x2d77  */
    /* JADX WARN: Removed duplicated region for block: B:251:0x05a9  */
    /* JADX WARN: Removed duplicated region for block: B:272:0x05fa  */
    /* JADX WARN: Removed duplicated region for block: B:276:0x0604  */
    /* JADX WARN: Removed duplicated region for block: B:290:0x0627  */
    /* JADX WARN: Removed duplicated region for block: B:292:0x062b  */
    /* JADX WARN: Removed duplicated region for block: B:294:0x062e A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:2952:0x36f6  */
    /* JADX WARN: Removed duplicated region for block: B:2957:0x3726  */
    /* JADX WARN: Removed duplicated region for block: B:298:0x0649  */
    /* JADX WARN: Removed duplicated region for block: B:300:0x064c  */
    /* JADX WARN: Removed duplicated region for block: B:3081:0x3996  */
    /* JADX WARN: Removed duplicated region for block: B:3134:0x3a71  */
    /* JADX WARN: Removed duplicated region for block: B:317:0x0691  */
    /* JADX WARN: Removed duplicated region for block: B:322:0x06a2  */
    /* JADX WARN: Removed duplicated region for block: B:3252:0x3c5f  */
    /* JADX WARN: Removed duplicated region for block: B:3256:0x3c6d  */
    /* JADX WARN: Removed duplicated region for block: B:3284:0x3cdb  */
    /* JADX WARN: Removed duplicated region for block: B:3340:0x3de6  */
    /* JADX WARN: Removed duplicated region for block: B:3342:0x3dea  */
    /* JADX WARN: Removed duplicated region for block: B:335:0x06f4  */
    /* JADX WARN: Removed duplicated region for block: B:342:0x06ff  */
    /* JADX WARN: Removed duplicated region for block: B:3709:0x45a6  */
    /* JADX WARN: Removed duplicated region for block: B:374:0x0765  */
    /* JADX WARN: Removed duplicated region for block: B:3768:0x46ae  */
    /* JADX WARN: Removed duplicated region for block: B:376:0x076b  */
    /* JADX WARN: Removed duplicated region for block: B:382:0x0782  */
    /* JADX WARN: Removed duplicated region for block: B:388:0x07af  */
    /* JADX WARN: Removed duplicated region for block: B:408:0x082d  */
    /* JADX WARN: Removed duplicated region for block: B:4095:0x4c7f  */
    /* JADX WARN: Removed duplicated region for block: B:4114:0x4ce3  */
    /* JADX WARN: Removed duplicated region for block: B:4180:0x2434 A[EXC_TOP_SPLITTER, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:420:0x0846  */
    /* JADX WARN: Removed duplicated region for block: B:4223:0x115f A[EDGE_INSN: B:4223:0x115f->B:891:0x115f BREAK  A[LOOP:10: B:466:0x093c->B:890:0x114f], SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:433:0x08b3  */
    /* JADX WARN: Removed duplicated region for block: B:439:0x08dd  */
    /* JADX WARN: Removed duplicated region for block: B:4407:0x3c71 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:452:0x0905  */
    /* JADX WARN: Removed duplicated region for block: B:468:0x0944  */
    /* JADX WARN: Removed duplicated region for block: B:503:0x09f6  */
    /* JADX WARN: Removed duplicated region for block: B:506:0x0a00  */
    /* JADX WARN: Removed duplicated region for block: B:523:0x0a34  */
    /* JADX WARN: Removed duplicated region for block: B:540:0x0a9c  */
    /* JADX WARN: Removed duplicated region for block: B:547:0x0ab9  */
    /* JADX WARN: Removed duplicated region for block: B:550:0x0ac2  */
    /* JADX WARN: Removed duplicated region for block: B:558:0x0ae9  */
    /* JADX WARN: Removed duplicated region for block: B:559:0x0afe  */
    /* JADX WARN: Removed duplicated region for block: B:564:0x0b1c  */
    /* JADX WARN: Removed duplicated region for block: B:575:0x0b48  */
    /* JADX WARN: Removed duplicated region for block: B:652:0x0d02  */
    /* JADX WARN: Removed duplicated region for block: B:689:0x0dc3  */
    /* JADX WARN: Removed duplicated region for block: B:690:0x0ddb  */
    /* JADX WARN: Removed duplicated region for block: B:699:0x0dfe  */
    /* JADX WARN: Removed duplicated region for block: B:702:0x0e0b  */
    /* JADX WARN: Removed duplicated region for block: B:703:0x0e11  */
    /* JADX WARN: Removed duplicated region for block: B:773:0x0faf  */
    /* JADX WARN: Removed duplicated region for block: B:789:0x0fda A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:814:0x1055  */
    /* JADX WARN: Removed duplicated region for block: B:827:0x1076  */
    /* JADX WARN: Removed duplicated region for block: B:832:0x1082  */
    /* JADX WARN: Removed duplicated region for block: B:837:0x109d  */
    /* JADX WARN: Removed duplicated region for block: B:840:0x10ac  */
    /* JADX WARN: Removed duplicated region for block: B:843:0x10b5  */
    /* JADX WARN: Removed duplicated region for block: B:864:0x10e5  */
    /* JADX WARN: Removed duplicated region for block: B:893:0x116a  */
    /* JADX WARN: Removed duplicated region for block: B:897:0x1178  */
    /* JADX WARN: Removed duplicated region for block: B:903:0x118c  */
    /* JADX WARN: Removed duplicated region for block: B:945:0x1235  */
    /* JADX WARN: Removed duplicated region for block: B:947:0x123c  */
    /* JADX WARN: Type inference failed for: r0v1033, types: [org.telegram.ui.Components.ChatActivityEnterView] */
    /* JADX WARN: Type inference failed for: r12v216 */
    /* JADX WARN: Type inference failed for: r12v217, types: [boolean] */
    /* JADX WARN: Type inference failed for: r12v225 */
    /* JADX WARN: Type inference failed for: r12v309 */
    /* JADX WARN: Type inference failed for: r12v310, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r12v312 */
    /* JADX WARN: Type inference failed for: r13v122 */
    /* JADX WARN: Type inference failed for: r13v123, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r13v126 */
    /* JADX WARN: Type inference failed for: r13v322 */
    /* JADX WARN: Type inference failed for: r13v323 */
    /* JADX WARN: Type inference failed for: r13v324 */
    /* JADX WARN: Type inference failed for: r13v325 */
    /* JADX WARN: Type inference failed for: r13v326 */
    /* JADX WARN: Type inference failed for: r1v0, types: [org.telegram.ui.ActionBar.BaseFragment, org.telegram.ui.ChatActivity] */
    /* JADX WARN: Type inference failed for: r1v3, types: [org.telegram.ui.ActionBar.BaseFragment, org.telegram.ui.ChatActivity] */
    /* JADX WARN: Type inference failed for: r1v4, types: [org.telegram.ui.ChatActivity] */
    /* JADX WARN: Type inference failed for: r3v517, types: [java.util.ArrayList] */
    /* JADX WARN: Type inference failed for: r7v40, types: [java.util.HashMap] */
    @Override // org.telegram.messenger.NotificationCenter.NotificationCenterDelegate
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didReceivedNotification(int r71, int r72, java.lang.Object... r73) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 19944
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.didReceivedNotification(int, int, java.lang.Object[]):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$172() {
        createEmptyView(false);
        if (!this.fragmentBeginToShow) {
            this.chatListView.setAnimateEmptyView(false, 0);
            this.chatListView.setEmptyView(this.emptyViewContainer);
            this.chatListView.setAnimateEmptyView(true, 1);
            return;
        }
        this.chatListView.setEmptyView(this.emptyViewContainer);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$173() {
        resumeDelayedFragmentAnimation();
        AndroidUtilities.cancelRunOnUIThread(this.fragmentTransitionRunnable);
        this.fragmentTransitionRunnable.run();
        getNotificationCenter().runDelayedNotifications();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$174(Object[] objArr, StickersAlert stickersAlert, boolean z, TLRPC.StickerSet stickerSet, DialogInterface dialogInterface) {
        if (objArr.length > 2) {
            Object obj = objArr[2];
            if (obj instanceof TLRPC.Document) {
                TLRPC.Document document = (TLRPC.Document) obj;
                if (objArr.length > 3) {
                    Object obj2 = objArr[3];
                    if (obj2 instanceof String) {
                        document.localThumbPath = (String) obj2;
                    }
                }
                BulletinFactory.m1266of(stickersAlert.container, this.resourceProvider).createEmojiBulletin(document, LocaleController.formatString(z ? C2369R.string.StickersStickerEditedInSetToast : C2369R.string.StickersStickerAddedToSetToast, stickerSet.title)).setDuration(2750).show(true);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$175(MessageObject messageObject, int i) {
        this.delayedReadRunnable = null;
        messageObject.messageOwner.replies.read_max_id = i;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$176(int i) {
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout == null) {
            return;
        }
        BaseFragment backgroundFragment = iNavigationLayout.getBackgroundFragment();
        if (backgroundFragment instanceof ChatActivity) {
            ChatActivity chatActivity = (ChatActivity) backgroundFragment;
            if (chatActivity.getDialogId() == this.dialog_id) {
                lambda$onBackPressed$371();
                chatActivity.scrollToMessageId(i, 0, true, 0, true, 0);
                return;
            }
        }
        presentFragment(m1259of(this.dialog_id, i));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$177() {
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.chats_infotip, LocaleController.getString(C2369R.string.BoostingRemoveRestrictionsSuccessTitle), LocaleController.getString(C2369R.string.BoostingRemoveRestrictionsSuccessSubTitle)).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$179(TL_stories.TL_premium_boostsStatus tL_premium_boostsStatus) {
        if (tL_premium_boostsStatus == null) {
            return;
        }
        this.boostsStatus = tL_premium_boostsStatus;
        getMessagesController().getBoostsController().userCanBoostChannel(this.dialog_id, tL_premium_boostsStatus, new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda170
            @Override // com.google.android.exoplayer2.util.Consumer
            public final void accept(Object obj) {
                this.f$0.lambda$didReceivedNotification$178((ChannelBoostsController.CanApplyBoost) obj);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$178(ChannelBoostsController.CanApplyBoost canApplyBoost) {
        this.canApplyBoosts = canApplyBoost;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$180(Object[] objArr, long j) {
        MessageObject messageObject = (MessageObject) this.messagesDict[j == this.dialog_id ? (char) 0 : (char) 1].get(((Integer) objArr[1]).intValue());
        if (messageObject != null) {
            messageObject.messageOwner.media.extended_media = (ArrayList) objArr[2];
            messageObject.forceUpdate = true;
            messageObject.setType();
            updateMessageAnimated(messageObject, false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$181(Object[] objArr, long j) {
        MessageObject messageObject;
        int iIntValue = ((Integer) objArr[1]).intValue();
        LongSparseArray longSparseArray = this.filteredMessagesDict;
        if (longSparseArray != null && (messageObject = (MessageObject) longSparseArray.get(iIntValue)) != null) {
            MessageObject.updateReactions(messageObject.messageOwner, (TLRPC.TL_messageReactions) objArr[2]);
            messageObject.forceUpdate = true;
            messageObject.reactionsChanged = true;
        }
        MessageObject messageObject2 = (MessageObject) this.messagesDict[j == this.dialog_id ? (char) 0 : (char) 1].get(iIntValue);
        if (messageObject2 != null) {
            MessageObject.updateReactions(messageObject2.messageOwner, (TLRPC.TL_messageReactions) objArr[2]);
            messageObject2.forceUpdate = true;
            messageObject2.reactionsChanged = true;
            updateMessageAnimated(messageObject2, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$183() {
        AndroidUtilities.forEachViews((RecyclerView) this.chatListView, new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda178
            @Override // com.google.android.exoplayer2.util.Consumer
            public final void accept(Object obj) {
                ChatActivity.$r8$lambda$pDZzYH72FZPiVIRcXKTwB6bz7kI((View) obj);
            }
        });
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            chatActivityAdapter.notifyDataSetChanged(true);
        }
    }

    public static /* synthetic */ void $r8$lambda$pDZzYH72FZPiVIRcXKTwB6bz7kI(View view) {
        MessageObject messageObject;
        if (!(view instanceof ChatMessageCell) || (messageObject = ((ChatMessageCell) view).getMessageObject()) == null) {
            return;
        }
        messageObject.forceUpdate = true;
        messageObject.reactionsChanged = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$185() {
        AndroidUtilities.forEachViews((RecyclerView) this.chatListView, new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda173
            @Override // com.google.android.exoplayer2.util.Consumer
            public final void accept(Object obj) {
                ChatActivity.m6502$r8$lambda$RVcRZ7A86BJukr_m2VCEVtarp4((View) obj);
            }
        });
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter != null) {
            chatActivityAdapter.notifyDataSetChanged(false);
        }
    }

    /* renamed from: $r8$lambda$RVcRZ7A86BJukr_m2VCE-Vtarp4, reason: not valid java name */
    public static /* synthetic */ void m6502$r8$lambda$RVcRZ7A86BJukr_m2VCEVtarp4(View view) {
        MessageObject messageObject;
        if (!(view instanceof ChatMessageCell) || (messageObject = ((ChatMessageCell) view).getMessageObject()) == null) {
            return;
        }
        messageObject.forceUpdate = true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$186() {
        updateMessagesVisiblePart(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$187(ArrayList arrayList, int i) {
        replaceMessageObjects(arrayList, i, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$188() {
        checkScrollForLoad(false);
    }

    /* renamed from: $r8$lambda$5-8yAeT20TvsFq5Cm-sQNT8tB5w, reason: not valid java name */
    public static /* synthetic */ void m6444$r8$lambda$58yAeT20TvsFq5CmsQNT8tB5w(Theme.ThemeAccent themeAccent, Theme.ThemeInfo themeInfo, boolean z) throws IOException {
        if (themeAccent != null) {
            Theme.ThemeAccent accent = themeInfo.getAccent(false);
            NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.needSetDayNightTheme, themeInfo, Boolean.FALSE, null, Integer.valueOf(themeAccent.f1786id));
            if (z) {
                Theme.deleteThemeAccent(themeInfo, accent, true);
                return;
            }
            return;
        }
        NotificationCenter.getGlobalInstance().lambda$postNotificationNameOnUIThread$1(NotificationCenter.needSetDayNightTheme, themeInfo, Boolean.FALSE, null, -1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didReceivedNotification$190(int i) {
        playReactionAnimation(Integer.valueOf(i));
    }

    public void showQuoteMessageUpdate() {
        if (this.quoteMessageUpdateAlert != null) {
            return;
        }
        this.quoteMessageUpdateAlert = new AlertDialog.Builder(getContext(), getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.UpdatedQuoteTitle)).setMessage(AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.UpdatedQuoteMessage, this.replyingMessageObject != null ? getMessagesController().getFullName(this.replyingMessageObject.getSenderId()) : ""))).setPositiveButton(LocaleController.getString(C2369R.string.Edit), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda327
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) throws Resources.NotFoundException {
                this.f$0.lambda$showQuoteMessageUpdate$193(alertDialog, i);
            }
        }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda328
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$showQuoteMessageUpdate$194(alertDialog, i);
            }
        }).setOnDismissListener(new DialogInterface.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda329
            @Override // android.content.DialogInterface.OnDismissListener
            public final void onDismiss(DialogInterface dialogInterface) {
                this.f$0.lambda$showQuoteMessageUpdate$195(dialogInterface);
            }
        }).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showQuoteMessageUpdate$193(AlertDialog alertDialog, int i) throws Resources.NotFoundException {
        MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
        if (messagePreviewParams == null || messagePreviewParams.quote == null) {
            return;
        }
        openForwardingPreview(0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showQuoteMessageUpdate$194(AlertDialog alertDialog, int i) throws Resources.NotFoundException, NumberFormatException {
        hideFieldPanel(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showQuoteMessageUpdate$195(DialogInterface dialogInterface) {
        this.quoteMessageUpdateAlert = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public int getScrollingOffsetForView(View view) {
        FileLog.m1157d("getScrollingOffsetForView view=" + view + " results in {" + ((this.chatListView.getMeasuredHeight() - view.getBottom()) - this.chatListView.getPaddingBottom()) + "} chatHeight=" + this.chatListView.getMeasuredHeight() + " bottom=" + view.getBottom() + " paddingBottom=" + this.chatListView.getPaddingBottom());
        return (this.chatListView.getMeasuredHeight() - view.getBottom()) - this.chatListView.getPaddingBottom();
    }

    /* JADX WARN: Removed duplicated region for block: B:36:0x009f  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private boolean updateMessageTranslation(org.telegram.messenger.MessageObject r18) {
        /*
            Method dump skipped, instructions count: 356
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateMessageTranslation(org.telegram.messenger.MessageObject):boolean");
    }

    private boolean updateMessagesReplyTranslation(ArrayList arrayList, MessageObject messageObject) {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject2;
        MessageObject messageObject3;
        boolean z = false;
        for (int i = 0; i < this.chatListView.getChildCount(); i++) {
            View childAt = this.chatListView.getChildAt(i);
            if ((childAt instanceof ChatMessageCell) && (messageObject2 = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && arrayList.contains(Integer.valueOf(messageObject2.getId())) && (messageObject3 = messageObject2.replyMessageObject) != null && messageObject3.getId() == messageObject.getId()) {
                MessageObject messageObject4 = messageObject2.replyMessageObject;
                TLRPC.Message message = messageObject4.messageOwner;
                TLRPC.Message message2 = messageObject.messageOwner;
                message.translatedText = message2.translatedText;
                message.translatedToLanguage = message2.translatedToLanguage;
                if (messageObject4.updateTranslation(false)) {
                    z = true;
                    messageObject2.forceUpdate = true;
                    chatMessageCell.setMessageObject(messageObject2, chatMessageCell.getCurrentMessagesGroup(), chatMessageCell.isPinnedBottom(), chatMessageCell.isPinnedTop(), chatMessageCell.isFirstInChat(), chatMessageCell.isLastInChatList());
                    this.chatAdapter.updateRowAtPosition(this.chatListView.getChildAdapterPosition(childAt));
                }
            }
        }
        return z;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkTranslation(boolean z) {
        if (System.currentTimeMillis() - this.lastTranslationCheck > 1000) {
            z = true;
        }
        AndroidUtilities.cancelRunOnUIThread(this.checkTranslationRunnable);
        AndroidUtilities.runOnUIThread(this.checkTranslationRunnable, z ? 0L : 150L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$new$196() {
        this.lastTranslationCheck = System.currentTimeMillis();
        if (this.chatListView != null && this.chatAdapter != null) {
            int iMin = ConnectionsManager.DEFAULT_DATACENTER_ID;
            int iMax = TLObject.FLAG_31;
            for (int i = 0; i < this.chatListView.getChildCount(); i++) {
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.getCurrentMessagesGroup() != null) {
                        for (int i2 = 0; i2 < chatMessageCell.getCurrentMessagesGroup().messages.size(); i2++) {
                            int id = chatMessageCell.getCurrentMessagesGroup().messages.get(i2).getId();
                            iMin = Math.min(iMin, id);
                            iMax = Math.max(iMax, id);
                        }
                    } else if (chatMessageCell.getMessageObject() != null) {
                        int id2 = chatMessageCell.getMessageObject().getId();
                        iMin = Math.min(iMin, id2);
                        iMax = Math.max(iMax, id2);
                    }
                }
            }
            if (iMin <= iMax) {
                ArrayList arrayList = new ArrayList();
                for (int i3 = 0; i3 < this.messages.size(); i3++) {
                    MessageObject messageObject = (MessageObject) this.messages.get(i3);
                    MessageObject.GroupedMessages groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
                    if (groupedMessages != null) {
                        if (!arrayList.contains(Long.valueOf(groupedMessages.groupId))) {
                            for (int i4 = 0; i4 < groupedMessages.messages.size(); i4++) {
                                MessageObject messageObject2 = groupedMessages.messages.get(i4);
                                if (messageObject2 != null) {
                                    int id3 = messageObject2.getId();
                                    getMessagesController().getTranslateController().checkTranslation(messageObject2, id3 >= iMin + (-7) && id3 <= iMax + 7);
                                }
                            }
                            arrayList.add(Long.valueOf(groupedMessages.groupId));
                        }
                    } else {
                        int id4 = messageObject.getId();
                        getMessagesController().getTranslateController().checkTranslation(messageObject, id4 >= iMin + (-7) && id4 <= iMax + 7);
                    }
                }
            }
        }
        if (this.currentPinnedMessageId > 0 && this.pinnedMessageObjects != null) {
            getMessagesController().getTranslateController().checkTranslation((MessageObject) this.pinnedMessageObjects.get(Integer.valueOf(this.currentPinnedMessageId)), true);
        }
        updateTranslateItemVisibility();
    }

    private void checkSecretMessageForLocation(MessageObject messageObject) {
        if (messageObject.type != 4 || this.locationAlertShown || SharedConfig.isSecretMapPreviewSet()) {
            return;
        }
        this.locationAlertShown = true;
        AlertsCreator.showSecretLocationAlert(getParentActivity(), this.currentAccount, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda138
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkSecretMessageForLocation$197();
            }
        }, true, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkSecretMessageForLocation$197() {
        int childCount = this.chatListView.getChildCount();
        for (int i = 0; i < childCount; i++) {
            View childAt = this.chatListView.getChildAt(i);
            if (childAt instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                if (chatMessageCell.getMessageObject().type == 4) {
                    chatMessageCell.forceResetMessageObject();
                }
            }
        }
    }

    private void loadSendAsPeers(boolean z) {
        TLRPC.Chat chat;
        if (this.sendAsPeersObj != null || (chat = this.currentChat) == null || !ChatObject.canSendAsPeers(chat) || this.chatActivityEnterView == null || ChatObject.isMonoForum(this.currentChat)) {
            return;
        }
        TLRPC.TL_channels_sendAsPeers sendAsPeers = getMessagesController().getSendAsPeers(this.dialog_id);
        this.sendAsPeersObj = sendAsPeers;
        if (sendAsPeers != null) {
            this.chatActivityEnterView.updateSendAsButton(z);
        }
    }

    private void addSponsoredMessages(boolean z) throws InterruptedException, Resources.NotFoundException {
        MessagesController.SponsoredMessagesInfo sponsoredMessages;
        long j;
        if (this.sponsoredMessagesAdded || this.chatMode != 0) {
            return;
        }
        if ((ChatObject.isChannel(this.currentChat) || UserObject.isBot(this.currentUser)) && this.forwardEndReached[0]) {
            if ((getUserConfig().isPremium() && getMessagesController().isSponsoredDisabled()) || isReport() || (sponsoredMessages = getMessagesController().getSponsoredMessages(this.dialog_id)) == null || sponsoredMessages.messages == null) {
                return;
            }
            ArrayList arrayList = new ArrayList();
            for (int i = 0; i < sponsoredMessages.messages.size(); i++) {
                MessageObject messageObject = sponsoredMessages.messages.get(i);
                messageObject.resetLayout();
                if (messageObject.sponsoredUrl != null) {
                    try {
                        if (this.sponsoredUrlPattern == null) {
                            this.sponsoredUrlPattern = Pattern.compile("https://t\\.me/(\\w+)(?:/(\\d+))?");
                        }
                        Matcher matcher = this.sponsoredUrlPattern.matcher(messageObject.sponsoredUrl);
                        if (matcher.matches()) {
                            String strGroup = matcher.group(1);
                            int i2 = matcher.groupCount() >= 2 ? Integer.parseInt(matcher.group(2)) : 0;
                            TLObject userOrChat = getMessagesController().getUserOrChat(strGroup);
                            if (userOrChat instanceof TLRPC.User) {
                                j = ((TLRPC.User) userOrChat).f1734id;
                            } else if (userOrChat instanceof TLRPC.Chat) {
                                j = -((TLRPC.Chat) userOrChat).f1571id;
                            }
                            if (i2 >= 0) {
                                if (!AyuConfig.disableAds) {
                                    getMessagesController().ensureMessagesLoaded(j, i2, null);
                                } else if (!messageObject.isSponsored()) {
                                    getMessagesController().ensureMessagesLoaded(j, i2, null);
                                    arrayList.add(messageObject);
                                } else {
                                    markSponsoredAsRead(messageObject);
                                }
                            }
                        }
                    } catch (Exception e) {
                        FileLog.m1160e(e);
                    }
                }
            }
            this.sponsoredMessagesAdded = true;
            if (UserObject.isBot(this.currentUser)) {
                ArrayList<MessageObject> arrayList2 = sponsoredMessages.messages;
                MessageObject messageObject2 = (arrayList2 == null || arrayList2.isEmpty()) ? null : sponsoredMessages.messages.get(0);
                this.botSponsoredMessage = messageObject2;
                if (AyuConfig.disableAds && messageObject2 != null) {
                    markSponsoredAsRead(messageObject2);
                    this.botSponsoredMessage = null;
                }
                updateTopPanel(true);
                return;
            }
            if (!AyuConfig.disableAds) {
                Integer num = sponsoredMessages.posts_between;
                this.sponsoredMessagesPostsBetween = num != null ? num.intValue() : 0;
                ArrayList arrayList3 = this.notPushedSponsoredMessages;
                if (arrayList3 != null) {
                    arrayList3.clear();
                }
                processNewMessages(sponsoredMessages.messages, false);
                return;
            }
            if (arrayList.isEmpty()) {
                return;
            }
            processNewMessages(arrayList);
        }
    }

    public void removeFromSponsored(MessageObject messageObject) {
        if (messageObject == this.botSponsoredMessage) {
            this.botSponsoredMessage = null;
            updateTopPanel(true);
        } else {
            MessagesController.SponsoredMessagesInfo sponsoredMessages = getMessagesController().getSponsoredMessages(this.dialog_id);
            if (sponsoredMessages != null) {
                sponsoredMessages.messages.remove(messageObject);
            }
        }
    }

    private void checkGroupCallJoin(boolean z) {
        TLRPC.ChatFull chatFull;
        String str;
        if (this.groupCall == null || (((str = this.voiceChatHash) == null && !this.openVideoChat) || !this.openAnimationEnded)) {
            if (this.voiceChatHash != null && z && (chatFull = this.chatInfo) != null && chatFull.call == null && this.fragmentView != null && getParentActivity() != null) {
                BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.linkbroken, LocaleController.getString(C2369R.string.LinkHashExpired)).show();
                this.voiceChatHash = null;
            }
            this.lastCallCheckFromServer = !this.openAnimationEnded;
            return;
        }
        VoIPHelper.startCall(this.currentChat, null, str, this.createGroupCall, Boolean.valueOf(!r0.call.rtmp_stream), getParentActivity(), this, getAccountInstance());
        this.voiceChatHash = null;
        this.openVideoChat = false;
    }

    private void checkWaitingForReplies() {
        TLRPC.MessageFwdHeader messageFwdHeader;
        int i;
        MessageObject messageObject;
        TLRPC.MessageReplies messageReplies;
        int iIndexOf;
        if (this.waitingForReplies.size() == 0) {
            return;
        }
        int size = this.waitingForReplies.size();
        ArrayList arrayList = null;
        LongSparseArray longSparseArray = null;
        ArrayList arrayList2 = null;
        for (int i2 = 0; i2 < size; i2++) {
            MessageObject messageObject2 = (MessageObject) this.waitingForReplies.valueAt(i2);
            if (messageObject2.replyMessageObject != null) {
                if (arrayList == null) {
                    arrayList = new ArrayList();
                }
                arrayList.add(Integer.valueOf(this.waitingForReplies.keyAt(i2)));
                if (!(messageObject2.messageOwner.action instanceof TLRPC.TL_messageActionPinMessage) && (messageFwdHeader = messageObject2.replyMessageObject.messageOwner.fwd_from) != null && MessageObject.getPeerId(messageFwdHeader.saved_from_peer) == this.dialog_id && (i = messageObject2.replyMessageObject.messageOwner.fwd_from.channel_post) != 0 && (messageObject = (MessageObject) this.messagesDict[0].get(i)) != null && (messageReplies = messageObject.messageOwner.replies) != null) {
                    messageReplies.replies++;
                    messageObject.animateComments = true;
                    TLRPC.Message message = messageObject2.messageOwner;
                    TLRPC.Peer peer = message.from_id;
                    if (peer == null) {
                        peer = message.peer_id;
                    }
                    int size2 = messageReplies.recent_repliers.size();
                    int i3 = 0;
                    while (true) {
                        if (i3 >= size2) {
                            break;
                        }
                        if (MessageObject.getPeerId((TLRPC.Peer) messageObject.messageOwner.replies.recent_repliers.get(i3)) == MessageObject.getPeerId(peer)) {
                            messageObject.messageOwner.replies.recent_repliers.remove(i3);
                            break;
                        }
                        i3++;
                    }
                    messageObject.messageOwner.replies.recent_repliers.add(0, peer);
                    if (!messageObject2.isOut()) {
                        messageObject.messageOwner.replies.max_id = messageObject2.getId();
                    }
                    MessagesStorage messagesStorage = getMessagesStorage();
                    long j = this.currentChat.f1571id;
                    int id = messageObject.getId();
                    TLRPC.MessageReplies messageReplies2 = messageObject.messageOwner.replies;
                    messagesStorage.updateRepliesCount(j, id, messageReplies2.recent_repliers, messageReplies2.max_id, 1);
                    if (messageObject.hasValidGroupId()) {
                        MessageObject.GroupedMessages groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
                        if (groupedMessages != null) {
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                            int size3 = groupedMessages.messages.size();
                            for (int i4 = 0; i4 < size3; i4++) {
                                groupedMessages.messages.get(i4).animateComments = true;
                            }
                        }
                    } else if (this.chatAdapter != null && (iIndexOf = this.messages.indexOf(messageObject)) >= 0) {
                        if (arrayList2 == null) {
                            arrayList2 = new ArrayList();
                        }
                        arrayList2.add(Integer.valueOf(iIndexOf + this.chatAdapter.messagesStartRow));
                    }
                }
            }
        }
        if (arrayList != null) {
            int size4 = arrayList.size();
            for (int i5 = 0; i5 < size4; i5++) {
                this.waitingForReplies.remove(((Integer) arrayList.get(i5)).intValue());
            }
        }
        if (this.chatAdapter != null) {
            if (longSparseArray != null) {
                int size5 = longSparseArray.size();
                for (int i6 = 0; i6 < size5; i6++) {
                    MessageObject.GroupedMessages groupedMessages2 = (MessageObject.GroupedMessages) longSparseArray.valueAt(i6);
                    ArrayList<MessageObject> arrayList3 = groupedMessages2.messages;
                    int iIndexOf2 = this.messages.indexOf(arrayList3.get(arrayList3.size() - 1));
                    if (iIndexOf2 >= 0) {
                        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                        if (!chatActivityAdapter.isFiltered) {
                            chatActivityAdapter.notifyItemRangeChanged(iIndexOf2 + chatActivityAdapter.messagesStartRow, groupedMessages2.messages.size());
                        }
                    }
                }
            }
            if (arrayList2 == null || this.chatAdapter.isFiltered) {
                return;
            }
            int size6 = arrayList2.size();
            for (int i7 = 0; i7 < size6; i7++) {
                this.chatAdapter.notifyItemChanged(((Integer) arrayList2.get(i7)).intValue());
            }
        }
    }

    private void clearHistory(boolean z, TLRPC.TL_updates_channelDifferenceTooLong tL_updates_channelDifferenceTooLong) throws Resources.NotFoundException {
        TLRPC.User user;
        if (z) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("clear history by overwrite firstLoading=" + this.firstLoading + " minMessage=" + this.minMessageId[0] + " topMessage=" + tL_updates_channelDifferenceTooLong.dialog.top_message);
            }
            TLRPC.Dialog dialog = tL_updates_channelDifferenceTooLong.dialog;
            int i = dialog.top_message;
            int i2 = this.minMessageId[0];
            if (i > i2) {
                this.createUnreadMessageAfterId = Math.max(i2 + 1, dialog.read_inbox_max_id);
            }
            this.forwardEndReached[0] = false;
            this.hideForwardEndReached = false;
            ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
            if (chatActivityAdapter != null && chatActivityAdapter.loadingDownRow < 0) {
                this.chatAdapter.notifyItemInserted(0);
            }
            TLRPC.Dialog dialog2 = tL_updates_channelDifferenceTooLong.dialog;
            int i3 = dialog2.unread_count;
            this.newUnreadMessageCount = i3;
            this.newMentionsCount = dialog2.unread_mentions_count;
            if (this.prevSetUnreadCount != i3) {
                ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout = this.sideControlsButtonsLayout;
                if (chatActivitySideControlsButtonsLayout != null) {
                    chatActivitySideControlsButtonsLayout.setButtonCount(0, i3, this.openAnimationEnded);
                }
                this.prevSetUnreadCount = this.newUnreadMessageCount;
                updatePagedownButtonVisibility(true);
            }
            int i4 = this.newMentionsCount;
            int i5 = tL_updates_channelDifferenceTooLong.dialog.unread_mentions_count;
            if (i4 != i5) {
                this.newMentionsCount = i5;
                if (i5 <= 0) {
                    this.newMentionsCount = 0;
                    this.hasAllMentionsLocal = true;
                    showMentionDownButton(false, true);
                } else {
                    ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout2 = this.sideControlsButtonsLayout;
                    if (chatActivitySideControlsButtonsLayout2 != null) {
                        chatActivitySideControlsButtonsLayout2.setButtonCount(1, i5, true);
                    }
                    showMentionDownButton(true, true);
                }
            }
            checkScrollForLoad(false);
            return;
        }
        this.messages.clear();
        this.waitingForLoad.clear();
        this.messagesByDays.clear();
        this.messagesByDaysSorted.clear();
        this.groupedMessagesMap.clear();
        this.threadMessageAdded = false;
        for (int i6 = 1; i6 >= 0; i6--) {
            this.messagesDict[i6].clear();
            if (this.currentEncryptedChat == null) {
                this.maxMessageId[i6] = Integer.MAX_VALUE;
                this.minMessageId[i6] = Integer.MIN_VALUE;
            } else {
                this.maxMessageId[i6] = Integer.MIN_VALUE;
                this.minMessageId[i6] = Integer.MAX_VALUE;
            }
            this.maxDate[i6] = Integer.MIN_VALUE;
            this.minDate[i6] = 0;
            this.selectedMessagesIds[i6].clear();
            this.selectedMessagesCanCopyIds[i6].clear();
            this.selectedMessagesCanStarIds[i6].clear();
        }
        hideActionMode();
        updatePinnedMessageView(true);
        if (this.botButtons != null) {
            this.botButtons = null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.setButtons(null, false);
            }
        }
        if (this.progressView != null) {
            showProgressView(false);
            createEmptyView(false);
            this.chatListView.setEmptyView(this.emptyViewContainer);
        }
        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
        if (chatActivityAdapter2 != null) {
            chatActivityAdapter2.notifyDataSetChanged(false);
        }
        if (this.currentEncryptedChat == null && (user = this.currentUser) != null && user.bot && this.botUser == null) {
            this.botUser = "";
            updateBottomOverlay();
        }
    }

    public boolean processSwitchButton(TLRPC.TL_keyboardButtonSwitchInline tL_keyboardButtonSwitchInline) {
        if (this.inlineReturn == 0 || tL_keyboardButtonSwitchInline.same_peer || this.parentLayout == null) {
            return false;
        }
        String str = "@" + this.currentUser.username + " " + tL_keyboardButtonSwitchInline.query;
        if (this.inlineReturn == this.dialog_id) {
            this.inlineReturn = 0L;
            this.chatActivityEnterView.setFieldText(str);
        } else {
            getMediaDataController().saveDraft(this.inlineReturn, 0, str, null, null, false, 0L);
            if (this.parentLayout.getFragmentStack().size() > 1) {
                BaseFragment baseFragment = (BaseFragment) this.parentLayout.getFragmentStack().get(this.parentLayout.getFragmentStack().size() - 2);
                if ((baseFragment instanceof ChatActivity) && ((ChatActivity) baseFragment).dialog_id == this.inlineReturn) {
                    lambda$onBackPressed$371();
                } else {
                    Bundle bundle = new Bundle();
                    if (DialogObject.isEncryptedDialog(this.inlineReturn)) {
                        bundle.putInt("enc_id", DialogObject.getEncryptedChatId(this.inlineReturn));
                    } else if (DialogObject.isUserDialog(this.inlineReturn)) {
                        bundle.putLong("user_id", this.inlineReturn);
                    } else {
                        bundle.putLong("chat_id", -this.inlineReturn);
                    }
                    addToPulledDialogsMyself();
                    presentFragment(new ChatActivity(bundle), true);
                }
            }
        }
        return true;
    }

    private void showGigagroupConvertAlert() {
        TLRPC.ChatFull chatFull = this.chatInfo;
        if (chatFull == null || this.paused) {
            return;
        }
        TLRPC.Chat chat = this.currentChat;
        if (chat.creator && chat.megagroup && !chat.gigagroup && chatFull.pending_suggestions.contains("CONVERT_GIGAGROUP") && this.visibleDialog == null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda156
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$showGigagroupConvertAlert$200();
                }
            }, 1000L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$200() {
        TLRPC.ChatFull chatFull = this.chatInfo;
        if (chatFull == null || this.paused) {
            return;
        }
        TLRPC.Chat chat = this.currentChat;
        if (chat.creator && chat.megagroup && !chat.gigagroup && chatFull.pending_suggestions.contains("CONVERT_GIGAGROUP") && this.visibleDialog == null) {
            SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
            int i = notificationsSettings.getInt("group_convert_time", 0);
            int i2 = BuildVars.DEBUG_PRIVATE_VERSION ? Opcodes.ISHL : 604800;
            int currentTime = getConnectionsManager().getCurrentTime();
            if (Math.abs(currentTime - i) < i2 || this.visibleDialog != null || getParentActivity() == null) {
                return;
            }
            notificationsSettings.edit().putInt("group_convert_time", currentTime).apply();
            showDialog(AlertsCreator.createGigagroupConvertAlert(getParentActivity(), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda288
                @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                public final void onClick(AlertDialog alertDialog, int i3) {
                    this.f$0.lambda$showGigagroupConvertAlert$198(alertDialog, i3);
                }
            }, new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda289
                @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                public final void onClick(AlertDialog alertDialog, int i3) {
                    this.f$0.lambda$showGigagroupConvertAlert$199(alertDialog, i3);
                }
            }).create());
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$91 */
    /* loaded from: classes5.dex */
    class DialogC314291 extends GigagroupConvertAlert {
        DialogC314291(Context context, BaseFragment baseFragment) {
            super(context, baseFragment);
        }

        @Override // org.telegram.p023ui.Components.GigagroupConvertAlert
        protected void onCovert() {
            MessagesController messagesController = ChatActivity.this.getMessagesController();
            Activity parentActivity = ChatActivity.this.getParentActivity();
            ChatActivity chatActivity = ChatActivity.this;
            messagesController.convertToGigaGroup(parentActivity, chatActivity.currentChat, chatActivity, new MessagesStorage.BooleanCallback() { // from class: org.telegram.ui.ChatActivity$91$$ExternalSyntheticLambda0
                @Override // org.telegram.messenger.MessagesStorage.BooleanCallback
                public final void run(boolean z) {
                    this.f$0.lambda$onCovert$0(z);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onCovert$0(boolean z) {
            if (z) {
                ChatActivity.this.createUndoView();
                if (ChatActivity.this.undoView == null) {
                    return;
                }
                ChatActivity.this.undoView.showWithAction(0L, 76, (Runnable) null);
            }
        }

        @Override // org.telegram.p023ui.Components.GigagroupConvertAlert
        protected void onCancel() {
            ChatActivity.this.createUndoView();
            if (ChatActivity.this.undoView == null) {
                return;
            }
            ChatActivity.this.undoView.showWithAction(0L, 75, (Runnable) null);
            ChatActivity.this.getMessagesController().removeSuggestion(ChatActivity.this.dialog_id, "CONVERT_GIGAGROUP");
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$198(AlertDialog alertDialog, int i) {
        showDialog(new DialogC314291(getParentActivity(), this));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showGigagroupConvertAlert$199(AlertDialog alertDialog, int i) {
        createUndoView();
        UndoView undoView = this.undoView;
        if (undoView == null) {
            return;
        }
        undoView.showWithAction(0L, 75, (Runnable) null);
    }

    private void addReplyMessageOwner(MessageObject messageObject, Integer num) {
        MessageObject messageObject2 = messageObject.replyMessageObject;
        if (messageObject2 == null) {
            return;
        }
        int id = messageObject2.getId();
        ArrayList arrayList = (ArrayList) this.replyMessageOwners.get(id);
        if (arrayList == null) {
            arrayList = new ArrayList();
            this.replyMessageOwners.put(id, arrayList);
        }
        int id2 = messageObject.getId();
        if (!arrayList.contains(Integer.valueOf(id2))) {
            arrayList.add(Integer.valueOf(id2));
        }
        if (num.intValue() != 0) {
            arrayList.remove(num);
        }
    }

    private void updateReplyMessageOwners(int i, MessageObject messageObject) {
        ArrayList arrayList = (ArrayList) this.replyMessageOwners.get(i);
        if (arrayList == null) {
            return;
        }
        MessageObject messageObject2 = messageObject == null ? new MessageObject(this.currentAccount, new TLRPC.TL_messageEmpty(), false, false) : null;
        int size = arrayList.size();
        for (int i2 = 0; i2 < size; i2++) {
            MessageObject messageObject3 = (MessageObject) this.messagesDict[0].get(((Integer) arrayList.get(i2)).intValue());
            if (messageObject3 != null) {
                if (messageObject == null) {
                    messageObject3.replyMessageObject = messageObject2;
                } else {
                    messageObject3.replyMessageObject = messageObject;
                }
                ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                if (chatActivityAdapter != null) {
                    chatActivityAdapter.updateRowWithMessageObject(messageObject3, true, false);
                }
            }
        }
        if (messageObject == null) {
            this.replyMessageOwners.remove(i);
        }
    }

    private void rotateMotionBackgroundDrawable() {
        MotionBackgroundDrawable motionBackgroundDrawable;
        ThemeDelegate themeDelegate = this.themeDelegate;
        if (themeDelegate == null) {
            return;
        }
        Drawable wallpaperDrawable = themeDelegate.getWallpaperDrawable();
        if (this.fragmentView != null) {
            wallpaperDrawable = this.contentView.getBackgroundImage();
        }
        if (wallpaperDrawable instanceof ChatBackgroundDrawable) {
            wallpaperDrawable = ((ChatBackgroundDrawable) wallpaperDrawable).getDrawable(true);
        }
        if (wallpaperDrawable instanceof MotionBackgroundDrawable) {
            ((MotionBackgroundDrawable) wallpaperDrawable).switchToNextPosition();
        }
        Drawable themedDrawable = getThemedDrawable("drawableMsgOut");
        if (!(themedDrawable instanceof Theme.MessageDrawable) || (motionBackgroundDrawable = ((Theme.MessageDrawable) themedDrawable).getMotionBackgroundDrawable()) == null) {
            return;
        }
        motionBackgroundDrawable.switchToNextPosition();
    }

    private void processNewMessages(ArrayList arrayList) throws InterruptedException, Resources.NotFoundException {
        processNewMessages(arrayList, true);
    }

    /*  JADX ERROR: NullPointerException in pass: LoopRegionVisitor
        java.lang.NullPointerException: Cannot invoke "jadx.core.dex.instructions.args.SSAVar.use(jadx.core.dex.instructions.args.RegisterArg)" because "ssaVar" is null
        	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:493)
        	at jadx.core.dex.nodes.InsnNode.rebindArgs(InsnNode.java:496)
        */
    /* JADX WARN: Code restructure failed: missing block: B:418:0x0730, code lost:
    
        if (org.telegram.messenger.MessageObject.getSavedDialogId(getUserConfig().getClientUserId(), r11.messageOwner) != r31.threadMessageId) goto L419;
     */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:107:0x0244  */
    /* JADX WARN: Removed duplicated region for block: B:110:0x0251  */
    /* JADX WARN: Removed duplicated region for block: B:114:0x026a  */
    /* JADX WARN: Removed duplicated region for block: B:157:0x0329  */
    /* JADX WARN: Removed duplicated region for block: B:172:0x0373  */
    /* JADX WARN: Removed duplicated region for block: B:198:0x03fa  */
    /* JADX WARN: Removed duplicated region for block: B:199:0x03ff  */
    /* JADX WARN: Removed duplicated region for block: B:213:0x0425  */
    /* JADX WARN: Removed duplicated region for block: B:259:0x0508  */
    /* JADX WARN: Removed duplicated region for block: B:565:0x09b6  */
    /* JADX WARN: Removed duplicated region for block: B:567:0x09ba  */
    /* JADX WARN: Removed duplicated region for block: B:614:0x0a7b  */
    /* JADX WARN: Removed duplicated region for block: B:628:0x0aad  */
    /* JADX WARN: Removed duplicated region for block: B:646:0x0b04  */
    /* JADX WARN: Removed duplicated region for block: B:744:0x0d1a  */
    /* JADX WARN: Removed duplicated region for block: B:757:0x0d7d  */
    /* JADX WARN: Removed duplicated region for block: B:762:0x0d89  */
    /* JADX WARN: Removed duplicated region for block: B:767:0x0d98  */
    /* JADX WARN: Removed duplicated region for block: B:76:0x01ce  */
    /* JADX WARN: Removed duplicated region for block: B:770:0x0dac  */
    /* JADX WARN: Removed duplicated region for block: B:774:0x0dbb  */
    /* JADX WARN: Removed duplicated region for block: B:777:0x0dc5  */
    /* JADX WARN: Removed duplicated region for block: B:77:0x01d1  */
    /* JADX WARN: Removed duplicated region for block: B:780:0x0dce  */
    /* JADX WARN: Removed duplicated region for block: B:784:0x0dd6  */
    /* JADX WARN: Removed duplicated region for block: B:792:0x0df2  */
    /* JADX WARN: Removed duplicated region for block: B:795:0x0e00 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:796:0x0e02  */
    /* JADX WARN: Removed duplicated region for block: B:799:0x0e0c  */
    /* JADX WARN: Removed duplicated region for block: B:93:0x0202  */
    /* JADX WARN: Removed duplicated region for block: B:94:0x0204  */
    /* JADX WARN: Removed duplicated region for block: B:960:0x0439 A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:985:0x0aec A[SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:98:0x0223  */
    /* JADX WARN: Type inference failed for: r10v5 */
    /* JADX WARN: Type inference failed for: r10v6, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r10v7 */
    /* JADX WARN: Type inference failed for: r10v8 */
    /* JADX WARN: Type inference failed for: r5v31 */
    /* JADX WARN: Type inference failed for: r5v32, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r5v33 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processNewMessages(java.util.ArrayList r32, boolean r33) throws java.lang.InterruptedException, android.content.res.Resources.NotFoundException {
        /*
            Method dump skipped, instructions count: 4169
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.processNewMessages(java.util.ArrayList, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processNewMessages$201(int i) {
        scrollToMessageId(i, 0, false, 0, true, 0);
    }

    private int getStableIdForDateObject(int i) {
        int i2 = this.dateObjectsStableIds.get(i, -1);
        if (i2 != -1) {
            return i2;
        }
        int i3 = lastStableId;
        lastStableId = i3 + 1;
        this.dateObjectsStableIds.put(i, i3);
        return i3;
    }

    private int getStableIdForConversionObject(int i) {
        int i2 = this.conversionObjectsStableIds.get(i, -1);
        if (i2 != -1) {
            return i2;
        }
        int i3 = lastStableId;
        lastStableId = i3 + 1;
        this.conversionObjectsStableIds.put(i, i3);
        return i3;
    }

    private int getSponsoredMessagesCount() {
        int i = 0;
        if (!AyuConfig.disableAds) {
            while (i < this.messages.size() && ((MessageObject) this.messages.get(i)).isSponsored()) {
                i++;
            }
        }
        return i;
    }

    private void processDeletedMessages(ArrayList arrayList, long j, boolean z) throws Resources.NotFoundException, NumberFormatException {
        processDeletedMessages(arrayList, j, z, true);
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:178:0x030d  */
    /* JADX WARN: Removed duplicated region for block: B:181:0x031f A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:197:0x0342  */
    /* JADX WARN: Removed duplicated region for block: B:199:0x0345  */
    /* JADX WARN: Removed duplicated region for block: B:273:0x04c6  */
    /* JADX WARN: Removed duplicated region for block: B:277:0x04da  */
    /* JADX WARN: Removed duplicated region for block: B:284:0x0526  */
    /* JADX WARN: Removed duplicated region for block: B:288:0x0533  */
    /* JADX WARN: Removed duplicated region for block: B:310:0x05ac  */
    /* JADX WARN: Removed duplicated region for block: B:341:0x0680  */
    /* JADX WARN: Removed duplicated region for block: B:344:0x0684  */
    /* JADX WARN: Removed duplicated region for block: B:379:0x073c  */
    /* JADX WARN: Removed duplicated region for block: B:383:0x0753  */
    /* JADX WARN: Removed duplicated region for block: B:42:0x00ad  */
    /* JADX WARN: Removed duplicated region for block: B:44:0x00b7 A[PHI: r6
      0x00b7: PHI (r6v1 long) = (r6v0 long), (r6v0 long), (r6v0 long), (r6v34 long) binds: [B:22:0x005c, B:24:0x0060, B:26:0x0064, B:403:0x00b7] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:47:0x00ca  */
    /* JADX WARN: Removed duplicated region for block: B:80:0x0165  */
    /* JADX WARN: Removed duplicated region for block: B:81:0x016e  */
    /* JADX WARN: Removed duplicated region for block: B:85:0x017d  */
    /* JADX WARN: Removed duplicated region for block: B:95:0x01bf  */
    /* JADX WARN: Type inference failed for: r25v3 */
    /* JADX WARN: Type inference failed for: r25v4 */
    /* JADX WARN: Type inference failed for: r25v6 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processDeletedMessages(java.util.ArrayList r45, long r46, boolean r48, boolean r49) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 1931
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.processDeletedMessages(java.util.ArrayList, long, boolean, boolean):void");
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Type inference failed for: r9v28 */
    /* JADX WARN: Type inference failed for: r9v29, types: [org.telegram.tgnet.tl.TL_stories$StoryItem] */
    /* JADX WARN: Type inference failed for: r9v50 */
    private void replaceMessageObjects(ArrayList arrayList, int i, boolean z) {
        ChatActivityAdapter chatActivityAdapter;
        int i2;
        int i3;
        int i4;
        MessageObject.GroupedMessages groupedMessages;
        int iIndexOf;
        ArrayList<TLRPC.PhotoSize> arrayList2;
        MessageObject messageObject;
        TLRPC.TL_messageMediaWebPage tL_messageMediaWebPage;
        TLRPC.WebPage webPage;
        ?? r9;
        TLRPC.User user = null;
        boolean z2 = false;
        LongSparseArray longSparseArray = null;
        int i5 = 0;
        while (i5 < arrayList.size()) {
            MessageObject messageObject2 = (MessageObject) arrayList.get(i5);
            if (((MessageObject) this.pinnedMessageObjects.get(Integer.valueOf(messageObject2.getId()))) != null) {
                this.pinnedMessageObjects.put(Integer.valueOf(messageObject2.getId()), messageObject2);
            }
            MessageObject messageObjectOnBotForumDraftCheckNewMessages = (MessageObject) this.messagesDict[i].get(messageObject2.getId());
            if (messageObject2.getId() > 0 && messageObjectOnBotForumDraftCheckNewMessages == null && UserObject.isBotForum(this.currentUser) && (messageObjectOnBotForumDraftCheckNewMessages = BotForumHelper.getInstance(this.currentAccount).onBotForumDraftCheckNewMessages(this.currentUser.f1734id, (int) getTopicId(), messageObject2.getId(), messageObject2.messageText.toString())) != null) {
                this.botDraftAnimationsPool.bind(messageObjectOnBotForumDraftCheckNewMessages.messageOwner.f1597id, messageObject2.getId());
                TLRPC.Message message = messageObjectOnBotForumDraftCheckNewMessages.messageOwner;
                int id = messageObject2.getId();
                message.local_id = id;
                message.f1597id = id;
                messageObjectOnBotForumDraftCheckNewMessages.messageOwner.date = messageObject2.messageOwner.date;
            }
            if (this.pinnedMessageObjects.containsKey(Integer.valueOf(messageObject2.getId()))) {
                this.pinnedMessageObjects.put(Integer.valueOf(messageObject2.getId()), messageObject2);
                if (messageObject2.getId() == this.currentPinnedMessageId) {
                    updatePinnedMessageView(true);
                }
            }
            if (i == 0 && this.repliesMessagesDict.indexOfKey(messageObject2.getId()) >= 0) {
                this.repliesMessagesDict.put(messageObject2.getId(), messageObject2);
            }
            if (messageObjectOnBotForumDraftCheckNewMessages != null && ((!z || messageObjectOnBotForumDraftCheckNewMessages.messageOwner.date == messageObject2.messageOwner.date) && (!messageObject2.scheduled || this.chatMode == 1))) {
                if (z) {
                    arrayList.remove(i5);
                    i5--;
                }
                addToPolls(messageObject2, messageObjectOnBotForumDraftCheckNewMessages);
                if (messageObject2.type >= 0) {
                    MessageObject messageObject3 = messageObjectOnBotForumDraftCheckNewMessages.replyMessageObject;
                    if (messageObject3 != null) {
                        messageObject2.replyMessageObject = messageObject3;
                        TLRPC.MessageAction messageAction = messageObject2.messageOwner.action;
                        if (messageAction instanceof TLRPC.TL_messageActionGameScore) {
                            messageObject2.generateGameMessageText(user);
                        } else if (messageAction instanceof TLRPC.TL_messageActionPaymentSent) {
                            messageObject2.generatePaymentSentMessageText(user, z2);
                        } else if (messageAction instanceof TLRPC.TL_messageActionPaymentSentMe) {
                            messageObject2.generatePaymentSentMessageText(user, true);
                        } else if (messageAction instanceof TLRPC.TL_messageActionSuggestedPostApproval) {
                            messageObject2.generateSuggestionApprovalMessageText();
                        }
                    }
                    if (messageObjectOnBotForumDraftCheckNewMessages.isWebpage() && messageObject2.isWebpage() && (webPage = (tL_messageMediaWebPage = (TLRPC.TL_messageMediaWebPage) MessageObject.getMedia(messageObjectOnBotForumDraftCheckNewMessages.messageOwner)).webpage) != null && "telegram_story".equals(webPage.type)) {
                        int i6 = 0;
                        while (true) {
                            if (i6 >= tL_messageMediaWebPage.webpage.attributes.size()) {
                                r9 = user;
                                break;
                            }
                            TLRPC.WebPageAttribute webPageAttribute = (TLRPC.WebPageAttribute) tL_messageMediaWebPage.webpage.attributes.get(i6);
                            if (webPageAttribute instanceof TLRPC.TL_webPageAttributeStory) {
                                r9 = ((TLRPC.TL_webPageAttributeStory) webPageAttribute).storyItem;
                                break;
                            }
                            i6++;
                        }
                        if (r9 != 0) {
                            TLRPC.TL_messageMediaWebPage tL_messageMediaWebPage2 = (TLRPC.TL_messageMediaWebPage) MessageObject.getMedia(messageObject2.messageOwner);
                            int i7 = 0;
                            while (true) {
                                if (i7 >= tL_messageMediaWebPage2.webpage.attributes.size()) {
                                    break;
                                }
                                TLRPC.WebPageAttribute webPageAttribute2 = (TLRPC.WebPageAttribute) tL_messageMediaWebPage2.webpage.attributes.get(i7);
                                if (webPageAttribute2 instanceof TLRPC.TL_webPageAttributeStory) {
                                    TLRPC.TL_webPageAttributeStory tL_webPageAttributeStory = (TLRPC.TL_webPageAttributeStory) webPageAttribute2;
                                    if (!(tL_webPageAttributeStory.storyItem instanceof TL_stories.TL_storyItem)) {
                                        tL_webPageAttributeStory.storyItem = r9;
                                    }
                                } else {
                                    i7++;
                                }
                            }
                        }
                    }
                    if (!messageObjectOnBotForumDraftCheckNewMessages.isEditing()) {
                        if (messageObjectOnBotForumDraftCheckNewMessages.getFileName().equals(messageObject2.getFileName())) {
                            messageObject2.messageOwner.attachPath = messageObjectOnBotForumDraftCheckNewMessages.messageOwner.attachPath;
                            messageObject2.attachPathExists = messageObjectOnBotForumDraftCheckNewMessages.attachPathExists;
                            messageObject2.mediaExists = messageObjectOnBotForumDraftCheckNewMessages.mediaExists;
                        } else {
                            messageObject2.checkMediaExistance();
                        }
                    }
                    this.messagesDict[i].put(messageObjectOnBotForumDraftCheckNewMessages.getId(), messageObject2);
                } else {
                    this.messagesDict[i].remove(messageObjectOnBotForumDraftCheckNewMessages.getId());
                }
                int iIndexOf2 = this.messages.indexOf(messageObjectOnBotForumDraftCheckNewMessages);
                if (iIndexOf2 >= 0) {
                    ArrayList arrayList3 = (ArrayList) this.messagesByDays.get(messageObjectOnBotForumDraftCheckNewMessages.dateKey);
                    int iIndexOf3 = arrayList3 != null ? arrayList3.indexOf(messageObjectOnBotForumDraftCheckNewMessages) : -1;
                    if (messageObjectOnBotForumDraftCheckNewMessages.getGroupId() == 0 || (groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObjectOnBotForumDraftCheckNewMessages.getGroupId())) == null || (iIndexOf = groupedMessages.messages.indexOf(messageObjectOnBotForumDraftCheckNewMessages)) < 0) {
                        i2 = i5;
                    } else {
                        if (messageObjectOnBotForumDraftCheckNewMessages.getGroupId() != messageObject2.getGroupId()) {
                            this.groupedMessagesMap.put(messageObject2.getGroupId(), groupedMessages);
                        }
                        if (!messageObject2.isMusic() && !messageObject2.isDocument() && ((arrayList2 = messageObject2.photoThumbs) == null || arrayList2.isEmpty())) {
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                            if (iIndexOf <= 0 || iIndexOf >= groupedMessages.messages.size() - 1) {
                                i2 = i5;
                                messageObject = messageObjectOnBotForumDraftCheckNewMessages;
                            } else {
                                MessageObject.GroupedMessages groupedMessages2 = new MessageObject.GroupedMessages();
                                groupedMessages2.reversed = this.reversed;
                                messageObject = messageObjectOnBotForumDraftCheckNewMessages;
                                groupedMessages2.groupId = Utilities.random.nextLong();
                                ArrayList<MessageObject> arrayList4 = groupedMessages2.messages;
                                ArrayList<MessageObject> arrayList5 = groupedMessages.messages;
                                int i8 = iIndexOf + 1;
                                arrayList4.addAll(arrayList5.subList(i8, arrayList5.size()));
                                int i9 = 0;
                                while (i9 < groupedMessages2.messages.size()) {
                                    groupedMessages2.messages.get(i9).localGroupId = groupedMessages2.groupId;
                                    groupedMessages.messages.remove(i8);
                                    i9++;
                                    i5 = i5;
                                }
                                i2 = i5;
                                longSparseArray.put(groupedMessages2.groupId, groupedMessages2);
                                this.groupedMessagesMap.put(groupedMessages2.groupId, groupedMessages2);
                            }
                            groupedMessages.messages.remove(iIndexOf);
                            messageObjectOnBotForumDraftCheckNewMessages = messageObject;
                        } else {
                            i2 = i5;
                            MessageObject messageObject4 = messageObjectOnBotForumDraftCheckNewMessages;
                            groupedMessages.messages.set(iIndexOf, messageObject2);
                            messageObjectOnBotForumDraftCheckNewMessages = messageObject4;
                            MessageObject.GroupedMessagePosition groupedMessagePositionRemove = groupedMessages.positions.remove(messageObjectOnBotForumDraftCheckNewMessages);
                            groupedMessages.positionsArray.remove(messageObjectOnBotForumDraftCheckNewMessages.getId());
                            if (groupedMessagePositionRemove != null) {
                                groupedMessages.positions.put(messageObject2, groupedMessagePositionRemove);
                                groupedMessages.positionsArray.put(messageObject2.getId(), groupedMessagePositionRemove);
                            }
                            if (longSparseArray == null) {
                                longSparseArray = new LongSparseArray();
                            }
                            longSparseArray.put(groupedMessages.groupId, groupedMessages);
                        }
                    }
                    if (this.chatMode == 3) {
                        messageObject2.isSaved = true;
                    }
                    if (messageObject2.type >= 0) {
                        messageObject2.reactionsChanged |= messageObjectOnBotForumDraftCheckNewMessages.isBotPendingDraft && !messageObject2.isBotPendingDraft;
                        messageObject2.copyStableParams(messageObjectOnBotForumDraftCheckNewMessages);
                        this.messages.set(iIndexOf2, messageObject2);
                        ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
                        if (chatActivityAdapter2 != null && !chatActivityAdapter2.isFiltered) {
                            chatActivityAdapter2.updateRowAtPosition(chatActivityAdapter2.messagesStartRow + iIndexOf2);
                        }
                        if (iIndexOf3 >= 0) {
                            arrayList3.set(iIndexOf3, messageObject2);
                        }
                    } else {
                        this.messages.remove(iIndexOf2);
                        ChatActivityAdapter chatActivityAdapter3 = this.chatAdapter;
                        if (chatActivityAdapter3 != null && !chatActivityAdapter3.isFiltered) {
                            chatActivityAdapter3.notifyItemRemoved(chatActivityAdapter3.messagesStartRow + iIndexOf2);
                        }
                        if (((MessageObject) this.conversionMessages.get(messageObjectOnBotForumDraftCheckNewMessages.getId())) != null) {
                            this.conversionMessages.remove(messageObjectOnBotForumDraftCheckNewMessages.getId());
                            this.messages.remove(iIndexOf2);
                            int i10 = this.chatAdapter.loadingUpRow;
                            int i11 = this.chatAdapter.loadingDownRow;
                            int i12 = this.chatAdapter.userNameTimeRow;
                            int i13 = this.chatAdapter.userPhotoTimeRow;
                            ChatActivityAdapter chatActivityAdapter4 = this.chatAdapter;
                            if (!chatActivityAdapter4.isFiltered) {
                                chatActivityAdapter4.notifyItemRemoved(chatActivityAdapter4.messagesStartRow + iIndexOf2);
                                if (this.messages.isEmpty()) {
                                    if (i10 >= 0) {
                                        i4 = 0;
                                        this.chatAdapter.notifyItemRemoved(0);
                                    } else {
                                        i4 = 0;
                                    }
                                    if (i11 >= 0) {
                                        this.chatAdapter.notifyItemRemoved(i4);
                                    }
                                    if (i12 >= 0) {
                                        this.chatAdapter.notifyItemRemoved(i4);
                                    }
                                    if (i13 >= 0) {
                                        this.chatAdapter.notifyItemRemoved(i4);
                                    }
                                }
                            }
                        }
                        if (iIndexOf3 >= 0) {
                            arrayList3.remove(iIndexOf3);
                            if (arrayList3.isEmpty()) {
                                this.messagesByDays.remove(messageObjectOnBotForumDraftCheckNewMessages.dateKey);
                                this.messagesByDaysSorted.remove(messageObjectOnBotForumDraftCheckNewMessages.dateKeyInt);
                                this.messages.remove(iIndexOf2);
                                int i14 = this.chatAdapter.loadingUpRow;
                                int i15 = this.chatAdapter.loadingDownRow;
                                int i16 = this.chatAdapter.userNameTimeRow;
                                int i17 = this.chatAdapter.userPhotoTimeRow;
                                ChatActivityAdapter chatActivityAdapter5 = this.chatAdapter;
                                if (!chatActivityAdapter5.isFiltered) {
                                    chatActivityAdapter5.notifyItemRemoved(chatActivityAdapter5.messagesStartRow + iIndexOf2);
                                    if (this.messages.isEmpty()) {
                                        if (i14 >= 0) {
                                            i3 = 0;
                                            this.chatAdapter.notifyItemRemoved(0);
                                        } else {
                                            i3 = 0;
                                        }
                                        if (i15 >= 0) {
                                            this.chatAdapter.notifyItemRemoved(i3);
                                        }
                                        if (i16 >= 0) {
                                            this.chatAdapter.notifyItemRemoved(i3);
                                        }
                                        if (i17 >= 0) {
                                            this.chatAdapter.notifyItemRemoved(i3);
                                        }
                                    }
                                    updateReplyMessageOwners(messageObjectOnBotForumDraftCheckNewMessages.getId(), messageObject2);
                                    i5 = i2;
                                }
                            }
                        }
                    }
                } else {
                    i2 = i5;
                }
                updateReplyMessageOwners(messageObjectOnBotForumDraftCheckNewMessages.getId(), messageObject2);
                i5 = i2;
            }
            i5++;
            user = null;
            z2 = false;
        }
        if (longSparseArray != null) {
            for (int i18 = 0; i18 < longSparseArray.size(); i18++) {
                MessageObject.GroupedMessages groupedMessages3 = (MessageObject.GroupedMessages) longSparseArray.valueAt(i18);
                if (groupedMessages3.messages.isEmpty()) {
                    this.groupedMessagesMap.remove(groupedMessages3.groupId);
                } else {
                    groupedMessages3.calculate();
                    ArrayList<MessageObject> arrayList6 = groupedMessages3.messages;
                    int iIndexOf4 = this.messages.indexOf(arrayList6.get(arrayList6.size() - 1));
                    if (iIndexOf4 >= 0 && (chatActivityAdapter = this.chatAdapter) != null) {
                        chatActivityAdapter.notifyItemRangeChanged(iIndexOf4 + chatActivityAdapter.messagesStartRow, groupedMessages3.messages.size());
                        ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
                        if (chatListItemAnimator != null) {
                            chatListItemAnimator.groupWillChanged(groupedMessages3);
                        }
                    }
                }
            }
        }
        updatePinnedTopicStarterMessage();
    }

    private void migrateToNewChat(final MessageObject messageObject) {
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout == null) {
            return;
        }
        final long j = messageObject.messageOwner.action.channel_id;
        final BaseFragment baseFragment = iNavigationLayout.getFragmentStack().size() > 0 ? (BaseFragment) this.parentLayout.getFragmentStack().get(this.parentLayout.getFragmentStack().size() - 1) : null;
        int iIndexOf = this.parentLayout.getFragmentStack().indexOf(this);
        final INavigationLayout iNavigationLayout2 = this.parentLayout;
        if (iIndexOf > 0 && !(baseFragment instanceof ChatActivity) && !(baseFragment instanceof ProfileActivity) && this.currentChat.creator) {
            int size = iNavigationLayout2.getFragmentStack().size() - 1;
            while (iIndexOf < size) {
                BaseFragment baseFragment2 = (BaseFragment) iNavigationLayout2.getFragmentStack().get(iIndexOf);
                if (baseFragment2 instanceof ChatActivity) {
                    Bundle bundle = new Bundle();
                    bundle.putLong("chat_id", j);
                    iNavigationLayout2.addFragmentToStack(new ChatActivity(bundle), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ProfileActivity) {
                    Bundle bundle2 = new Bundle();
                    bundle2.putLong("chat_id", j);
                    iNavigationLayout2.addFragmentToStack(new ProfileActivity(bundle2), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ChatEditActivity) {
                    Bundle bundle3 = new Bundle();
                    bundle3.putLong("chat_id", j);
                    iNavigationLayout2.addFragmentToStack(new ChatEditActivity(bundle3), iIndexOf);
                    baseFragment2.removeSelfFromStack();
                } else if (baseFragment2 instanceof ChatUsersActivity) {
                    if (!((ChatUsersActivity) baseFragment2).hasSelectType()) {
                        Bundle arguments = baseFragment2.getArguments();
                        arguments.putLong("chat_id", j);
                        iNavigationLayout2.addFragmentToStack(new ChatUsersActivity(arguments), iIndexOf);
                    }
                    baseFragment2.removeSelfFromStack();
                }
                iIndexOf++;
            }
        } else {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda220
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$migrateToNewChat$202(baseFragment, messageObject, iNavigationLayout2);
                }
            });
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda221
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$migrateToNewChat$203(j);
            }
        }, 1000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    public /* synthetic */ void lambda$migrateToNewChat$202(BaseFragment baseFragment, MessageObject messageObject, INavigationLayout iNavigationLayout) {
        if (baseFragment instanceof NotificationCenter.NotificationCenterDelegate) {
            getNotificationCenter().removeObserver((NotificationCenter.NotificationCenterDelegate) baseFragment, NotificationCenter.closeChats);
        }
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.closeChats, new Object[0]);
        Bundle bundle = new Bundle();
        bundle.putLong("chat_id", messageObject.messageOwner.action.channel_id);
        iNavigationLayout.addFragmentToStack(new ChatActivity(bundle), iNavigationLayout.getFragmentStack().size() - 1);
        baseFragment.lambda$onBackPressed$371();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$migrateToNewChat$203(long j) {
        getMessagesController().loadFullChat(j, 0, true);
    }

    private void addToPolls(MessageObject messageObject, MessageObject messageObject2) {
        long pollId = messageObject.getPollId();
        if (pollId != 0) {
            ArrayList arrayList = (ArrayList) this.polls.get(pollId);
            if (arrayList == null) {
                arrayList = new ArrayList();
                this.polls.put(pollId, arrayList);
            }
            arrayList.add(messageObject);
            if (messageObject2 != null) {
                arrayList.remove(messageObject2);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showInfoHint(MessageObject messageObject, CharSequence charSequence, final int i) {
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.chats_infotip, charSequence, 9999).setDuration(Math.max(4000, Math.min(((charSequence == null ? 0 : charSequence.length()) / 50) * 1600, XCallback.PRIORITY_HIGHEST))).setOnHideListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda198
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showInfoHint$204(i);
            }
        }).show(true);
        this.hintMessageObject = messageObject;
        this.hintMessageType = i;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showInfoHint$204(int i) {
        ChatMessageCell chatMessageCell;
        MessageObject messageObject;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            int childCount = chatListRecyclerView.getChildCount();
            for (int i2 = 0; i2 < childCount; i2++) {
                View childAt = this.chatListView.getChildAt(i2);
                if ((childAt instanceof ChatMessageCell) && (messageObject = (chatMessageCell = (ChatMessageCell) childAt).getMessageObject()) != null && messageObject.equals(this.hintMessageObject)) {
                    chatMessageCell.showHintButton(true, true, i);
                }
            }
        }
        this.hintMessageObject = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showPollSolution(MessageObject messageObject, TLRPC.PollResults pollResults) {
        CharSequence charSequenceReplaceEmoji;
        TLRPC.Message message;
        TranslateController.PollText pollText;
        TLRPC.TL_textWithEntities tL_textWithEntities;
        if (pollResults == null || TextUtils.isEmpty(pollResults.solution)) {
            return;
        }
        String str = pollResults.solution;
        ArrayList arrayList = pollResults.solution_entities;
        if (messageObject != null && messageObject.translated && (message = messageObject.messageOwner) != null && (pollText = message.translatedPoll) != null && (tL_textWithEntities = pollText.solution) != null) {
            str = tL_textWithEntities.text;
            arrayList = tL_textWithEntities.entities;
        }
        ArrayList arrayList2 = arrayList;
        if (!arrayList2.isEmpty()) {
            charSequenceReplaceEmoji = MessageObject.replaceAnimatedEmoji(Emoji.replaceEmoji(new SpannableStringBuilder(str), Theme.chat_msgBotButtonPaint.getFontMetricsInt(), false), arrayList2, Theme.chat_msgBotButtonPaint.getFontMetricsInt());
            MessageObject.addEntitiesToText(charSequenceReplaceEmoji, arrayList2, false, true, true, false);
        } else {
            charSequenceReplaceEmoji = Emoji.replaceEmoji(str, Theme.chat_msgBotButtonPaint.getFontMetricsInt(), false);
        }
        showInfoHint(messageObject, charSequenceReplaceEmoji, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateSearchButtons(int i, int i2, int i3) {
        ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout = this.sideControlsButtonsLayout;
        if (chatActivitySideControlsButtonsLayout != null) {
            chatActivitySideControlsButtonsLayout.setButtonEnabled(4, ((this.reversed ? 2 : 1) & i) != 0, true);
            this.sideControlsButtonsLayout.setButtonEnabled(3, (i & (this.reversed ? 1 : 2)) != 0, true);
        }
        this.searchLastCount = i3;
        this.searchLastIndex = i2;
        updateSearchCountText();
        AnimatedTextView animatedTextView = this.searchExpandList;
        if (animatedTextView != null) {
            animatedTextView.setClickable(i3 > 0);
            this.searchExpandList.animate().alpha(i3 > 0 ? 1.0f : 0.5f).start();
        }
    }

    private void updateSearchCountText() {
        AnimatedTextView animatedTextView = this.searchCountText;
        if (animatedTextView != null) {
            boolean z = !LocaleController.isRTL;
            int i = this.searchLastCount;
            if (i < 0) {
                animatedTextView.setText("", z);
                return;
            }
            if (i == 0) {
                animatedTextView.setText(LocaleController.getString(C2369R.string.NoResult), z);
                return;
            }
            if (this.searchingFiltered) {
                animatedTextView.setText(LocaleController.formatPluralString("TaggedMessages", i, new Object[0]), z);
                return;
            }
            if (this.chatMode == 7 || this.messagesSearchListContainer.getTag() != null) {
                AnimatedTextView animatedTextView2 = this.searchCountText;
                int i2 = this.searchLastCount;
                animatedTextView2.setText(LocaleController.formatPluralString("SearchMessagesResultCount", i2, LocaleController.formatNumber(i2, ' ')), z);
                return;
            }
            this.searchCountText.setText(LocaleController.formatString(C2369R.string.f1460Of, Integer.valueOf(this.searchLastIndex + 1), Integer.valueOf(this.searchLastCount)), z);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean needDelayOpenAnimation() {
        if (this.chatMode != 1 && getParentLayout() != null && getParentLayout().getFragmentStack().size() > 1) {
            BaseFragment baseFragment = (BaseFragment) getParentLayout().getFragmentStack().get(getParentLayout().getFragmentStack().size() - 2);
            if ((baseFragment instanceof ChatActivity) && ((ChatActivity) baseFragment).isKeyboardVisible()) {
                return false;
            }
        }
        return this.firstLoading;
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onBecomeFullyVisible() throws Resources.NotFoundException {
        this.isFullyVisible = true;
        super.onBecomeFullyVisible();
        if (this.showCloseChatDialogLater) {
            showDialog(this.closeChatDialog);
        }
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout != null && iNavigationLayout.getDrawerLayoutContainer() != null) {
            this.parentLayout.getDrawerLayoutContainer().setBehindKeyboardColor(getThemedColor(Theme.key_windowBackgroundWhite));
        }
        if (this.keyboardWasVisible) {
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.openKeyboardInternal();
                this.chatActivityEnterView.freezeEmojiView(false);
            }
            this.keyboardWasVisible = false;
        }
        if (this.savedMessagesHint != null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda111
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.checkSavedMessagesHint();
                }
            }, 600L);
        }
        if (!this.convertingToast || this.convertingToastShown) {
            return;
        }
        this.convertingToastShown = true;
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.convert_video, LocaleController.getString(C2369R.string.VideoConversionTitle), LocaleController.getString(C2369R.string.VideoConversionText)).setDuration(5000).setOnHideListener(new ChatActivity$$ExternalSyntheticLambda112(this)).show(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkConversionDateTimeToast() {
        ChatMessageCell chatMessageCell;
        if (this.shownConversionDateTimeToast || !this.isFullyVisible || !this.chatListView.isAttachedToWindow() || getContext() == null) {
            return;
        }
        int[] iArr = new int[2];
        int childCount = this.chatListView.getChildCount() - 1;
        while (true) {
            if (childCount < 0) {
                chatMessageCell = null;
                break;
            }
            View childAt = this.chatListView.getChildAt(childCount);
            if (childAt instanceof ChatMessageCell) {
                chatMessageCell = (ChatMessageCell) childAt;
                if (chatMessageCell.getMessageObject() != null && chatMessageCell.getMessageObject().messageOwner != null && chatMessageCell.getMessageObject().messageOwner.video_processing_pending) {
                    if (chatMessageCell.getCurrentPosition() != null) {
                        if (chatMessageCell.getMessageObject() != null && (chatMessageCell.getCurrentPosition().flags & 8) != 0) {
                            if ((chatMessageCell.getCurrentPosition().flags & (chatMessageCell.getMessageObject().isOutOwner() ? 1 : 2)) == 0) {
                                continue;
                            }
                        }
                    }
                    chatMessageCell.getLocationInWindow(iArr);
                    float timeY = iArr[1] + chatMessageCell.getTimeY();
                    if (timeY >= AndroidUtilities.m1146dp(240.0f) && timeY <= (AndroidUtilities.displaySize.y - AndroidUtilities.m1146dp(25.0f)) - AndroidUtilities.navigationBarHeight) {
                        break;
                    }
                }
            }
            childCount--;
        }
        if (chatMessageCell != null) {
            this.shownConversionDateTimeToast = true;
            HintView2 rounding = new HintView2(getContext(), 3) { // from class: org.telegram.ui.ChatActivity.92
                @Override // android.view.View
                protected void onLayout(boolean z, int i, int i2, int i3, int i4) {
                    super.onLayout(z, i, i2, i3, i4);
                    setTranslationY(((-getTop()) - AndroidUtilities.m1146dp(120.0f)) + ChatActivity.this.videoConversionTimeHintY);
                }
            }.setMultilineText(true).setTextAlign(Layout.Alignment.ALIGN_CENTER).setDuration(3500L).setHideByTouch(true).useScale(true).setMaxWidth(150.0f).setRounding(8.0f);
            this.videoConversionTimeHint = rounding;
            rounding.setText(LocaleController.getString(C2369R.string.VideoConversionTimeInfo));
            this.contentView.addView(this.videoConversionTimeHint, LayoutHelper.createFrame(-1, 120.0f, 55, 16.0f, 0.0f, 16.0f, 0.0f));
            chatMessageCell.getLocationInWindow(iArr);
            this.videoConversionTimeHintY = iArr[1] + chatMessageCell.getTimeY();
            this.videoConversionTimeHint.setTranslationY(((-r0.getTop()) - AndroidUtilities.m1146dp(120.0f)) + this.videoConversionTimeHintY);
            this.videoConversionTimeHint.setJointPx(0.0f, (-AndroidUtilities.m1146dp(16.0f)) + iArr[0] + chatMessageCell.timeX + (chatMessageCell.timeWidth / 2.0f));
            this.videoConversionTimeHint.show();
            return;
        }
        AndroidUtilities.cancelRunOnUIThread(new ChatActivity$$ExternalSyntheticLambda112(this));
        AndroidUtilities.runOnUIThread(new ChatActivity$$ExternalSyntheticLambda112(this), 2000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkSavedMessagesHint() {
        if (this.checkedSavedMessagesHint) {
            return;
        }
        this.checkedSavedMessagesHint = true;
        if (this.savedMessagesHintShown || this.chatMode != 0 || getMessagesController().getSavedMessagesController().unsupported || getMessagesController().getSavedMessagesController().getAllCount() <= 2) {
            return;
        }
        if (this.savedMessagesHint != null && MessagesController.getGlobalMainSettings().getInt("savedhint", 0) < 1) {
            this.savedMessagesHint.show();
            this.savedMessagesHintShown = true;
            MessagesController.getGlobalMainSettings().edit().putInt("savedhint", MessagesController.getGlobalMainSettings().getInt("savedhint", 0) + 1).putInt("savedsearchhint", MessagesController.getGlobalMainSettings().getInt("savedsearchhint", 0) + 1).apply();
        } else {
            if (this.savedMessagesSearchHint != null && MessagesController.getGlobalMainSettings().getInt("savedsearchhint", 0) < 1) {
                this.savedMessagesSearchHint.show();
                this.savedMessagesHintShown = true;
                MessagesController.getGlobalMainSettings().edit().putInt("savedsearchhint", MessagesController.getGlobalMainSettings().getInt("savedsearchhint", 0) + 1).apply();
                return;
            }
            checkSavedMessagesTagHint();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkSavedMessagesTagHint() {
        ChatMessageCell chatMessageCell;
        HintView2 hintView2 = this.savedMessagesTagHint;
        if (hintView2 == null || hintView2.shown() || this.savedMessagesTagHintShown || !this.checkedSavedMessagesHint || this.savedMessagesTagHint == null) {
            return;
        }
        FrameLayout frameLayout = this.messagesSearchListContainer;
        if ((frameLayout == null || frameLayout.getTag() == null) && System.currentTimeMillis() - this.lastScrollTime > 1800 && MessagesController.getGlobalMainSettings().getInt("savedsearchtaghint", 0) < 1) {
            int[] iArr = new int[2];
            int childCount = this.chatListView.getChildCount() - 1;
            while (true) {
                if (childCount < 0) {
                    chatMessageCell = null;
                    break;
                }
                View childAt = this.chatListView.getChildAt(childCount);
                if (childAt instanceof ChatMessageCell) {
                    chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.areTags() && !chatMessageCell.reactionsLayoutInBubble.reactionButtons.isEmpty()) {
                        chatMessageCell.getLocationInWindow(iArr);
                        float f = iArr[1] + chatMessageCell.reactionsLayoutInBubble.f1967y;
                        if (f >= AndroidUtilities.m1146dp(240.0f) && f <= (AndroidUtilities.displaySize.y - AndroidUtilities.m1146dp(25.0f)) - AndroidUtilities.navigationBarHeight) {
                            break;
                        }
                    }
                }
                childCount--;
            }
            if (chatMessageCell != null) {
                this.savedMessagesTagHintShown = true;
                ReactionsLayoutInBubble.ReactionButton reactionButton = (ReactionsLayoutInBubble.ReactionButton) chatMessageCell.reactionsLayoutInBubble.reactionButtons.get(0);
                chatMessageCell.getLocationInWindow(iArr);
                this.savedMessagesTagHint.setTranslationY(((iArr[1] - r6.getTop()) - AndroidUtilities.m1146dp(120.0f)) + chatMessageCell.reactionsLayoutInBubble.f1967y);
                this.savedMessagesTagHint.setJointPx(0.0f, (-AndroidUtilities.m1146dp(16.0f)) + iArr[0] + chatMessageCell.reactionsLayoutInBubble.f1966x + (reactionButton.width / 2.0f));
                this.savedMessagesTagHint.show();
                MessagesController.getGlobalMainSettings().edit().putInt("savedsearchtaghint", 1).apply();
                return;
            }
            AndroidUtilities.cancelRunOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda171
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.checkSavedMessagesTagHint();
                }
            });
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda171
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.checkSavedMessagesTagHint();
                }
            }, 2000L);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onBecomeFullyHidden() {
        hideTagSelector();
        if (!getMessagesController().premiumFeaturesBlocked() && getMessagesController().transcribeAudioTrialWeeklyNumber <= 0 && !getMessagesController().didPressTranscribeButtonEnough() && !getUserConfig().isPremium() && this.messages != null && !VoiceRecognitionController.isCustomRecognitionEnabled()) {
            for (int i = 0; i < this.messages.size(); i++) {
                MessageObject messageObject = (MessageObject) this.messages.get(i);
                if (messageObject != null && !messageObject.isOutOwner() && ((messageObject.isVoice() || messageObject.isRoundVideo()) && !messageObject.isUnread() && (messageObject.isContentUnread() || ChatObject.isChannelAndNotMegaGroup(this.currentChat)))) {
                    TranscribeButton.showOffTranscribe(messageObject, false);
                }
            }
        }
        this.isFullyVisible = false;
        hideUndoViews();
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout != null && iNavigationLayout.getDrawerLayoutContainer() != null) {
            this.parentLayout.getDrawerLayoutContainer().setBehindKeyboardColor(Theme.getColor(Theme.key_windowBackgroundWhite));
        }
        TranscribeButton.resetVideoTranscriptionsOpen();
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel();
            this.progressDialogCurrent = null;
        }
        this.flagSecure.detach();
        super.onBecomeFullyHidden();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void saveKeyboardPositionBeforeTransition() {
        Runnable runnable = this.cancelFixedPositionRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && this.contentView != null && chatActivityEnterView.getAdjustPanLayoutHelper() != null && !this.chatActivityEnterView.getAdjustPanLayoutHelper().animationInProgress()) {
            this.fixedKeyboardHeight = this.contentView.getKeyboardHeight();
        } else {
            this.fixedKeyboardHeight = -1;
        }
    }

    public void removeKeyboardPositionBeforeTransition() {
        if (this.fixedKeyboardHeight > 0) {
            Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda324
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$removeKeyboardPositionBeforeTransition$205();
                }
            };
            this.cancelFixedPositionRunnable = runnable;
            AndroidUtilities.runOnUIThread(runnable, 200L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$removeKeyboardPositionBeforeTransition$205() {
        this.cancelFixedPositionRunnable = null;
        this.fixedKeyboardHeight = -1;
        View view = this.fragmentView;
        if (view != null) {
            view.requestLayout();
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onTransitionAnimationStart(boolean z, boolean z2) {
        int[] iArr;
        super.onTransitionAnimationStart(z, z2);
        this.startMs = System.currentTimeMillis();
        if (z) {
            if (!this.fragmentOpened) {
                this.fragmentOpened = true;
                updateMessagesVisiblePart(false);
            }
            if (this.transitionAnimationIndex == 0) {
                iArr = new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog, NotificationCenter.messagesDidLoad};
            } else {
                iArr = new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog};
            }
            this.openAnimationEnded = false;
            if (!z2) {
                this.openAnimationStartTime = SystemClock.elapsedRealtime();
            }
        } else {
            iArr = UserObject.isUserSelf(this.currentUser) ? new int[]{NotificationCenter.dialogsNeedReload, NotificationCenter.closeChats, NotificationCenter.botKeyboardDidLoad, NotificationCenter.needDeleteDialog, NotificationCenter.mediaDidLoad} : null;
            ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.onBeginHide();
            }
        }
        checkShowBlur(true);
        this.transitionAnimationIndex = getNotificationCenter().setAnimationInProgress(this.transitionAnimationIndex, iArr);
    }

    /* JADX WARN: Removed duplicated region for block: B:102:0x01c6  */
    /* JADX WARN: Removed duplicated region for block: B:92:0x017e  */
    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void onTransitionAnimationEnd(boolean r13, boolean r14) {
        /*
            Method dump skipped, instructions count: 591
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.onTransitionAnimationEnd(boolean, boolean):void");
    }

    private void checkGroupEmojiPackHint() {
        TLRPC.ChatFull chatFull;
        TLRPC.TL_messages_stickerSet groupStickerSetById;
        if (this.groupEmojiPackHint != null || !ChatObject.isMegagroup(this.currentChat) || (chatFull = getMessagesController().getChatFull(this.currentChat.f1571id)) == null || chatFull.emojiset == null || this.chatActivityEnterView == null || getContext() == null) {
            return;
        }
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
        if ((chatActivityChannelButtonsLayout == null || chatActivityChannelButtonsLayout.getVisibility() != 0) && !MessagesController.getGlobalMainSettings().getBoolean("groupEmojiPackHintShown", false)) {
            TLRPC.StickerSet stickerSet = chatFull.emojiset;
            long j = stickerSet.thumb_document_id;
            if (j == 0 && (groupStickerSetById = getMediaDataController().getGroupStickerSetById(stickerSet)) != null && !groupStickerSetById.documents.isEmpty()) {
                j = ((TLRPC.Document) groupStickerSetById.documents.get(0)).f1579id;
            }
            if (j == 0 || getContext() == null) {
                return;
            }
            MessagesController.getGlobalMainSettings().edit().putBoolean("groupEmojiPackHintShown", true).apply();
            HintView2 hintView2 = new HintView2(getContext(), 3);
            this.groupEmojiPackHint = hintView2;
            hintView2.setCloseButton(true);
            this.groupEmojiPackHint.setMultilineText(true);
            this.groupEmojiPackHint.setTextAlign(Layout.Alignment.ALIGN_CENTER);
            this.groupEmojiPackHint.setRounding(12.0f);
            SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder("d");
            spannableStringBuilder.setSpan(new AnimatedEmojiSpan(j, this.groupEmojiPackHint.getTextPaint().getFontMetricsInt()), 0, spannableStringBuilder.length(), 33);
            SpannableStringBuilder spannableStringBuilder2 = new SpannableStringBuilder(chatFull.emojiset.title);
            spannableStringBuilder2.setSpan(new TypefaceSpan(AndroidUtilities.bold()), 0, spannableStringBuilder2.length(), 34);
            spannableStringBuilder.append((CharSequence) " ");
            spannableStringBuilder.append((CharSequence) spannableStringBuilder2);
            this.groupEmojiPackHint.setText(AndroidUtilities.replaceCharSequence("%s", LocaleController.getString(C2369R.string.GroupEmojiPackHint), spannableStringBuilder));
            HintView2 hintView22 = this.groupEmojiPackHint;
            hintView22.setMaxWidthPx(HintView2.cutInFancyHalf(hintView22.getText(), this.groupEmojiPackHint.getTextPaint()));
            this.groupEmojiPackHint.setDuration(-1L);
            this.groupEmojiPackHint.setPadding(AndroidUtilities.m1146dp(6.0f), 0, AndroidUtilities.m1146dp(6.0f), 0);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda6
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$checkGroupEmojiPackHint$206();
                }
            }, 300L);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkGroupEmojiPackHint$206() {
        FrameLayout.LayoutParams layoutParamsCreateFrame = LayoutHelper.createFrame(-1, -2.0f, 87, 0.0f, 0.0f, 0.0f, 0.0f);
        layoutParamsCreateFrame.bottomMargin = this.chatActivityEnterView.getMeasuredHeight();
        this.contentView.addView(this.groupEmojiPackHint, layoutParamsCreateFrame);
        this.groupEmojiPackHint.setJointPx(0.0f, this.chatActivityEnterView.getEmojiButton().getX() + AndroidUtilities.m1146dp(18.0f));
        this.groupEmojiPackHint.show();
    }

    public boolean groupEmojiPackHintWasVisible() {
        boolean z;
        HintView2 hintView2 = this.groupEmojiPackHint;
        if (hintView2 != null) {
            if (hintView2.shown()) {
                this.groupEmojiPackHint.hide();
            }
            z = true;
        } else {
            z = false;
        }
        this.groupEmojiPackHint = null;
        return z;
    }

    public void openAttachBotLayout(String str) {
        TLRPC.TL_contacts_resolveUsername tL_contacts_resolveUsername = new TLRPC.TL_contacts_resolveUsername();
        tL_contacts_resolveUsername.username = str;
        getConnectionsManager().sendRequest(tL_contacts_resolveUsername, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda110
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$openAttachBotLayout$217(tLObject, tL_error);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$217(final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda199
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openAttachBotLayout$216(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$216(TLObject tLObject) {
        if (tLObject != null) {
            TLRPC.TL_contacts_resolvedPeer tL_contacts_resolvedPeer = (TLRPC.TL_contacts_resolvedPeer) tLObject;
            if (tL_contacts_resolvedPeer.users.isEmpty()) {
                return;
            }
            final TLRPC.User user = (TLRPC.User) tL_contacts_resolvedPeer.users.get(0);
            if (user.bot && user.bot_attach_menu) {
                TLRPC.TL_messages_getAttachMenuBot tL_messages_getAttachMenuBot = new TLRPC.TL_messages_getAttachMenuBot();
                tL_messages_getAttachMenuBot.bot = MessagesController.getInstance(this.currentAccount).getInputUser(user.f1734id);
                ConnectionsManager.getInstance(this.currentAccount).sendRequest(tL_messages_getAttachMenuBot, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda235
                    @Override // org.telegram.tgnet.RequestDelegate
                    public final void run(TLObject tLObject2, TLRPC.TL_error tL_error) {
                        this.f$0.lambda$openAttachBotLayout$215(user, tLObject2, tL_error);
                    }
                });
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$215(final TLRPC.User user, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda330
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openAttachBotLayout$214(tLObject, user);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$214(TLObject tLObject, final TLRPC.User user) {
        if (tLObject instanceof TLRPC.TL_attachMenuBotsBot) {
            TLRPC.TL_attachMenuBotsBot tL_attachMenuBotsBot = (TLRPC.TL_attachMenuBotsBot) tLObject;
            MessagesController.getInstance(this.currentAccount).putUsers(tL_attachMenuBotsBot.users, false);
            final TLRPC.TL_attachMenuBot tL_attachMenuBot = tL_attachMenuBotsBot.bot;
            if (!MediaDataController.canShowAttachMenuBot(tL_attachMenuBot, getCurrentUser() != null ? getCurrentUser() : getCurrentChat())) {
                TLRPC.User user2 = this.currentUser;
                if (user2 != null && user2.bot && user.f1734id == tL_attachMenuBot.bot_id) {
                    BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.BotCantOpenAttachMenuSameBot)).show();
                    return;
                }
                if (user2 != null && user2.bot && user.f1734id != tL_attachMenuBot.bot_id) {
                    BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.BotCantOpenAttachMenuBot)).show();
                    return;
                }
                if (user2 != null && !user2.bot) {
                    BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.BotCantOpenAttachMenuUser)).show();
                    return;
                }
                TLRPC.Chat chat = this.currentChat;
                if (chat != null && !ChatObject.isChannelAndNotMegaGroup(chat)) {
                    BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.BotCantOpenAttachMenuGroup)).show();
                    return;
                }
                TLRPC.Chat chat2 = this.currentChat;
                if (chat2 == null || !ChatObject.isChannelAndNotMegaGroup(chat2)) {
                    return;
                }
                BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.BotCantOpenAttachMenuChannel)).show();
                return;
            }
            if (!tL_attachMenuBot.inactive) {
                openAttachBotLayout(user.f1734id, this.attachMenuBotStartCommand, false);
                return;
            }
            if (tL_attachMenuBot.show_in_attach_menu || tL_attachMenuBot.show_in_side_menu) {
                WebAppDisclaimerAlert.show(getContext(), new Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda435
                    @Override // com.google.android.exoplayer2.util.Consumer
                    public final void accept(Object obj) {
                        this.f$0.lambda$openAttachBotLayout$209(user, tL_attachMenuBot, (Boolean) obj);
                    }
                }, null, null);
                return;
            }
            AttachBotIntroTopView attachBotIntroTopView = new AttachBotIntroTopView(getParentActivity());
            attachBotIntroTopView.setColor(Theme.getColor(Theme.key_chat_attachIcon));
            attachBotIntroTopView.setBackgroundColor(Theme.getColor(Theme.key_dialogTopBackground));
            attachBotIntroTopView.setAttachBot(tL_attachMenuBot);
            final AtomicBoolean atomicBoolean = new AtomicBoolean();
            AlertDialog.Builder negativeButton = new AlertDialog.Builder(getParentActivity()).setTopView(attachBotIntroTopView).setMessage(AndroidUtilities.replaceTags(LocaleController.formatString("BotRequestAttachPermission", C2369R.string.BotRequestAttachPermission, UserObject.getUserName(user)))).setPositiveButton(LocaleController.getString(C2369R.string.BotAddToMenu), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda436
                @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                public final void onClick(AlertDialog alertDialog, int i) {
                    this.f$0.lambda$openAttachBotLayout$212(user, atomicBoolean, tL_attachMenuBot, alertDialog, i);
                }
            }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
            if (tL_attachMenuBot.request_write_access) {
                atomicBoolean.set(true);
                final CheckBoxCell checkBoxCell = new CheckBoxCell(getParentActivity(), 5, getResourceProvider());
                checkBoxCell.setPadding(0, AndroidUtilities.m1146dp(8.0f), 0, AndroidUtilities.m1146dp(8.0f));
                checkBoxCell.setBackground(Theme.getSelectorDrawable(false));
                checkBoxCell.setMultiline(true);
                checkBoxCell.setText(AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.OpenUrlOption2, UserObject.getUserName(user))), "", true, false);
                checkBoxCell.setPadding(LocaleController.isRTL ? AndroidUtilities.m1146dp(16.0f) : AndroidUtilities.m1146dp(8.0f), 0, LocaleController.isRTL ? AndroidUtilities.m1146dp(8.0f) : AndroidUtilities.m1146dp(16.0f), 0);
                checkBoxCell.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda437
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        ChatActivity.m6489$r8$lambda$NN09CHrNJamsLwPhiniFTDbds(checkBoxCell, atomicBoolean, view);
                    }
                });
                negativeButton.setCustomViewOffset(6);
                negativeButton.setView(checkBoxCell);
            }
            negativeButton.show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$209(final TLRPC.User user, final TLRPC.TL_attachMenuBot tL_attachMenuBot, Boolean bool) {
        TLRPC.TL_messages_toggleBotInAttachMenu tL_messages_toggleBotInAttachMenu = new TLRPC.TL_messages_toggleBotInAttachMenu();
        tL_messages_toggleBotInAttachMenu.bot = MessagesController.getInstance(this.currentAccount).getInputUser(user.f1734id);
        tL_messages_toggleBotInAttachMenu.enabled = true;
        tL_messages_toggleBotInAttachMenu.write_allowed = true;
        ConnectionsManager.getInstance(this.currentAccount).sendRequest(tL_messages_toggleBotInAttachMenu, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda466
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$openAttachBotLayout$208(tL_attachMenuBot, user, tLObject, tL_error);
            }
        }, 66);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$208(final TLRPC.TL_attachMenuBot tL_attachMenuBot, final TLRPC.User user, TLObject tLObject, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda480
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openAttachBotLayout$207(tL_attachMenuBot, tL_error, user);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$207(TLRPC.TL_attachMenuBot tL_attachMenuBot, TLRPC.TL_error tL_error, TLRPC.User user) {
        tL_attachMenuBot.side_menu_disclaimer_needed = false;
        tL_attachMenuBot.inactive = false;
        if (tL_error == null) {
            MediaDataController.getInstance(this.currentAccount).loadAttachMenuBots(false, true);
            openAttachBotLayout(user.f1734id, this.attachMenuBotStartCommand, false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$212(final TLRPC.User user, AtomicBoolean atomicBoolean, final TLRPC.TL_attachMenuBot tL_attachMenuBot, AlertDialog alertDialog, int i) {
        TLRPC.TL_messages_toggleBotInAttachMenu tL_messages_toggleBotInAttachMenu = new TLRPC.TL_messages_toggleBotInAttachMenu();
        tL_messages_toggleBotInAttachMenu.bot = MessagesController.getInstance(this.currentAccount).getInputUser(user.f1734id);
        tL_messages_toggleBotInAttachMenu.enabled = true;
        tL_messages_toggleBotInAttachMenu.write_allowed = atomicBoolean.get();
        ConnectionsManager.getInstance(this.currentAccount).sendRequest(tL_messages_toggleBotInAttachMenu, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda476
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$openAttachBotLayout$211(tL_attachMenuBot, user, tLObject, tL_error);
            }
        }, 66);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$211(final TLRPC.TL_attachMenuBot tL_attachMenuBot, final TLRPC.User user, TLObject tLObject, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda477
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openAttachBotLayout$210(tL_error, tL_attachMenuBot, user);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openAttachBotLayout$210(TLRPC.TL_error tL_error, TLRPC.TL_attachMenuBot tL_attachMenuBot, TLRPC.User user) {
        if (tL_error == null) {
            tL_attachMenuBot.side_menu_disclaimer_needed = false;
            tL_attachMenuBot.inactive = false;
            MediaDataController.getInstance(this.currentAccount).loadAttachMenuBots(false, true);
            openAttachBotLayout(user.f1734id, this.attachMenuBotStartCommand, false);
        }
    }

    /* renamed from: $r8$lambda$NN09CHrNJams-LwPhiniFTD-bds, reason: not valid java name */
    public static /* synthetic */ void m6489$r8$lambda$NN09CHrNJamsLwPhiniFTDbds(CheckBoxCell checkBoxCell, AtomicBoolean atomicBoolean, View view) {
        boolean z = !checkBoxCell.isChecked();
        checkBoxCell.setChecked(z, true);
        atomicBoolean.set(z);
    }

    public void openAttachBotLayout(long j, String str, boolean z) {
        openAttachMenu();
        createChatAttachView();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.showBotLayout(j, str, z, false);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    protected void onDialogDismiss(Dialog dialog) {
        Dialog dialog2 = this.closeChatDialog;
        if (dialog2 == null || dialog != dialog2) {
            return;
        }
        getMessagesController().deleteDialog(this.dialog_id, 0);
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout != null && !iNavigationLayout.getFragmentStack().isEmpty() && this.parentLayout.getFragmentStack().get(this.parentLayout.getFragmentStack().size() - 1) != this) {
            BaseFragment baseFragment = (BaseFragment) this.parentLayout.getFragmentStack().get(this.parentLayout.getFragmentStack().size() - 1);
            removeSelfFromStack();
            baseFragment.lambda$onBackPressed$371();
            return;
        }
        lambda$onBackPressed$371();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean extendActionMode(Menu menu) {
        if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isVisible()) {
            if (PhotoViewer.getInstance().getSelectionLength() == 0 || menu.findItem(R.id.copy) == null) {
                return true;
            }
        } else {
            if (this.chatActivityEnterView.getSelectionLength() != 0 && menu.findItem(R.id.copy) != null) {
            }
            return true;
        }
        fillActionModeMenu(menu, this.currentEncryptedChat, true, true);
        return true;
    }

    public static void fillActionModeMenu(Menu menu, TLRPC.EncryptedChat encryptedChat, boolean z, boolean z2) {
        if (menu.findItem(C2369R.id.menu_bold) != null) {
            return;
        }
        if (Build.VERSION.SDK_INT >= 23) {
            menu.removeItem(R.id.shareText);
        }
        int i = 6;
        if (z) {
            menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_quote, 6, LocaleController.getString(C2369R.string.Quote));
            i = 7;
        }
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_spoiler, i, LocaleController.getString(C2369R.string.Spoiler));
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Bold));
        spannableStringBuilder.setSpan(new TypefaceSpan(AndroidUtilities.bold()), 0, spannableStringBuilder.length(), 33);
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_bold, i + 1, spannableStringBuilder);
        SpannableStringBuilder spannableStringBuilder2 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Italic));
        spannableStringBuilder2.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface(AndroidUtilities.TYPEFACE_ROBOTO_ITALIC)), 0, spannableStringBuilder2.length(), 33);
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_italic, i + 2, spannableStringBuilder2);
        SpannableStringBuilder spannableStringBuilder3 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.BoldItalic));
        spannableStringBuilder3.setSpan(new TypefaceSpan(AndroidUtilities.getTypeface(AndroidUtilities.TYPEFACE_ROBOTO_MEDIUM_ITALIC)), 0, spannableStringBuilder3.length(), 33);
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_bold_italic, i + 3, spannableStringBuilder3);
        SpannableStringBuilder spannableStringBuilder4 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Mono));
        spannableStringBuilder4.setSpan(new TypefaceSpan(Typeface.MONOSPACE), 0, spannableStringBuilder4.length(), 33);
        int i2 = i + 5;
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_mono, i + 4, spannableStringBuilder4);
        if (encryptedChat == null || AndroidUtilities.getPeerLayerVersion(encryptedChat.layer) >= 101) {
            SpannableStringBuilder spannableStringBuilder5 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Strike));
            TextStyleSpan.TextStyleRun textStyleRun = new TextStyleSpan.TextStyleRun();
            textStyleRun.flags |= 8;
            spannableStringBuilder5.setSpan(new TextStyleSpan(textStyleRun), 0, spannableStringBuilder5.length(), 33);
            menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_strike, i2, spannableStringBuilder5);
            SpannableStringBuilder spannableStringBuilder6 = new SpannableStringBuilder(LocaleController.getString(C2369R.string.Underline));
            TextStyleSpan.TextStyleRun textStyleRun2 = new TextStyleSpan.TextStyleRun();
            textStyleRun2.flags |= 16;
            spannableStringBuilder6.setSpan(new TextStyleSpan(textStyleRun2), 0, spannableStringBuilder6.length(), 33);
            i2 = i + 7;
            menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_underline, i + 6, spannableStringBuilder6);
        }
        if (z2) {
            menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_link, i2, LocaleController.getString(C2369R.string.CreateLink));
            i2++;
        }
        menu.add(C2369R.id.menu_groupbolditalic, C2369R.id.menu_regular, i2, LocaleController.getString(C2369R.string.Regular));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateScheduledInterface(boolean z) throws Resources.NotFoundException {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.updateScheduleButton(z);
        }
    }

    public void updateBottomOverlay() {
        updateBottomOverlay(false);
    }

    /* JADX WARN: Removed duplicated region for block: B:193:0x0477  */
    /* JADX WARN: Removed duplicated region for block: B:203:0x04b3  */
    /* JADX WARN: Removed duplicated region for block: B:205:0x04b8  */
    /* JADX WARN: Removed duplicated region for block: B:256:0x05b9  */
    /* JADX WARN: Removed duplicated region for block: B:260:0x05cd  */
    /* JADX WARN: Removed duplicated region for block: B:267:0x05df  */
    /* JADX WARN: Removed duplicated region for block: B:270:0x05e5  */
    /* JADX WARN: Removed duplicated region for block: B:271:0x05fd  */
    /* JADX WARN: Removed duplicated region for block: B:410:0x0889  */
    /* JADX WARN: Removed duplicated region for block: B:413:0x089e  */
    /* JADX WARN: Removed duplicated region for block: B:414:0x08a1  */
    /* JADX WARN: Removed duplicated region for block: B:417:0x08b1  */
    /* JADX WARN: Removed duplicated region for block: B:420:0x08b9  */
    /* JADX WARN: Removed duplicated region for block: B:423:0x08c1  */
    /* JADX WARN: Removed duplicated region for block: B:426:0x08c9  */
    /* JADX WARN: Removed duplicated region for block: B:429:0x08d1  */
    /* JADX WARN: Removed duplicated region for block: B:432:0x08d9  */
    /* JADX WARN: Removed duplicated region for block: B:435:0x08e1  */
    /* JADX WARN: Removed duplicated region for block: B:438:0x08e9  */
    /* JADX WARN: Removed duplicated region for block: B:75:0x0215  */
    /* JADX WARN: Removed duplicated region for block: B:77:0x0218  */
    /* JADX WARN: Removed duplicated region for block: B:78:0x022d  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateBottomOverlay(boolean r24) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException {
        /*
            Method dump skipped, instructions count: 2290
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateBottomOverlay(boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBottomOverlay$218() {
        ChatGreetingsView.showPremiumSheet(getContext(), this.currentAccount, this.dialog_id, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBottomOverlay$219(ValueAnimator valueAnimator) {
        this.searchExpandProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBottomOverlay$220(ValueAnimator valueAnimator) {
        this.searchExpandProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBottomOverlay$221() {
        this.chatActivityEnterView.openKeyboard();
    }

    private boolean shouldDisplaySwipeToLeftToReplyInForum() {
        return isForumInViewAsMessagesMode() && this.replyingMessageObject == null && this.editingMessageObject == null && !canSendMessageToGeneralTopic();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean canSendMessageToTopic(MessageObject messageObject) {
        if (this.chatMode == 8) {
            return true;
        }
        if (messageObject == null || !ChatObject.isForum(this.currentChat)) {
            return false;
        }
        return canSendMessageToTopic(getMessagesController().getTopicsController().findTopic(this.currentChat.f1571id, MessageObject.getTopicId(this.currentAccount, messageObject.messageOwner, true)));
    }

    private boolean canSendMessageToGeneralTopic() {
        if (this.chatMode == 8 || !isForumInViewAsMessagesMode() || this.currentChat == null) {
            return false;
        }
        return canSendMessageToTopic(getMessagesController().getTopicsController().findTopic(this.currentChat.f1571id, 1L));
    }

    private boolean canSendMessageToTopic(TLRPC.TL_forumTopic tL_forumTopic) {
        if (this.chatMode == 8) {
            return true;
        }
        if (tL_forumTopic != null) {
            return !tL_forumTopic.closed || ChatObject.canManageTopic(this.currentAccount, this.currentChat, tL_forumTopic);
        }
        return false;
    }

    public void updateReplyMessageHeader(boolean z) {
        String string;
        if (this.chatMode == 3 || UserObject.isBotForum(this.currentUser)) {
            return;
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null && this.threadMessageId != 0) {
            if (this.isTopic) {
                updateTopicHeader();
            } else if (this.isComments) {
                MessageObject messageObject = this.threadMessageObject;
                if (messageObject != null && messageObject.hasReplies()) {
                    this.avatarContainer.setTitle(LocaleController.formatPluralString("Comments", this.threadMessageObject.getRepliesCount(), new Object[0]));
                } else {
                    this.avatarContainer.setTitle(LocaleController.getString(C2369R.string.CommentsTitle));
                }
            } else {
                MessageObject messageObject2 = this.threadMessageObject;
                if (messageObject2 != null) {
                    chatAvatarContainer.setTitle(LocaleController.formatPluralString("Replies", messageObject2.getRepliesCount(), new Object[0]));
                }
            }
        }
        if (this.replyMessageHeaderObject == null) {
            return;
        }
        if (this.threadMessageObject.getRepliesCount() == 0) {
            if (this.isComments) {
                string = LocaleController.getString(C2369R.string.NoComments);
            } else {
                string = LocaleController.getString(C2369R.string.NoReplies);
            }
        } else {
            string = LocaleController.getString(C2369R.string.DiscussionStarted);
        }
        MessageObject messageObject3 = this.replyMessageHeaderObject;
        messageObject3.messageOwner.message = string;
        messageObject3.messageText = string;
        if (z) {
            this.chatAdapter.updateRowWithMessageObject(messageObject3, true, false);
        }
    }

    private void updateTopicHeader() {
        TLRPC.TL_forumTopic tL_forumTopic;
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null && (tL_forumTopic = this.forumTopic) != null) {
            chatAvatarContainer.setTitle(tL_forumTopic.title);
        }
        updateTopicTitleIcon();
    }

    private void createAlertView() {
        if (this.alertView != null || getContext() == null) {
            return;
        }
        FrameLayout frameLayout = new FrameLayout(getContext());
        this.alertView = frameLayout;
        frameLayout.setTag(1);
        this.alertView.setVisibility(8);
        this.alertView.setBackgroundResource(C2369R.drawable.blockpanel);
        this.alertView.getBackground().setColorFilter(new PorterDuffColorFilter(getThemedColor(Theme.key_chat_topPanelBackground), PorterDuff.Mode.MULTIPLY));
        BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
        int iMax = 9;
        if (blurredFrameLayout != null) {
            ViewParent parent = blurredFrameLayout.getParent();
            ChatActivityFragmentView chatActivityFragmentView = this.contentView;
            if (parent == chatActivityFragmentView) {
                iMax = Math.max(9, chatActivityFragmentView.indexOfChild(this.topChatPanelView) + 1);
            }
        }
        BlurredFrameLayout blurredFrameLayout2 = this.pinnedMessageView;
        if (blurredFrameLayout2 != null) {
            ViewParent parent2 = blurredFrameLayout2.getParent();
            ChatActivityFragmentView chatActivityFragmentView2 = this.contentView;
            if (parent2 == chatActivityFragmentView2) {
                iMax = Math.max(iMax, chatActivityFragmentView2.indexOfChild(this.pinnedMessageView) + 1);
            }
        }
        this.contentView.addView(this.alertView, iMax, LayoutHelper.createFrame(-1, 50, 51));
        TextView textView = new TextView(getContext());
        this.alertNameTextView = textView;
        textView.setTextSize(1, 14.0f);
        this.alertNameTextView.setTextColor(getThemedColor(Theme.key_chat_topPanelTitle));
        this.alertNameTextView.setTypeface(AndroidUtilities.bold());
        this.alertNameTextView.setSingleLine(true);
        TextView textView2 = this.alertNameTextView;
        TextUtils.TruncateAt truncateAt = TextUtils.TruncateAt.END;
        textView2.setEllipsize(truncateAt);
        this.alertNameTextView.setMaxLines(1);
        this.alertView.addView(this.alertNameTextView, LayoutHelper.createFrame(-2, -2.0f, 51, 8.0f, 5.0f, 8.0f, 0.0f));
        TextView textView3 = new TextView(getContext());
        this.alertTextView = textView3;
        textView3.setTextSize(1, 14.0f);
        this.alertTextView.setTextColor(getThemedColor(Theme.key_chat_topPanelMessage));
        this.alertTextView.setSingleLine(true);
        this.alertTextView.setEllipsize(truncateAt);
        this.alertTextView.setMaxLines(1);
        this.alertView.addView(this.alertTextView, LayoutHelper.createFrame(-2, -2.0f, 51, 8.0f, 23.0f, 8.0f, 0.0f));
    }

    public void showAlert(String str, String str2) {
        createAlertView();
        FrameLayout frameLayout = this.alertView;
        if (frameLayout == null || str == null || str2 == null) {
            return;
        }
        if (frameLayout.getTag() != null) {
            this.alertView.setTag(null);
            AnimatorSet animatorSet = this.alertViewAnimator;
            if (animatorSet != null) {
                animatorSet.cancel();
                this.alertViewAnimator = null;
            }
            if (this.alertView.getVisibility() != 0) {
                this.alertViewEnterProgress = 0.0f;
                invalidateChatListViewTopPadding();
            }
            this.alertView.setVisibility(0);
            this.alertViewAnimator = new AnimatorSet();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.alertViewEnterProgress, 1.0f);
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda179
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$showAlert$222(valueAnimator);
                }
            });
            this.alertViewAnimator.playTogether(valueAnimatorOfFloat);
            this.alertViewAnimator.setDuration(200L);
            this.alertViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.95
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animator)) {
                        return;
                    }
                    ChatActivity.this.alertViewEnterProgress = 1.0f;
                    ChatActivity.this.invalidateChatListViewTopPadding();
                    ChatActivity.this.alertViewAnimator = null;
                }

                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationCancel(Animator animator) {
                    if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animator)) {
                        return;
                    }
                    ChatActivity.this.alertViewAnimator = null;
                }
            });
            this.alertViewAnimator.start();
        }
        this.alertNameTextView.setText(str);
        this.alertTextView.setText(Emoji.replaceEmoji(str2.replace('\n', ' '), this.alertTextView.getPaint().getFontMetricsInt(), false));
        Runnable runnable = this.hideAlertViewRunnable;
        if (runnable != null) {
            AndroidUtilities.cancelRunOnUIThread(runnable);
        }
        RunnableC314796 runnableC314796 = new RunnableC314796();
        this.hideAlertViewRunnable = runnableC314796;
        AndroidUtilities.runOnUIThread(runnableC314796, 3000L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showAlert$222(ValueAnimator valueAnimator) {
        this.alertViewEnterProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
    }

    /* renamed from: org.telegram.ui.ChatActivity$96 */
    /* loaded from: classes5.dex */
    class RunnableC314796 implements Runnable {
        RunnableC314796() {
        }

        @Override // java.lang.Runnable
        public void run() {
            if (ChatActivity.this.hideAlertViewRunnable == this && ChatActivity.this.alertView.getTag() == null) {
                ChatActivity.this.alertView.setTag(1);
                if (ChatActivity.this.alertViewAnimator != null) {
                    ChatActivity.this.alertViewAnimator.cancel();
                    ChatActivity.this.alertViewAnimator = null;
                }
                ChatActivity.this.alertViewAnimator = new AnimatorSet();
                ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(ChatActivity.this.alertViewEnterProgress, 0.0f);
                valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$96$$ExternalSyntheticLambda0
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$run$0(valueAnimator);
                    }
                });
                ChatActivity.this.alertViewAnimator.playTogether(valueAnimatorOfFloat);
                ChatActivity.this.alertViewAnimator.setDuration(200L);
                ChatActivity.this.alertViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.96.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animator) {
                        if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animator)) {
                            return;
                        }
                        ChatActivity.this.alertView.setVisibility(8);
                        ChatActivity.this.alertViewEnterProgress = 0.0f;
                        ChatActivity.this.invalidateChatListViewTopPadding();
                        ChatActivity.this.alertViewAnimator = null;
                    }

                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationCancel(Animator animator) {
                        if (ChatActivity.this.alertViewAnimator == null || !ChatActivity.this.alertViewAnimator.equals(animator)) {
                            return;
                        }
                        ChatActivity.this.alertViewAnimator = null;
                    }
                });
                ChatActivity.this.alertViewAnimator.start();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$run$0(ValueAnimator valueAnimator) {
            ChatActivity.this.alertViewEnterProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
            ChatActivity.this.invalidateChatListViewTopPadding();
        }
    }

    private boolean hidePinnedMessageView(boolean z) {
        BlurredFrameLayout blurredFrameLayout = this.pinnedMessageView;
        if (blurredFrameLayout == null || blurredFrameLayout.getTag() != null) {
            return false;
        }
        int i = 0;
        while (true) {
            AnimatorSet[] animatorSetArr = this.pinnedNextAnimation;
            if (i >= animatorSetArr.length) {
                break;
            }
            AnimatorSet animatorSet = animatorSetArr[i];
            if (animatorSet != null) {
                animatorSet.cancel();
                this.pinnedNextAnimation[i] = null;
            }
            i++;
        }
        this.setPinnedTextTranslationX = false;
        this.pinnedMessageView.setTag(1);
        AnimatorSet animatorSet2 = this.pinnedMessageViewAnimator;
        if (animatorSet2 != null) {
            animatorSet2.cancel();
            this.pinnedMessageViewAnimator = null;
        }
        if (z) {
            this.pinnedMessageViewAnimator = new AnimatorSet();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.pinnedMessageEnterOffset, -AndroidUtilities.m1146dp(50.0f));
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda129
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$hidePinnedMessageView$223(valueAnimator);
                }
            });
            this.pinnedMessageViewAnimator.playTogether(valueAnimatorOfFloat);
            this.pinnedMessageViewAnimator.setDuration(200L);
            this.pinnedMessageViewAnimator.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.97
                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationEnd(Animator animator) {
                    if (ChatActivity.this.pinnedMessageViewAnimator == null || !ChatActivity.this.pinnedMessageViewAnimator.equals(animator)) {
                        return;
                    }
                    if (ChatActivity.this.pinnedMessageView != null) {
                        ChatActivity.this.pinnedMessageView.setVisibility(8);
                    }
                    ChatActivity.this.pinnedMessageViewAnimator = null;
                }

                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                public void onAnimationCancel(Animator animator) {
                    if (ChatActivity.this.pinnedMessageViewAnimator == null || !ChatActivity.this.pinnedMessageViewAnimator.equals(animator)) {
                        return;
                    }
                    ChatActivity.this.pinnedMessageViewAnimator = null;
                }
            });
            this.pinnedMessageViewAnimator.start();
        } else {
            this.pinnedMessageEnterOffset = -AndroidUtilities.m1146dp(50.0f);
            this.pinnedMessageView.setVisibility(8);
            this.chatListView.invalidate();
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$hidePinnedMessageView$223(ValueAnimator valueAnimator) {
        this.pinnedMessageEnterOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
        this.chatListView.invalidate();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updatePinnedMessageView(boolean z) {
        lambda$updateMessagesVisiblePart$158(z, 0);
    }

    private void updatePinnedListButton(boolean z) {
        Integer num;
        if ((!isThreadChat() || this.isTopic) && this.pinnedListButton != null) {
            boolean z2 = !this.fragmentOpened ? false : z;
            boolean z3 = this.pinnedMessageIds.size() > 1 && !this.pinnedMessageButtonShown;
            boolean z4 = this.pinnedListButton.getTag() != null;
            boolean z5 = this.pinnedProgress.getTag() != null;
            boolean z6 = this.closePinned.getTag() != null;
            final boolean z7 = (z3 || this.pinnedProgressIsShowing || this.pinnedMessageButtonShown) ? false : true;
            final boolean z8 = (!z3 || this.pinnedProgressIsShowing || this.pinnedMessageButtonShown) ? false : true;
            final boolean z9 = this.pinnedProgressIsShowing && !this.pinnedMessageButtonShown;
            if (z4 != z3 || z5 != z9 || z6 != z7) {
                AnimatorSet animatorSet = this.pinnedListAnimator;
                if (animatorSet != null) {
                    animatorSet.cancel();
                    this.pinnedListAnimator = null;
                }
                if (z2) {
                    if (z3) {
                        this.pinnedListButton.setVisibility(0);
                    } else if (z7) {
                        this.closePinned.setVisibility(0);
                    }
                    if (z9) {
                        this.pinnedProgress.setVisibility(0);
                        this.pinnedProgress.setAlpha(0.0f);
                        this.pinnedProgress.setScaleX(0.4f);
                        this.pinnedProgress.setScaleY(0.4f);
                    }
                    AnimatorSet animatorSet2 = new AnimatorSet();
                    this.pinnedListAnimator = animatorSet2;
                    ImageView imageView = this.pinnedListButton;
                    Property property = View.ALPHA;
                    ObjectAnimator objectAnimatorOfFloat = ObjectAnimator.ofFloat(imageView, (Property<ImageView, Float>) property, z8 ? 1.0f : 0.0f);
                    ImageView imageView2 = this.pinnedListButton;
                    Property property2 = View.SCALE_X;
                    ObjectAnimator objectAnimatorOfFloat2 = ObjectAnimator.ofFloat(imageView2, (Property<ImageView, Float>) property2, z8 ? 1.0f : 0.4f);
                    ImageView imageView3 = this.pinnedListButton;
                    Property property3 = View.SCALE_Y;
                    num = 1;
                    animatorSet2.playTogether(objectAnimatorOfFloat, objectAnimatorOfFloat2, ObjectAnimator.ofFloat(imageView3, (Property<ImageView, Float>) property3, z8 ? 1.0f : 0.4f), ObjectAnimator.ofFloat(this.closePinned, (Property<ImageView, Float>) property, z7 ? 1.0f : 0.0f), ObjectAnimator.ofFloat(this.closePinned, (Property<ImageView, Float>) property2, z7 ? 1.0f : 0.4f), ObjectAnimator.ofFloat(this.closePinned, (Property<ImageView, Float>) property3, z7 ? 1.0f : 0.4f), ObjectAnimator.ofFloat(this.pinnedProgress, (Property<RadialProgressView, Float>) property, !z9 ? 0.0f : 1.0f), ObjectAnimator.ofFloat(this.pinnedProgress, (Property<RadialProgressView, Float>) property2, !z9 ? 0.4f : 1.0f), ObjectAnimator.ofFloat(this.pinnedProgress, (Property<RadialProgressView, Float>) property3, !z9 ? 0.4f : 1.0f));
                    this.pinnedListAnimator.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
                    this.pinnedListAnimator.setDuration(360L);
                    this.pinnedListAnimator.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.98
                        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                        public void onAnimationEnd(Animator animator) {
                            ChatActivity.this.pinnedListAnimator = null;
                            ChatActivity.this.closePinned.setVisibility(z7 ? 0 : 4);
                            ChatActivity.this.pinnedListButton.setVisibility(z8 ? 0 : 4);
                            ChatActivity.this.pinnedProgress.setVisibility(z9 ? 0 : 4);
                        }
                    });
                    this.pinnedListAnimator.start();
                } else {
                    num = 1;
                    this.closePinned.setAlpha(z7 ? 1.0f : 0.0f);
                    this.closePinned.setScaleX(z7 ? 1.0f : 0.4f);
                    this.closePinned.setScaleY(z7 ? 1.0f : 0.4f);
                    this.closePinned.setVisibility(z7 ? 0 : 4);
                    this.pinnedListButton.setAlpha(z8 ? 1.0f : 0.0f);
                    this.pinnedListButton.setScaleX(z8 ? 1.0f : 0.4f);
                    this.pinnedListButton.setScaleY(z8 ? 1.0f : 0.4f);
                    this.pinnedListButton.setVisibility(z8 ? 0 : 4);
                    this.pinnedProgress.setAlpha(z9 ? 1.0f : 0.0f);
                    this.pinnedProgress.setScaleX(z9 ? 1.0f : 0.4f);
                    this.pinnedProgress.setScaleY(z9 ? 1.0f : 0.4f);
                    this.pinnedProgress.setVisibility(z9 ? 0 : 8);
                }
                this.closePinned.setTag(z7 ? num : null);
                this.pinnedListButton.setTag(z3 ? num : null);
                this.pinnedProgress.setTag(z9 ? num : null);
            }
            if (this.pinnedLineView != null) {
                if (isThreadChat() && !this.isTopic) {
                    this.pinnedLineView.set(0, 1, false);
                } else {
                    this.pinnedLineView.set((this.pinnedMessageIds.size() - 1) - Collections.binarySearch(this.pinnedMessageIds, Integer.valueOf(this.currentPinnedMessageId), Comparator.CC.reverseOrder()), this.pinnedMessageIds.size(), z2);
                }
            }
        }
    }

    private TLRPC.KeyboardButton pinnedButton(MessageObject messageObject) {
        TLRPC.Message message;
        TLRPC.ReplyMarkup replyMarkup;
        ArrayList arrayList;
        if (messageObject == null || (message = messageObject.messageOwner) == null || (replyMarkup = message.reply_markup) == null || (arrayList = replyMarkup.rows) == null || arrayList.size() != 1 || messageObject.messageOwner.reply_markup.rows.get(0) == null || ((TLRPC.TL_keyboardButtonRow) messageObject.messageOwner.reply_markup.rows.get(0)).buttons == null || ((TLRPC.TL_keyboardButtonRow) messageObject.messageOwner.reply_markup.rows.get(0)).buttons.size() != 1) {
            return null;
        }
        return (TLRPC.KeyboardButton) ((TLRPC.TL_keyboardButtonRow) messageObject.messageOwner.reply_markup.rows.get(0)).buttons.get(0);
    }

    private String callLink(MessageObject messageObject) {
        TLRPC.Message message;
        TLRPC.MessageMedia messageMedia;
        TLRPC.WebPage webPage;
        if (messageObject == null || (message = messageObject.messageOwner) == null || (messageMedia = message.media) == null || (webPage = messageMedia.webpage) == null || !"telegram_call".equalsIgnoreCase(webPage.type)) {
            return null;
        }
        return messageObject.messageOwner.media.webpage.display_url;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updatePinnedMessageView$224(TLRPC.KeyboardButton keyboardButton, MessageObject messageObject, View view) {
        if (getParentActivity() != null) {
            if (this.bottomChannelButtonsLayout.getVisibility() != 0 || (keyboardButton instanceof TLRPC.TL_keyboardButtonSwitchInline) || (keyboardButton instanceof TLRPC.TL_keyboardButtonCallback) || (keyboardButton instanceof TLRPC.TL_keyboardButtonGame) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrl) || (keyboardButton instanceof TLRPC.TL_keyboardButtonBuy) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrlAuth) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUserProfile)) {
                this.chatActivityEnterView.didPressedBotButton(keyboardButton, messageObject, messageObject);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$updatePinnedMessageView$225(View view) {
        setPinVisibility(false);
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updatePinnedMessageView$226(String str, View view) {
        String str2 = Uri.parse(str).getPathSegments().get(r4.getPathSegments().size() - 1);
        TLRPC.TL_inputGroupCallSlug tL_inputGroupCallSlug = new TLRPC.TL_inputGroupCallSlug();
        tL_inputGroupCallSlug.slug = str2;
        VoIPHelper.joinConference(getParentActivity(), this.currentAccount, tL_inputGroupCallSlug, false, null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:11:0x001f  */
    /* JADX WARN: Removed duplicated region for block: B:199:0x0431  */
    /* JADX WARN: Removed duplicated region for block: B:254:0x0540  */
    /* JADX WARN: Removed duplicated region for block: B:255:0x054d  */
    /* JADX WARN: Removed duplicated region for block: B:322:0x0684  */
    /* JADX WARN: Removed duplicated region for block: B:324:0x069f  */
    /* JADX WARN: Removed duplicated region for block: B:361:0x0779  */
    /* JADX WARN: Removed duplicated region for block: B:366:0x078e  */
    /* JADX WARN: Removed duplicated region for block: B:413:0x0963  */
    /* JADX WARN: Removed duplicated region for block: B:431:0x09f8  */
    /* JADX WARN: Removed duplicated region for block: B:434:0x0a22  */
    /* JADX WARN: Removed duplicated region for block: B:451:0x0ab6  */
    /* JADX WARN: Removed duplicated region for block: B:454:0x0ad4  */
    /* JADX WARN: Removed duplicated region for block: B:459:0x0b5f  */
    /* JADX WARN: Removed duplicated region for block: B:479:0x0c96  */
    /* JADX WARN: Removed duplicated region for block: B:481:0x0ca9  */
    /* JADX WARN: Removed duplicated region for block: B:496:0x0cf2  */
    /* JADX WARN: Removed duplicated region for block: B:500:0x0cfd  */
    /* JADX WARN: Removed duplicated region for block: B:512:0x0da3  */
    /* JADX WARN: Removed duplicated region for block: B:515:0x0dae  */
    /* JADX WARN: Removed duplicated region for block: B:533:0x0e09  */
    /* renamed from: updatePinnedMessageView, reason: merged with bridge method [inline-methods] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void lambda$updateMessagesVisiblePart$158(boolean r36, int r37) {
        /*
            Method dump skipped, instructions count: 3806
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$updateMessagesVisiblePart$158(boolean, int):void");
    }

    private class TrackingWidthSimpleTextView extends SimpleTextView {
        private boolean trackWidth;

        public TrackingWidthSimpleTextView(Context context) {
            super(context);
            this.trackWidth = true;
        }

        public void setTrackWidth(boolean z) {
            this.trackWidth = z;
        }

        public boolean getTrackWidth() {
            return this.trackWidth;
        }

        @Override // org.telegram.p023ui.ActionBar.SimpleTextView
        protected boolean createLayout(int i) {
            boolean zCreateLayout = super.createLayout(i);
            if (this.trackWidth && getVisibility() == 0) {
                ChatActivity.this.pinnedCounterTextViewX = getTextWidth() + AndroidUtilities.m1146dp(4.0f);
                if (ChatActivity.this.pinnedCounterTextView != null) {
                    ChatActivity.this.pinnedCounterTextView.setTranslationX(ChatActivity.this.pinnedCounterTextViewX);
                }
            }
            return zCreateLayout;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$236() {
        if (this.botSponsoredMessage == null) {
            return;
        }
        final RevenueSharingAdsInfoBottomSheet[] revenueSharingAdsInfoBottomSheetArr = new RevenueSharingAdsInfoBottomSheet[1];
        revenueSharingAdsInfoBottomSheetArr[0] = RevenueSharingAdsInfoBottomSheet.showAlert(getContext(), this, true, this.resourceProvider, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda236
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) {
                this.f$0.lambda$updateTopPanel$235(revenueSharingAdsInfoBottomSheetArr, (ItemOptions) obj);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:13:0x0036  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$updateTopPanel$235(final org.telegram.p023ui.RevenueSharingAdsInfoBottomSheet[] r20, final org.telegram.p023ui.Components.ItemOptions r21) {
        /*
            Method dump skipped, instructions count: 610
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$updateTopPanel$235(org.telegram.ui.RevenueSharingAdsInfoBottomSheet[], org.telegram.ui.Components.ItemOptions):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$228(ItemOptions itemOptions, View view) {
        if (this.botSponsoredMessage == null) {
            return;
        }
        itemOptions.dismiss();
        logSponsoredClicked(this.botSponsoredMessage, false, true);
        Browser.openUrl(getContext(), Uri.parse(this.botSponsoredMessage.sponsoredUrl), true, false, false, null, null, false, MessagesController.getInstance(this.currentAccount).sponsoredLinksInappAllow, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$updateTopPanel$229(View view) {
        MessageObject messageObject = this.botSponsoredMessage;
        if (messageObject == null) {
            return false;
        }
        if (!AndroidUtilities.addToClipboard(messageObject.sponsoredUrl)) {
            return true;
        }
        BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getContext()), this.resourceProvider).createCopyLinkBulletin().show();
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$230(View view) {
        if (AndroidUtilities.addToClipboard(this.botSponsoredMessage.sponsoredInfo)) {
            BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getContext()), this.resourceProvider).createCopyBulletin(LocaleController.getString(C2369R.string.TextCopied)).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$231(View view) {
        if (AndroidUtilities.addToClipboard(this.botSponsoredMessage.sponsoredAdditionalInfo)) {
            BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getContext()), this.resourceProvider).createCopyBulletin(LocaleController.getString(C2369R.string.TextCopied)).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$233(ItemOptions itemOptions, RevenueSharingAdsInfoBottomSheet[] revenueSharingAdsInfoBottomSheetArr) {
        itemOptions.dismiss();
        RevenueSharingAdsInfoBottomSheet revenueSharingAdsInfoBottomSheet = revenueSharingAdsInfoBottomSheetArr[0];
        if (revenueSharingAdsInfoBottomSheet != null) {
            revenueSharingAdsInfoBottomSheet.lambda$new$0();
        }
        ReportBottomSheet.openSponsored(this, this.botSponsoredMessage, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$234(ItemOptions itemOptions, RevenueSharingAdsInfoBottomSheet[] revenueSharingAdsInfoBottomSheetArr) {
        itemOptions.dismiss();
        RevenueSharingAdsInfoBottomSheet revenueSharingAdsInfoBottomSheet = revenueSharingAdsInfoBottomSheetArr[0];
        if (revenueSharingAdsInfoBottomSheet != null) {
            revenueSharingAdsInfoBottomSheet.lambda$new$0();
        }
        if (getUserConfig().isPremium()) {
            this.botSponsoredMessage = null;
            updateTopPanel(true);
            BulletinFactory.m1267of(this).createAdReportedBulletin(LocaleController.getString(C2369R.string.AdHidden)).show();
            getMessagesController().disableAds(true);
            return;
        }
        showDialog(new PremiumFeatureBottomSheet(this, 3, true));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$237() {
        if (getUserConfig().isPremium()) {
            this.botSponsoredMessage = null;
            updateTopPanel(true);
            BulletinFactory.m1267of(this).createAdReportedBulletin(LocaleController.getString(C2369R.string.AdHidden)).show();
            getMessagesController().disableAds(true);
            return;
        }
        showDialog(new PremiumFeatureBottomSheet(this, 3, true));
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:101:0x02aa  */
    /* JADX WARN: Removed duplicated region for block: B:106:0x02bd  */
    /* JADX WARN: Removed duplicated region for block: B:116:0x02ea  */
    /* JADX WARN: Removed duplicated region for block: B:119:0x02f0  */
    /* JADX WARN: Removed duplicated region for block: B:120:0x02f2  */
    /* JADX WARN: Removed duplicated region for block: B:121:0x02fc  */
    /* JADX WARN: Removed duplicated region for block: B:123:0x0302  */
    /* JADX WARN: Removed duplicated region for block: B:133:0x0337  */
    /* JADX WARN: Removed duplicated region for block: B:134:0x0342  */
    /* JADX WARN: Removed duplicated region for block: B:137:0x0351  */
    /* JADX WARN: Removed duplicated region for block: B:146:0x036b  */
    /* JADX WARN: Removed duplicated region for block: B:150:0x0378  */
    /* JADX WARN: Removed duplicated region for block: B:157:0x0387  */
    /* JADX WARN: Removed duplicated region for block: B:159:0x039d  */
    /* JADX WARN: Removed duplicated region for block: B:166:0x03ba  */
    /* JADX WARN: Removed duplicated region for block: B:172:0x03e2  */
    /* JADX WARN: Removed duplicated region for block: B:176:0x03e9  */
    /* JADX WARN: Removed duplicated region for block: B:183:0x03fd  */
    /* JADX WARN: Removed duplicated region for block: B:186:0x0402  */
    /* JADX WARN: Removed duplicated region for block: B:188:0x0406 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:190:0x0409  */
    /* JADX WARN: Removed duplicated region for block: B:192:0x040d  */
    /* JADX WARN: Removed duplicated region for block: B:194:0x0411 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:200:0x041c A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:206:0x0428  */
    /* JADX WARN: Removed duplicated region for block: B:210:0x0433  */
    /* JADX WARN: Removed duplicated region for block: B:213:0x048b  */
    /* JADX WARN: Removed duplicated region for block: B:215:0x0492  */
    /* JADX WARN: Removed duplicated region for block: B:219:0x049e  */
    /* JADX WARN: Removed duplicated region for block: B:224:0x04bf  */
    /* JADX WARN: Removed duplicated region for block: B:226:0x04c3 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:231:0x04da  */
    /* JADX WARN: Removed duplicated region for block: B:240:0x04ec  */
    /* JADX WARN: Removed duplicated region for block: B:246:0x04f9  */
    /* JADX WARN: Removed duplicated region for block: B:252:0x0506  */
    /* JADX WARN: Removed duplicated region for block: B:258:0x0513  */
    /* JADX WARN: Removed duplicated region for block: B:264:0x0520  */
    /* JADX WARN: Removed duplicated region for block: B:276:0x0537  */
    /* JADX WARN: Removed duplicated region for block: B:278:0x053b A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:282:0x0545  */
    /* JADX WARN: Removed duplicated region for block: B:283:0x055b  */
    /* JADX WARN: Removed duplicated region for block: B:285:0x055f  */
    /* JADX WARN: Removed duplicated region for block: B:298:0x062e  */
    /* JADX WARN: Removed duplicated region for block: B:300:0x0636  */
    /* JADX WARN: Removed duplicated region for block: B:304:0x0681  */
    /* JADX WARN: Removed duplicated region for block: B:356:0x07da  */
    /* JADX WARN: Removed duplicated region for block: B:384:0x08ad  */
    /* JADX WARN: Removed duplicated region for block: B:38:0x0191 A[PHI: r11 r24
      0x0191: PHI (r11v4 java.lang.String) = (r11v3 java.lang.String), (r11v22 java.lang.String), (r11v22 java.lang.String) binds: [B:36:0x018e, B:48:0x01a9, B:50:0x01ad] A[DONT_GENERATE, DONT_INLINE]
      0x0191: PHI (r24v1 char) = (r24v0 char), (r24v11 char), (r24v11 char) binds: [B:36:0x018e, B:48:0x01a9, B:50:0x01ad] A[DONT_GENERATE, DONT_INLINE]] */
    /* JADX WARN: Removed duplicated region for block: B:390:0x08ba  */
    /* JADX WARN: Removed duplicated region for block: B:420:0x0902  */
    /* JADX WARN: Removed duplicated region for block: B:423:0x091d  */
    /* JADX WARN: Removed duplicated region for block: B:465:0x0a47  */
    /* JADX WARN: Removed duplicated region for block: B:514:0x0bb6 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:520:0x0bc6  */
    /* JADX WARN: Removed duplicated region for block: B:523:0x0bcf  */
    /* JADX WARN: Removed duplicated region for block: B:53:0x01bb  */
    /* JADX WARN: Removed duplicated region for block: B:555:0x0c42  */
    /* JADX WARN: Removed duplicated region for block: B:568:0x0c61  */
    /* JADX WARN: Removed duplicated region for block: B:570:0x0c69  */
    /* JADX WARN: Removed duplicated region for block: B:574:0x0c78  */
    /* JADX WARN: Removed duplicated region for block: B:577:0x0c7d  */
    /* JADX WARN: Removed duplicated region for block: B:580:0x0c87  */
    /* JADX WARN: Removed duplicated region for block: B:594:0x0cfe  */
    /* JADX WARN: Removed duplicated region for block: B:608:0x0d6d  */
    /* JADX WARN: Removed duplicated region for block: B:619:0x0dd8  */
    /* JADX WARN: Removed duplicated region for block: B:632:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:642:? A[RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:95:0x027e  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void updateTopPanel(boolean r49) {
        /*
            Method dump skipped, instructions count: 3648
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.updateTopPanel(boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$241(final long j, final long j2) {
        StarsController.getInstance(this.currentAccount).getPaidRevenue(j, j2, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda254
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) {
                this.f$0.lambda$updateTopPanel$240(j, j2, (Long) obj);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$240(final long j, final long j2, final Long l) {
        if (getContext() == null) {
            return;
        }
        AlertsCreator.showAlertWithCheckbox(getContext(), LocaleController.getString(C2369R.string.RemoveMessageFeeTitle), AndroidUtilities.replaceTags(LocaleController.formatString(ChatObject.isMonoForum(this.currentChat) ? C2369R.string.RemoveMessageFeeMessageChannel : C2369R.string.RemoveMessageFeeMessage, DialogObject.getShortName(j))), l.longValue() > 0 ? LocaleController.formatPluralStringComma("RemoveMessageFeeRefund", (int) l.longValue()) : null, LocaleController.getString(C2369R.string.Confirm), new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda335
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) {
                this.f$0.lambda$updateTopPanel$239(j, j2, l, (Boolean) obj);
            }
        }, this.resourceProvider);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$239(long j, long j2, Long l, Boolean bool) {
        StarsController.getInstance(this.currentAccount).stopPaidMessages(j, j2, l.longValue() > 0 && bool.booleanValue(), true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$242(ValueAnimator valueAnimator) {
        this.topChatPanelViewOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$243(ValueAnimator valueAnimator) {
        this.topChatPanelViewOffset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$244(ValueAnimator valueAnimator) {
        this.topChatPanelView2Offset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateTopPanel$245(ValueAnimator valueAnimator) {
        this.topChatPanelView2Offset = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    private void checkListViewPaddings() {
        MessageObject messageObject;
        if (!this.wasManualScroll && (messageObject = this.unreadMessageObject) != null) {
            if (this.messages.indexOf(messageObject) >= 0) {
                this.fixPaddingsInLayout = true;
                View view = this.fragmentView;
                if (view != null) {
                    view.requestLayout();
                    return;
                }
                return;
            }
            return;
        }
        if (this.checkPaddingsRunnable != null) {
            return;
        }
        Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda246
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkListViewPaddings$246();
            }
        };
        this.checkPaddingsRunnable = runnable;
        AndroidUtilities.runOnUIThread(runnable);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkListViewPaddings$246() {
        this.checkPaddingsRunnable = null;
        invalidateChatListViewTopPadding();
        invalidateMessagesVisiblePart();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkRaiseSensors() {
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout;
        FrameLayout frameLayout;
        FrameLayout frameLayout2;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        boolean z = false;
        if (chatActivityEnterView != null && chatActivityEnterView.isStickersExpanded()) {
            MediaController.getInstance().setAllowStartRecord(false);
            return;
        }
        TLRPC.Chat chat = this.currentChat;
        if (chat != null && !ChatObject.canSendVoice(chat)) {
            MediaController.getInstance().setAllowStartRecord(false);
            return;
        }
        MediaController mediaController = MediaController.getInstance();
        if (!ApplicationLoader.mainInterfacePaused && (((chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout) == null || chatActivityChannelButtonsLayout.getVisibility() != 0) && (((frameLayout = this.bottomOverlay) == null || frameLayout.getVisibility() != 0) && ((frameLayout2 = this.searchContainer) == null || frameLayout2.getVisibility() != 0)))) {
            z = true;
        }
        mediaController.setAllowStartRecord(z);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void dismissCurrentDialog() {
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null && this.visibleDialog == chatAttachAlert) {
            chatAttachAlert.getPhotoLayout().closeCamera(false);
            this.chatAttachAlert.dismissInternal();
            this.chatAttachAlert.getPhotoLayout().hideCamera(true);
            return;
        }
        super.dismissCurrentDialog();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void setInPreviewMode(boolean z) {
        MessageObject messageObject;
        TLRPC.Message message;
        ChatActivityEnterView chatActivityEnterView;
        super.setInPreviewMode(z);
        int i = 8;
        if (this.currentUser != null && this.audioCallIconItem != null) {
            TLRPC.UserFull userFull = getMessagesController().getUserFull(this.currentUser.f1734id);
            if (userFull != null && userFull.phone_calls_available) {
                this.showAudioCallAsIcon = !this.inPreviewMode;
                this.audioCallIconItem.setVisibility(0);
            } else {
                this.showAudioCallAsIcon = false;
                this.audioCallIconItem.setVisibility(8);
            }
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.setOccupyStatusBar(!z);
            this.avatarContainer.setTitleExpand(this.showAudioCallAsIcon);
            this.avatarContainer.setLayoutParams(LayoutHelper.createFrame(-2, -1.0f, 51, z ? this.chatMode == 2 ? 10 : 0 : 56.0f, 0.0f, 40.0f, 0.0f));
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null) {
            chatActivityEnterView2.setVisibility(!z ? 0 : 4);
        }
        SuggestEmojiView suggestEmojiView = this.suggestEmojiPanel;
        if (suggestEmojiView != null) {
            if (this.allowStickersPanel && !z && ((chatActivityEnterView = this.chatActivityEnterView) == null || !chatActivityEnterView.isStickersExpanded())) {
                i = 0;
            }
            suggestEmojiView.setVisibility(i);
        }
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null) {
            mentionsContainerView.animate().alpha((this.chatActivityEnterView.isStickersExpanded() || isInPreviewMode()) ? 0.0f : 1.0f).setInterpolator(CubicBezierInterpolator.DEFAULT).start();
        }
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            actionBar.setBackButtonDrawable(!z ? new BackDrawable(false) : null);
            ActionBarMenuItem actionBarMenuItem = this.headerItem;
            if (actionBarMenuItem != null) {
                actionBarMenuItem.setAlpha(!z ? 1.0f : 0.0f);
            }
            ActionBarMenu.LazyItem lazyItem = this.attachItem;
            if (lazyItem != null) {
                lazyItem.setAlpha(z ? 0.0f : 1.0f);
            }
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            int childCount = chatListRecyclerView.getChildCount();
            for (int i2 = 0; i2 < childCount; i2++) {
                View childAt = this.chatListView.getChildAt(i2);
                boolean z2 = childAt instanceof ChatMessageCell;
                if (z2) {
                    messageObject = ((ChatMessageCell) childAt).getMessageObject();
                } else if (childAt instanceof ChatActionCell) {
                    messageObject = ((ChatActionCell) childAt).getMessageObject();
                } else {
                    messageObject = childAt instanceof DummyView ? ((DummyView) childAt).getMessageObject() : null;
                }
                if (messageObject != null && (message = messageObject.messageOwner) != null && message.media_unread && message.mentioned) {
                    if (!messageObject.isVoice() && !messageObject.isRoundVideo()) {
                        int i3 = this.newMentionsCount - 1;
                        this.newMentionsCount = i3;
                        if (i3 <= 0) {
                            this.newMentionsCount = 0;
                            this.hasAllMentionsLocal = true;
                            showMentionDownButton(false, true);
                        } else {
                            this.sideControlsButtonsLayout.setButtonCount(1, i3, true);
                        }
                        getMessagesController().markMentionMessageAsRead(messageObject.getId(), ChatObject.isChannel(this.currentChat) ? this.currentChat.f1571id : 0L, this.dialog_id);
                        messageObject.setContentIsRead();
                    }
                    if (z2) {
                        ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                        chatMessageCell.setHighlighted(false);
                        chatMessageCell.setHighlightedAnimated();
                    }
                }
            }
            this.chatListView.setItemAnimator(null);
        }
        updateBottomOverlay();
        updateSecretStatus();
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            fragmentContextView.setEnabled((z || this.isInsideContainer) ? false : true);
        }
        FragmentContextView fragmentContextView2 = this.fragmentLocationContextView;
        if (fragmentContextView2 != null) {
            fragmentContextView2.setEnabled((z || this.isInsideContainer) ? false : true);
        }
        BlurredFrameLayout blurredFrameLayout = this.pinnedMessageView;
        if (blurredFrameLayout != null) {
            blurredFrameLayout.setEnabled(!isInPreviewMode());
        }
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView != null) {
            chatActivityFragmentView.setOccupyStatusBar((this.inBubbleMode || this.isInsideContainer || this.inPreviewMode) ? false : true);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onResume() throws Resources.NotFoundException, NumberFormatException {
        ChatActivityEnterView chatActivityEnterView;
        MessageObject messageObject;
        boolean z;
        BackupImageView backupImageView;
        super.onResume();
        checkShowBlur(false);
        this.activityResumeTime = System.currentTimeMillis();
        if (this.openImport && getSendMessagesHelper().getImportingHistory(this.dialog_id) != null) {
            ImportingAlert importingAlert = new ImportingAlert(getParentActivity(), null, this, this.themeDelegate);
            importingAlert.setOnHideListener(new DialogInterface.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda7
                @Override // android.content.DialogInterface.OnDismissListener
                public final void onDismiss(DialogInterface dialogInterface) {
                    this.f$0.lambda$onResume$247(dialogInterface);
                }
            });
            showDialog(importingAlert);
            this.openImport = false;
        }
        checkAdjustResize();
        MediaController.getInstance().startRaiseToEarSensors(this);
        checkRaiseSensors();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.onResume();
        }
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView != null) {
            chatActivityFragmentView.onResume();
        }
        checkChecksHint();
        Bulletin.Delegate delegate = new Bulletin.Delegate() { // from class: org.telegram.ui.ChatActivity.110
            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public boolean allowLayoutChanges() {
                return false;
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public /* synthetic */ boolean bottomOffsetAnimated() {
                return Bulletin.Delegate.CC.$default$bottomOffsetAnimated(this);
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public /* synthetic */ boolean clipWithGradient(int i) {
                return Bulletin.Delegate.CC.$default$clipWithGradient(this, i);
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onBottomOffsetChange(float f) {
                Bulletin.Delegate.CC.$default$onBottomOffsetChange(this, f);
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onHide(Bulletin bulletin) {
                Bulletin.Delegate.CC.$default$onHide(this, bulletin);
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public /* synthetic */ void onShow(Bulletin bulletin) {
                Bulletin.Delegate.CC.$default$onShow(this, bulletin);
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public int getBottomOffset(int i) {
                if (i == 1) {
                    return 0;
                }
                return Math.round(ChatActivity.this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + ChatActivity.this.chatInputViewsContainer.getInputBubbleHeight() + AndroidUtilities.m1146dp(16.0f));
            }

            @Override // org.telegram.ui.Components.Bulletin.Delegate
            public int getTopOffset(int i) {
                return Math.max(AndroidUtilities.statusBarHeight + ActionBar.getCurrentActionBarHeight(), ((BaseFragment) ChatActivity.this).actionBar != null ? ((BaseFragment) ChatActivity.this).actionBar.getMeasuredHeight() + ((BaseFragment) ChatActivity.this).actionBar.getTop() : 0) + ((int) Math.max(0.0f, ChatActivity.this.paddingTopHeight));
            }
        };
        this.bulletinDelegate = delegate;
        Bulletin.addDelegate(this, delegate);
        checkActionBarMenu(false);
        TLRPC.PhotoSize photoSize = this.replyImageLocation;
        if (photoSize != null && (backupImageView = this.replyImageView) != null) {
            backupImageView.setImage(ImageLocation.getForObject(photoSize, this.replyImageLocationObject), "50_50", ImageLocation.getForObject(this.replyImageThumbLocation, this.replyImageLocationObject), "50_50_b", (String) null, this.replyImageSize, this.replyImageCacheType, this.replyingMessageObject);
        }
        if (this.pinnedImageLocation != null) {
            this.pinnedMessageImageView[0].setImage(ImageLocation.getForObject(this.pinnedImageLocation, this.pinnedImageLocationObject), "50_50", ImageLocation.getForObject(this.pinnedImageThumbLocation, this.pinnedImageLocationObject), "50_50_b", (String) null, this.pinnedImageSize, this.pinnedImageCacheType, (MessageObject) this.pinnedMessageObjects.get(Integer.valueOf(this.currentPinnedMessageId)));
            this.pinnedMessageImageView[0].setHasBlur(this.pinnedImageHasBlur);
        }
        if (this.chatMode == 0) {
            getNotificationsController().setOpenedDialogId(this.dialog_id, getTopicId());
        }
        getMessagesController().setLastVisibleDialogId(this.dialog_id, this.chatMode == 1, true);
        if (this.scrollToTopOnResume) {
            if (this.scrollToTopUnReadOnResume && (messageObject = this.scrollToMessage) != null) {
                if (this.chatListView != null) {
                    int scrollOffsetForMessage = this.scrollToMessagePosition;
                    if (scrollOffsetForMessage == -9000) {
                        scrollOffsetForMessage = getScrollOffsetForMessage(messageObject);
                    } else if (scrollOffsetForMessage == -10000) {
                        scrollOffsetForMessage = -AndroidUtilities.m1146dp(11.0f);
                    } else {
                        z = true;
                        this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(this.scrollToMessage), scrollOffsetForMessage, z);
                    }
                    z = false;
                    this.chatLayoutManager.scrollToPositionWithOffset(this.chatAdapter.messagesStartRow + this.messages.indexOf(this.scrollToMessage), scrollOffsetForMessage, z);
                }
            } else {
                moveScrollToLastMessage(false);
            }
            this.scrollToTopUnReadOnResume = false;
            this.scrollToTopOnResume = false;
            this.scrollToMessage = null;
        }
        this.paused = false;
        this.pausedOnLastMessage = false;
        checkScrollForLoad(false);
        if (this.wasPaused) {
            this.wasPaused = false;
            ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
            if (chatActivityAdapter != null) {
                chatActivityAdapter.notifyDataSetChanged(false);
            }
        }
        fixLayout();
        applyDraftMaybe(false);
        applyChatLinkMessageMaybe();
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
        if (chatActivityChannelButtonsLayout != null && chatActivityChannelButtonsLayout.getVisibility() != 0 && !this.actionBar.isSearchFieldVisible() && this.chatMode != 7 && !BaseFragment.hasSheets(this)) {
            this.chatActivityEnterView.setFieldFocused(true);
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null) {
            chatActivityEnterView2.onResume();
        }
        if (this.currentUser != null) {
            this.chatEnterTime = System.currentTimeMillis();
            this.chatLeaveTime = 0L;
        }
        if (this.startVideoEdit != null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda8
                @Override // java.lang.Runnable
                public final void run() throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$onResume$248();
                }
            });
        }
        if (this.chatListView != null && ((chatActivityEnterView = this.chatActivityEnterView) == null || !chatActivityEnterView.isEditingMessage())) {
            this.chatListView.setOnItemLongClickListener(this.onItemLongClickListener);
            this.chatListView.setOnItemClickListener(this.onItemClickListener);
            this.chatListView.setLongClickable(true);
        }
        checkBotCommands();
        updateTitle(false);
        showGigagroupConvertAlert();
        if (this.pullingDownOffset != 0.0f) {
            this.pullingDownOffset = 0.0f;
            this.chatListView.invalidate();
        }
        this.flagSecure.attach();
        StarReactionsOverlay starReactionsOverlay = this.starReactionsOverlay;
        if (starReactionsOverlay != null) {
            starReactionsOverlay.bringToFront();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onResume$247(DialogInterface dialogInterface) {
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            fragmentContextView.checkImport(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onResume$248() throws Resources.NotFoundException, NumberFormatException {
        openVideoEditor(this.startVideoEdit, null);
        this.startVideoEdit = null;
    }

    public float getPullingDownOffset() {
        return this.pullingDownOffset;
    }

    public void checkAdjustResize() {
        if (this.isInsideContainer) {
            return;
        }
        if (isReport()) {
            AndroidUtilities.requestAdjustNothing(getParentActivity(), this.classGuid);
        } else {
            AndroidUtilities.requestAdjustResize(getParentActivity(), this.classGuid);
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    /* renamed from: finishFragment, reason: merged with bridge method [inline-methods] */
    public void lambda$onBackPressed$371() {
        super.lambda$onBackPressed$371();
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.setPauseNotifications(false);
            closeMenu();
        }
    }

    public void saveDraft() {
        MessageObject messageObject;
        CharSequence trimmedString;
        boolean zIsMessageWebPageSearchEnabled;
        long topicId;
        long j;
        long j2;
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout;
        if (this.ignoreAttachOnPause || this.chatActivityEnterView == null || (chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout) == null || chatActivityChannelButtonsLayout.getVisibility() == 0) {
            messageObject = null;
            trimmedString = null;
            zIsMessageWebPageSearchEnabled = true;
        } else {
            messageObject = this.replyingMessageObject;
            trimmedString = AndroidUtilities.getTrimmedString(this.chatActivityEnterView.getDraftMessage());
            zIsMessageWebPageSearchEnabled = this.chatActivityEnterView.isMessageWebPageSearchEnabled();
        }
        if (this.ignoreDraft) {
            trimmedString = null;
        }
        CharSequence[] charSequenceArr = {trimmedString};
        MediaDataController mediaDataController = getMediaDataController();
        TLRPC.EncryptedChat encryptedChat = this.currentEncryptedChat;
        ArrayList<TLRPC.MessageEntity> entities = mediaDataController.getEntities(charSequenceArr, encryptedChat == null || AndroidUtilities.getPeerLayerVersion(encryptedChat.layer) >= 101);
        if (this.chatMode == 3) {
            j = 0;
            j2 = 0;
        } else {
            if (ChatObject.isForum(this.currentChat) && !this.isTopic && messageObject != null) {
                TLRPC.TL_forumTopic tL_forumTopic = messageObject.replyToForumTopic;
                if (tL_forumTopic != null) {
                    topicId = tL_forumTopic.f1631id;
                } else {
                    topicId = MessageObject.getTopicId(this.currentAccount, messageObject.messageOwner, ChatObject.isForum(this.currentChat));
                }
            } else {
                topicId = this.threadMessageId;
            }
            j = topicId;
            j2 = 0;
        }
        MediaDataController mediaDataController2 = getMediaDataController();
        long j3 = j2;
        long j4 = this.dialog_id;
        CharSequence charSequence = charSequenceArr[0];
        TLRPC.Message message = (messageObject == null || messageObject.isTopicMainMessage || messageObject.replyToForumTopic != null || this.ignoreDraft) ? null : messageObject.messageOwner;
        ReplyQuote replyQuote = this.replyingQuote;
        MessageSuggestionParams messageSuggestionParams = this.messageSuggestionParams;
        TLRPC.SuggestedPost tl = messageSuggestionParams != null ? messageSuggestionParams.toTl() : null;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        mediaDataController2.saveDraft(j4, j, charSequence, entities, message, replyQuote, tl, chatActivityEnterView != null ? chatActivityEnterView.getEffectId() : j3, !zIsMessageWebPageSearchEnabled, false);
    }

    /* JADX WARN: Removed duplicated region for block: B:127:0x01ee  */
    /* JADX WARN: Removed duplicated region for block: B:130:0x01f5  */
    /* JADX WARN: Removed duplicated region for block: B:131:0x022e  */
    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void onPause() {
        /*
            Method dump skipped, instructions count: 663
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.onPause():void");
    }

    public void setResolvedChatLink(TL_account.resolvedBusinessChatLinks resolvedbusinesschatlinks) {
        this.resolvedChatLink = resolvedbusinesschatlinks;
    }

    public void applyChatLinkMessageMaybe() {
        ArrayList<TLRPC.MessageEntity> arrayList;
        ArrayList<TLRPC.MessageEntity> arrayList2;
        if (this.chatActivityEnterView == null || this.chatMode != 0 || this.resolvedChatLink == null) {
            return;
        }
        if (!UserConfig.getInstance(this.currentAccount).isPremium() && UserConfig.getInstance(this.currentAccount).getClientUserId() != this.dialog_id && !LocaleUtils.canUseLocalPremiumEmojis(this.currentAccount) && (arrayList2 = this.resolvedChatLink.entities) != null) {
            arrayList = (ArrayList) Collection.EL.stream(arrayList2).filter(new Predicate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda209
                public /* synthetic */ Predicate and(Predicate predicate) {
                    return Predicate$CC.$default$and(this, predicate);
                }

                public /* synthetic */ Predicate negate() {
                    return Predicate$CC.$default$negate(this);
                }

                /* renamed from: or */
                public /* synthetic */ Predicate m1260or(Predicate predicate) {
                    return Predicate$CC.$default$or(this, predicate);
                }

                @Override // java.util.function.Predicate
                public final boolean test(Object obj) {
                    return this.f$0.lambda$applyChatLinkMessageMaybe$249((TLRPC.MessageEntity) obj);
                }
            }).collect(Collectors.toCollection(new ExportMapper$$ExternalSyntheticLambda2()));
        } else {
            arrayList = this.resolvedChatLink.entities;
        }
        CharSequence charSequenceApplyMessageEntities = ChatActivityEnterView.applyMessageEntities(arrayList, this.resolvedChatLink.message, this.chatActivityEnterView.getEditField().getPaint().getFontMetricsInt());
        if (charSequenceApplyMessageEntities != null && charSequenceApplyMessageEntities.length() > 0 && charSequenceApplyMessageEntities.charAt(0) == '@') {
            charSequenceApplyMessageEntities = TextUtils.concat(" ", charSequenceApplyMessageEntities);
        }
        this.chatActivityEnterView.setFieldText(charSequenceApplyMessageEntities, true, true);
        this.resolvedChatLink = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:51:0x00c9  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ boolean lambda$applyChatLinkMessageMaybe$249(org.telegram.tgnet.TLRPC.MessageEntity r18) {
        /*
            Method dump skipped, instructions count: 304
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$applyChatLinkMessageMaybe$249(org.telegram.tgnet.TLRPC$MessageEntity):boolean");
    }

    public void applyDraftMaybe(boolean z) throws Resources.NotFoundException, NumberFormatException {
        applyDraftMaybe(z, false);
    }

    /* JADX WARN: Multi-variable type inference failed */
    public void applyDraftMaybe(boolean z, boolean z2) throws Resources.NotFoundException, NumberFormatException {
        TLRPC.DraftMessage draft;
        Long l;
        TLRPC.Message draftMessage;
        long j;
        boolean z3;
        MessageObject messageObject;
        TLRPC.TL_forumTopic tL_forumTopicFindTopic;
        MessageObject messageObject2;
        TLRPC.SuggestedPost suggestedPost;
        String str;
        long j2;
        Paint.FontMetricsInt fontMetricsInt;
        AnimatedEmojiSpan animatedEmojiSpan;
        TLRPC.InputReplyTo inputReplyTo;
        Long l2;
        if (this.chatActivityEnterView != null) {
            int i = this.chatMode;
            if (i == 0 || i == 8 || (i == 3 && getUserConfig().getClientUserId() == getSavedDialogId())) {
                long j3 = 0;
                if (this.chatMode == 8) {
                    if (!ChatObject.isMonoForum(this.currentChat)) {
                        return;
                    }
                    if (this.threadMessageId == 0 && ChatObject.canManageMonoForum(this.currentAccount, this.currentChat)) {
                        return;
                    }
                }
                Paint.FontMetricsInt fontMetricsInt2 = null;
                if (isForumInViewAsMessagesMode()) {
                    Pair<Long, TLRPC.DraftMessage> oneThreadDraft = getMediaDataController().getOneThreadDraft(this.dialog_id);
                    if (oneThreadDraft != null) {
                        l2 = (Long) oneThreadDraft.first;
                        draft = (TLRPC.DraftMessage) oneThreadDraft.second;
                    } else {
                        draft = null;
                        l2 = null;
                    }
                    l = l2;
                } else {
                    draft = getMediaDataController().getDraft(this.dialog_id, this.chatMode == 3 ? 0L : this.threadMessageId);
                    l = null;
                }
                TLRPC.DraftMessage draftMessage2 = draft;
                MediaDataController.DraftVoice draftVoice = MediaDataController.getInstance(this.currentAccount).getDraftVoice(this.dialog_id, getTopicId());
                if (draftMessage2 == null || (inputReplyTo = draftMessage2.reply_to) == null || inputReplyTo.reply_to_msg_id == 0) {
                    draftMessage = null;
                } else {
                    draftMessage = getMediaDataController().getDraftMessage(this.dialog_id, l != null ? l.longValue() : this.threadMessageId);
                }
                boolean z4 = 1;
                if ((!z2 || draftMessage2 == null) && this.chatActivityEnterView.getFieldText() != null && (this.chatMode != 0 || getUserConfig().getClientUserId() != getDialogId() || draftMessage2 == null || this.appliedDraftDate >= draftMessage2.date)) {
                    if (z && draftMessage2 == null) {
                        this.chatActivityEnterView.setFieldText("");
                        this.chatActivityEnterView.setEffectId(0L);
                        hideFieldPanel(true);
                    }
                } else if (draftVoice != null) {
                    this.chatActivityEnterView.setVoiceDraft(draftVoice);
                } else {
                    if (draftMessage2 != null) {
                        this.appliedDraftDate = draftMessage2.date;
                        this.chatActivityEnterView.setWebPage(null, !draftMessage2.no_webpage);
                        if (!draftMessage2.entities.isEmpty()) {
                            SpannableStringBuilder spannableStringBuilderValueOf = SpannableStringBuilder.valueOf(draftMessage2.message);
                            MediaDataController.sortEntities(draftMessage2.entities);
                            int i2 = 0;
                            while (i2 < draftMessage2.entities.size()) {
                                TLRPC.MessageEntity messageEntity = (TLRPC.MessageEntity) draftMessage2.entities.get(i2);
                                boolean z5 = messageEntity instanceof TLRPC.TL_inputMessageEntityMentionName;
                                long j4 = j3;
                                if (z5 || (messageEntity instanceof TLRPC.TL_messageEntityMentionName)) {
                                    if (z5) {
                                        j2 = ((TLRPC.TL_inputMessageEntityMentionName) messageEntity).user_id.user_id;
                                    } else {
                                        j2 = ((TLRPC.TL_messageEntityMentionName) messageEntity).user_id;
                                    }
                                    if (messageEntity.offset + messageEntity.length < spannableStringBuilderValueOf.length() && spannableStringBuilderValueOf.charAt(messageEntity.offset + messageEntity.length) == ' ') {
                                        messageEntity.length++;
                                    }
                                    URLSpanUserMention uRLSpanUserMention = new URLSpanUserMention("" + j2, 3);
                                    int i3 = messageEntity.offset;
                                    spannableStringBuilderValueOf.setSpan(uRLSpanUserMention, i3, messageEntity.length + i3, 33);
                                } else if ((messageEntity instanceof TLRPC.TL_messageEntityCode) || (messageEntity instanceof TLRPC.TL_messageEntityPre)) {
                                    TextStyleSpan.TextStyleRun textStyleRun = new TextStyleSpan.TextStyleRun();
                                    textStyleRun.flags |= 4;
                                    TextStyleSpan textStyleSpan = new TextStyleSpan(textStyleRun);
                                    int i4 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan, i4, messageEntity.length + i4, spannableStringBuilderValueOf, true);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityBold) {
                                    TextStyleSpan.TextStyleRun textStyleRun2 = new TextStyleSpan.TextStyleRun();
                                    textStyleRun2.flags |= z4;
                                    TextStyleSpan textStyleSpan2 = new TextStyleSpan(textStyleRun2);
                                    int i5 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan2, i5, messageEntity.length + i5, spannableStringBuilderValueOf, z4);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityItalic) {
                                    TextStyleSpan.TextStyleRun textStyleRun3 = new TextStyleSpan.TextStyleRun();
                                    textStyleRun3.flags |= 2;
                                    TextStyleSpan textStyleSpan3 = new TextStyleSpan(textStyleRun3);
                                    int i6 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan3, i6, messageEntity.length + i6, spannableStringBuilderValueOf, z4);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityStrike) {
                                    TextStyleSpan.TextStyleRun textStyleRun4 = new TextStyleSpan.TextStyleRun();
                                    textStyleRun4.flags |= 8;
                                    TextStyleSpan textStyleSpan4 = new TextStyleSpan(textStyleRun4);
                                    int i7 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan4, i7, messageEntity.length + i7, spannableStringBuilderValueOf, z4);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityUnderline) {
                                    TextStyleSpan.TextStyleRun textStyleRun5 = new TextStyleSpan.TextStyleRun();
                                    textStyleRun5.flags |= 16;
                                    TextStyleSpan textStyleSpan5 = new TextStyleSpan(textStyleRun5);
                                    int i8 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan5, i8, messageEntity.length + i8, spannableStringBuilderValueOf, z4);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityTextUrl) {
                                    URLSpanReplacement uRLSpanReplacement = new URLSpanReplacement(messageEntity.url);
                                    int i9 = messageEntity.offset;
                                    spannableStringBuilderValueOf.setSpan(uRLSpanReplacement, i9, messageEntity.length + i9, 33);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntitySpoiler) {
                                    TextStyleSpan.TextStyleRun textStyleRun6 = new TextStyleSpan.TextStyleRun();
                                    textStyleRun6.flags |= 256;
                                    TextStyleSpan textStyleSpan6 = new TextStyleSpan(textStyleRun6);
                                    int i10 = messageEntity.offset;
                                    MediaDataController.addStyleToText(textStyleSpan6, i10, messageEntity.length + i10, spannableStringBuilderValueOf, z4);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityBlockquote) {
                                    int i11 = messageEntity.offset;
                                    QuoteSpan.putQuoteToEditable(spannableStringBuilderValueOf, i11, messageEntity.length + i11, messageEntity.collapsed);
                                } else if (messageEntity instanceof TLRPC.TL_messageEntityCustomEmoji) {
                                    try {
                                        fontMetricsInt = this.chatActivityEnterView.getEditField().getPaint().getFontMetricsInt();
                                    } catch (Exception e) {
                                        FileLog.m1160e(e);
                                        fontMetricsInt = fontMetricsInt2;
                                    }
                                    TLRPC.TL_messageEntityCustomEmoji tL_messageEntityCustomEmoji = (TLRPC.TL_messageEntityCustomEmoji) messageEntity;
                                    if (tL_messageEntityCustomEmoji.document != null) {
                                        animatedEmojiSpan = new AnimatedEmojiSpan(tL_messageEntityCustomEmoji.document, fontMetricsInt);
                                    } else {
                                        animatedEmojiSpan = new AnimatedEmojiSpan(tL_messageEntityCustomEmoji.document_id, fontMetricsInt);
                                    }
                                    animatedEmojiSpan.local = tL_messageEntityCustomEmoji.local;
                                    int i12 = messageEntity.offset;
                                    spannableStringBuilderValueOf.setSpan(animatedEmojiSpan, i12, messageEntity.length + i12, 33);
                                }
                                i2++;
                                j3 = j4;
                                fontMetricsInt2 = null;
                                z4 = 1;
                            }
                            j = j3;
                            str = spannableStringBuilderValueOf;
                        } else {
                            j = 0;
                            str = draftMessage2.message;
                        }
                        this.chatActivityEnterView.setFieldText(str, true, true);
                        z3 = false;
                        if (getArguments().getBoolean("hasUrl", false)) {
                            this.chatActivityEnterView.setSelection(draftMessage2.message.indexOf(10) + 1);
                            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda123
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$applyDraftMaybe$250();
                                }
                            }, 700L);
                        }
                        this.chatActivityEnterView.setEffectId(draftMessage2.effect);
                    }
                    if (draftMessage2 != null && (suggestedPost = draftMessage2.suggested_post) != null) {
                        MessageSuggestionParams messageSuggestionParamsM1170of = MessageSuggestionParams.m1170of(suggestedPost);
                        this.messageSuggestionParams = messageSuggestionParamsM1170of;
                        showFieldPanelForSuggestionParams(messageSuggestionParamsM1170of);
                    }
                    messageObject = this.replyingMessageObject;
                    if (messageObject != null || this.threadMessageObject == messageObject) {
                        if (draftMessage == null && ((messageObject2 = this.threadMessageObject) == null || messageObject2.getId() != draftMessage.f1597id)) {
                            MessageObject messageObject3 = new MessageObject(this.currentAccount, draftMessage, (AbstractMap<Long, TLRPC.User>) getMessagesController().getUsers(), false, false);
                            this.replyingMessageObject = messageObject3;
                            TLRPC.InputReplyTo inputReplyTo2 = draftMessage2.reply_to;
                            if (inputReplyTo2 != null) {
                                int i13 = inputReplyTo2.flags;
                                if ((i13 & 4) != 0) {
                                    this.replyingQuote = ReplyQuote.from(messageObject3, inputReplyTo2.quote_text, (i13 & 16) != 0 ? inputReplyTo2.quote_offset : -1);
                                }
                            }
                            checkNewMessagesOnQuoteEdit(z3);
                            ReplyQuote replyQuote = this.replyingQuote;
                            if (replyQuote != null) {
                                showFieldPanelForReplyQuote(this.replyingMessageObject, replyQuote);
                            } else {
                                showFieldPanelForReply(this.replyingMessageObject);
                            }
                            updateBottomOverlay();
                            return;
                        }
                        if (l != null || l.longValue() == j || this.currentChat == null || (tL_forumTopicFindTopic = getMessagesController().getTopicsController().findTopic(this.currentChat.f1571id, l.longValue())) == null || tL_forumTopicFindTopic.topicStartMessage == null) {
                            return;
                        }
                        MessageObject messageObject4 = new MessageObject(this.currentAccount, tL_forumTopicFindTopic.topicStartMessage, (AbstractMap<Long, TLRPC.User>) getMessagesController().getUsers(), false, false);
                        this.replyingMessageObject = messageObject4;
                        messageObject4.replyToForumTopic = tL_forumTopicFindTopic;
                        showFieldPanelForReply(messageObject4);
                        updateBottomOverlay();
                        return;
                    }
                    return;
                }
                j = 0;
                z3 = false;
                if (draftMessage2 != null) {
                    MessageSuggestionParams messageSuggestionParamsM1170of2 = MessageSuggestionParams.m1170of(suggestedPost);
                    this.messageSuggestionParams = messageSuggestionParamsM1170of2;
                    showFieldPanelForSuggestionParams(messageSuggestionParamsM1170of2);
                }
                messageObject = this.replyingMessageObject;
                if (messageObject != null) {
                }
                if (draftMessage == null) {
                }
                if (l != null) {
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$applyDraftMaybe$250() {
        ChatActivityEnterView chatActivityEnterView;
        if (BaseFragment.hasSheets(this) || (chatActivityEnterView = this.chatActivityEnterView) == null) {
            return;
        }
        chatActivityEnterView.setFieldFocused(true);
        this.chatActivityEnterView.openKeyboard();
    }

    private void checkNewMessagesOnQuoteEdit(boolean z) throws Resources.NotFoundException, NumberFormatException {
        if (this.replyingMessageObject == null) {
            return;
        }
        for (int i = 0; i < this.messages.size(); i++) {
            MessageObject messageObject = (MessageObject) this.messages.get(i);
            if (messageObject != null && messageObject.getId() == this.replyingMessageObject.getId() && messageObject.getDialogId() == this.replyingMessageObject.getDialogId()) {
                this.replyingMessageObject = messageObject;
                ReplyQuote replyQuote = this.replyingQuote;
                if (replyQuote != null) {
                    replyQuote.checkEdit(messageObject);
                }
                if (z) {
                    MessagePreviewParams messagePreviewParams = this.messagePreviewParams;
                    if (messagePreviewParams != null) {
                        MessageObject messageObject2 = this.replyingMessageObject;
                        MessageObject.GroupedMessages group = this.replyingQuoteGroup;
                        if (group == null) {
                            group = getGroup(messageObject2.getGroupId());
                        }
                        messagePreviewParams.updateReply(messageObject2, group, this.dialog_id, this.replyingQuote);
                    }
                    fallbackFieldPanel();
                    return;
                }
                return;
            }
        }
    }

    private void updateInformationForScreenshotDetector() {
        if (this.currentUser == null) {
            return;
        }
        if (this.currentEncryptedChat != null) {
            ArrayList<Long> arrayList = new ArrayList<>();
            ChatListRecyclerView chatListRecyclerView = this.chatListView;
            if (chatListRecyclerView != null) {
                int childCount = chatListRecyclerView.getChildCount();
                for (int i = 0; i < childCount; i++) {
                    View childAt = this.chatListView.getChildAt(i);
                    MessageObject messageObject = childAt instanceof ChatMessageCell ? ((ChatMessageCell) childAt).getMessageObject() : null;
                    if (messageObject != null && messageObject.getId() < 0) {
                        long j = messageObject.messageOwner.random_id;
                        if (j != 0) {
                            arrayList.add(Long.valueOf(j));
                        }
                    }
                }
            }
            MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, this.chatEnterTime, this.chatLeaveTime, this.currentUser, this.currentEncryptedChat, arrayList, 0);
            return;
        }
        SecretMediaViewer secretMediaViewer = SecretMediaViewer.getInstance();
        MessageObject currentMessageObject = secretMediaViewer.getCurrentMessageObject();
        if (currentMessageObject == null || currentMessageObject.isOut()) {
            return;
        }
        MediaController.getInstance().setLastVisibleMessageIds(this.currentAccount, secretMediaViewer.getOpenTime(), secretMediaViewer.getCloseTime(), this.currentUser, null, null, currentMessageObject.getId());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean fixLayoutInternal() {
        boolean z;
        MessageObject.GroupedMessages currentMessagesGroup;
        NumberTextView numberTextView = this.selectedMessagesCountTextView;
        if (numberTextView != null) {
            numberTextView.setTextSize((AndroidUtilities.isTablet() || ApplicationLoader.applicationContext.getResources().getConfiguration().orientation != 2) ? 20 : 18);
        }
        int childCount = this.chatListView.getChildCount();
        HashMap map = null;
        int i = 0;
        while (true) {
            z = true;
            if (i >= childCount) {
                break;
            }
            View childAt = this.chatListView.getChildAt(i);
            if ((childAt instanceof ChatMessageCell) && (currentMessagesGroup = ((ChatMessageCell) childAt).getCurrentMessagesGroup()) != null && currentMessagesGroup.hasSibling && !currentMessagesGroup.messages.isEmpty()) {
                if (map == null) {
                    map = new HashMap();
                }
                if (!map.containsKey(Long.valueOf(currentMessagesGroup.groupId))) {
                    map.put(Long.valueOf(currentMessagesGroup.groupId), currentMessagesGroup);
                    ArrayList<MessageObject> arrayList = currentMessagesGroup.messages;
                    int iIndexOf = this.messages.indexOf(arrayList.get(arrayList.size() - 1));
                    if (iIndexOf >= 0) {
                        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                        chatActivityAdapter.notifyItemRangeChanged(iIndexOf + chatActivityAdapter.messagesStartRow, currentMessagesGroup.messages.size());
                        this.chatListView.setItemAnimator(null);
                    }
                }
            }
            i++;
        }
        if (!AndroidUtilities.isTablet()) {
            return true;
        }
        if (AndroidUtilities.isSmallTablet() && ApplicationLoader.applicationContext.getResources().getConfiguration().orientation == 1) {
            this.actionBar.setBackButtonDrawable(new BackDrawable(false));
        } else {
            ActionBar actionBar = this.actionBar;
            INavigationLayout iNavigationLayout = this.parentLayout;
            if (iNavigationLayout != null && !iNavigationLayout.getFragmentStack().isEmpty() && this.parentLayout.getFragmentStack().get(0) != this && this.parentLayout.getFragmentStack().size() != 1) {
                z = false;
            }
            actionBar.setBackButtonDrawable(new BackDrawable(z));
        }
        return false;
    }

    private void fixLayout() {
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() { // from class: org.telegram.ui.ChatActivity.111
                @Override // android.view.ViewTreeObserver.OnPreDrawListener
                public boolean onPreDraw() {
                    ChatAvatarContainer chatAvatarContainer2 = ChatActivity.this.avatarContainer;
                    if (chatAvatarContainer2 != null) {
                        chatAvatarContainer2.getViewTreeObserver().removeOnPreDrawListener(this);
                    }
                    return ChatActivity.this.fixLayoutInternal();
                }
            });
        }
    }

    public boolean maybePlayVisibleVideo() {
        AnimatedFileDrawable animation;
        MessageObject messageObject;
        ImageReceiver photoImage;
        AnimatedFileDrawable animation2;
        ChatMessageCell messageCell;
        if (this.chatListView == null) {
            return false;
        }
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (playingMessageObject != null && !playingMessageObject.isVideo()) {
            return false;
        }
        HintView hintView = this.noSoundHintView;
        if (hintView == null || hintView.getTag() == null || (messageCell = this.noSoundHintView.getMessageCell()) == null) {
            animation = null;
            messageObject = null;
        } else {
            ImageReceiver photoImage2 = messageCell.getPhotoImage();
            animation = photoImage2.getAnimation();
            if (animation != null) {
                messageObject = messageCell.getMessageObject();
                this.scrollToVideo = ((float) messageCell.getTop()) + photoImage2.getImageY2() > ((float) this.chatListView.getMeasuredHeight());
            } else {
                messageObject = null;
            }
        }
        if (messageObject == null) {
            int childCount = this.chatListView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    break;
                }
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    MessageObject messageObject2 = chatMessageCell.getMessageObject();
                    boolean zIsRoundVideo = messageObject2.isRoundVideo();
                    if (!messageObject2.isRoundOnce() && !messageObject2.isVoiceOnce() && ((messageObject2.isVideo() || zIsRoundVideo) && messageObject2.videoEditedInfo == null && (animation2 = (photoImage = chatMessageCell.getPhotoImage()).getAnimation()) != null)) {
                        float top = childAt.getTop() + photoImage.getImageY();
                        float imageHeight = photoImage.getImageHeight() + top;
                        if (imageHeight >= 0.0f && top <= this.chatListView.getMeasuredHeight()) {
                            if (messageObject != null && top < 0.0f) {
                                break;
                            }
                            this.scrollToVideo = top < 0.0f || imageHeight > ((float) this.chatListView.getMeasuredHeight());
                            if (top >= 0.0f && imageHeight <= this.chatListView.getMeasuredHeight()) {
                                messageObject = messageObject2;
                                animation = animation2;
                                break;
                            }
                            messageObject = messageObject2;
                            animation = animation2;
                        }
                    }
                }
                i++;
            }
        }
        if (messageObject == null || MediaController.getInstance().isPlayingMessage(messageObject)) {
            return false;
        }
        hideHints(true);
        if (messageObject.isRoundVideo()) {
            boolean zPlayMessage = MediaController.getInstance().playMessage(messageObject);
            MediaController.getInstance().setVoiceMessagesPlaylist(zPlayMessage ? createVoiceMessagesPlaylist(messageObject, false) : null, false);
            return zPlayMessage;
        }
        SharedConfig.setNoSoundHintShowed(true);
        messageObject.audioProgress = animation.getCurrentProgress();
        messageObject.audioProgressMs = animation.getCurrentProgressMs();
        animation.stop();
        if (PhotoViewer.isPlayingMessageInPip(messageObject)) {
            PhotoViewer.getPipInstance().destroyPhotoViewer();
        }
        return MediaController.getInstance().playMessage(messageObject);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void onConfigurationChanged(Configuration configuration) throws NumberFormatException {
        MessageObject playingMessageObject;
        fixLayout();
        Dialog dialog = this.visibleDialog;
        if (dialog instanceof DatePickerDialog) {
            dialog.dismiss();
        }
        closeMenu();
        if (AndroidUtilities.isTablet()) {
            return;
        }
        if (configuration.orientation == 2) {
            if ((PhotoViewer.hasInstance() && PhotoViewer.getInstance().isVisible()) || (playingMessageObject = MediaController.getInstance().getPlayingMessageObject()) == null || !playingMessageObject.isVideo()) {
                return;
            }
            PhotoViewer.getInstance().setParentActivity(this, this.themeDelegate);
            getFileLoader().setLoadingVideoForPlayer(playingMessageObject.getDocument(), false);
            MediaController.getInstance().cleanupPlayer(true, true, false, true);
            PhotoViewer photoViewer = PhotoViewer.getInstance();
            int i = playingMessageObject.type;
            if (photoViewer.openPhoto(playingMessageObject, i != 0 ? this.dialog_id : 0L, i != 0 ? this.mergeDialogId : 0L, i != 0 ? getTopicId() : 0L, this.photoViewerProvider, false)) {
                PhotoViewer.getInstance().setParentChatActivity(this);
            }
            hideHints(false);
            MediaController.getInstance().resetGoingToShowMessageObject();
            return;
        }
        if (PhotoViewer.hasInstance() && PhotoViewer.getInstance().isOpenedFullScreenVideo()) {
            PhotoViewer.getInstance().injectVideoPlayerToMediaController();
            PhotoViewer.getInstance().closePhoto(false, true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void createDeleteMessagesAlert(MessageObject messageObject, MessageObject.GroupedMessages groupedMessages) {
        createDeleteMessagesAlert(messageObject, groupedMessages, false);
    }

    private void createDeleteMessagesAlert(MessageObject messageObject, MessageObject.GroupedMessages groupedMessages, boolean z) {
        if (messageObject == null && this.selectedMessagesIds[0].size() + this.selectedMessagesIds[1].size() == 0) {
            return;
        }
        AlertsCreator.createDeleteMessagesAlert(this, this.currentUser, this.currentChat, this.currentEncryptedChat, this.chatInfo, this.mergeDialogId, messageObject, this.selectedMessagesIds, groupedMessages, (int) getTopicId(), this.chatMode, null, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda280
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createDeleteMessagesAlert$251();
            }
        }, z ? new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda281
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createDeleteMessagesAlert$252();
            }
        } : null, this.themeDelegate);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createDeleteMessagesAlert$251() {
        hideActionMode();
        updatePinnedMessageView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createDeleteMessagesAlert$252() {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideActionMode() {
        EditTextCaption editField;
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            if (!actionBar.isActionModeShowed()) {
                return;
            }
            this.bottomViewsVisibilityController.setViewVisible(5, false, true);
            this.actionBar.hideActionMode();
        }
        this.cantDeleteMessagesCount = 0;
        this.canEditMessagesCount = 0;
        this.cantForwardMessagesCount = 0;
        this.canSaveMusicCount = 0;
        this.canSaveDocumentsCount = 0;
        this.cantSaveMessagesCount = 0;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && (editField = chatActivityEnterView.getEditField()) != null) {
            if (this.chatActivityEnterView.getVisibility() == 0) {
                editField.requestFocus();
            }
            editField.setAllowDrawCursor(true);
        }
        ChatActivityTextSelectionHelper chatActivityTextSelectionHelper = this.textSelectionHelper;
        if (chatActivityTextSelectionHelper != null) {
            chatActivityTextSelectionHelper.clear(true);
            this.textSelectionHelper.cancelAllAnimators();
        }
        TextSelectionHint textSelectionHint = this.textSelectionHint;
        if (textSelectionHint != null) {
            textSelectionHint.hide();
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null) {
            chatActivityEnterView2.preventInput = false;
        }
        this.textSelectionHintWasShowed = false;
        if (this.tagSelector != null) {
            hideTagSelector();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean createMenu(View view, boolean z, boolean z2, float f, float f2, boolean z3) {
        return createMenu(view, z, z2, f, f2, true, z3);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public CharSequence getMessageCaption(MessageObject messageObject, MessageObject.GroupedMessages groupedMessages) {
        return getMessageCaption(messageObject, groupedMessages, null);
    }

    public static CharSequence getMessageCaption(MessageObject messageObject, MessageObject.GroupedMessages groupedMessages, int[] iArr) {
        if (messageObject == null) {
            return null;
        }
        String restrictionReason = MessagesController.getInstance(messageObject.currentAccount).getRestrictionReason(messageObject.messageOwner.restriction_reason);
        if (!TextUtils.isEmpty(restrictionReason)) {
            return restrictionReason;
        }
        if (messageObject.isVoiceTranscriptionOpen() && !TranscribeButton.isTranscribing(messageObject)) {
            return messageObject.getVoiceTranscription();
        }
        CharSequence charSequence = messageObject.caption;
        if (charSequence != null) {
            return charSequence;
        }
        if (groupedMessages == null) {
            return null;
        }
        int size = groupedMessages.messages.size();
        CharSequence charSequence2 = null;
        for (int i = 0; i < size; i++) {
            MessageObject messageObject2 = groupedMessages.messages.get(i);
            CharSequence charSequence3 = messageObject2.caption;
            if (charSequence3 != null) {
                if (charSequence2 != null) {
                    return null;
                }
                if (iArr != null) {
                    iArr[0] = messageObject2.getId();
                }
                charSequence2 = charSequence3;
            }
        }
        return charSequence2;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean createMenu(View view, boolean z, boolean z2, float f, float f2, boolean z3, boolean z4) {
        return createMenu(view, z, z2, f, f2, z3, z4, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:1001:0x1817  */
    /* JADX WARN: Removed duplicated region for block: B:1004:0x1841  */
    /* JADX WARN: Removed duplicated region for block: B:1023:0x18bf  */
    /* JADX WARN: Removed duplicated region for block: B:1057:0x195f  */
    /* JADX WARN: Removed duplicated region for block: B:1059:0x1985  */
    /* JADX WARN: Removed duplicated region for block: B:1060:0x19dc  */
    /* JADX WARN: Removed duplicated region for block: B:1065:0x1a1f  */
    /* JADX WARN: Removed duplicated region for block: B:1082:0x1af8  */
    /* JADX WARN: Removed duplicated region for block: B:1088:0x1b77  */
    /* JADX WARN: Removed duplicated region for block: B:1089:0x1b9a  */
    /* JADX WARN: Removed duplicated region for block: B:1092:0x1bc7  */
    /* JADX WARN: Removed duplicated region for block: B:1093:0x1bce  */
    /* JADX WARN: Removed duplicated region for block: B:1224:0x1f29  */
    /* JADX WARN: Removed duplicated region for block: B:1249:0x1fd0  */
    /* JADX WARN: Removed duplicated region for block: B:1252:0x1ff4 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:1257:0x2004  */
    /* JADX WARN: Removed duplicated region for block: B:1260:0x2065  */
    /* JADX WARN: Removed duplicated region for block: B:1261:0x206a  */
    /* JADX WARN: Removed duplicated region for block: B:1266:0x2092  */
    /* JADX WARN: Removed duplicated region for block: B:1269:0x20be  */
    /* JADX WARN: Removed duplicated region for block: B:1272:0x20d7  */
    /* JADX WARN: Removed duplicated region for block: B:1279:0x2138  */
    /* JADX WARN: Removed duplicated region for block: B:1285:0x2160  */
    /* JADX WARN: Removed duplicated region for block: B:1286:0x2164  */
    /* JADX WARN: Removed duplicated region for block: B:1289:0x217d  */
    /* JADX WARN: Removed duplicated region for block: B:1292:0x2184  */
    /* JADX WARN: Removed duplicated region for block: B:1295:0x218b  */
    /* JADX WARN: Removed duplicated region for block: B:1324:? A[ADDED_TO_REGION, RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:139:0x02d0  */
    /* JADX WARN: Removed duplicated region for block: B:486:0x08cc A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:513:0x092c  */
    /* JADX WARN: Removed duplicated region for block: B:529:0x095e  */
    /* JADX WARN: Removed duplicated region for block: B:540:0x098a  */
    /* JADX WARN: Removed duplicated region for block: B:543:0x0992 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:586:0x0a20  */
    /* JADX WARN: Removed duplicated region for block: B:588:0x0a24  */
    /* JADX WARN: Removed duplicated region for block: B:601:0x0a4d  */
    /* JADX WARN: Removed duplicated region for block: B:604:0x0a53  */
    /* JADX WARN: Removed duplicated region for block: B:617:0x0a88  */
    /* JADX WARN: Removed duplicated region for block: B:619:0x0a8b A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:621:0x0a90  */
    /* JADX WARN: Removed duplicated region for block: B:624:0x0a98 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:633:0x0ab5  */
    /* JADX WARN: Removed duplicated region for block: B:636:0x0b03  */
    /* JADX WARN: Removed duplicated region for block: B:652:0x0b77  */
    /* JADX WARN: Removed duplicated region for block: B:653:0x0b7e  */
    /* JADX WARN: Removed duplicated region for block: B:656:0x0bbc  */
    /* JADX WARN: Removed duplicated region for block: B:657:0x0bbe  */
    /* JADX WARN: Removed duplicated region for block: B:660:0x0bc6  */
    /* JADX WARN: Removed duplicated region for block: B:662:0x0bcc  */
    /* JADX WARN: Removed duplicated region for block: B:665:0x0be8  */
    /* JADX WARN: Removed duplicated region for block: B:688:0x0d4e  */
    /* JADX WARN: Removed duplicated region for block: B:762:0x11e8  */
    /* JADX WARN: Removed duplicated region for block: B:810:0x1428  */
    /* JADX WARN: Removed duplicated region for block: B:838:0x1526  */
    /* JADX WARN: Removed duplicated region for block: B:883:0x15a6  */
    /* JADX WARN: Removed duplicated region for block: B:892:0x15c0  */
    /* JADX WARN: Removed duplicated region for block: B:898:0x15d3  */
    /* JADX WARN: Removed duplicated region for block: B:915:0x1602  */
    /* JADX WARN: Removed duplicated region for block: B:916:0x1604  */
    /* JADX WARN: Removed duplicated region for block: B:919:0x160d  */
    /* JADX WARN: Removed duplicated region for block: B:928:0x1623  */
    /* JADX WARN: Removed duplicated region for block: B:940:0x1656  */
    /* JADX WARN: Removed duplicated region for block: B:944:0x1661  */
    /* JADX WARN: Removed duplicated region for block: B:953:0x1686  */
    /* JADX WARN: Removed duplicated region for block: B:959:0x16b2  */
    /* JADX WARN: Removed duplicated region for block: B:964:0x16bd  */
    /* JADX WARN: Removed duplicated region for block: B:968:0x1715 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:972:0x1729  */
    /* JADX WARN: Type inference failed for: r0v218, types: [android.view.ViewGroup] */
    /* JADX WARN: Type inference failed for: r13v16 */
    /* JADX WARN: Type inference failed for: r13v17 */
    /* JADX WARN: Type inference failed for: r13v18, types: [com.exteragram.messenger.components.ActionRow] */
    /* JADX WARN: Type inference failed for: r13v29 */
    /* JADX WARN: Type inference failed for: r13v32 */
    /* JADX WARN: Type inference failed for: r15v22 */
    /* JADX WARN: Type inference failed for: r15v23, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r15v55 */
    /* JADX WARN: Type inference failed for: r17v1 */
    /* JADX WARN: Type inference failed for: r17v2 */
    /* JADX WARN: Type inference failed for: r17v5, types: [java.lang.String] */
    /* JADX WARN: Type inference failed for: r17v6 */
    /* JADX WARN: Type inference failed for: r17v7 */
    /* JADX WARN: Type inference failed for: r4v192 */
    /* JADX WARN: Type inference failed for: r4v193, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r4v198 */
    /* JADX WARN: Type inference failed for: r5v107, types: [android.view.View, org.telegram.ui.Components.AnimatedEmojiSpan$TextViewEmojis] */
    /* JADX WARN: Type inference failed for: r5v11 */
    /* JADX WARN: Type inference failed for: r5v116 */
    /* JADX WARN: Type inference failed for: r5v117, types: [boolean] */
    /* JADX WARN: Type inference failed for: r5v133 */
    /* JADX WARN: Type inference failed for: r5v31, types: [org.telegram.ui.Components.ReactionsContainerLayout] */
    /* JADX WARN: Type inference failed for: r5v32 */
    /* JADX WARN: Type inference failed for: r6v11, types: [android.view.View, android.view.ViewGroup, org.telegram.ui.ChatActivity$126, org.telegram.ui.Components.ChatScrimPopupContainerLayout] */
    /* JADX WARN: Type inference failed for: r6v128 */
    /* JADX WARN: Type inference failed for: r6v129 */
    /* JADX WARN: Type inference failed for: r6v130 */
    /* JADX WARN: Type inference failed for: r6v18, types: [org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout] */
    /* JADX WARN: Type inference failed for: r7v42 */
    /* JADX WARN: Type inference failed for: r7v43, types: [android.view.View, org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout] */
    /* JADX WARN: Type inference failed for: r7v59, types: [org.telegram.ui.ActionBar.ActionBarPopupWindow$ActionBarPopupWindowLayout] */
    /* JADX WARN: Type inference failed for: r9v103, types: [android.view.View, android.view.ViewGroup, android.widget.LinearLayout] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public boolean createMenu(final android.view.View r82, boolean r83, boolean r84, float r85, float r86, boolean r87, boolean r88, boolean r89) {
        /*
            Method dump skipped, instructions count: 8622
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.createMenu(android.view.View, boolean, boolean, float, float, boolean, boolean, boolean):boolean");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$253(MessageObject messageObject) {
        scrollToMessageId(messageObject.getReplyMsgId(), messageObject.messageOwner.f1597id, true, messageObject.getDialogId() == this.mergeDialogId ? 1 : 0, false, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$255(final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda455
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$254(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$254(TLObject tLObject) {
        if (tLObject instanceof TLRPC.TL_payments_paymentReceiptStars) {
            StarsIntroActivity.showTransactionSheet(getContext(), false, this.currentAccount, (TLRPC.TL_payments_paymentReceiptStars) tLObject, this.resourceProvider);
        } else if (tLObject instanceof TLRPC.PaymentReceipt) {
            presentFragment(new PaymentFormActivity((TLRPC.PaymentReceipt) tLObject));
        }
    }

    /* renamed from: $r8$lambda$7-iO0QkqjAG9_LAo3Ih42OK42fw, reason: not valid java name */
    public static /* synthetic */ void m6446$r8$lambda$7iO0QkqjAG9_LAo3Ih42OK42fw(ViewPager viewPager, int i, LinearLayout linearLayout, AtomicBoolean atomicBoolean, final HorizontalScrollView horizontalScrollView, final ReactionTabHolderView reactionTabHolderView, View view) {
        int currentItem = viewPager.getCurrentItem();
        if (i == currentItem) {
            return;
        }
        final ReactionTabHolderView reactionTabHolderView2 = (ReactionTabHolderView) linearLayout.getChildAt(currentItem);
        atomicBoolean.set(true);
        viewPager.setCurrentItem(i, true);
        final float scrollX = horizontalScrollView.getScrollX();
        final float x = reactionTabHolderView.getX() - ((horizontalScrollView.getWidth() - reactionTabHolderView.getWidth()) / 2.0f);
        ValueAnimator duration = ValueAnimator.ofFloat(0.0f, 1.0f).setDuration(150L);
        duration.setInterpolator(CubicBezierInterpolator.DEFAULT);
        duration.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda453
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                ChatActivity.m6481$r8$lambda$J_t9Zn49FKZZSxDpjXHl__kDE(horizontalScrollView, scrollX, x, reactionTabHolderView2, reactionTabHolderView, valueAnimator);
            }
        });
        duration.start();
    }

    /* renamed from: $r8$lambda$J_t9Zn49FKZZSxD-pjXH-l__kDE, reason: not valid java name */
    public static /* synthetic */ void m6481$r8$lambda$J_t9Zn49FKZZSxDpjXHl__kDE(HorizontalScrollView horizontalScrollView, float f, float f2, ReactionTabHolderView reactionTabHolderView, ReactionTabHolderView reactionTabHolderView2, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        horizontalScrollView.setScrollX((int) (f + ((f2 - f) * fFloatValue)));
        reactionTabHolderView.setOutlineProgress(1.0f - fFloatValue);
        reactionTabHolderView2.setOutlineProgress(fFloatValue);
    }

    /* renamed from: org.telegram.ui.ChatActivity$113, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass113 extends PagerAdapter {
        final /* synthetic */ SparseIntArray val$cachedHeights;
        final /* synthetic */ SparseArray val$cachedViews;
        final /* synthetic */ List val$counters;
        final /* synthetic */ int val$finalCount;
        final /* synthetic */ int[] val$foregroundIndex;
        final /* synthetic */ int val$head;
        final /* synthetic */ MessageObject val$message;
        final /* synthetic */ ViewPager val$pager;
        final /* synthetic */ ActionBarPopupWindow.ActionBarPopupWindowLayout val$popupLayout;
        final /* synthetic */ MessageObject val$primaryMessage;
        final /* synthetic */ ReactedHeaderView val$reactedView;
        final /* synthetic */ boolean val$showAllReactionsTab;
        final /* synthetic */ int val$size;

        @Override // androidx.viewpager.widget.PagerAdapter
        public boolean isViewFromObject(View view, Object obj) {
            return view == obj;
        }

        AnonymousClass113(int i, SparseArray sparseArray, boolean z, List list, MessageObject messageObject, ReactedHeaderView reactedHeaderView, MessageObject messageObject2, SparseIntArray sparseIntArray, int i2, ViewPager viewPager, ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int[] iArr, int i3) {
            this.val$size = i;
            this.val$cachedViews = sparseArray;
            this.val$showAllReactionsTab = z;
            this.val$counters = list;
            this.val$message = messageObject;
            this.val$reactedView = reactedHeaderView;
            this.val$primaryMessage = messageObject2;
            this.val$cachedHeights = sparseIntArray;
            this.val$head = i2;
            this.val$pager = viewPager;
            this.val$popupLayout = actionBarPopupWindowLayout;
            this.val$foregroundIndex = iArr;
            this.val$finalCount = i3;
        }

        @Override // androidx.viewpager.widget.PagerAdapter
        public int getCount() {
            return this.val$size;
        }

        @Override // androidx.viewpager.widget.PagerAdapter
        public Object instantiateItem(ViewGroup viewGroup, final int i) {
            View view = (View) this.val$cachedViews.get(i);
            if (view != null) {
                viewGroup.addView(view);
                return view;
            }
            int i2 = this.val$showAllReactionsTab ? i - 1 : i;
            TLRPC.ReactionCount reactionCount = i2 >= 0 ? (TLRPC.ReactionCount) this.val$counters.get(i2) : null;
            Context context = viewGroup.getContext();
            ChatActivity chatActivity = ChatActivity.this;
            ReactedUsersListView onCustomEmojiSelectedListener = new ReactedUsersListView(context, chatActivity.themeDelegate, ((BaseFragment) chatActivity).currentAccount, this.val$message, reactionCount, false, true).setSeenUsers(this.val$reactedView.getSeenUsers()).setOnCustomEmojiSelectedListener(new ReactedUsersListView.OnCustomEmojiSelectedListener() { // from class: org.telegram.ui.ChatActivity$113$$ExternalSyntheticLambda0
                @Override // org.telegram.ui.Components.ReactedUsersListView.OnCustomEmojiSelectedListener
                public final void showCustomEmojiAlert(ReactedUsersListView reactedUsersListView, ArrayList arrayList) {
                    this.f$0.lambda$instantiateItem$0(reactedUsersListView, arrayList);
                }
            });
            final MessageObject messageObject = this.val$primaryMessage;
            ReactedUsersListView onProfileSelectedListener = onCustomEmojiSelectedListener.setOnProfileSelectedListener(new ReactedUsersListView.OnProfileSelectedListener() { // from class: org.telegram.ui.ChatActivity$113$$ExternalSyntheticLambda1
                @Override // org.telegram.ui.Components.ReactedUsersListView.OnProfileSelectedListener
                public final void onProfileSelected(ReactedUsersListView reactedUsersListView, long j, TLRPC.MessagePeerReaction messagePeerReaction) {
                    this.f$0.lambda$instantiateItem$1(messageObject, reactedUsersListView, j, messagePeerReaction);
                }
            });
            final SparseIntArray sparseIntArray = this.val$cachedHeights;
            final int i3 = this.val$head;
            final ViewPager viewPager = this.val$pager;
            final ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout = this.val$popupLayout;
            final int[] iArr = this.val$foregroundIndex;
            ReactedUsersListView onHeightChangedListener = onProfileSelectedListener.setOnHeightChangedListener(new ReactedUsersListView.OnHeightChangedListener() { // from class: org.telegram.ui.ChatActivity$113$$ExternalSyntheticLambda2
                @Override // org.telegram.ui.Components.ReactedUsersListView.OnHeightChangedListener
                public final void onHeightChanged(ReactedUsersListView reactedUsersListView, int i4) {
                    ChatActivity.AnonymousClass113.m7142$r8$lambda$25lkDpEdazeQjhm7shXmVK6wU(sparseIntArray, i, i3, viewPager, actionBarPopupWindowLayout, iArr, reactedUsersListView, i4);
                }
            });
            if (i2 < 0) {
                onHeightChangedListener.setPredictiveCount(this.val$finalCount);
                this.val$reactedView.setSeenCallback(new ChatActivity$$ExternalSyntheticLambda423(onHeightChangedListener));
            }
            viewGroup.addView(onHeightChangedListener);
            this.val$cachedViews.put(i, onHeightChangedListener);
            return onHeightChangedListener;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$instantiateItem$0(ReactedUsersListView reactedUsersListView, ArrayList arrayList) {
            if (ChatActivity.this.getParentActivity() == null || ChatActivity.this.getContext() == null) {
                return;
            }
            ChatActivity chatActivity = ChatActivity.this;
            EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(chatActivity, chatActivity.getParentActivity(), ChatActivity.this.themeDelegate, arrayList) { // from class: org.telegram.ui.ChatActivity.113.1
                @Override // org.telegram.p023ui.Components.EmojiPacksAlert, org.telegram.p023ui.ActionBar.BottomSheet, android.app.Dialog, android.content.DialogInterface, org.telegram.ui.ActionBar.BaseFragment.AttachedSheet
                /* renamed from: dismiss */
                public void lambda$new$0() {
                    super.lambda$new$0();
                    ChatActivity.this.dimBehindView(false);
                }
            };
            emojiPacksAlert.setCalcMandatoryInsets(ChatActivity.this.isKeyboardVisible());
            emojiPacksAlert.setDimBehind(false);
            ChatActivity.this.closeMenu(false);
            ChatActivity.this.showDialog(emojiPacksAlert);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$instantiateItem$1(MessageObject messageObject, ReactedUsersListView reactedUsersListView, long j, TLRPC.MessagePeerReaction messagePeerReaction) {
            Bundle bundle = new Bundle();
            if (j > 0) {
                bundle.putLong("user_id", j);
            } else {
                bundle.putLong("chat_id", -j);
            }
            bundle.putInt("report_reaction_message_id", messageObject.getId());
            bundle.putLong("report_reaction_from_dialog_id", ChatActivity.this.dialog_id);
            ChatActivity.this.presentFragment(new ProfileActivity(bundle));
            ChatActivity.this.closeMenu();
        }

        /* renamed from: $r8$lambda$25lkDpEdazeQjhm7s-hXmVK-6wU, reason: not valid java name */
        public static /* synthetic */ void m7142$r8$lambda$25lkDpEdazeQjhm7shXmVK6wU(SparseIntArray sparseIntArray, int i, int i2, ViewPager viewPager, ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int[] iArr, ReactedUsersListView reactedUsersListView, int i3) {
            int i4 = i2 + i3;
            sparseIntArray.put(i, i4);
            if (viewPager.getCurrentItem() == i) {
                actionBarPopupWindowLayout.getSwipeBack().setNewForegroundHeight(iArr[0], i4, true);
            }
        }

        @Override // androidx.viewpager.widget.PagerAdapter
        public void destroyItem(ViewGroup viewGroup, int i, Object obj) {
            viewGroup.removeView((View) obj);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$259(ReactedUsersListView reactedUsersListView, ArrayList arrayList) {
        if (getParentActivity() == null || getContext() == null) {
            return;
        }
        EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(this, getParentActivity(), this.themeDelegate, arrayList) { // from class: org.telegram.ui.ChatActivity.115
            @Override // org.telegram.p023ui.Components.EmojiPacksAlert, org.telegram.p023ui.ActionBar.BottomSheet, android.app.Dialog, android.content.DialogInterface, org.telegram.ui.ActionBar.BaseFragment.AttachedSheet
            /* renamed from: dismiss */
            public void lambda$new$0() {
                super.lambda$new$0();
                ChatActivity.this.dimBehindView(false);
            }
        };
        emojiPacksAlert.setCalcMandatoryInsets(isKeyboardVisible());
        emojiPacksAlert.setDimBehind(false);
        closeMenu(false);
        showDialog(emojiPacksAlert);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$260(MessageObject messageObject, ReactedUsersListView reactedUsersListView, long j, TLRPC.MessagePeerReaction messagePeerReaction) {
        Bundle bundle = new Bundle();
        if (j > 0) {
            bundle.putLong("user_id", j);
        } else {
            bundle.putLong("chat_id", -j);
        }
        bundle.putInt("report_reaction_message_id", messageObject.getId());
        bundle.putLong("report_reaction_from_dialog_id", this.dialog_id);
        presentFragment(new ProfileActivity(bundle));
        closeMenu();
    }

    public static /* synthetic */ void $r8$lambda$Xlapi9WJm32PttpeMLeXfK4TP2o(ReactedUsersListView reactedUsersListView, ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int[] iArr, View view) {
        if (reactedUsersListView == null || reactedUsersListView.isLoaded) {
            actionBarPopupWindowLayout.getSwipeBack().openForeground(iArr[0]);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$263(MessageSeenView messageSeenView, View view, int i) {
        TLObject tLObject = (TLObject) messageSeenView.users.get(i);
        if (tLObject == null) {
            return;
        }
        closeMenu(true);
        Bundle bundle = new Bundle();
        if (tLObject instanceof TLRPC.User) {
            bundle.putLong("user_id", ((TLRPC.User) tLObject).f1734id);
        } else if (tLObject instanceof TLRPC.Chat) {
            bundle.putLong("chat_id", ((TLRPC.Chat) tLObject).f1571id);
        }
        presentFragment(new ProfileActivity(bundle));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$264() {
        closeMenu(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$265() {
        closeMenu(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$267(MessageObject messageObject, View view) {
        UndoView undoView;
        if (getMediaDataController().saveToRingtones(messageObject.getDocument()) && (undoView = getUndoView()) != null) {
            undoView.showWithAction(this.dialog_id, UndoView.ACTION_RINGTONE_ADDED, new Runnable() { // from class: org.telegram.ui.ChatActivity.118
                boolean clicked;

                @Override // java.lang.Runnable
                public void run() {
                    if (this.clicked) {
                        return;
                    }
                    this.clicked = true;
                    ChatActivity.this.presentFragment(new NotificationsSettingsActivity());
                }
            });
        }
        closeMenu(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$268(View view) {
        closeMenu();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$273(boolean[] zArr, final boolean[] zArr2, final ImageView imageView, final ImageView imageView2) {
        if (zArr[0]) {
            return;
        }
        zArr[0] = true;
        final long[] jArr = {-1};
        final Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda459
            @Override // java.lang.Runnable
            public final void run() {
                ChatActivity.m6548$r8$lambda$jNnyL46wOF96Q0OYAclIYAHSAw(jArr, zArr2, imageView, imageView2);
            }
        };
        TLRPC.TL_messages_rateTranscribedAudio tL_messages_rateTranscribedAudio = new TLRPC.TL_messages_rateTranscribedAudio();
        tL_messages_rateTranscribedAudio.msg_id = this.selectedObject.getId();
        tL_messages_rateTranscribedAudio.peer = getMessagesController().getInputPeer(this.selectedObject.messageOwner.peer_id);
        tL_messages_rateTranscribedAudio.transcription_id = this.selectedObject.messageOwner.voiceTranscriptionId;
        tL_messages_rateTranscribedAudio.good = zArr2[0];
        getConnectionsManager().sendRequest(tL_messages_rateTranscribedAudio, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda460
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$createMenu$272(runnable, jArr, tLObject, tL_error);
            }
        });
        AndroidUtilities.runOnUIThread(runnable, 150L);
    }

    /* renamed from: $r8$lambda$jNnyL46wOF96Q0OY-AclIYAHSAw, reason: not valid java name */
    public static /* synthetic */ void m6548$r8$lambda$jNnyL46wOF96Q0OYAclIYAHSAw(long[] jArr, boolean[] zArr, ImageView imageView, ImageView imageView2) {
        jArr[0] = SystemClock.elapsedRealtime();
        if (!zArr[0]) {
            imageView = imageView2;
        }
        final CrossfadeDrawable crossfadeDrawable = (CrossfadeDrawable) imageView.getDrawable();
        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda475
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                crossfadeDrawable.setProgress(((Float) valueAnimator.getAnimatedValue()).floatValue());
            }
        });
        valueAnimatorOfFloat.setDuration(150L);
        valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.DEFAULT);
        valueAnimatorOfFloat.start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$272(Runnable runnable, long[] jArr, TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.cancelRunOnUIThread(runnable);
        this.selectedObject.messageOwner.voiceTranscriptionRated = true;
        getMessagesStorage().updateMessageVoiceTranscriptionOpen(this.selectedObject.getDialogId(), this.selectedObject.getId(), this.selectedObject.messageOwner);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda472
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$271();
            }
        }, jArr[0] > 0 ? Math.max(0L, 300 - (SystemClock.elapsedRealtime() - jArr[0])) : 0L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$271() {
        closeMenu();
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.chats_infotip, LocaleController.getString(C2369R.string.TranscriptionReportSent)).show();
    }

    /* renamed from: $r8$lambda$90ypYrE-tN2XDkUT0kRmsVPtH7U, reason: not valid java name */
    public static /* synthetic */ void m6452$r8$lambda$90ypYrEtN2XDkUT0kRmsVPtH7U(boolean[] zArr, Runnable runnable, View view) {
        zArr[0] = true;
        runnable.run();
    }

    public static /* synthetic */ void $r8$lambda$lanNnbuLGVfteCkKplE2YwNtNP8(boolean[] zArr, Runnable runnable, View view) {
        zArr[0] = false;
        runnable.run();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$277(View view) {
        MessageObject messageObject = this.selectedObject;
        if (messageObject == null) {
            return;
        }
        logSponsoredClicked(messageObject, false, false);
        Browser.openUrl(getContext(), Uri.parse(this.selectedObject.sponsoredUrl), true, false, false, null, null, false, getMessagesController().sponsoredLinksInappAllow, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ boolean lambda$createMenu$278(View view) {
        MessageObject messageObject = this.selectedObject;
        if (messageObject == null) {
            return false;
        }
        if (!AndroidUtilities.addToClipboard(messageObject.sponsoredUrl)) {
            return true;
        }
        BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getParentActivity()), this.themeDelegate).createCopyLinkBulletin().show();
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$279(View view) {
        if (AndroidUtilities.addToClipboard(this.selectedObject.sponsoredInfo)) {
            BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getParentActivity()), this.themeDelegate).createCopyBulletin(LocaleController.getString(C2369R.string.TextCopied)).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$280(View view) {
        if (AndroidUtilities.addToClipboard(this.selectedObject.sponsoredAdditionalInfo)) {
            BulletinFactory.m1266of(Bulletin.BulletinWindow.make(getParentActivity()), this.themeDelegate).createCopyBulletin(LocaleController.getString(C2369R.string.TextCopied)).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$281(ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int i, View view) {
        if (this.contentView == null || getParentActivity() == null) {
            return;
        }
        actionBarPopupWindowLayout.getSwipeBack().openForeground(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$282(View view) {
        if (this.contentView == null || getParentActivity() == null) {
            return;
        }
        BottomSheet.Builder builder = new BottomSheet.Builder(this.contentView.getContext());
        builder.setCustomView(new SponsoredMessageInfoView(getParentActivity(), null, this.themeDelegate));
        builder.show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$283(View view) throws Resources.NotFoundException {
        processSelectedOption(8);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$284(View view) throws Resources.NotFoundException {
        processSelectedOption(1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$285(View view) throws Resources.NotFoundException {
        processSelectedOption(202);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$286(boolean z, View view) throws Resources.NotFoundException {
        processSelectedOption(z ? 16 : 3);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$287(View view) throws Resources.NotFoundException {
        processSelectedOption(12);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$288(View view) throws Resources.NotFoundException {
        processSelectedOption(22);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$289(View view) throws Resources.NotFoundException {
        processSelectedOption(2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$290(int i, ArrayList arrayList, View view) throws Resources.NotFoundException {
        if (this.selectedObject == null || i >= arrayList.size()) {
            return;
        }
        processSelectedOption(((Integer) arrayList.get(i)).intValue());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ Boolean lambda$createMenu$291(View view, URLSpan uRLSpan) throws Resources.NotFoundException, NumberFormatException, UnsupportedEncodingException {
        didPressMessageUrl(uRLSpan, false, this.selectedObject, view instanceof ChatMessageCell ? (ChatMessageCell) view : null);
        return Boolean.TRUE;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$293(int i, ArrayList arrayList, String str, String str2, String str3, TLRPC.InputPeer inputPeer, int[] iArr, CharSequence charSequence, boolean z, Utilities.CallbackReturn callbackReturn, View view) {
        TLRPC.Message message;
        if (this.selectedObject == null || i >= arrayList.size() || getParentActivity() == null) {
            return;
        }
        String str4 = (str == null || !str.equals(str2)) ? str2 : str3;
        MessageObject messageObject = this.selectedObject;
        TranslateAlert2.showAlert(getParentActivity(), this, this.currentAccount, inputPeer, iArr[0], str, str4, charSequence, (messageObject == null || (message = messageObject.messageOwner) == null) ? null : message.entities, z, callbackReturn, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda461
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$292();
            }
        }).setDimBehind(false);
        closeMenu(false);
        int i2 = MessagesController.getNotificationsSettings(this.currentAccount).getInt("dialog_show_translate_count" + getDialogId(), 5);
        if (i2 > 0) {
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_show_translate_count" + getDialogId(), i2 - 1).apply();
            updateTopPanel(true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$292() {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$294(String[] strArr, String str, String str2, boolean z, ActionBarMenuSubItem actionBarMenuSubItem, AtomicBoolean atomicBoolean, AtomicReference atomicReference, String str3) {
        TLRPC.Chat chat;
        strArr[0] = str3;
        if (str3 != null && ((!str3.equals(str) || !strArr[0].equals(str2) || strArr[0].equals(TranslateController.UNKNOWN_LANGUAGE)) && ((z && !RestrictedLanguagesSelectActivity.getRestrictedLanguages().contains(strArr[0])) || ((((chat = this.currentChat) != null && (chat.has_link || ChatObject.isPublic(chat))) || this.selectedObject.messageOwner.fwd_from != null) && ("uk".equals(strArr[0]) || "ru".equals(strArr[0])))))) {
            actionBarMenuSubItem.setVisibility(0);
        }
        atomicBoolean.set(false);
        if (atomicReference.get() != null) {
            ((Runnable) atomicReference.get()).run();
            atomicReference.set(null);
        }
    }

    public static /* synthetic */ void $r8$lambda$A0MfO8HZVNDfqehLeZpiwkV1oMc(AtomicBoolean atomicBoolean, AtomicReference atomicReference, Exception exc) {
        FileLog.m1158e("mlkit: failed to detect language in message");
        atomicBoolean.set(false);
        if (atomicReference.get() != null) {
            ((Runnable) atomicReference.get()).run();
            atomicReference.set(null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$297(int i, ArrayList arrayList, String[] strArr, String str, String str2, TLRPC.InputPeer inputPeer, int[] iArr, CharSequence charSequence, boolean z, Utilities.CallbackReturn callbackReturn, View view) {
        TLRPC.Message message;
        if (this.selectedObject == null || i >= arrayList.size() || getParentActivity() == null) {
            return;
        }
        String str3 = strArr[0];
        String str4 = (str3 == null || !str3.equals(str)) ? str : str2;
        MessageObject messageObject = this.selectedObject;
        TranslateAlert2.showAlert(getParentActivity(), this, this.currentAccount, inputPeer, iArr[0], strArr[0], str4, charSequence, (messageObject == null || (message = messageObject.messageOwner) == null) ? null : message.entities, z, callbackReturn, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda454
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$296();
            }
        }).setDimBehind(false);
        closeMenu(false);
        int i2 = MessagesController.getNotificationsSettings(this.currentAccount).getInt("dialog_show_translate_count" + getDialogId(), 5);
        if (i2 > 0) {
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_show_translate_count" + getDialogId(), i2 - 1).apply();
            updateTopPanel(true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$296() {
        dimBehindView(false);
    }

    /* renamed from: $r8$lambda$Z4qQsVgw8iD6IJlKPsExlI-njZU, reason: not valid java name */
    public static /* synthetic */ void m6518$r8$lambda$Z4qQsVgw8iD6IJlKPsExlInjZU(AtomicReference atomicReference) {
        if (atomicReference.get() != null) {
            ((Runnable) atomicReference.getAndSet(null)).run();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$300(int i, ArrayList arrayList, TLRPC.InputPeer inputPeer, int[] iArr, String str, CharSequence charSequence, boolean z, Utilities.CallbackReturn callbackReturn, View view) {
        if (this.selectedObject == null || i >= arrayList.size() || getParentActivity() == null) {
            return;
        }
        TranslateAlert2.showAlert(getParentActivity(), this, this.currentAccount, inputPeer, iArr[0], TranslateController.UNKNOWN_LANGUAGE, str, charSequence, null, z, callbackReturn, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda438
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$299();
            }
        }).setDimBehind(false);
        closeMenu(false);
        int i2 = MessagesController.getNotificationsSettings(this.currentAccount).getInt("dialog_show_translate_count" + getDialogId(), 5);
        if (i2 > 0) {
            MessagesController.getNotificationsSettings(this.currentAccount).edit().putInt("dialog_show_translate_count" + getDialogId(), i2 - 1).apply();
            updateTopPanel(true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$299() {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$301(int i, ArrayList arrayList, ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int i2, View view) {
        if (this.selectedObject == null || i >= arrayList.size() || getParentActivity() == null) {
            return;
        }
        actionBarPopupWindowLayout.getSwipeBack().openForeground(i2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$302(int i, ArrayList arrayList, ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout, int i2, View view) {
        if (i >= arrayList.size() || getParentActivity() == null) {
            return;
        }
        actionBarPopupWindowLayout.getSwipeBack().openForeground(i2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$304() {
        closeMenu(false);
        PremiumFeatureBottomSheet premiumFeatureBottomSheet = new PremiumFeatureBottomSheet(this, 24, true);
        premiumFeatureBottomSheet.setDimBehind(false);
        premiumFeatureBottomSheet.setOnHideListener(new DialogInterface.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda442
            @Override // android.content.DialogInterface.OnDismissListener
            public final void onDismiss(DialogInterface dialogInterface) {
                this.f$0.lambda$createMenu$303(dialogInterface);
            }
        });
        premiumFeatureBottomSheet.show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$303(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$305(ArrayList arrayList, View view) {
        EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(this, getParentActivity(), this.themeDelegate, arrayList) { // from class: org.telegram.ui.ChatActivity.130
            @Override // org.telegram.p023ui.Components.EmojiPacksAlert, org.telegram.p023ui.ActionBar.BottomSheet, android.app.Dialog, android.content.DialogInterface, org.telegram.ui.ActionBar.BaseFragment.AttachedSheet
            /* renamed from: dismiss */
            public void lambda$new$0() {
                super.lambda$new$0();
                ChatActivity.this.dimBehindView(false);
            }
        };
        emojiPacksAlert.setCalcMandatoryInsets(isKeyboardVisible());
        emojiPacksAlert.setDimBehind(false);
        closeMenu(false);
        showDialog(emojiPacksAlert);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$307(int i, int i2, boolean z, ReactionsContainerLayout reactionsContainerLayout) {
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow == null || this.fragmentView == null || actionBarPopupWindow.isShowing() || !AndroidUtilities.isActivityRunning(getParentActivity())) {
            return;
        }
        this.scrimPopupWindow.showAtLocation(this.chatListView, 51, i, i2);
        if (z && reactionsContainerLayout != null) {
            reactionsContainerLayout.startEnterAnimation(true);
        }
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda456
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$createMenu$306();
            }
        }, 420L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createMenu$306() {
        ActionBarMenuSubItem actionBarMenuSubItem;
        ActionBarMenuSubItem[] actionBarMenuSubItemArr = this.scrimPopupWindowItems;
        if (actionBarMenuSubItemArr == null || actionBarMenuSubItemArr.length <= 0 || (actionBarMenuSubItem = actionBarMenuSubItemArr[0]) == null) {
            return;
        }
        actionBarMenuSubItem.requestFocus();
        this.scrimPopupWindowItems[0].performAccessibilityAction(64, null);
        this.scrimPopupWindowItems[0].sendAccessibilityEvent(8);
    }

    /* JADX WARN: Removed duplicated region for block: B:99:0x02a7  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void createEmptyView(boolean r22) {
        /*
            Method dump skipped, instructions count: 1007
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.createEmptyView(boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createEmptyView$308(TLRPC.Document document) {
        this.animatingDocuments.put(document, 0);
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(document, null, this.dialog_id, null, null, null, this.replyingQuote, null, true, 0, 0, false, null, this.quickReplyShortcut, getQuickReplyId(), 0L, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$createEmptyView$309(TLRPC.Document document) {
        this.animatingDocuments.put(document, 0);
        SendMessagesHelper.getInstance(this.currentAccount).sendSticker(document, null, this.dialog_id, null, null, null, this.replyingQuote, null, true, 0, 0, false, null, this.quickReplyShortcut, getQuickReplyId(), 0L, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
    }

    private void updateGreetingLock() {
        TLRPC.Chat chat;
        String string;
        if (this.greetingsViewContainer == null) {
            return;
        }
        if (ChatObject.isMonoForum(this.currentChat)) {
            TLRPC.Chat linkedMonoForumChat = getLinkedMonoForumChat();
            if (linkedMonoForumChat != null && (chat = this.currentChat) != null && !ChatObject.canManageMonoForum(this.currentAccount, chat)) {
                final long j = this.currentChat.send_paid_messages_stars;
                if (j > 0) {
                    string = LocaleController.formatString(C2369R.string.SuggestionLockedStars, DialogObject.getShortName(-linkedMonoForumChat.f1571id), LocaleController.formatNumber(j, ','));
                } else {
                    string = LocaleController.formatString(C2369R.string.SuggestionUnlockedStars, DialogObject.getShortName(-linkedMonoForumChat.f1571id));
                }
                this.greetingsViewContainer.setPremiumLock(true, true, AndroidUtilities.replaceTags(StarsIntroActivity.replaceStars(string, 1.0f)), j > 0 ? LocaleController.getString(C2369R.string.MessageStarsUnlock) : null, new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda212
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        this.f$0.lambda$updateGreetingLock$310(j, view);
                    }
                });
                return;
            }
            this.greetingsViewContainer.resetPremiumLock();
            return;
        }
        if (getDialogId() != getUserConfig().getClientUserId()) {
            TLRPC.UserFull userFull = this.userInfo;
            if (userFull != null && userFull.contact_require_premium) {
                this.greetingsViewContainer.setPremiumLock(!getUserConfig().isPremiumReal(), AndroidUtilities.replaceTags(LocaleController.formatString(getMessagesController().premiumFeaturesBlocked() ? C2369R.string.MessageLockedPremiumLocked : C2369R.string.MessageLockedPremium, DialogObject.getShortName(this.dialog_id))), LocaleController.getString(C2369R.string.MessagePremiumUnlock), new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda213
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        ChatActivity.$r8$lambda$7ChOk2eHZcYM_9cCqZm6OZCmbMA(view);
                    }
                });
                return;
            }
            if (userFull != null) {
                final long j2 = userFull.send_paid_messages_stars;
                if (j2 > 0) {
                    this.greetingsViewContainer.setPremiumLock(j2 > 0, AndroidUtilities.replaceTags(StarsIntroActivity.replaceStars(LocaleController.formatString(C2369R.string.MessageLockedStars, DialogObject.getShortName(this.dialog_id), LocaleController.formatNumber(this.userInfo.send_paid_messages_stars, ',')), 1.0f)), LocaleController.getString(C2369R.string.MessageStarsUnlock), new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda214
                        @Override // android.view.View.OnClickListener
                        public final void onClick(View view) {
                            this.f$0.lambda$updateGreetingLock$312(j2, view);
                        }
                    });
                    return;
                }
            }
            this.greetingsViewContainer.resetPremiumLock();
            return;
        }
        this.greetingsViewContainer.resetPremiumLock();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateGreetingLock$310(long j, View view) {
        if (StarsController.getInstance(this.currentAccount).getBalance().amount < j) {
            new StarsIntroActivity.StarsNeededSheet(getContext(), getResourceProvider(), j, 13, DialogObject.getShortName(getDialogId()), new ChatActivity$$ExternalSyntheticLambda287(this), getDialogId()).show();
        } else {
            new StarsIntroActivity.StarsOptionsSheet(getContext(), this.resourceProvider).show();
        }
    }

    public static /* synthetic */ void $r8$lambda$7ChOk2eHZcYM_9cCqZm6OZCmbMA(View view) {
        BaseFragment lastFragment = LaunchActivity.getLastFragment();
        if (lastFragment != null) {
            lastFragment.presentFragment(new PremiumPreviewFragment("contact"));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateGreetingLock$312(long j, View view) {
        if (StarsController.getInstance(this.currentAccount).getBalance().amount < j) {
            new StarsIntroActivity.StarsNeededSheet(getContext(), getResourceProvider(), j, 13, DialogObject.getShortName(getDialogId()), new ChatActivity$$ExternalSyntheticLambda287(this), getDialogId()).show();
        } else {
            new StarsIntroActivity.StarsOptionsSheet(getContext(), this.resourceProvider).show();
        }
    }

    public void closeMenu() {
        closeMenu(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void closeMenu(boolean z) {
        this.scrimPopupWindowHideDimOnDismiss = z;
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
        }
        if (z) {
            return;
        }
        ValueAnimator valueAnimator = this.scrimViewAlphaAnimator;
        if (valueAnimator != null) {
            valueAnimator.removeAllListeners();
            this.scrimViewAlphaAnimator.cancel();
        }
        ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(1.0f, 0.0f);
        this.scrimViewAlphaAnimator = valueAnimatorOfFloat;
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda109
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                this.f$0.lambda$closeMenu$313(valueAnimator2);
            }
        });
        this.scrimViewAlphaAnimator.setDuration(150L);
        this.scrimViewAlphaAnimator.start();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$closeMenu$313(ValueAnimator valueAnimator) {
        this.scrimViewAlpha = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView != null) {
            chatActivityFragmentView.invalidate();
            this.chatListView.invalidate();
        }
    }

    private void updateGreetInfo() {
        TLRPC.UserFull userFull;
        showGreetInfo((getDialogId() == getUserConfig().getClientUserId() || (userFull = this.userInfo) == null || userFull.business_intro == null || (userFull != null && ((userFull.contact_require_premium && !getUserConfig().isPremiumReal()) || this.userInfo.send_paid_messages_stars > 0))) ? false : true);
    }

    private void showGreetInfo(boolean z) {
        TL_account.TL_businessIntro tL_businessIntro;
        if (this.emptyViewContent == null) {
            return;
        }
        boolean z2 = false;
        if (z && this.greetingsInfo == null) {
            ChatActionCell chatActionCell = new ChatActionCell(getContext(), z2, getResourceProvider()) { // from class: org.telegram.ui.ChatActivity.134
                @Override // org.telegram.p023ui.Cells.ChatActionCell, android.view.ViewGroup, android.view.View
                protected void onLayout(boolean z3, int i, int i2, int i3, int i4) {
                    super.onLayout(z3, i, i2, i3, i4);
                    setVisiblePart(getY() + ChatActivity.this.emptyViewContent.getY(), ChatActivity.this.getServiceHeight(this));
                }
            };
            this.greetingsInfo = chatActionCell;
            ScaleStateListAnimator.apply(chatActionCell, 0.02f, 1.2f);
            this.greetingsInfo.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda210
                @Override // android.view.View.OnClickListener
                public final void onClick(View view) {
                    this.f$0.lambda$showGreetInfo$314(view);
                }
            });
        }
        ChatActionCell chatActionCell2 = this.greetingsInfo;
        if (chatActionCell2 == null) {
            return;
        }
        if (!z) {
            chatActionCell2.setVisibility(8);
            return;
        }
        chatActionCell2.setVisibility(0);
        TLRPC.UserFull userFull = this.userInfo;
        String string = LocaleController.formatString((userFull == null || (tL_businessIntro = userFull.business_intro) == null || !TextUtils.isEmpty(tL_businessIntro.title) || !TextUtils.isEmpty(this.userInfo.business_intro.title)) ? C2369R.string.GreetingHow : C2369R.string.GreetingHowSticker, UserObject.getFirstName(this.currentUser));
        int iIndexOf = string.indexOf("**");
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(string);
        if (iIndexOf > 0) {
            string = string.substring(0, iIndexOf) + string.substring(iIndexOf + 2);
            int iIndexOf2 = string.indexOf("**");
            if (iIndexOf2 > 0) {
                string = string.substring(0, iIndexOf2) + string.substring(iIndexOf2 + 2);
                spannableStringBuilder = new SpannableStringBuilder(string);
                ProfileActivity.ShowDrawable showDrawable = new ProfileActivity.ShowDrawable(string.substring(iIndexOf, iIndexOf2));
                showDrawable.setTextColor(-1);
                showDrawable.setBackgroundColor(503316480);
                showDrawable.setBounds(0, 0, showDrawable.getIntrinsicWidth(), showDrawable.getIntrinsicHeight());
                spannableStringBuilder.setSpan(new ImageSpan(showDrawable), iIndexOf, iIndexOf2, 33);
            }
        }
        this.greetingsInfo.setCustomText(spannableStringBuilder);
        this.greetingsInfo.setOverrideTextMaxWidth(HintView2.cutInFancyHalf(string, (TextPaint) getThemedPaint("paintChatActionText")));
        if (this.greetingsInfo.getParent() != null && (!z || this.greetingsInfo.getParent() != this.emptyViewContent)) {
            ((ViewGroup) this.greetingsInfo.getParent()).removeView(this.greetingsInfo);
        }
        if (z) {
            ViewParent parent = this.greetingsInfo.getParent();
            LinearLayout linearLayout = this.emptyViewContent;
            if (parent != linearLayout) {
                linearLayout.addView(this.greetingsInfo, LayoutHelper.createLinear(-1, -2, 80, 0, 10, 0, 0));
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showGreetInfo$314(View view) {
        showDialog(new PremiumFeatureBottomSheet(this, 28, true));
    }

    public void selectReaction(View view, MessageObject messageObject, ReactionsContainerLayout reactionsContainerLayout, View view2, float f, float f2, ReactionsLayoutInBubble.VisibleReaction visibleReaction, boolean z, boolean z2, boolean z3, boolean z4) {
        String str;
        TLRPC.Message message;
        TLRPC.TL_messageReactions tL_messageReactions;
        TLRPC.TL_messageReactions tL_messageReactions2;
        if (isInScheduleMode() || messageObject == null) {
            return;
        }
        if (getMessagesController().isFrozen()) {
            AccountFrozenAlert.show(this.currentAccount);
            return;
        }
        ArrayList arrayList = null;
        if (visibleReaction == null || !visibleReaction.isStar) {
            ReactionsLayoutInBubble.VisibleReaction visibleReaction2 = null;
            if (getDialogId() == getUserConfig().getClientUserId() && !getUserConfig().isPremium() && (message = messageObject.messageOwner) != null && ((tL_messageReactions = message.reactions) == null || tL_messageReactions.reactions_as_tags || tL_messageReactions.results.isEmpty())) {
                new PremiumFeatureBottomSheet(this, 24, true).show();
                return;
            }
            ReactionsEffectOverlay.removeCurrent(false);
            int size = messageObject.getChoosenReactions().size();
            boolean zSelectReaction = messageObject.selectReaction(visibleReaction, z2, z);
            int id = messageObject.getId();
            if (this.groupedMessagesMap.get(messageObject.getGroupId()) != null) {
                MessageObject messageObjectFindMessageWithFlags = ((MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId())).findMessageWithFlags(messageObject.shouldDrawReactionsInLayout() ? 9 : 10);
                if (messageObjectFindMessageWithFlags != null) {
                    id = messageObjectFindMessageWithFlags.getId();
                }
            }
            int i = id;
            if (zSelectReaction) {
                BaseCell baseCellFindMessageCell = findMessageCell(i, true);
                showMultipleReactionsPromo(baseCellFindMessageCell, visibleReaction, size);
                if (!z) {
                    ReactionsEffectOverlay.show(this, reactionsContainerLayout, baseCellFindMessageCell, view2, f, f2, visibleReaction, this.currentAccount, reactionsContainerLayout != null ? z2 ? 0 : 2 : 1);
                }
            }
            if (zSelectReaction && visibleReaction != null && (str = visibleReaction.emojicon) != null) {
                AndroidUtilities.makeAccessibilityAnnouncement(LocaleController.formatString(C2369R.string.AccDescrYouReactedWith, str));
            }
            ArrayList<ReactionsLayoutInBubble.VisibleReaction> arrayList2 = new ArrayList<>();
            arrayList2.addAll(messageObject.getChoosenReactions());
            SendMessagesHelper sendMessagesHelper = getSendMessagesHelper();
            if (zSelectReaction) {
                visibleReaction2 = visibleReaction;
            }
            AnonymousClass135 anonymousClass135 = new AnonymousClass135(z4, z, i, zSelectReaction, reactionsContainerLayout, f, f2, visibleReaction, messageObject);
            this.updateReactionRunnable = anonymousClass135;
            sendMessagesHelper.sendReaction(messageObject, arrayList2, visibleReaction2, z2, z3, this, anonymousClass135);
            if (z || z4) {
                updateMessageAnimated(messageObject, true);
                this.updateReactionRunnable.run();
            }
            if (z4) {
                return;
            }
            AndroidUtilities.runOnUIThread(this.updateReactionRunnable, 50L);
            return;
        }
        closeMenu();
        View viewFindMessageCell = view == null ? findMessageCell(messageObject.getId(), true) : view;
        if (z2) {
            if (viewFindMessageCell != null) {
                try {
                    viewFindMessageCell.performHapticFeedback(0);
                } catch (Exception unused) {
                }
            }
            TLRPC.Message message2 = messageObject.messageOwner;
            if (message2 != null && (tL_messageReactions2 = message2.reactions) != null) {
                arrayList = tL_messageReactions2.top_reactors;
            }
            ArrayList arrayList3 = arrayList;
            long j = -StarsController.MessageId.from(messageObject).did;
            TLRPC.ChatFull chatFull = getMessagesController().getChatFull(j);
            if (chatFull != null && !chatFull.paid_reactions_available && (arrayList3 == null || arrayList3.isEmpty())) {
                TLRPC.Chat chat = getMessagesController().getChat(Long.valueOf(j));
                BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.stars_topup, AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.StarsReactionsDisabled, chat != null ? chat.title : ""))).show(true);
                return;
            } else {
                StarsController.getInstance(this.currentAccount).commitPaidReaction();
                StarsReactionsSheet starsReactionsSheet = new StarsReactionsSheet(getContext(), this.currentAccount, this.dialog_id, this, messageObject, arrayList3, chatFull == null || chatFull.paid_reactions_available, false, 0L, this.themeDelegate);
                starsReactionsSheet.setMessageCell(this, messageObject.getId(), viewFindMessageCell);
                starsReactionsSheet.show();
                return;
            }
        }
        View view3 = this.fragmentView;
        if (view3 != null) {
            try {
                view3.performHapticFeedback(3, 1);
            } catch (Exception unused2) {
            }
        }
        long j2 = -StarsController.MessageId.from(messageObject).did;
        TLRPC.ChatFull chatFull2 = getMessagesController().getChatFull(j2);
        if (chatFull2 != null && !chatFull2.paid_reactions_available) {
            TLRPC.Chat chat2 = getMessagesController().getChat(Long.valueOf(j2));
            BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.stars_topup, AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.StarsReactionsDisabled, chat2 != null ? chat2.title : ""))).show(true);
            return;
        }
        StarsController.PendingPaidReactions pendingPaidReactionsSendPaidReaction = StarsController.getInstance(this.currentAccount).sendPaidReaction(messageObject, this, 1L, true, true, null);
        if (pendingPaidReactionsSendPaidReaction == null || !(viewFindMessageCell instanceof BaseCell)) {
            return;
        }
        StarReactionsOverlay starReactionsOverlay = getStarReactionsOverlay();
        starReactionsOverlay.setMessageCell((BaseCell) viewFindMessageCell);
        pendingPaidReactionsSendPaidReaction.setOverlay(starReactionsOverlay);
        starReactionsOverlay.show();
        viewFindMessageCell.getLocationInWindow(new int[2]);
        starReactionsOverlay.getLocationInWindow(new int[2]);
        starReactionsOverlay.tap((r0[0] - r2[0]) + f, (r0[1] - r2[1]) + f2 + (viewFindMessageCell instanceof ChatMessageCell ? ((ChatMessageCell) viewFindMessageCell).starsPriceTopPadding : 0), false, true);
    }

    /* renamed from: org.telegram.ui.ChatActivity$135, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass135 implements Runnable {
        final /* synthetic */ boolean val$added;
        final /* synthetic */ int val$finalMessageIdForCell;
        final /* synthetic */ boolean val$fromDoubleTap;
        final /* synthetic */ MessageObject val$primaryMessage;
        final /* synthetic */ ReactionsContainerLayout val$reactionsLayout;
        final /* synthetic */ ReactionsLayoutInBubble.VisibleReaction val$visibleReaction;
        final /* synthetic */ boolean val$withoutAnimation;
        final /* synthetic */ float val$x;
        final /* synthetic */ float val$y;

        AnonymousClass135(boolean z, boolean z2, int i, boolean z3, ReactionsContainerLayout reactionsContainerLayout, float f, float f2, ReactionsLayoutInBubble.VisibleReaction visibleReaction, MessageObject messageObject) {
            this.val$withoutAnimation = z;
            this.val$fromDoubleTap = z2;
            this.val$finalMessageIdForCell = i;
            this.val$added = z3;
            this.val$reactionsLayout = reactionsContainerLayout;
            this.val$x = f;
            this.val$y = f2;
            this.val$visibleReaction = visibleReaction;
            this.val$primaryMessage = messageObject;
        }

        @Override // java.lang.Runnable
        public void run() {
            final AnonymousClass135 anonymousClass135;
            if (!this.val$withoutAnimation) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.updateReactionRunnable != null) {
                    chatActivity.updateReactionRunnable = null;
                    if (this.val$fromDoubleTap) {
                        final int i = this.val$finalMessageIdForCell;
                        final boolean z = this.val$added;
                        final ReactionsContainerLayout reactionsContainerLayout = this.val$reactionsLayout;
                        final float f = this.val$x;
                        final float f2 = this.val$y;
                        final ReactionsLayoutInBubble.VisibleReaction visibleReaction = this.val$visibleReaction;
                        anonymousClass135 = this;
                        chatActivity.lambda$openDiscussionMessageChat$389(new Runnable() { // from class: org.telegram.ui.ChatActivity$135$$ExternalSyntheticLambda0
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$run$1(i, z, reactionsContainerLayout, f, f2, visibleReaction);
                            }
                        });
                    } else {
                        anonymousClass135 = this;
                        final MessageObject messageObject = anonymousClass135.val$primaryMessage;
                        chatActivity.lambda$openDiscussionMessageChat$389(new Runnable() { // from class: org.telegram.ui.ChatActivity$135$$ExternalSyntheticLambda1
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$run$2(messageObject);
                            }
                        });
                    }
                    ChatActivity.this.closeMenu();
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$run$1(final int i, final boolean z, final ReactionsContainerLayout reactionsContainerLayout, final float f, final float f2, final ReactionsLayoutInBubble.VisibleReaction visibleReaction) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$135$$ExternalSyntheticLambda2
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$run$0(i, z, reactionsContainerLayout, f, f2, visibleReaction);
                }
            }, 50L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$run$0(int i, boolean z, ReactionsContainerLayout reactionsContainerLayout, float f, float f2, ReactionsLayoutInBubble.VisibleReaction visibleReaction) {
            BaseCell baseCellFindMessageCell = ChatActivity.this.findMessageCell(i, true);
            if (z) {
                ChatActivity chatActivity = ChatActivity.this;
                ReactionsEffectOverlay.show(chatActivity, reactionsContainerLayout, baseCellFindMessageCell, null, f, f2, visibleReaction, ((BaseFragment) chatActivity).currentAccount, 1);
                ReactionsEffectOverlay.startAnimation();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$run$2(MessageObject messageObject) {
            MessageObject messageObject2 = (MessageObject) ChatActivity.this.messagesDict[0].get(messageObject.getId());
            if (messageObject2 != null && messageObject2 != messageObject) {
                MessageObject messageObject3 = (MessageObject) ChatActivity.this.messagesDict[0].get(messageObject.getId());
                messageObject3.messageOwner.reactions = messageObject.messageOwner.reactions;
                messageObject = messageObject3;
            }
            ChatActivity.this.updateMessageAnimated(messageObject, true);
            ReactionsEffectOverlay.startAnimation();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateMessageAnimated(final MessageObject messageObject, final boolean z) {
        if (this.chatAdapter == null) {
            return;
        }
        getNotificationCenter().doOnIdle(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda158
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$updateMessageAnimated$315(messageObject, z);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: updateMessageAnimatedInternal, reason: merged with bridge method [inline-methods] */
    public void lambda$updateMessageAnimated$315(MessageObject messageObject, boolean z) {
        if (this.chatAdapter == null || this.fragmentView == null) {
            return;
        }
        MessageObject.GroupedMessages groupedMessages = (MessageObject.GroupedMessages) this.groupedMessagesMap.get(messageObject.getGroupId());
        if (groupedMessages != null) {
            ChatListItemAnimator chatListItemAnimator = this.chatListItemAnimator;
            if (chatListItemAnimator != null) {
                chatListItemAnimator.groupWillChanged(groupedMessages);
            }
            for (int i = 0; i < groupedMessages.messages.size(); i++) {
                groupedMessages.messages.get(i).forceUpdate = true;
                if (z) {
                    groupedMessages.messages.get(i).reactionsChanged = true;
                }
            }
            this.chatAdapter.notifyDataSetChanged(true);
            return;
        }
        MessageObject messageObject2 = (MessageObject) this.messagesDict[0].get(messageObject.getId());
        if (z) {
            messageObject.forceUpdate = true;
            messageObject.reactionsChanged = true;
        }
        if (this.chatAdapter.isFiltered) {
            LongSparseArray longSparseArray = this.filteredMessagesDict;
            MessageObject messageObject3 = longSparseArray != null ? (MessageObject) longSparseArray.get(messageObject.getId()) : null;
            int iIndexOf = this.chatAdapter.filteredMessages.indexOf(messageObject3);
            if (messageObject3 != null && z) {
                messageObject3.forceUpdate = true;
                messageObject3.reactionsChanged = true;
            }
            if (iIndexOf >= 0) {
                ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
                chatActivityAdapter.notifyItemChanged(chatActivityAdapter.messagesStartRow + iIndexOf);
                return;
            }
            return;
        }
        int iIndexOf2 = this.messages.indexOf(messageObject2);
        if (iIndexOf2 >= 0) {
            ChatActivityAdapter chatActivityAdapter2 = this.chatAdapter;
            chatActivityAdapter2.notifyItemChanged(chatActivityAdapter2.messagesStartRow + iIndexOf2);
        }
    }

    public BaseCell findMessageCell(int i, boolean z) {
        MessageObject messageObject;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null) {
            return null;
        }
        int childCount = chatListRecyclerView.getChildCount();
        for (int i2 = 0; i2 < childCount; i2++) {
            View childAt = this.chatListView.getChildAt(i2);
            if (childAt instanceof ChatMessageCell) {
                messageObject = ((ChatMessageCell) childAt).getMessageObject();
            } else if (childAt instanceof ChatActionCell) {
                messageObject = ((ChatActionCell) childAt).getMessageObject();
            } else {
                continue;
            }
            if (messageObject != null && messageObject.getId() == i) {
                if (z) {
                    if (childAt.getY() + childAt.getMeasuredHeight() < (this.chatListViewPaddingTop - this.chatListViewPaddingVisibleOffset) - AndroidUtilities.m1146dp(4.0f) || childAt.getY() > this.chatListView.getMeasuredHeight() - this.blurredViewBottomOffset) {
                        return null;
                    }
                }
                return (BaseCell) childAt;
            }
        }
        return null;
    }

    public View findCell(int i, boolean z) {
        MessageObject messageObject;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null) {
            return null;
        }
        int childCount = chatListRecyclerView.getChildCount();
        for (int i2 = 0; i2 < childCount; i2++) {
            View childAt = this.chatListView.getChildAt(i2);
            if (childAt instanceof ChatMessageCell) {
                messageObject = ((ChatMessageCell) childAt).getMessageObject();
            } else if (childAt instanceof ChatActionCell) {
                messageObject = ((ChatActionCell) childAt).getMessageObject();
            } else {
                continue;
            }
            if (messageObject != null && messageObject.getId() == i) {
                if (z) {
                    if (childAt.getY() + childAt.getMeasuredHeight() < (this.chatListViewPaddingTop - this.chatListViewPaddingVisibleOffset) - AndroidUtilities.m1146dp(4.0f) || childAt.getY() > this.chatListView.getMeasuredHeight() - this.blurredViewBottomOffset) {
                        return null;
                    }
                }
                return childAt;
            }
        }
        return null;
    }

    public void editLastMessage() throws Resources.NotFoundException {
        MessageObject editableMessageFromGroup;
        if (this.chatActivityEnterView.isEditingMessage()) {
            return;
        }
        ArrayList arrayList = this.messages;
        int size = arrayList.size();
        int i = 0;
        while (i < size) {
            Object obj = arrayList.get(i);
            i++;
            MessageObject messageObjectFindPrimaryMessageObject = (MessageObject) obj;
            if (canEditMessage(messageObjectFindPrimaryMessageObject) && messageObjectFindPrimaryMessageObject.isOutOwner()) {
                MessageObject.GroupedMessages validGroupedMessage = getValidGroupedMessage(messageObjectFindPrimaryMessageObject);
                if (validGroupedMessage == null || !messageObjectFindPrimaryMessageObject.hasValidGroupId()) {
                    editableMessageFromGroup = null;
                } else {
                    messageObjectFindPrimaryMessageObject = validGroupedMessage.findPrimaryMessageObject();
                    editableMessageFromGroup = getEditableMessageFromGroup(validGroupedMessage);
                }
                if (editableMessageFromGroup == null) {
                    editableMessageFromGroup = messageObjectFindPrimaryMessageObject;
                }
                startEditingMessageObject(editableMessageFromGroup);
                return;
            }
        }
    }

    private boolean canEditMessage(MessageObject messageObject) {
        int i;
        return (messageObject == null || !messageObject.canEditMessage(this.currentChat) || this.chatActivityEnterView.hasAudioToSend() || messageObject.getDialogId() == this.mergeDialogId || (i = messageObject.type) == 23 || i == 17) ? false : true;
    }

    private MessageObject getEditableMessageFromGroup(MessageObject.GroupedMessages groupedMessages) {
        if (groupedMessages == null) {
            return null;
        }
        MessageObject messageObject = null;
        int i = 0;
        for (int i2 = 0; i2 < groupedMessages.messages.size(); i2++) {
            MessageObject messageObject2 = groupedMessages.messages.get(i2);
            if (i2 == 0 || !TextUtils.isEmpty(messageObject2.caption)) {
                if (!TextUtils.isEmpty(messageObject2.caption)) {
                    i++;
                }
                messageObject = messageObject2;
            }
        }
        if (i < 2) {
            return messageObject;
        }
        return null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void startEditingMessageObject(MessageObject messageObject) throws Resources.NotFoundException {
        startEditingMessageObject(messageObject, false);
    }

    private void startEditingMessageObject(MessageObject messageObject, boolean z) throws Resources.NotFoundException {
        if (messageObject == null || getParentActivity() == null) {
            return;
        }
        ChatSelectionReactionMenuOverlay chatSelectionReactionMenuOverlay = this.selectionReactionsOverlay;
        if (chatSelectionReactionMenuOverlay != null && chatSelectionReactionMenuOverlay.isVisible()) {
            this.selectionReactionsOverlay.setHiddenByScroll(true);
        }
        if (this.searchItem != null && this.actionBar.isSearchFieldVisible()) {
            this.actionBar.closeSearchField();
            this.chatActivityEnterView.setFieldFocused();
        }
        this.mentionContainer.getAdapter().setNeedBotContext(false);
        this.chatActivityEnterView.setVisibility(0);
        showFieldPanelForEdit(true, messageObject);
        updateBottomOverlay();
        if (!z) {
            checkEditTimer();
        }
        if (z) {
            this.messageSuggestionParams = MessageSuggestionParams.m1170of(messageObject.messageOwner.suggested_post);
        }
        this.chatActivityEnterView.setAllowStickersAndGifs(true, false, false, true);
        updatePinnedMessageView(true);
        updateVisibleRows();
        if (!z && !messageObject.scheduled && !messageObject.isQuickReply()) {
            TLRPC.TL_messages_getMessageEditData tL_messages_getMessageEditData = new TLRPC.TL_messages_getMessageEditData();
            tL_messages_getMessageEditData.peer = getMessagesController().getInputPeer(this.dialog_id);
            tL_messages_getMessageEditData.f1670id = messageObject.getId();
            this.editingMessageObjectReqId = getConnectionsManager().sendRequest(tL_messages_getMessageEditData, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda323
                @Override // org.telegram.tgnet.RequestDelegate
                public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                    this.f$0.lambda$startEditingMessageObject$317(tLObject, tL_error);
                }
            });
            return;
        }
        this.chatActivityEnterView.showEditDoneProgress(false, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$startEditingMessageObject$317(final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda376
            @Override // java.lang.Runnable
            public final void run() throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$startEditingMessageObject$316(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$startEditingMessageObject$316(TLObject tLObject) throws Resources.NotFoundException, NumberFormatException {
        this.editingMessageObjectReqId = 0;
        if (tLObject != null || getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString(C2369R.string.AppName));
        builder.setMessage(LocaleController.getString(C2369R.string.EditMessageError));
        builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), null);
        showDialog(builder.create());
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setEditingMessageObject(null, null, false);
            hideFieldPanel(true);
        }
    }

    public void setupStickerVibrationAndSound(ChatMessageCell chatMessageCell) {
        MessagesController.EmojiSound emojiSound;
        MessageObject messageObject = chatMessageCell.getMessageObject();
        TLRPC.Document document = messageObject.getDocument();
        boolean zIsAnimatedEmoji = messageObject.isAnimatedEmoji();
        if (!zIsAnimatedEmoji) {
            if (!MessageObject.isAnimatedStickerDocument(document, this.currentEncryptedChat == null || messageObject.isOut()) || SharedConfig.loopStickers()) {
                return;
            }
        }
        RLottieDrawable lottieAnimation = chatMessageCell.getPhotoImage().getLottieAnimation();
        if (lottieAnimation == null || !zIsAnimatedEmoji) {
            return;
        }
        String strUnwrapEmoji = EmojiAnimationsOverlay.unwrapEmoji(messageObject.getStickerEmoji());
        if (EmojiData.isHeartEmoji(strUnwrapEmoji)) {
            HashMap map = new HashMap();
            map.put(1, 1);
            map.put(13, 0);
            map.put(59, 1);
            map.put(71, 0);
            map.put(128, 1);
            map.put(Integer.valueOf(Opcodes.F2L), 0);
            lottieAnimation.setVibrationPattern(map);
        } else if (EmojiData.isPeachEmoji(strUnwrapEmoji)) {
            HashMap map2 = new HashMap();
            map2.put(34, 1);
            lottieAnimation.setVibrationPattern(map2);
        } else if (EmojiData.isCofinEmoji(strUnwrapEmoji)) {
            HashMap map3 = new HashMap();
            map3.put(24, 0);
            map3.put(36, 0);
            lottieAnimation.setVibrationPattern(map3);
        }
        if (messageObject.isAnimatedAnimatedEmoji()) {
            lottieAnimation.resetVibrationAfterRestart(true);
        }
        if (lottieAnimation.isRunning() || strUnwrapEmoji == null || (emojiSound = getMessagesController().emojiSounds.get(strUnwrapEmoji.replace("", ""))) == null) {
            return;
        }
        getMediaController().playEmojiSound(getAccountInstance(), strUnwrapEmoji, emojiSound, false);
    }

    public void restartSticker(ChatMessageCell chatMessageCell) {
        MessageObject messageObject = chatMessageCell.getMessageObject();
        TLRPC.Document document = messageObject.getDocument();
        if (!messageObject.isAnimatedAnimatedEmoji()) {
            setupStickerVibrationAndSound(chatMessageCell);
        }
        if (!messageObject.isAnimatedEmoji()) {
            if (!MessageObject.isAnimatedStickerDocument(document, this.currentEncryptedChat == null || messageObject.isOut()) || SharedConfig.loopStickers()) {
                return;
            }
        }
        RLottieDrawable lottieAnimation = chatMessageCell.getPhotoImage().getLottieAnimation();
        if (lottieAnimation != null) {
            lottieAnimation.restart();
        }
    }

    public static CharSequence getMessageContent(MessageObject messageObject, long j, boolean z) {
        TLRPC.Chat chat;
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
        if (z) {
            long fromChatId = messageObject.getFromChatId();
            if (j != fromChatId) {
                if (fromChatId > 0) {
                    TLRPC.User user = MessagesController.getInstance(messageObject.currentAccount).getUser(Long.valueOf(fromChatId));
                    if (user != null) {
                        spannableStringBuilder.append((CharSequence) ContactsController.formatName(user.first_name, user.last_name)).append((CharSequence) ":\n");
                    }
                } else if (fromChatId < 0 && (chat = MessagesController.getInstance(messageObject.currentAccount).getChat(Long.valueOf(-fromChatId))) != null) {
                    spannableStringBuilder.append((CharSequence) chat.title).append((CharSequence) ":\n");
                }
            }
        }
        String restrictionReason = MessagesController.getInstance(messageObject.currentAccount).getRestrictionReason(messageObject.messageOwner.restriction_reason);
        if (!TextUtils.isEmpty(restrictionReason)) {
            spannableStringBuilder.append((CharSequence) restrictionReason);
            return spannableStringBuilder;
        }
        CharSequence charSequence = messageObject.caption;
        if (charSequence != null) {
            spannableStringBuilder.append(charSequence);
            return spannableStringBuilder;
        }
        spannableStringBuilder.append(messageObject.messageText);
        return spannableStringBuilder;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void unpinMessage(final MessageObject messageObject) {
        if (messageObject == null) {
            return;
        }
        Bulletin bulletin = this.pinBulletin;
        if (bulletin != null) {
            bulletin.hide(false, 0L);
        }
        final ArrayList arrayList = new ArrayList();
        arrayList.add(this.selectedObject);
        final ArrayList arrayList2 = new ArrayList();
        arrayList2.add(Integer.valueOf(messageObject.getId()));
        final int i = this.totalPinnedMessagesCount;
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(this.dialog_id), arrayList2, Boolean.FALSE, null, null, 0, Integer.valueOf(this.totalPinnedMessagesCount - 1), Boolean.valueOf(this.pinnedEndReached));
        this.pinBulletin = BulletinFactory.createUnpinMessageBulletin(this, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda331
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$unpinMessage$318(arrayList2, arrayList, i);
            }
        }, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda332
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$unpinMessage$319(messageObject);
            }
        }, this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$unpinMessage$318(ArrayList arrayList, ArrayList arrayList2, int i) {
        getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.didLoadPinnedMessages, Long.valueOf(this.dialog_id), arrayList, Boolean.TRUE, arrayList2, null, 0, Integer.valueOf(i), Boolean.valueOf(this.pinnedEndReached));
        this.pinBulletin = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$unpinMessage$319(MessageObject messageObject) {
        getMessagesController().pinMessage(this.currentChat, this.currentUser, messageObject.getId(), true, false, false);
        this.pinBulletin = null;
    }

    public static ChatActivity openReportChat(long j, String str, byte[] bArr, String str2) {
        BaseFragment safeLastFragment = LaunchActivity.getSafeLastFragment();
        if (safeLastFragment == null) {
            return null;
        }
        Bundle bundle = new Bundle();
        if (DialogObject.isUserDialog(j)) {
            bundle.putLong("user_id", j);
        } else {
            bundle.putLong("chat_id", -j);
        }
        bundle.putString("reportTitle", str);
        bundle.putByteArray("reportOption", bArr);
        bundle.putString("reportMessage", str2);
        ChatActivity chatActivity = new ChatActivity(bundle);
        safeLastFragment.presentFragment(chatActivity);
        return chatActivity;
    }

    private void saveMessageToGallery(MessageObject messageObject) {
        File pathToAttach;
        VideoPlayer.VideoUri videoUri;
        String path = messageObject.messageOwner.attachPath;
        if (!TextUtils.isEmpty(path) && !new File(path).exists()) {
            path = null;
        }
        if (TextUtils.isEmpty(path)) {
            path = getAyuAttachments().getExistingPath(messageObject, false);
        }
        if (TextUtils.isEmpty(path) && (videoUri = messageObject.cachedQuality) != null && videoUri.isCached()) {
            File file = new File(messageObject.cachedQuality.uri.getPath());
            if (file.exists()) {
                path = file.getPath();
            }
        }
        if (TextUtils.isEmpty(path) && messageObject.qualityToSave != null && (pathToAttach = FileLoader.getInstance(this.currentAccount).getPathToAttach(messageObject.qualityToSave, null, false, true)) != null && pathToAttach.exists()) {
            path = pathToAttach.getPath();
        }
        if (TextUtils.isEmpty(path)) {
            return;
        }
        MediaController.saveFile(path, getParentActivity(), messageObject.isVideo() ? 1 : 0, null, null);
    }

    /* JADX WARN: Can't fix incorrect switch cases order, some code will duplicate */
    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:320:0x08d0  */
    /* JADX WARN: Removed duplicated region for block: B:521:0x0d0d  */
    /* JADX WARN: Type inference failed for: r1v0, types: [org.telegram.ui.ActionBar.BaseFragment, org.telegram.ui.ChatActivity, org.telegram.ui.DialogsActivity$DialogsActivityDelegate] */
    /* JADX WARN: Type inference failed for: r1v1, types: [org.telegram.ui.ChatActivity] */
    /* JADX WARN: Type inference failed for: r1v10 */
    /* JADX WARN: Type inference failed for: r1v11 */
    /* JADX WARN: Type inference failed for: r1v12 */
    /* JADX WARN: Type inference failed for: r1v13 */
    /* JADX WARN: Type inference failed for: r1v14 */
    /* JADX WARN: Type inference failed for: r1v15 */
    /* JADX WARN: Type inference failed for: r1v16 */
    /* JADX WARN: Type inference failed for: r1v4 */
    /* JADX WARN: Type inference failed for: r1v6 */
    /* JADX WARN: Type inference failed for: r1v8 */
    /* JADX WARN: Type inference failed for: r1v9 */
    /* JADX WARN: Type inference failed for: r2v102, types: [org.telegram.ui.ActionBar.BaseFragment, org.telegram.ui.DialogsActivity] */
    /* JADX WARN: Type inference failed for: r2v124, types: [org.telegram.ui.ActionBar.AlertDialog$Builder] */
    /* JADX WARN: Type inference failed for: r2v17, types: [org.telegram.ui.ActionBar.BaseFragment, org.telegram.ui.DialogsActivity] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void processSelectedOption(int r32) throws android.content.res.Resources.NotFoundException {
        /*
            Method dump skipped, instructions count: 4232
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.processSelectedOption(int):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$321(long j, int i, final MessageObject messageObject, boolean z) {
        if (z) {
            if (!AyuState.isMessageBurned(this.currentAccount, j, i)) {
                SaveMessageRequest saveMessageRequest = new SaveMessageRequest(this.currentAccount, messageObject.messageOwner);
                saveMessageRequest.forceSaveEdited();
                getAyuMessagesController().onMessageEdited(saveMessageRequest, null);
            }
            AyuState.setMessageBurned(this.currentAccount, j, i);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda432
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$320(messageObject);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$320(MessageObject messageObject) {
        ChatMessageCell chatMessageCell;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null) {
            return;
        }
        int childCount = chatListRecyclerView.getChildCount();
        int i = 0;
        while (true) {
            if (i >= childCount) {
                chatMessageCell = null;
                break;
            }
            View childAt = this.chatListView.getChildAt(i);
            if (childAt instanceof ChatMessageCell) {
                chatMessageCell = (ChatMessageCell) childAt;
                if (chatMessageCell.getMessageObject() == messageObject) {
                    break;
                }
            }
            i++;
        }
        if (chatMessageCell != null) {
            chatMessageCell.forceResetMessageObject();
            chatMessageCell.invalidate();
        }
        try {
            this.chatActivityEnterView.performHapticFeedback(VibratorUtils.getType(3), 1);
        } catch (Exception unused) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$323(boolean z) {
        if (z) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda326
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$322();
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$322() {
        try {
            this.chatActivityEnterView.performHapticFeedback(VibratorUtils.getType(3), 1);
        } catch (Exception unused) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$324(MessageObject.GroupedMessages groupedMessages, MessageObject messageObject, Long l) {
        if (groupedMessages != null) {
            boolean z = true;
            for (int i = 0; i < groupedMessages.messages.size(); i++) {
                if (!getSendMessagesHelper().retrySendMessage(groupedMessages.messages.get(i), false, l.longValue())) {
                    z = false;
                }
            }
            if (z && this.chatMode == 0) {
                moveScrollToLastMessage(false);
                return;
            }
            return;
        }
        if (getSendMessagesHelper().retrySendMessage(messageObject, false, l.longValue())) {
            updateVisibleRows();
            if (this.chatMode == 0) {
                moveScrollToLastMessage(false);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$328(GenerateFromMessageBottomSheet.GenerationData generationData) {
        MessageObject messageObject;
        TLRPC.Message message;
        ResponseAlert.showAlert(this, getClient(), generationData.prompt(), generationData.imagePath(), generationData.useHistory(), getMessagesController().isChatNoForwards(this.currentChat) || !((messageObject = this.selectedObject) == null || (message = messageObject.messageOwner) == null || !message.noforwards), new Utilities.CallbackReturn() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda338
            @Override // org.telegram.messenger.Utilities.CallbackReturn
            public final Object run(Object obj) {
                return this.f$0.lambda$processSelectedOption$325((URLSpan) obj);
            }
        }, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda339
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processSelectedOption$326();
            }
        }, canSendMessage() ? new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda340
            @Override // org.telegram.messenger.Utilities.Callback2
            public final void run(Object obj, Object obj2) {
                this.f$0.lambda$processSelectedOption$327((String) obj, (CharSequence) obj2);
            }
        } : null).setDimBehind(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ Boolean lambda$processSelectedOption$325(URLSpan uRLSpan) throws Resources.NotFoundException, NumberFormatException, UnsupportedEncodingException {
        didPressMessageUrl(uRLSpan, false, this.selectedObject, null);
        return Boolean.TRUE;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$326() {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$327(String str, CharSequence charSequence) {
        if (TextUtils.isEmpty(charSequence)) {
            return;
        }
        if (AiConfig.insertAsQuote) {
            this.chatActivityEnterView.getEditField().setText(((Object) charSequence) + "\n");
            QuoteSpan.putQuoteToEditable(this.chatActivityEnterView.getEditText(), AiConfig.showResponseOnly ? 0 : str.length() + 4, charSequence.length(), true);
        } else {
            this.chatActivityEnterView.getEditField().setText(charSequence);
        }
        this.chatActivityEnterView.getEditField().setSelection(this.chatActivityEnterView.getEditText().length());
        this.chatActivityEnterView.openKeyboard();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$329() {
        if (BulletinFactory.canShowBulletin(this)) {
            BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.getString(C2369R.string.PhotoCopied)).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$330(Uri uri) {
        if (BulletinFactory.canShowBulletin(this)) {
            BulletinFactory.m1267of(this).createDownloadBulletin(BulletinFactory.FileType.STICKER, this.themeDelegate).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$331(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$332(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$333() {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$334(boolean z, int i) {
        if (getParentActivity() == null || this.fragmentView == null || i <= 0) {
            return;
        }
        BulletinFactory.m1267of(this).createDownloadBulletin(z ? BulletinFactory.FileType.AUDIOS : BulletinFactory.FileType.UNKNOWNS, i, this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$335(boolean z, boolean z2, boolean z3, Uri uri) {
        BulletinFactory.FileType fileType;
        if (getParentActivity() == null) {
            return;
        }
        if (z) {
            fileType = BulletinFactory.FileType.PHOTO_TO_DOWNLOADS;
        } else if (z2) {
            fileType = BulletinFactory.FileType.VIDEO_TO_DOWNLOADS;
        } else if (z3) {
            fileType = BulletinFactory.FileType.GIF_TO_DOWNLOADS;
        } else {
            fileType = BulletinFactory.FileType.UNKNOWN;
        }
        BulletinFactory.m1267of(this).createDownloadBulletin(fileType, this.themeDelegate).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$336(MessageObject messageObject, Long l, Runnable runnable) {
        StarsController.getInstance(this.currentAccount).updateMediaPrice(messageObject, l.longValue(), runnable);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$337(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    public static /* synthetic */ void $r8$lambda$YpHnOrAj1U0hcf87CVSrW3Hb084(boolean[] zArr, View view) {
        boolean z = !zArr[1];
        zArr[1] = z;
        ((CheckBoxCell) view).setChecked(z, true);
    }

    public static /* synthetic */ void $r8$lambda$6DwfD9t6iK9bNEt0vYVsEPXDEeM(boolean[] zArr, View view) {
        boolean z = !zArr[0];
        zArr[0] = z;
        ((CheckBoxCell) view).setChecked(z, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$341(int i, boolean[] zArr, AlertDialog alertDialog, int i2) {
        getMessagesController().pinMessage(this.currentChat, this.currentUser, i, false, !zArr[1], zArr[0]);
        Bulletin bulletinCreatePinMessageBulletin = BulletinFactory.createPinMessageBulletin(this, this.themeDelegate);
        bulletinCreatePinMessageBulletin.show();
        final Bulletin.Layout layout = bulletinCreatePinMessageBulletin.getLayout();
        layout.postDelayed(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda426
            @Override // java.lang.Runnable
            public final void run() {
                layout.performHapticFeedback(3, 2);
            }
        }, 550L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$343(final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda334
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processSelectedOption$342(tLObject);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$342(TLObject tLObject) {
        if (tLObject != null) {
            TLRPC.TL_exportedMessageLink tL_exportedMessageLink = (TLRPC.TL_exportedMessageLink) tLObject;
            try {
                ((ClipboardManager) ApplicationLoader.applicationContext.getSystemService("clipboard")).setPrimaryClip(ClipData.newPlainText("label", tL_exportedMessageLink.link));
                if (BulletinFactory.canShowBulletin(this)) {
                    BulletinFactory.m1267of(this).createCopyLinkBulletin(!isThreadChat() && tL_exportedMessageLink.link.contains("/c/")).show();
                }
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$344() {
        dimBehindView(false);
    }

    /* renamed from: $r8$lambda$0a2w-3aWwVZaVYKoJThQ2V5BRhU, reason: not valid java name */
    public static /* synthetic */ void m6434$r8$lambda$0a2w3aWwVZaVYKoJThQ2V5BRhU(AlertDialog[] alertDialogArr) {
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$347(AlertDialog[] alertDialogArr, final int i) {
        AlertDialog alertDialog = alertDialogArr[0];
        if (alertDialog == null) {
            return;
        }
        alertDialog.setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda325
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$processSelectedOption$346(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$346(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$348(boolean z, MessageObject messageObject, int i, TLRPC.MessageMedia messageMedia, HashMap map, boolean z2, int i2) {
        if (z) {
            TLRPC.TL_messages_appendTodoList tL_messages_appendTodoList = new TLRPC.TL_messages_appendTodoList();
            tL_messages_appendTodoList.peer = getMessagesController().getInputPeer(messageObject.getDialogId());
            tL_messages_appendTodoList.msg_id = messageObject.getId();
            if (messageMedia instanceof TLRPC.TL_messageMediaToDo) {
                TLRPC.TL_messageMediaToDo tL_messageMediaToDo = (TLRPC.TL_messageMediaToDo) messageMedia;
                int iMax = 0;
                for (int i3 = 0; i3 < i; i3++) {
                    iMax = Math.max(iMax, ((TLRPC.TodoItem) tL_messageMediaToDo.todo.list.get(i3)).f1732id);
                }
                while (i < tL_messageMediaToDo.todo.list.size()) {
                    TLRPC.TodoItem todoItem = (TLRPC.TodoItem) tL_messageMediaToDo.todo.list.get(i);
                    if (todoItem.f1732id <= iMax) {
                        todoItem.f1732id = iMax + 1;
                    }
                    tL_messages_appendTodoList.list.add(todoItem);
                    iMax = Math.max(iMax, todoItem.f1732id);
                    i++;
                }
                TLRPC.MessageMedia messageMedia2 = messageObject.messageOwner.media;
                if (messageMedia2 instanceof TLRPC.TL_messageMediaToDo) {
                    tL_messageMediaToDo.completions = ((TLRPC.TL_messageMediaToDo) messageMedia2).completions;
                }
            }
            messageObject.messageOwner.media = messageMedia;
            getConnectionsManager().sendRequest(tL_messages_appendTodoList, null);
            return;
        }
        if (messageMedia instanceof TLRPC.TL_messageMediaToDo) {
            TLRPC.MessageMedia messageMedia3 = messageObject.messageOwner.media;
            if (messageMedia3 instanceof TLRPC.TL_messageMediaToDo) {
                ((TLRPC.TL_messageMediaToDo) messageMedia).completions = ((TLRPC.TL_messageMediaToDo) messageMedia3).completions;
            }
        }
        messageObject.messageOwner.media = messageMedia;
        getSendMessagesHelper().editMessage(messageObject, null, null, null, null, null, null, false, false, null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$349(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$355(MessageObject messageObject, AlertDialog alertDialog, int i) {
        final AlertDialog[] alertDialogArr = {new AlertDialog(getParentActivity(), 3, this.themeDelegate)};
        final TLRPC.TL_messages_editMessage tL_messages_editMessage = new TLRPC.TL_messages_editMessage();
        TLRPC.TL_messageMediaPoll tL_messageMediaPoll = (TLRPC.TL_messageMediaPoll) messageObject.messageOwner.media;
        TLRPC.TL_inputMediaPoll tL_inputMediaPoll = new TLRPC.TL_inputMediaPoll();
        TLRPC.TL_poll tL_poll = new TLRPC.TL_poll();
        tL_inputMediaPoll.poll = tL_poll;
        TLRPC.Poll poll = tL_messageMediaPoll.poll;
        tL_poll.f1606id = poll.f1606id;
        tL_poll.question = poll.question;
        tL_poll.answers = poll.answers;
        tL_poll.closed = true;
        tL_messages_editMessage.media = tL_inputMediaPoll;
        tL_messages_editMessage.peer = getMessagesController().getInputPeer(this.dialog_id);
        tL_messages_editMessage.f1664id = messageObject.getId();
        tL_messages_editMessage.flags |= 16384;
        final int iSendRequest = getConnectionsManager().sendRequest(tL_messages_editMessage, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda352
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$processSelectedOption$352(alertDialogArr, tL_messages_editMessage, tLObject, tL_error);
            }
        });
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda353
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processSelectedOption$354(alertDialogArr, iSendRequest);
            }
        }, 500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$352(final AlertDialog[] alertDialogArr, final TLRPC.TL_messages_editMessage tL_messages_editMessage, TLObject tLObject, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda450
            @Override // java.lang.Runnable
            public final void run() {
                ChatActivity.m6440$r8$lambda$2BJycYU2vwFJDQ94ph2VBji1o(alertDialogArr);
            }
        });
        if (tL_error == null) {
            getMessagesController().processUpdates((TLRPC.Updates) tLObject, false);
        } else {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda451
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$351(tL_error, tL_messages_editMessage);
                }
            });
        }
    }

    /* renamed from: $r8$lambda$2BJycYU2vwFJDQ94p-h2VBj-i1o, reason: not valid java name */
    public static /* synthetic */ void m6440$r8$lambda$2BJycYU2vwFJDQ94ph2VBji1o(AlertDialog[] alertDialogArr) {
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$351(TLRPC.TL_error tL_error, TLRPC.TL_messages_editMessage tL_messages_editMessage) {
        AlertsCreator.processError(this.currentAccount, tL_error, this, tL_messages_editMessage, new Object[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$354(AlertDialog[] alertDialogArr, final int i) {
        AlertDialog alertDialog = alertDialogArr[0];
        if (alertDialog == null) {
            return;
        }
        alertDialog.setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda462
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$processSelectedOption$353(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$353(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$359() {
        if (checkSlowMode(this.chatActivityEnterView.getSendButton())) {
            return;
        }
        if (getMediaController().isPlayingMessage(this.selectedObject)) {
            getMediaController().cleanupPlayer(true, true);
        }
        final TLRPC.TL_messages_sendScheduledMessages tL_messages_sendScheduledMessages = new TLRPC.TL_messages_sendScheduledMessages();
        tL_messages_sendScheduledMessages.peer = getMessagesController().getInputPeer(this.dialog_id);
        if (this.selectedObjectGroup != null) {
            for (int i = 0; i < this.selectedObjectGroup.messages.size(); i++) {
                tL_messages_sendScheduledMessages.f1694id.add(Integer.valueOf(this.selectedObjectGroup.messages.get(i).getId()));
            }
        } else {
            tL_messages_sendScheduledMessages.f1694id.add(Integer.valueOf(this.selectedObject.getId()));
        }
        ConnectionsManager.getInstance(this.currentAccount).sendRequest(tL_messages_sendScheduledMessages, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda431
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$processSelectedOption$358(tL_messages_sendScheduledMessages, tLObject, tL_error);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$358(final TLRPC.TL_messages_sendScheduledMessages tL_messages_sendScheduledMessages, TLObject tLObject, final TLRPC.TL_error tL_error) {
        if (tL_error == null) {
            getMessagesController().processUpdates((TLRPC.Updates) tLObject, false);
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda463
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$356(tL_messages_sendScheduledMessages);
                }
            });
        } else if (tL_error.text != null) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda464
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processSelectedOption$357(tL_error);
                }
            });
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$356(TLRPC.TL_messages_sendScheduledMessages tL_messages_sendScheduledMessages) {
        NotificationCenter notificationCenter = NotificationCenter.getInstance(this.currentAccount);
        int i = NotificationCenter.messagesDeleted;
        ArrayList arrayList = tL_messages_sendScheduledMessages.f1694id;
        long clientUserId = getUserConfig().getClientUserId();
        long j = this.dialog_id;
        Long lValueOf = Long.valueOf(clientUserId == j ? 0L : -j);
        Boolean bool = Boolean.TRUE;
        notificationCenter.lambda$postNotificationNameOnUIThread$1(i, arrayList, lValueOf, bool, bool);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$357(TLRPC.TL_error tL_error) {
        if (tL_error.text.startsWith("SLOWMODE_WAIT_")) {
            AlertsCreator.showSimpleToast(this, LocaleController.getString(C2369R.string.SlowmodeSendError));
        } else if (tL_error.text.equals("CHAT_SEND_MEDIA_FORBIDDEN")) {
            AlertsCreator.showSimpleToast(this, LocaleController.getString(C2369R.string.AttachMediaRestrictedForever));
        } else {
            AlertsCreator.showSimpleToast(this, tL_error.text);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$361(MessageObject.GroupedMessages groupedMessages, MessageObject messageObject, boolean z, int i, int i2) {
        if (groupedMessages != null && !groupedMessages.messages.isEmpty()) {
            SendMessagesHelper.getInstance(this.currentAccount).editMessage(groupedMessages.messages.get(0), null, false, this, null, i, i2);
        } else {
            SendMessagesHelper.getInstance(this.currentAccount).editMessage(messageObject, null, false, this, null, i, i2);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$362(DialogInterface dialogInterface) {
        dimBehindView(false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$363(MessageObject messageObject, MessageSuggestionParams messageSuggestionParams) {
        TLRPC.SuggestedPost tl = messageSuggestionParams.toTl();
        if (messageObject == null || messageObject.messageOwner == null || tl == null) {
            return;
        }
        getMessagesController().addOfferToSuggestedMessage(messageObject, tl);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$365(final TLRPC.SuggestedPost suggestedPost, final MessageObject messageObject) {
        AlertsCreator.createSuggestedMessageDatePickerDialog(getContext(), suggestedPost != null ? suggestedPost.schedule_date : 0L, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda365
            @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
            public final void didSelectDate(boolean z, int i, int i2) {
                this.f$0.lambda$processSelectedOption$364(suggestedPost, messageObject, z, i, i2);
            }
        }, getResourceProvider(), 0).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processSelectedOption$364(TLRPC.SuggestedPost suggestedPost, MessageObject messageObject, boolean z, int i, int i2) {
        if (z) {
            TLRPC.SuggestedPost tl = MessageSuggestionParams.m1169of(AmountUtils$Amount.m1213of(suggestedPost != null ? suggestedPost.price : null), i).toTl();
            if (messageObject == null || messageObject.messageOwner == null || tl == null) {
                return;
            }
            getMessagesController().addOfferToSuggestedMessage(messageObject, tl);
        }
    }

    public void showSuggestionOfferForEditMessage(MessageSuggestionParams messageSuggestionParams) {
        if (this.editingMessageObject == null) {
            return;
        }
        new MessageSuggestionOfferSheet(getContext(), this.currentAccount, this.dialog_id, messageSuggestionParams, this, getResourceProvider(), 0, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda128
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) {
                this.f$0.lambda$showSuggestionOfferForEditMessage$366((MessageSuggestionParams) obj);
            }
        }).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showSuggestionOfferForEditMessage$366(MessageSuggestionParams messageSuggestionParams) {
        this.messageSuggestionParams = messageSuggestionParams;
        this.editingMessageObject.messageOwner.suggested_post = messageSuggestionParams.toTl();
        showFieldPanelForEdit(true, this.editingMessageObject);
    }

    public void checkStarsNeedSheet(final Runnable runnable, final AmountUtils$Amount amountUtils$Amount, boolean z) {
        if (amountUtils$Amount == null || !z) {
            runnable.run();
            return;
        }
        Runnable runnable2 = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda337
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$checkStarsNeedSheet$367(amountUtils$Amount, runnable);
            }
        };
        StarsController starsController = StarsController.getInstance(this.currentAccount, amountUtils$Amount.currency);
        if (!starsController.balanceAvailable()) {
            starsController.getBalance(true, runnable2, true);
        } else {
            runnable2.run();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkStarsNeedSheet$367(AmountUtils$Amount amountUtils$Amount, Runnable runnable) {
        if (this.isFinished) {
            return;
        }
        if (AmountUtils$Amount.ofSafe(StarsController.getInstance(this.currentAccount, amountUtils$Amount.currency).getBalance()).asNano() < amountUtils$Amount.asNano()) {
            AmountUtils$Currency amountUtils$Currency = amountUtils$Amount.currency;
            if (amountUtils$Currency == AmountUtils$Currency.STARS) {
                new StarsIntroActivity.StarsNeededSheet(getContext(), getResourceProvider(), amountUtils$Amount.asDecimal(), 13, ForumUtilities.getMonoForumTitle(this.currentAccount, getDialogId(), true), null, getDialogId()).show();
                return;
            } else {
                if (amountUtils$Currency == AmountUtils$Currency.TON) {
                    new TONIntroActivity.StarsNeededSheet(getContext(), getResourceProvider(), amountUtils$Amount, true, null).show();
                    return;
                }
                return;
            }
        }
        runnable.run();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void hideAds() {
        if (getUserConfig().isPremium()) {
            BulletinFactory.m1267of(this).createAdReportedBulletin(LocaleController.getString(C2369R.string.AdHidden)).show();
            getMessagesController().disableAds(true);
            removeFromSponsored(this.selectedObject);
            removeMessageWithThanos(this.selectedObject);
            return;
        }
        showDialog(new PremiumFeatureBottomSheet(this, 3, true));
    }

    @Override // org.telegram.ui.DialogsActivity.DialogsActivityDelegate
    public boolean didSelectDialogs(final DialogsActivity dialogsActivity, final ArrayList arrayList, final CharSequence charSequence, boolean z, final boolean z2, final int i, TopicsFragment topicsFragment) throws Resources.NotFoundException {
        ChatActivityEnterView chatActivityEnterView;
        ChatActivityEnterView chatActivityEnterView2;
        MessageObject messageObject;
        if (((this.messagePreviewParams == null && (!dialogsActivity.isQuote || this.replyingMessageObject == null)) || (dialogsActivity.isQuote && this.replyingMessageObject == null)) && this.forwardingMessage == null && this.selectedMessagesIds[0].size() == 0 && this.selectedMessagesIds[1].size() == 0) {
            return false;
        }
        final ArrayList arrayList2 = new ArrayList();
        MessageObject messageObject2 = this.forwardingMessage;
        if (messageObject2 != null) {
            MessageObject.GroupedMessages groupedMessages = this.forwardingMessageGroup;
            if (groupedMessages != null) {
                arrayList2.addAll(groupedMessages.messages);
            } else {
                arrayList2.add(messageObject2);
            }
        } else {
            for (int i2 = 1; i2 >= 0; i2--) {
                ArrayList arrayList3 = new ArrayList();
                for (int i3 = 0; i3 < this.selectedMessagesIds[i2].size(); i3++) {
                    arrayList3.add(Integer.valueOf(this.selectedMessagesIds[i2].keyAt(i3)));
                }
                Collections.sort(arrayList3);
                for (int i4 = 0; i4 < arrayList3.size(); i4++) {
                    MessageObject messageObject3 = (MessageObject) this.selectedMessagesIds[i2].get(((Integer) arrayList3.get(i4)).intValue());
                    if (messageObject3 != null) {
                        arrayList2.add(messageObject3);
                    }
                }
            }
        }
        for (int i5 = 0; i5 < arrayList.size(); i5++) {
            TLRPC.Chat chat = getMessagesController().getChat(Long.valueOf(-((MessagesStorage.TopicKey) arrayList.get(i5)).dialogId));
            if (chat != null) {
                for (int i6 = 0; i6 < arrayList2.size(); i6++) {
                    int iCanSendMessageToChat = SendMessagesHelper.canSendMessageToChat(chat, (MessageObject) arrayList2.get(i6));
                    if (iCanSendMessageToChat != 0) {
                        AlertsCreator.showSendMediaAlert(iCanSendMessageToChat, dialogsActivity, null);
                        return false;
                    }
                }
            }
        }
        if (!dialogsActivity.isQuote && (arrayList.size() > 1 || ((MessagesStorage.TopicKey) arrayList.get(0)).dialogId == getUserConfig().getClientUserId() || charSequence != null || i != 0 || !z2)) {
            return !AlertsCreator.ensurePaidMessagesMultiConfirmationTopicKeys(this.currentAccount, arrayList, arrayList2.size() + (!TextUtils.isEmpty(charSequence) ? 1 : 0), new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda135
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) throws Resources.NotFoundException, NumberFormatException {
                    this.f$0.lambda$didSelectDialogs$368(dialogsActivity, arrayList, charSequence, z2, i, arrayList2, (HashMap) obj);
                }
            });
        }
        if (this.forwardingMessage != null) {
            this.forwardingMessage = null;
            this.forwardingMessageGroup = null;
        } else {
            for (int i7 = 1; i7 >= 0; i7--) {
                this.selectedMessagesCanCopyIds[i7].clear();
                this.selectedMessagesCanStarIds[i7].clear();
                this.selectedMessagesIds[i7].clear();
            }
            hideActionMode();
            updatePinnedMessageView(true);
            updateVisibleRows();
        }
        MessagesStorage.TopicKey topicKey = (MessagesStorage.TopicKey) arrayList.get(0);
        long j = topicKey.dialogId;
        if (j != this.dialog_id || getTopicId() != topicKey.topicId || this.chatMode == 2) {
            Bundle bundle = new Bundle();
            bundle.putBoolean("scrollToTopOnResume", this.scrollToTopOnResume);
            if (DialogObject.isEncryptedDialog(j)) {
                bundle.putInt("enc_id", DialogObject.getEncryptedChatId(j));
            } else {
                if (DialogObject.isUserDialog(j)) {
                    bundle.putLong("user_id", j);
                } else {
                    bundle.putLong("chat_id", -j);
                }
                if (!getMessagesController().checkCanOpenChat(bundle, dialogsActivity)) {
                    return true;
                }
            }
            if (getMessagesStorage().isMonoForum(topicKey.dialogId)) {
                bundle.putInt("chatMode", 8);
                if (!getMessagesController().isMonoForumWithManageRights(topicKey.dialogId)) {
                    bundle.putBoolean("isSubscriberSuggestions", true);
                }
            }
            bundle.putBoolean("historyPreloaded", false);
            addToPulledDialogsMyself();
            ChatActivity chatActivity = new ChatActivity(bundle);
            if (topicKey.topicId != 0) {
                ForumUtilities.applyTopic(chatActivity, topicKey);
                dialogsActivity.removeSelfFromStack();
            }
            if (presentFragment(chatActivity, true)) {
                if (dialogsActivity.isQuote && this.replyingMessageObject != null) {
                    ChatActivityEnterView chatActivityEnterView3 = this.chatActivityEnterView;
                    if (chatActivityEnterView3 != null && (chatActivityEnterView = chatActivity.chatActivityEnterView) != null) {
                        chatActivityEnterView.setFieldText(chatActivityEnterView3.getFieldText());
                    }
                    MessageObject.GroupedMessages groupedMessages2 = this.replyingQuoteGroup;
                    if (groupedMessages2 != null) {
                        chatActivity.replyingQuoteGroup = groupedMessages2;
                    } else {
                        MessageObject messageObject4 = this.replyingMessageObject;
                        if (messageObject4 != null) {
                            chatActivity.replyingQuoteGroup = getGroup(messageObject4.getGroupId());
                        }
                    }
                    MessageObject messageObject5 = this.replyingTopMessage;
                    if (messageObject5 != null) {
                        chatActivity.replyingTopMessage = messageObject5;
                    } else {
                        MessageObject messageObject6 = this.threadMessageObject;
                        if (messageObject6 != null) {
                            chatActivity.replyingTopMessage = messageObject6;
                        }
                    }
                    chatActivity.onHideFieldPanelRunnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda136
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$didSelectDialogs$369();
                        }
                    };
                    chatActivity.showFieldPanelForReplyQuote(this.replyingMessageObject, this.replyingQuote);
                } else {
                    chatActivity.showFieldPanelForForward(true, arrayList2);
                }
                if (chatActivity.getDialogId() == getDialogId() && !AndroidUtilities.isTablet()) {
                    removeSelfFromStack();
                }
            } else {
                dialogsActivity.lambda$onBackPressed$371();
            }
        } else {
            ArrayList arrayList4 = new ArrayList(getParentLayout().getFragmentStack());
            if (!arrayList4.isEmpty() && arrayList4.get(arrayList4.size() - 1) == dialogsActivity) {
                dialogsActivity.lambda$onBackPressed$371();
            } else {
                int iIndexOf = arrayList4.indexOf(dialogsActivity);
                if (iIndexOf > 0) {
                    while (iIndexOf < arrayList4.size()) {
                        if (iIndexOf == arrayList4.size() - 1) {
                            ((BaseFragment) arrayList4.get(iIndexOf)).lambda$onBackPressed$371();
                        } else {
                            dialogsActivity.removeSelfFromStack();
                        }
                        iIndexOf++;
                    }
                }
            }
            moveScrollToLastMessage(false);
            if (dialogsActivity.isQuote && (messageObject = this.replyingMessageObject) != null) {
                showFieldPanelForReplyQuote(messageObject, this.replyingQuote);
            } else {
                showFieldPanelForForward(true, arrayList2);
            }
            if (AndroidUtilities.isTablet()) {
                hideActionMode();
                updatePinnedMessageView(true);
            }
            updateVisibleRows();
            if (this.keyboardWasVisible && (chatActivityEnterView2 = this.chatActivityEnterView) != null) {
                chatActivityEnterView2.openKeyboardInternal();
                this.chatActivityEnterView.freezeEmojiView(false);
                this.keyboardWasVisible = false;
            }
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didSelectDialogs$368(DialogsActivity dialogsActivity, ArrayList arrayList, CharSequence charSequence, boolean z, int i, ArrayList arrayList2, HashMap map) throws Resources.NotFoundException, NumberFormatException {
        if (dialogsActivity.resetDelegate) {
            dialogsActivity.setDelegate(null);
        }
        if (this.forwardingMessage != null) {
            this.forwardingMessage = null;
            this.forwardingMessageGroup = null;
        } else {
            for (int i2 = 1; i2 >= 0; i2--) {
                this.selectedMessagesCanCopyIds[i2].clear();
                this.selectedMessagesCanStarIds[i2].clear();
                this.selectedMessagesIds[i2].clear();
            }
            hideActionMode();
            updatePinnedMessageView(true);
            updateVisibleRows();
        }
        this.messagePreviewParams = null;
        hideFieldPanel(false);
        for (int i3 = 0; i3 < arrayList.size(); i3++) {
            long j = ((MessagesStorage.TopicKey) arrayList.get(i3)).dialogId;
            Long l = map == null ? 0L : (Long) map.get(Long.valueOf(j));
            if (charSequence != null) {
                SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(charSequence.toString(), j, null, null, null, true, null, null, null, z, i, 0, null, false);
                sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
                sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
                sendMessageParamsM1191of.payStars = l == null ? 0L : l.longValue();
                sendMessageParamsM1191of.monoForumPeer = getSendMonoForumPeerId();
                sendMessageParamsM1191of.suggestionParams = this.messageSuggestionParams;
                getSendMessagesHelper().sendMessage(sendMessageParamsM1191of);
            }
            getSendMessagesHelper().sendMessage(arrayList2, j, false, false, z, i, null, -1, l != null ? l.longValue() : 0L, getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        }
        dialogsActivity.lambda$onBackPressed$371();
        createUndoView();
        if (this.undoView != null) {
            if (arrayList.size() == 1) {
                if (BulletinFactory.m1267of(this).showForwardedBulletinWithTag(((MessagesStorage.TopicKey) arrayList.get(0)).dialogId, arrayList2.size())) {
                    return;
                }
                this.undoView.showWithAction(((MessagesStorage.TopicKey) arrayList.get(0)).dialogId, 53, Integer.valueOf(arrayList2.size()));
                return;
            }
            this.undoView.showWithAction(0L, 53, Integer.valueOf(arrayList2.size()), Integer.valueOf(arrayList.size()), (Runnable) null, (Runnable) null);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didSelectDialogs$369() {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.hideTopView(true);
        }
    }

    public boolean checkRecordLocked(final boolean z) {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || !chatActivityEnterView.isRecordLocked()) {
            return false;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        if (this.chatActivityEnterView.isInVideoMode()) {
            builder.setTitle(LocaleController.getString(C2369R.string.DiscardVideoMessageTitle));
            builder.setMessage(LocaleController.getString(C2369R.string.DiscardVideoMessageDescription));
        } else {
            builder.setTitle(LocaleController.getString(C2369R.string.DiscardVoiceMessageTitle));
            builder.setMessage(LocaleController.getString(C2369R.string.DiscardVoiceMessageDescription));
        }
        builder.setPositiveButton(LocaleController.getString(C2369R.string.DiscardVoiceMessageAction), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda211
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) {
                this.f$0.lambda$checkRecordLocked$370(z, alertDialog, i);
            }
        });
        builder.setNegativeButton(LocaleController.getString(C2369R.string.Continue), null);
        showDialog(builder.create());
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkRecordLocked$370(boolean z, AlertDialog alertDialog, int i) {
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            if (z) {
                lambda$onBackPressed$371();
            } else {
                chatActivityEnterView.cancelRecordingAudioVideo();
            }
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean onBackPressed() {
        Bulletin visibleBulletin = Bulletin.getVisibleBulletin();
        if (visibleBulletin != null && (visibleBulletin.getLayout() instanceof Bulletin.LottieLayoutWithReactions)) {
            ((Bulletin.LottieLayoutWithReactions) visibleBulletin.getLayout()).hideReactionsDialog();
            visibleBulletin.hide();
            return false;
        }
        SecretVoicePlayer secretVoicePlayer = this.secretVoicePlayer;
        if (secretVoicePlayer != null && secretVoicePlayer.isShown()) {
            this.secretVoicePlayer.dismiss();
            return false;
        }
        if (closeSheet()) {
            return false;
        }
        ChatSelectionReactionMenuOverlay chatSelectionReactionMenuOverlay = this.selectionReactionsOverlay;
        if (chatSelectionReactionMenuOverlay != null && !chatSelectionReactionMenuOverlay.onBackPressed()) {
            return false;
        }
        if (ContentPreviewViewer.getInstance().isVisible()) {
            ContentPreviewViewer.getInstance().closeWithMenu();
            return false;
        }
        MessagePreviewView messagePreviewView = this.forwardingPreviewView;
        if (messagePreviewView != null && messagePreviewView.isShowing()) {
            this.forwardingPreviewView.dismiss(true);
            return false;
        }
        if (this.messagesSearchListContainer.getTag() != null) {
            showMessagesSearchListView(false);
            return false;
        }
        if (this.scrimPopupWindow != null) {
            closeMenu();
            return false;
        }
        if (checkRecordLocked(false)) {
            return false;
        }
        if (this.textSelectionHelper.isInSelectionMode()) {
            this.textSelectionHelper.clear();
            return false;
        }
        ActionBar actionBar = this.actionBar;
        if (actionBar != null && actionBar.isActionModeShowed()) {
            clearSelectionMode();
            return false;
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && chatActivityEnterView.isPopupShowing()) {
            return !this.chatActivityEnterView.hidePopup(true);
        }
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        if (chatActivityEnterView2 != null && chatActivityEnterView2.hasBotWebView() && this.chatActivityEnterView.botCommandsMenuIsShowing() && this.chatActivityEnterView.onBotWebViewBackPressed()) {
            return false;
        }
        ChatActivityEnterView chatActivityEnterView3 = this.chatActivityEnterView;
        if (chatActivityEnterView3 != null && chatActivityEnterView3.botCommandsMenuIsShowing()) {
            this.chatActivityEnterView.hideBotCommands();
            return false;
        }
        ChatActivityEnterView chatActivityEnterView4 = this.chatActivityEnterView;
        if (chatActivityEnterView4 != null && chatActivityEnterView4.closeCreationLinkDialog()) {
            return false;
        }
        if (this.chatMode == 6 && BusinessLinksActivity.closeRenameAlert()) {
            return false;
        }
        if (ChatObject.isMonoForum(this.currentChat) && !this.isSubscriberSuggestions && this.topicsTabs != null && getTopicId() != 0) {
            this.topicsTabs.selectTopic(0L, this.topicChangedFromMessage);
            return false;
        }
        ChatActivity chatActivity = this.backToPreviousFragment;
        if (chatActivity != null) {
            INavigationLayout iNavigationLayout = this.parentLayout;
            iNavigationLayout.addFragmentToStack(chatActivity, iNavigationLayout.getFragmentStack().size() - 1);
            this.backToPreviousFragment = null;
        }
        InstantCameraView instantCameraView = this.instantCameraView;
        if (instantCameraView != null) {
            instantCameraView.cancel(false);
        }
        if (this.chatMode == 5 && !"hello".equalsIgnoreCase(this.quickReplyShortcut) && !"away".equalsIgnoreCase(this.quickReplyShortcut) && (this.messages.isEmpty() || this.threadMessageId == 0)) {
            showQuickRepliesRemoveAlert();
            return false;
        }
        if (this.chatMode != 6 || !this.chatActivityEnterView.businessLinkHasChanges()) {
            return true;
        }
        showBusinessLinksDiscardAlert(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda93
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$onBackPressed$371();
            }
        });
        return false;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showQuickRepliesRemoveAlert() {
        showDialog(new AlertDialog.Builder(getContext(), getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.BusinessRepliesRemoveTitle)).setMessage(LocaleController.getString(C2369R.string.BusinessRepliesRemoveMessage)).setPositiveButton(LocaleController.getString(C2369R.string.Remove), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda176
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) {
                this.f$0.lambda$showQuickRepliesRemoveAlert$372(alertDialog, i);
            }
        }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null).create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showQuickRepliesRemoveAlert$372(AlertDialog alertDialog, int i) {
        lambda$onBackPressed$371();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showBusinessLinksDiscardAlert(final Runnable runnable) {
        AlertDialog alertDialogCreate = new AlertDialog.Builder(getContext(), getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.BusinessLinkDiscardChangesTitle)).setMessage(LocaleController.getString(C2369R.string.BusinessLinkDiscardChangesMessage)).setPositiveButton(LocaleController.getString(C2369R.string.Discard), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda169
            @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
            public final void onClick(AlertDialog alertDialog, int i) {
                runnable.run();
            }
        }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null).create();
        showDialog(alertDialogCreate);
        TextView textView = (TextView) alertDialogCreate.getButton(-1);
        if (textView != null) {
            textView.setTextColor(getThemedColor(Theme.key_text_RedBold));
        }
    }

    public void clearSelectionMode() {
        clearSelectionMode(false);
    }

    public void clearSelectionMode(boolean z) {
        for (int i = 1; i >= 0; i--) {
            this.selectedMessagesIds[i].clear();
            this.selectedMessagesCanCopyIds[i].clear();
            this.selectedMessagesCanStarIds[i].clear();
        }
        hideActionMode();
        updatePinnedMessageView(true);
        updateVisibleRows(z);
        updateSelectedMessageReactions();
    }

    public void onListItemAnimatorTick() {
        invalidateMessagesVisiblePart();
        if (this.scrimView != null) {
            this.fragmentView.invalidate();
        }
    }

    public void setSavedDialog(long j) {
        this.threadMessageId = j;
    }

    public void setQuickReplyId(long j) {
        this.threadMessageId = j;
        TLRPC.TL_message tL_message = new TLRPC.TL_message();
        tL_message.f1597id = (int) j;
        this.quickReplyMessage = new MessageObject(this.currentAccount, tL_message, false, false);
    }

    public void setMonoForumThreadMessages(int i, int i2, TLRPC.TL_forumTopic tL_forumTopic) {
        this.threadMaxInboxReadId = i;
        this.threadMaxOutboxReadId = i2;
        this.replyMaxReadId = Math.max(1, i);
        this.threadMessageId = tL_forumTopic != null ? DialogObject.getPeerDialogId(tL_forumTopic.from_id) : 0L;
        updatePinnedTopicStarterMessage();
        updateTopPanel(false);
        updateBottomOverlay();
    }

    public void setThreadMessages(ArrayList arrayList, TLRPC.Chat chat, int i, int i2, int i3, TLRPC.TL_forumTopic tL_forumTopic) {
        this.forumTopic = tL_forumTopic;
        this.threadMessageObjects = arrayList;
        MessageObject messageObject = (MessageObject) arrayList.get(arrayList.size() - 1);
        this.threadMessageObject = messageObject;
        this.replyingMessageObject = messageObject;
        this.threadMaxInboxReadId = i2;
        this.threadMaxOutboxReadId = i3;
        this.replyMaxReadId = Math.max(1, i2);
        this.threadMessageId = this.threadMessageObject.getId();
        this.replyOriginalMessageId = i;
        this.replyOriginalChat = chat;
        boolean z = tL_forumTopic != null;
        this.isTopic = z;
        MessageObject messageObject2 = this.replyingMessageObject;
        TLRPC.MessageFwdHeader messageFwdHeader = messageObject2.messageOwner.fwd_from;
        this.isComments = (messageFwdHeader == null || messageFwdHeader.channel_post == 0 || z) ? false : true;
        if (z) {
            messageObject2.isTopicMainMessage = true;
        }
        updatePinnedTopicStarterMessage();
        updateTopPanel(false);
        updateBottomOverlay();
    }

    public void updatePinnedTopicStarterMessage() {
        TLRPC.Message message;
        TLRPC.TL_forumTopic tL_forumTopic;
        MessageObject messageObject = (this.isTopic && !this.pinnedMessageObjects.isEmpty() && this.pinnedMessageIds.size() == 1 && ((long) ((Integer) this.pinnedMessageIds.get(0)).intValue()) == getTopicId() + 1) ? (MessageObject) this.pinnedMessageObjects.get(this.pinnedMessageIds.get(0)) : null;
        this.topicStarterMessageObject = messageObject;
        if (!this.isTopic || messageObject == null || (message = messageObject.messageOwner) == null || (tL_forumTopic = this.forumTopic) == null || MessageObject.peersEqual(tL_forumTopic.from_id, message.from_id) || MessageObject.peersEqual(this.currentChat, this.topicStarterMessageObject.messageOwner.from_id)) {
            return;
        }
        this.topicStarterMessageObject = null;
    }

    public void setHighlightMessageId(int i) {
        this.highlightMessageId = i;
    }

    public void setHighlightQuote(int i, String str, int i2) {
        this.highlightMessageId = i;
        this.highlightMessageQuoteFirst = true;
        this.highlightMessageQuoteFirstTime = 0L;
        this.highlightMessageQuote = str;
        this.highlightMessageQuoteOffset = i2;
        this.showNoQuoteAlert = true;
    }

    public void showNoQuoteFound() {
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.error, LocaleController.getString(C2369R.string.QuoteNotFound)).show(true);
    }

    public boolean isThreadChat() {
        return this.threadMessageObject != null;
    }

    public boolean isReplyChatComment() {
        return this.threadMessageObject != null && this.isComments;
    }

    public void updateVisibleRows() {
        updateVisibleRows(false);
    }

    private void updateVisibleRows(boolean z) {
        int iIndexOf;
        int scrollingOffsetForView;
        boolean z2;
        boolean z3;
        String str;
        String str2;
        Integer num;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null) {
            return;
        }
        boolean z4 = false;
        if (this.wasManualScroll || this.unreadMessageObject == null) {
            iIndexOf = -1;
            scrollingOffsetForView = 0;
        } else {
            int childCount = chatListRecyclerView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    break;
                }
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    MessageObject messageObject = ((ChatMessageCell) childAt).getMessageObject();
                    MessageObject messageObject2 = this.unreadMessageObject;
                    if (messageObject == messageObject2) {
                        if (this.messages.indexOf(messageObject2) >= 0) {
                            iIndexOf = this.chatAdapter.messagesStartRow + this.messages.indexOf(this.unreadMessageObject);
                            scrollingOffsetForView = getScrollingOffsetForView(childAt);
                        }
                    }
                }
                i++;
            }
            iIndexOf = -1;
            scrollingOffsetForView = 0;
        }
        int childCount2 = this.chatListView.getChildCount();
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.getEditingMessageObject();
        }
        TLRPC.ChatFull chatFull = this.chatInfo;
        long j = 0;
        long j2 = chatFull != null ? chatFull.linked_chat_id : 0L;
        int i2 = 0;
        while (i2 < childCount2) {
            View childAt2 = this.chatListView.getChildAt(i2);
            if (childAt2 instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt2;
                MessageObject messageObject3 = chatMessageCell.getMessageObject();
                if (this.actionBar.isActionModeShowed() || isReport()) {
                    this.highlightMessageQuoteFirst = z4;
                    this.highlightMessageQuoteFirstTime = j;
                    this.highlightMessageQuote = null;
                    this.highlightTaskId = null;
                    ArrayList arrayList = this.threadMessageObjects;
                    chatMessageCell.setCheckBoxVisible(arrayList == null || messageObject3 == null || !arrayList.contains(messageObject3), true);
                    int i3 = (messageObject3 == null || messageObject3.getDialogId() == this.dialog_id) ? 0 : 1;
                    if (messageObject3 != null && this.selectedMessagesIds[i3].indexOfKey(messageObject3.getId()) >= 0) {
                        setCellSelectionBackground(messageObject3, chatMessageCell, i3, true);
                        z2 = true;
                    } else {
                        chatMessageCell.setDrawSelectionBackground(z4);
                        chatMessageCell.setChecked(z4, z4, true);
                        z2 = false;
                    }
                    z3 = true;
                } else {
                    chatMessageCell.setDrawSelectionBackground(z4);
                    chatMessageCell.setCheckBoxVisible(z4, true);
                    chatMessageCell.setChecked(z4, z4, true);
                    z2 = false;
                    z3 = false;
                }
                if (messageObject3 != null && ((!messageObject3.deleted || chatMessageCell.linkedChatId != j2) && !z)) {
                    chatMessageCell.setIsUpdating(true);
                    TLRPC.ChatFull chatFull2 = this.chatInfo;
                    chatMessageCell.linkedChatId = chatFull2 != null ? chatFull2.linked_chat_id : 0L;
                    chatMessageCell.setMessageObject(messageObject3, chatMessageCell.getCurrentMessagesGroup(), chatMessageCell.isPinnedBottom(), chatMessageCell.isPinnedTop(), chatMessageCell.isFirstInChat(), chatMessageCell.isLastInChatList());
                    chatMessageCell.setIsUpdating(false);
                }
                if (chatMessageCell != this.scrimView) {
                    chatMessageCell.setCheckPressed(!z3, z3 && z2);
                }
                chatMessageCell.setHighlighted((this.highlightMessageId == Integer.MAX_VALUE || messageObject3 == null || messageObject3.getId() != this.highlightMessageId) ? false : true);
                if (this.highlightMessageId != Integer.MAX_VALUE) {
                    startMessageUnselect();
                }
                if (chatMessageCell.isHighlighted() && this.highlightMessageQuote != null) {
                    long jCurrentTimeMillis = System.currentTimeMillis();
                    if (!chatMessageCell.setHighlightedText(this.highlightMessageQuote, true, this.highlightMessageQuoteOffset, this.highlightMessageQuoteFirst || jCurrentTimeMillis - this.highlightMessageQuoteFirstTime < 200) && this.showNoQuoteAlert) {
                        showNoQuoteFound();
                    }
                    if (this.highlightMessageQuoteFirst) {
                        this.highlightMessageQuoteFirstTime = jCurrentTimeMillis;
                    }
                    this.highlightMessageQuoteFirst = false;
                    this.showNoQuoteAlert = false;
                } else if (chatMessageCell.isHighlighted() && (num = this.highlightTaskId) != null) {
                    chatMessageCell.setHighlightedTask(num.intValue());
                } else if (this.chatMode == 7 && this.searchingHashtag != null && (str2 = this.searchingQuery) != null) {
                    chatMessageCell.setHighlightedText(str2);
                } else {
                    if (this.searchItem == null || !this.searchItemVisible || messageObject3 == null) {
                        str = null;
                    } else {
                        if (!getMediaDataController().isMessageFound(messageObject3.getId(), messageObject3.getDialogId() == this.mergeDialogId) || getMediaDataController().getLastSearchQuery() == null) {
                            str = null;
                        } else {
                            chatMessageCell.setHighlightedText(getMediaDataController().getLastSearchQuery());
                        }
                    }
                    chatMessageCell.setHighlightedText(str);
                }
                chatMessageCell.setSpoilersSuppressed(this.chatListView.getScrollState() != 0);
            } else if (childAt2 instanceof ChatActionCell) {
                ChatActionCell chatActionCell = (ChatActionCell) childAt2;
                if (!z) {
                    chatActionCell.setMessageObject(chatActionCell.getMessageObject());
                }
                chatActionCell.setSpoilersSuppressed(this.chatListView.getScrollState() != 0);
            }
            i2++;
            z4 = false;
            j = 0;
        }
        if (iIndexOf != -1) {
            this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, scrollingOffsetForView);
        }
    }

    private void updateVisibleRows(Utilities.CallbackReturn callbackReturn) {
        int iIndexOf;
        int scrollingOffsetForView;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView == null) {
            return;
        }
        if (this.wasManualScroll || this.unreadMessageObject == null) {
            iIndexOf = -1;
            scrollingOffsetForView = 0;
        } else {
            int childCount = chatListRecyclerView.getChildCount();
            int i = 0;
            while (true) {
                if (i >= childCount) {
                    break;
                }
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    MessageObject messageObject = ((ChatMessageCell) childAt).getMessageObject();
                    MessageObject messageObject2 = this.unreadMessageObject;
                    if (messageObject == messageObject2) {
                        if (this.messages.indexOf(messageObject2) >= 0) {
                            iIndexOf = this.chatAdapter.messagesStartRow + this.messages.indexOf(this.unreadMessageObject);
                            scrollingOffsetForView = getScrollingOffsetForView(childAt);
                        }
                    }
                }
                i++;
            }
            iIndexOf = -1;
            scrollingOffsetForView = 0;
        }
        int childCount2 = this.chatListView.getChildCount();
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.getEditingMessageObject();
        }
        TLRPC.ChatFull chatFull = this.chatInfo;
        if (chatFull != null) {
            long j = chatFull.linked_chat_id;
        }
        for (int i2 = 0; i2 < childCount2; i2++) {
            View childAt2 = this.chatListView.getChildAt(i2);
            if (childAt2 instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) childAt2;
                MessageObject messageObject3 = chatMessageCell.getMessageObject();
                if (((Boolean) callbackReturn.run(messageObject3)).booleanValue()) {
                    messageObject3.forceUpdate = true;
                    chatMessageCell.setMessageObject(messageObject3, chatMessageCell.getCurrentMessagesGroup(), chatMessageCell.isPinnedBottom(), chatMessageCell.isPinnedTop(), chatMessageCell.isFirstInChat(), chatMessageCell.isLastInChatList());
                    this.chatAdapter.updateRowAtPosition(this.chatListView.getChildAdapterPosition(chatMessageCell));
                }
            }
        }
        if (iIndexOf != -1) {
            this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, scrollingOffsetForView);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkEditTimer() {
        MessageObject editingMessageObject;
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView == null || (editingMessageObject = chatActivityEnterView.getEditingMessageObject()) == null || editingMessageObject.scheduled) {
            return;
        }
        TLRPC.User user = this.currentUser;
        if (user == null || !user.self) {
            int iAbs = editingMessageObject.canEditMessageAnytime(this.currentChat) ? 360 : (getMessagesController().maxEditTime + DataTypes.UNIT) - Math.abs(getConnectionsManager().getCurrentTime() - editingMessageObject.messageOwner.date);
            if (iAbs > 0) {
                if (iAbs <= 300) {
                    this.replyObjectTextView.setText(LocaleController.formatString("TimeToEdit", C2369R.string.TimeToEdit, AndroidUtilities.formatShortDuration(iAbs)));
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda347
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.checkEditTimer();
                    }
                }, 1000L);
            } else {
                this.chatActivityEnterView.onEditTimeExpired();
                this.replyObjectTextView.setText(LocaleController.formatString("TimeToEditExpired", C2369R.string.TimeToEditExpired, new Object[0]));
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public ArrayList createVoiceMessagesPlaylist(MessageObject messageObject, boolean z) {
        ArrayList arrayList = new ArrayList();
        arrayList.add(messageObject);
        int id = messageObject.getId();
        messageObject.getDialogId();
        if (id != 0) {
            for (int size = this.messages.size() - 1; size >= 0; size--) {
                MessageObject messageObject2 = (MessageObject) this.messages.get(size);
                if ((messageObject2.getDialogId() != this.mergeDialogId || messageObject.getDialogId() == this.mergeDialogId) && (((this.currentEncryptedChat == null && messageObject2.getId() > id) || (this.currentEncryptedChat != null && messageObject2.getId() < id)) && ((messageObject2.isVoice() || messageObject2.isRoundVideo()) && !messageObject2.isVoiceOnce() && !messageObject2.isRoundOnce() && (!z || (messageObject2.isContentUnread() && !messageObject2.isOut()))))) {
                    arrayList.add(messageObject2);
                }
            }
        }
        return arrayList;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void alertUserOpenError(MessageObject messageObject) {
        if (getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString(C2369R.string.AppName));
        builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), null);
        if (messageObject.type == 3) {
            builder.setMessage(LocaleController.getString(C2369R.string.NoPlayerInstalled));
        } else {
            builder.setMessage(LocaleController.formatString("NoHandleAppInstalled", C2369R.string.NoHandleAppInstalled, messageObject.getDocument().mime_type));
        }
        showDialog(builder.create());
    }

    public void openSearchWithText() {
        lambda$openSearchWithText$374("");
    }

    /* renamed from: openSearchWithText, reason: merged with bridge method [inline-methods] */
    public void lambda$openSearchWithText$374(final String str) {
        boolean z;
        int i;
        ActionBarMenuItem actionBarMenuItem;
        int i2;
        HintView2 hintView2 = this.savedMessagesHint;
        if (hintView2 == null || !hintView2.shown()) {
            z = false;
        } else {
            this.savedMessagesHint.hide();
            z = true;
        }
        HintView2 hintView22 = this.savedMessagesSearchHint;
        if (hintView22 != null && hintView22.shown()) {
            this.savedMessagesSearchHint.hide();
            z = true;
        }
        if (z) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda197
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$openSearchWithText$374(str);
                }
            }, 200L);
            return;
        }
        if (!this.actionBar.isSearchFieldVisible()) {
            AndroidUtilities.updateViewVisibilityAnimated(this.avatarContainer, false, 0.95f, true);
            ActionBarMenuItem actionBarMenuItem2 = this.headerItem;
            if (actionBarMenuItem2 != null) {
                actionBarMenuItem2.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem = this.attachItem;
            if (lazyItem != null) {
                lazyItem.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem2 = this.editTextItem;
            if (lazyItem2 != null) {
                lazyItem2.setVisibility(8);
            }
            if ((this.threadMessageId == 0 || (i2 = this.chatMode) == 3 || i2 == 8) && (actionBarMenuItem = this.searchItem) != null) {
                actionBarMenuItem.setVisibility(0);
            }
            ActionBarMenuItem actionBarMenuItem3 = this.searchIconItem;
            if (actionBarMenuItem3 != null && this.showSearchAsIcon) {
                actionBarMenuItem3.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem3 = this.audioCallIconItem;
            if (lazyItem3 != null && this.showAudioCallAsIcon) {
                lazyItem3.setVisibility(8);
            }
            this.searchItemVisible = true;
            updateSearchButtons(0, 0, -1);
            updateBottomOverlay();
        }
        if ((this.threadMessageId == 0 || this.isTopic || (i = this.chatMode) == 3 || i == 8) && !UserObject.isReplyUser(this.currentUser)) {
            boolean z2 = str == null;
            this.openSearchKeyboard = z2;
            ActionBarMenuItem actionBarMenuItem4 = this.searchItem;
            if (actionBarMenuItem4 != null) {
                actionBarMenuItem4.openSearch(z2);
            }
        }
        ActionBarMenuItem actionBarMenuItem5 = this.searchItem;
        if (actionBarMenuItem5 != null) {
            actionBarMenuItem5.setSearchFieldText(str, false);
        }
        MediaDataController mediaDataController = getMediaDataController();
        String str2 = str == null ? "" : str;
        this.searchingQuery = str2;
        mediaDataController.searchMessagesInChat(str2, this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, false, this.searchingUserMessages, this.searchingChatMessages, !TextUtils.isEmpty(str), this.searchingReaction);
        updatePinnedMessageView(true);
    }

    /* renamed from: openHashtagSearch, reason: merged with bridge method [inline-methods] */
    public void lambda$openHashtagSearch$375(String str) {
        openHashtagSearch(str, false);
    }

    public void openHashtagSearch(final String str, boolean z) {
        boolean z2;
        ChatSearchTabs chatSearchTabs;
        ActionBarMenuItem actionBarMenuItem;
        int i;
        if (str.isEmpty()) {
            return;
        }
        if (str.startsWith("#") || str.startsWith("$")) {
            HintView2 hintView2 = this.savedMessagesHint;
            if (hintView2 == null || !hintView2.shown()) {
                z2 = false;
            } else {
                this.savedMessagesHint.hide();
                z2 = true;
            }
            HintView2 hintView22 = this.savedMessagesSearchHint;
            if (hintView22 != null && hintView22.shown()) {
                this.savedMessagesSearchHint.hide();
                z2 = true;
            }
            if (z2) {
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda237
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$openHashtagSearch$375(str);
                    }
                }, 200L);
                return;
            }
            this.searchingHashtag = str;
            this.searchingQuery = str;
            boolean zContains = str.contains("@");
            checkHashtagStories(true);
            if (!this.actionBar.isSearchFieldVisible()) {
                AndroidUtilities.updateViewVisibilityAnimated(this.avatarContainer, false, 0.95f, true);
                ActionBarMenuItem actionBarMenuItem2 = this.headerItem;
                if (actionBarMenuItem2 != null) {
                    actionBarMenuItem2.setVisibility(8);
                }
                ActionBarMenu.LazyItem lazyItem = this.attachItem;
                if (lazyItem != null) {
                    lazyItem.setVisibility(8);
                }
                ActionBarMenu.LazyItem lazyItem2 = this.editTextItem;
                if (lazyItem2 != null) {
                    lazyItem2.setVisibility(8);
                }
                if ((this.threadMessageId == 0 || (i = this.chatMode) == 3 || i == 8) && (actionBarMenuItem = this.searchItem) != null) {
                    actionBarMenuItem.setVisibility(0);
                }
                ActionBarMenuItem actionBarMenuItem3 = this.searchIconItem;
                if (actionBarMenuItem3 != null && this.showSearchAsIcon) {
                    actionBarMenuItem3.setVisibility(8);
                }
                ActionBarMenu.LazyItem lazyItem3 = this.audioCallIconItem;
                if (lazyItem3 != null && this.showAudioCallAsIcon) {
                    lazyItem3.setVisibility(8);
                }
                this.searchItemVisible = true;
                updateSearchButtons(0, 0, -1);
                updateBottomOverlay();
            }
            SearchTagsList searchTagsList = this.actionBarSearchTags;
            if (searchTagsList != null && searchTagsList.shown()) {
                this.actionBarSearchTags.show(false);
            }
            ImageView imageView = this.searchUserButton;
            if (imageView != null) {
                imageView.setVisibility(8);
            }
            if (zContains || z || (ChatObject.isChannelAndNotMegaGroup(this.currentChat) && ChatObject.isPublic(this.currentChat) && this.searchingHashtag != null)) {
                this.defaultSearchPage = 2;
            } else {
                this.defaultSearchPage = 0;
            }
            this.openSearchKeyboard = false;
            if (this.searchType == 3) {
                HashtagSearchController.getInstance(this.currentAccount).clearSearchResults(3);
            } else {
                HashtagSearchController.getInstance(this.currentAccount).clearSearchResults();
            }
            ViewPagerFixed viewPagerFixed = this.searchViewPager;
            if (viewPagerFixed != null) {
                viewPagerFixed.clearViews();
            }
            ActionBarMenuItem actionBarMenuItem4 = this.searchItem;
            if (actionBarMenuItem4 != null) {
                this.preventReopenSearchWithText = true;
                actionBarMenuItem4.openSearch(false);
                this.preventReopenSearchWithText = false;
            }
            ActionBarMenuItem actionBarMenuItem5 = this.searchItem;
            if (actionBarMenuItem5 != null) {
                actionBarMenuItem5.setSearchFieldCaption(null);
                this.searchItem.setSearchFieldText(str, false);
                this.searchItem.setSearchFieldHint(LocaleController.getString(C2369R.string.SearchHashtagsHint));
            }
            getMediaDataController().searchMessagesInChat(this.searchingQuery, this.dialog_id, this.mergeDialogId, this.classGuid, 0, this.threadMessageId, false, this.searchingUserMessages, this.searchingChatMessages, false, this.searchingReaction);
            updatePinnedMessageView(true);
            this.hashtagSearchEmptyView.showProgress(true);
            showMessagesSearchListView(true);
            ChatSearchTabs chatSearchTabs2 = this.hashtagSearchTabs;
            if (chatSearchTabs2 != null) {
                chatSearchTabs2.show(!zContains);
                this.messagesSearchListContainer.setPadding(0, 0, 0, getHashtagTabsHeight());
                updateSearchListEmptyView();
            }
            if ((zContains || z) && this.searchingHashtag != null && (chatSearchTabs = this.hashtagSearchTabs) != null) {
                int currentPosition = chatSearchTabs.tabs.getCurrentPosition();
                int i2 = this.defaultSearchPage;
                if (currentPosition != i2) {
                    this.hashtagSearchTabs.tabs.scrollToTab(i2, i2);
                }
            }
            HashtagSearchController.getInstance(this.currentAccount).putToHistory(this.searchingHashtag);
            this.hashtagHistoryView.update();
            View currentView = this.searchViewPager.getCurrentView();
            if (currentView instanceof ChatActivityContainer) {
                ((ChatActivityContainer) currentView).chatActivity.updateSearchingHashtag(this.searchingHashtag);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: openSearchWithUser, reason: merged with bridge method [inline-methods] */
    public void lambda$openSearchWithUser$376(final TLRPC.User user) {
        boolean z;
        HintView2 hintView2 = this.savedMessagesHint;
        if (hintView2 == null || !hintView2.shown()) {
            z = false;
        } else {
            this.savedMessagesHint.hide();
            z = true;
        }
        HintView2 hintView22 = this.savedMessagesSearchHint;
        if (hintView22 != null && hintView22.shown()) {
            this.savedMessagesSearchHint.hide();
            z = true;
        }
        if (z) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda482
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$openSearchWithUser$376(user);
                }
            }, 200L);
            return;
        }
        if (!this.actionBar.isSearchFieldVisible()) {
            AndroidUtilities.updateViewVisibilityAnimated(this.avatarContainer, false, 0.95f, true);
            ActionBarMenuItem actionBarMenuItem = this.headerItem;
            if (actionBarMenuItem != null) {
                actionBarMenuItem.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem = this.attachItem;
            if (lazyItem != null) {
                lazyItem.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem2 = this.editTextItem;
            if (lazyItem2 != null) {
                lazyItem2.setVisibility(8);
            }
            ActionBarMenuItem actionBarMenuItem2 = this.searchItem;
            if (actionBarMenuItem2 != null) {
                actionBarMenuItem2.setVisibility(0);
            }
            ActionBarMenuItem actionBarMenuItem3 = this.searchIconItem;
            if (actionBarMenuItem3 != null && this.showSearchAsIcon) {
                actionBarMenuItem3.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem3 = this.audioCallIconItem;
            if (lazyItem3 != null && this.showAudioCallAsIcon) {
                lazyItem3.setVisibility(8);
            }
            this.searchItemVisible = true;
            updateSearchButtons(0, 0, -1);
            updateBottomOverlay();
            ImageView imageView = this.searchCalendarButton;
            if (imageView != null) {
                imageView.setVisibility(8);
            }
            ImageView imageView2 = this.searchUserButton;
            if (imageView2 != null) {
                imageView2.setVisibility(8);
            }
        }
        ActionBarMenuItem actionBarMenuItem4 = this.searchItem;
        if (actionBarMenuItem4 != null) {
            this.preventReopenSearchWithText = true;
            this.openSearchKeyboard = false;
            actionBarMenuItem4.openSearch(false);
            this.preventReopenSearchWithText = false;
        }
        searchUserMessages(user, null);
        updatePinnedMessageView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* renamed from: openSearchWithChat, reason: merged with bridge method [inline-methods] */
    public void lambda$openSearchWithChat$377(final TLRPC.Chat chat) {
        boolean z;
        HintView2 hintView2 = this.savedMessagesHint;
        if (hintView2 == null || !hintView2.shown()) {
            z = false;
        } else {
            this.savedMessagesHint.hide();
            z = true;
        }
        HintView2 hintView22 = this.savedMessagesSearchHint;
        if (hintView22 != null && hintView22.shown()) {
            this.savedMessagesSearchHint.hide();
            z = true;
        }
        if (z) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda485
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$openSearchWithChat$377(chat);
                }
            }, 200L);
            return;
        }
        if (!this.actionBar.isSearchFieldVisible()) {
            AndroidUtilities.updateViewVisibilityAnimated(this.avatarContainer, false, 0.95f, true);
            ActionBarMenuItem actionBarMenuItem = this.headerItem;
            if (actionBarMenuItem != null) {
                actionBarMenuItem.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem = this.attachItem;
            if (lazyItem != null) {
                lazyItem.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem2 = this.editTextItem;
            if (lazyItem2 != null) {
                lazyItem2.setVisibility(8);
            }
            ActionBarMenuItem actionBarMenuItem2 = this.searchItem;
            if (actionBarMenuItem2 != null) {
                actionBarMenuItem2.setVisibility(0);
            }
            ActionBarMenuItem actionBarMenuItem3 = this.searchIconItem;
            if (actionBarMenuItem3 != null && this.showSearchAsIcon) {
                actionBarMenuItem3.setVisibility(8);
            }
            ActionBarMenu.LazyItem lazyItem3 = this.audioCallIconItem;
            if (lazyItem3 != null && this.showAudioCallAsIcon) {
                lazyItem3.setVisibility(8);
            }
            this.searchItemVisible = true;
            updateSearchButtons(0, 0, -1);
            updateBottomOverlay();
            ImageView imageView = this.searchCalendarButton;
            if (imageView != null) {
                imageView.setVisibility(8);
            }
            ImageView imageView2 = this.searchUserButton;
            if (imageView2 != null) {
                imageView2.setVisibility(8);
            }
        }
        ActionBarMenuItem actionBarMenuItem4 = this.searchItem;
        if (actionBarMenuItem4 != null) {
            this.preventReopenSearchWithText = true;
            this.openSearchKeyboard = false;
            actionBarMenuItem4.openSearch(false);
            this.preventReopenSearchWithText = false;
        }
        searchUserMessages(null, chat);
        updatePinnedMessageView(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateSearchListEmptyView() {
        String str = this.searchingHashtag;
        if (str != null) {
            this.hashtagSearchEmptyView.subtitle.setText(LocaleController.formatString(C2369R.string.HashtagSearchEmptyViewFilteredSubtitle, str));
            this.messagesSearchListView.setEmptyView(this.hashtagSearchEmptyView);
        } else {
            this.messagesSearchListView.setEmptyView(null);
            this.hashtagSearchEmptyView.setVisibility(8);
        }
    }

    @Override // org.telegram.ui.LocationActivity.LocationActivityDelegate
    public void didSelectLocation(TLRPC.MessageMedia messageMedia, int i, boolean z, int i2, long j) throws Resources.NotFoundException, NumberFormatException {
        SendMessagesHelper.SendMessageParams sendMessageParamsM1195of = SendMessagesHelper.SendMessageParams.m1195of(messageMedia, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, z, i2, 0);
        sendMessageParamsM1195of.quick_reply_shortcut = this.quickReplyShortcut;
        sendMessageParamsM1195of.quick_reply_shortcut_id = getQuickReplyId();
        sendMessageParamsM1195of.payStars = j;
        sendMessageParamsM1195of.monoForumPeer = getSendMonoForumPeerId();
        sendMessageParamsM1195of.suggestionParams = this.messageSuggestionParams;
        getSendMessagesHelper().sendMessage(sendMessageParamsM1195of);
        if (this.chatMode == 0) {
            moveScrollToLastMessage(false);
        }
        if (i == 0 || i == 1) {
            afterMessageSend();
        }
        if (this.paused) {
            this.scrollToTopOnResume = true;
        }
    }

    public boolean isEditingMessageMedia() {
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        return (chatAttachAlert == null || chatAttachAlert.getEditingMessageObject() == null) ? false : true;
    }

    @Override // org.telegram.ui.Components.InstantCameraView.Delegate
    public boolean isSecretChat() {
        return this.currentEncryptedChat != null;
    }

    public boolean isChannel() {
        return ChatObject.isChannelAndNotMegaGroup(this.currentChat);
    }

    public boolean canScheduleMessage() {
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout;
        if (this.chatMode == 5 || getMessagesController().isMonoForum(getDialogId())) {
            return false;
        }
        return (!getMessagesController().isForum(getDialogId()) || this.isTopic) && getMessagesController().getSendPaidMessagesStars(getDialogId()) <= 0 && this.currentEncryptedChat == null && ((chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout) == null || chatActivityChannelButtonsLayout.getVisibility() != 0) && (!isThreadChat() || this.isTopic);
    }

    public boolean canSendMessage() {
        if (this.currentEncryptedChat != null) {
            return false;
        }
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
        return chatActivityChannelButtonsLayout == null || chatActivityChannelButtonsLayout.getVisibility() != 0;
    }

    @Override // org.telegram.ui.Components.InstantCameraView.Delegate
    public boolean isInScheduleMode() {
        return this.chatMode == 1;
    }

    public int getChatMode() {
        return this.chatMode;
    }

    public boolean isInBotForumMode() {
        return UserObject.isBotForum(this.currentUser);
    }

    public MessageObject getThreadMessage() {
        return this.threadMessageObject;
    }

    public MessageObject getReplyMessage() {
        return this.replyingMessageObject;
    }

    public MessageObject getReplyTopMessage() {
        return this.replyingTopMessage;
    }

    public ReplyQuote getReplyQuote() {
        return this.replyingQuote;
    }

    public long getThreadId() {
        return this.threadMessageId;
    }

    public long getInlineReturn() {
        return this.inlineReturn;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public TLRPC.User getCurrentUser() {
        return this.currentUser;
    }

    public long getSendMonoForumPeerId() {
        MessageObject messageObject;
        TLRPC.Message message;
        MessageObject messageObject2;
        TLRPC.Message message2;
        if (!ChatObject.isMonoForum(this.currentChat) || !ChatObject.canManageMonoForum(this.currentAccount, this.currentChat)) {
            return 0L;
        }
        long threadId = getThreadId();
        if (threadId != 0 || (messageObject2 = this.editingMessageObject) == null || (message2 = messageObject2.messageOwner) == null) {
            return (threadId != 0 || (messageObject = this.replyingMessageObject) == null || (message = messageObject.messageOwner) == null) ? threadId : DialogObject.getPeerDialogId(message.saved_peer_id);
        }
        return DialogObject.getPeerDialogId(message2.saved_peer_id);
    }

    public MessageSuggestionParams getSendMessageSuggestionParams() {
        return this.messageSuggestionParams;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public TLRPC.Chat getCurrentChat() {
        return this.currentChat;
    }

    public TLRPC.Chat getLinkedMonoForumChat() {
        if (this.currentChat != null) {
            return getMessagesController().getMonoForumLinkedChat(this.currentChat.f1571id);
        }
        return null;
    }

    public TLRPC.EncryptedChat getCurrentEncryptedChat() {
        return this.currentEncryptedChat;
    }

    public TLRPC.ChatFull getCurrentChatInfo() {
        return this.chatInfo;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public ChatObject.Call getGroupCall() {
        ChatObject.Call call;
        if (this.chatMode == 0 && (call = this.groupCall) != null && (call.call instanceof TLRPC.TL_groupCall)) {
            return call;
        }
        return null;
    }

    public TLRPC.UserFull getCurrentUserInfo() {
        return this.userInfo;
    }

    public void sendAudio(ArrayList arrayList, CharSequence charSequence, boolean z, int i, int i2, long j, boolean z2, long j2) throws Resources.NotFoundException, NumberFormatException {
        if (checkSlowModeAlert()) {
            fillEditingMediaWithCaption(charSequence, null);
            SendMessagesHelper.prepareSendingAudioDocuments(getAccountInstance(), arrayList, charSequence != null ? charSequence : null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, z, i, i2, this.editingMessageObject, this.quickReplyShortcut, getQuickReplyId(), j, z2, j2);
            afterMessageSend();
        }
    }

    public void sendContact(TLRPC.User user, boolean z, int i, long j, boolean z2, long j2) throws Resources.NotFoundException, NumberFormatException {
        if (checkSlowModeAlert()) {
            SendMessagesHelper.SendMessageParams sendMessageParamsM1203of = SendMessagesHelper.SendMessageParams.m1203of(user, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, z, i, 0);
            sendMessageParamsM1203of.quick_reply_shortcut = this.quickReplyShortcut;
            sendMessageParamsM1203of.quick_reply_shortcut_id = getQuickReplyId();
            sendMessageParamsM1203of.effect_id = j;
            sendMessageParamsM1203of.invert_media = z2;
            sendMessageParamsM1203of.payStars = j2;
            sendMessageParamsM1203of.monoForumPeer = getSendMonoForumPeerId();
            sendMessageParamsM1203of.suggestionParams = this.messageSuggestionParams;
            getSendMessagesHelper().sendMessage(sendMessageParamsM1203of);
            afterMessageSend();
        }
    }

    public void sendContacts(ArrayList arrayList, String str, boolean z, int i, long j, boolean z2, long j2) throws Resources.NotFoundException, NumberFormatException {
        long j3;
        if (checkSlowModeAlert()) {
            if (TextUtils.isEmpty(str)) {
                j3 = j;
            } else {
                SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(str, this.dialog_id, null, null, null, true, null, null, null, true, 0, 0, null, false);
                sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
                sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
                sendMessageParamsM1191of.effect_id = j;
                sendMessageParamsM1191of.invert_media = z2;
                sendMessageParamsM1191of.payStars = j2;
                sendMessageParamsM1191of.monoForumPeer = getSendMonoForumPeerId();
                sendMessageParamsM1191of.suggestionParams = this.messageSuggestionParams;
                SendMessagesHelper.getInstance(this.currentAccount).sendMessage(sendMessageParamsM1191of);
                j3 = 0;
            }
            int size = arrayList.size();
            int i2 = 0;
            while (i2 < size) {
                Object obj = arrayList.get(i2);
                i2++;
                SendMessagesHelper.SendMessageParams sendMessageParamsM1203of = SendMessagesHelper.SendMessageParams.m1203of((TLRPC.User) obj, this.dialog_id, (MessageObject) null, (MessageObject) null, (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, z, i, 0);
                sendMessageParamsM1203of.quick_reply_shortcut = this.quickReplyShortcut;
                sendMessageParamsM1203of.quick_reply_shortcut_id = getQuickReplyId();
                sendMessageParamsM1203of.effect_id = j3;
                sendMessageParamsM1203of.invert_media = z2;
                sendMessageParamsM1203of.payStars = j2;
                sendMessageParamsM1203of.monoForumPeer = getSendMonoForumPeerId();
                sendMessageParamsM1203of.suggestionParams = this.messageSuggestionParams;
                getSendMessagesHelper().sendMessage(sendMessageParamsM1203of);
                j3 = 0;
            }
            afterMessageSend();
        }
    }

    public void sendPoll(TLRPC.TL_messageMediaPoll tL_messageMediaPoll, HashMap map, boolean z, int i, long j) throws Resources.NotFoundException, NumberFormatException {
        if (checkSlowModeAlert()) {
            SendMessagesHelper.SendMessageParams sendMessageParamsM1200of = SendMessagesHelper.SendMessageParams.m1200of(tL_messageMediaPoll, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) map, z, i, 0);
            sendMessageParamsM1200of.quick_reply_shortcut = this.quickReplyShortcut;
            sendMessageParamsM1200of.quick_reply_shortcut_id = getQuickReplyId();
            sendMessageParamsM1200of.payStars = j;
            sendMessageParamsM1200of.monoForumPeer = getSendMonoForumPeerId();
            sendMessageParamsM1200of.suggestionParams = this.messageSuggestionParams;
            getSendMessagesHelper().sendMessage(sendMessageParamsM1200of);
            afterMessageSend();
        }
    }

    public void sendTodo(TLRPC.TL_messageMediaToDo tL_messageMediaToDo, boolean z, int i, long j) throws Resources.NotFoundException, NumberFormatException {
        if (checkSlowModeAlert()) {
            SendMessagesHelper.SendMessageParams sendMessageParamsM1200of = SendMessagesHelper.SendMessageParams.m1200of((TLRPC.TL_messageMediaPoll) null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), (TLRPC.ReplyMarkup) null, (HashMap<String, String>) null, z, i, 0);
            sendMessageParamsM1200of.todo = tL_messageMediaToDo;
            sendMessageParamsM1200of.quick_reply_shortcut = this.quickReplyShortcut;
            sendMessageParamsM1200of.quick_reply_shortcut_id = getQuickReplyId();
            sendMessageParamsM1200of.payStars = j;
            sendMessageParamsM1200of.monoForumPeer = getSendMonoForumPeerId();
            sendMessageParamsM1200of.suggestionParams = this.messageSuggestionParams;
            getSendMessagesHelper().sendMessage(sendMessageParamsM1200of);
            afterMessageSend();
        }
    }

    @Override // org.telegram.ui.Components.InstantCameraView.Delegate
    public void sendMedia(final MediaController.PhotoEntry photoEntry, final VideoEditedInfo videoEditedInfo, final boolean z, final int i, final int i2, final boolean z2, long j) {
        if (photoEntry == null) {
            return;
        }
        this.animatorRoundMessageCameraVisibility.setValue(false, true);
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null && messageObject.needResendWhenEdit() && !ChatObject.canManageMonoForum(this.currentAccount, this.editingMessageObject.getDialogId())) {
            MessageSuggestionParams messageSuggestionParamsM1170of = this.messageSuggestionParams;
            if (messageSuggestionParamsM1170of == null) {
                messageSuggestionParamsM1170of = MessageSuggestionParams.m1170of(this.editingMessageObject.messageOwner.suggested_post);
            }
            if (!StarsController.isEnoughAmount(this.currentAccount, messageSuggestionParamsM1170of.amount)) {
                showSuggestionOfferForEditMessage(messageSuggestionParamsM1170of);
                return;
            }
        }
        if (videoEditedInfo != null && videoEditedInfo.roundVideo) {
            Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda257
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$sendMedia$378();
                }
            };
            this.closeInstantCameraAnimation = runnable;
            AndroidUtilities.runOnUIThread(runnable, 3000L);
        }
        fillEditingMediaWithCaption(photoEntry.caption, photoEntry.entities);
        AlertsCreator.ensurePaidMessageConfirmation(this.currentAccount, getDialogId(), 1, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda258
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) throws Resources.NotFoundException, NumberFormatException {
                this.f$0.lambda$sendMedia$379(photoEntry, videoEditedInfo, z, i, i2, z2, (Long) obj);
            }
        }, j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$sendMedia$378() {
        this.closeInstantCameraAnimation = null;
        runCloseInstantCameraAnimation();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$sendMedia$379(MediaController.PhotoEntry photoEntry, VideoEditedInfo videoEditedInfo, boolean z, int i, int i2, boolean z2, Long l) throws Resources.NotFoundException, NumberFormatException {
        MessageObject messageObject = this.editingMessageObject;
        if (messageObject != null && messageObject.needResendWhenEdit()) {
            MessageSuggestionParams messageSuggestionParamsM1170of = this.messageSuggestionParams;
            if (messageSuggestionParamsM1170of == null) {
                messageSuggestionParamsM1170of = MessageSuggestionParams.m1170of(this.editingMessageObject.messageOwner.suggested_post);
            }
            MessageSuggestionParams messageSuggestionParams = messageSuggestionParamsM1170of;
            if (photoEntry.isVideo) {
                SendMessagesHelper.prepareSendingVideo(getAccountInstance(), photoEntry.path, videoEditedInfo, photoEntry.coverPath, photoEntry.coverPhoto, this.dialog_id, this.editingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.ttl, null, z, i, i2, z2, photoEntry.hasSpoiler, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), messageSuggestionParams);
            } else if (photoEntry.imagePath != null) {
                SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.imagePath, photoEntry.thumbPath, null, this.dialog_id, this.editingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, null, videoEditedInfo, z, i, i2, 0, z2, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), messageSuggestionParams);
            } else if (photoEntry.path != null) {
                SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.path, photoEntry.thumbPath, null, this.dialog_id, this.editingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, null, videoEditedInfo, z, i, i2, 0, z2, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), messageSuggestionParams);
            }
        } else if (photoEntry.isVideo) {
            SendMessagesHelper.prepareSendingVideo(getAccountInstance(), photoEntry.path, videoEditedInfo, photoEntry.coverPath, photoEntry.coverPhoto, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.ttl, this.editingMessageObject, z, i, i2, z2, photoEntry.hasSpoiler, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        } else if (photoEntry.imagePath != null) {
            SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.imagePath, photoEntry.thumbPath, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject, videoEditedInfo, z, i, i2, 0, z2, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        } else if (photoEntry.path != null) {
            SendMessagesHelper.prepareSendingPhoto(getAccountInstance(), photoEntry.path, photoEntry.thumbPath, null, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, this.replyingQuote, photoEntry.entities, photoEntry.stickers, null, photoEntry.ttl, this.editingMessageObject, videoEditedInfo, z, i, i2, 0, z2, photoEntry.caption, this.quickReplyShortcut, getQuickReplyId(), photoEntry.effectId, l.longValue(), getSendMonoForumPeerId(), getSendMessageSuggestionParams());
        }
        afterMessageSend();
    }

    private void runCloseInstantCameraAnimation() {
        InstantCameraView instantCameraView = this.instantCameraView;
        if (instantCameraView == null) {
            return;
        }
        InstantCameraView.InstantViewCameraContainer cameraContainer = instantCameraView.getCameraContainer();
        AnimatorSet animatorSet = new AnimatorSet();
        ObjectAnimator objectAnimatorOfFloat = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_X, 0.5f);
        ObjectAnimator objectAnimatorOfFloat2 = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_Y, 0.5f);
        Property property = View.ALPHA;
        animatorSet.playTogether(objectAnimatorOfFloat, objectAnimatorOfFloat2, ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) property, 0.0f), ObjectAnimator.ofFloat(this.instantCameraView.getButtonsLayout(), (Property<View, Float>) property, 0.0f), ObjectAnimator.ofInt(this.instantCameraView.getPaint(), (Property<Paint, Integer>) AnimationProperties.PAINT_ALPHA, 0), ObjectAnimator.ofFloat(this.instantCameraView.getMuteImageView(), (Property<View, Float>) property, 0.0f));
        animatorSet.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.136
            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
            public void onAnimationEnd(Animator animator) {
                InstantCameraView instantCameraView2 = ChatActivity.this.instantCameraView;
                if (instantCameraView2 != null) {
                    instantCameraView2.setIsMessageTransition(false);
                    ChatActivity.this.instantCameraView.hideCamera(true);
                    ChatActivity.this.instantCameraView.setVisibility(4);
                }
            }
        });
        animatorSet.start();
    }

    public void sendAnimatedEmoji(TLRPC.Document document, boolean z, int i) throws Resources.NotFoundException, NumberFormatException {
        String strFindAnimatedEmojiEmoticon;
        if (document == null || (strFindAnimatedEmojiEmoticon = MessageObject.findAnimatedEmojiEmoticon(document, null)) == null) {
            return;
        }
        ArrayList arrayList = new ArrayList();
        TLRPC.TL_messageEntityCustomEmoji tL_messageEntityCustomEmoji = new TLRPC.TL_messageEntityCustomEmoji();
        tL_messageEntityCustomEmoji.document = document;
        tL_messageEntityCustomEmoji.document_id = document.f1579id;
        tL_messageEntityCustomEmoji.offset = 0;
        tL_messageEntityCustomEmoji.length = strFindAnimatedEmojiEmoticon.length();
        arrayList.add(tL_messageEntityCustomEmoji);
        SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(strFindAnimatedEmojiEmoticon, this.dialog_id, this.replyingMessageObject, getThreadMessage(), null, false, arrayList, null, null, z, i, 0, null, false);
        sendMessageParamsM1191of.quick_reply_shortcut = this.quickReplyShortcut;
        sendMessageParamsM1191of.quick_reply_shortcut_id = getQuickReplyId();
        SendMessagesHelper.getInstance(this.currentAccount).sendMessage(sendMessageParamsM1191of);
        afterMessageSend();
    }

    public void showOpenGameAlert(final TLRPC.TL_game tL_game, final MessageObject messageObject, final String str, boolean z, final long j) {
        TLRPC.User user = getMessagesController().getUser(Long.valueOf(j));
        String name = "";
        if (z) {
            AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
            builder.setTitle(LocaleController.getString(C2369R.string.AppName));
            if (user != null) {
                name = ContactsController.formatName(user.first_name, user.last_name);
            }
            builder.setMessage(LocaleController.formatString(C2369R.string.BotPermissionGameAlert, name));
            builder.setPositiveButton(LocaleController.getString(C2369R.string.f1459OK), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda124
                @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                public final void onClick(AlertDialog alertDialog, int i) {
                    this.f$0.lambda$showOpenGameAlert$380(tL_game, messageObject, str, j, alertDialog, i);
                }
            });
            builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
            showDialog(builder.create());
            return;
        }
        String publicUsername = UserObject.getPublicUsername(user);
        if (!AndroidUtilities.isTablet() && WebviewActivity.supportWebview()) {
            if (this.parentLayout.getFragmentStack().get(this.parentLayout.getFragmentStack().size() - 1) == this) {
                if (user != null && !TextUtils.isEmpty(publicUsername)) {
                    name = publicUsername;
                }
                presentFragment(new WebviewActivity(str, name, tL_game.title, tL_game.short_name, messageObject));
                return;
            }
            return;
        }
        Activity parentActivity = getParentActivity();
        String str2 = tL_game.short_name;
        if (user != null && publicUsername != null) {
            name = publicUsername;
        }
        WebviewActivity.openGameInBrowser(str, messageObject, parentActivity, str2, name);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showOpenGameAlert$380(TLRPC.TL_game tL_game, MessageObject messageObject, String str, long j, AlertDialog alertDialog, int i) {
        showOpenGameAlert(tL_game, messageObject, str, false, j);
        MessagesController.getNotificationsSettings(this.currentAccount).edit().putBoolean("askgame_" + j, false).commit();
    }

    /* JADX WARN: Removed duplicated region for block: B:29:0x0053  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    private void processLoadedDiscussionMessage(boolean r13, final org.telegram.tgnet.TLRPC.TL_messages_discussionMessage r14, boolean r15, org.telegram.tgnet.TLRPC.messages_Messages r16, final int r17, final org.telegram.messenger.MessageObject r18, final org.telegram.tgnet.TLRPC.TL_messages_getDiscussionMessage r19, final org.telegram.tgnet.TLRPC.Chat r20, final int r21, final org.telegram.messenger.MessageObject r22) {
        /*
            r12 = this;
            r13 = r16
            r10 = r17
            int r9 = r12.commentLoadingMessageId
            r0 = 0
            r1 = 1
            if (r13 == 0) goto L60
            r2 = 0
            if (r10 == r1) goto L18
            if (r10 == 0) goto L18
            if (r14 == 0) goto L18
            int r3 = r14.read_inbox_max_id
            if (r10 == r3) goto L18
            if (r21 > 0) goto L18
            goto L54
        L18:
            java.util.ArrayList r3 = r13.messages
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L53
            if (r14 == 0) goto L53
            java.util.ArrayList r3 = r14.messages
            boolean r3 = r3.isEmpty()
            if (r3 != 0) goto L53
            java.util.ArrayList r3 = r13.messages
            java.lang.Object r3 = r3.get(r0)
            org.telegram.tgnet.TLRPC$Message r3 = (org.telegram.tgnet.TLRPC.Message) r3
            if (r3 == 0) goto L40
            org.telegram.tgnet.TLRPC$MessageReplyHeader r3 = r3.reply_to
            if (r3 == 0) goto L40
            int r4 = r3.reply_to_top_id
            if (r4 == 0) goto L3d
            goto L41
        L3d:
            int r4 = r3.reply_to_msg_id
            goto L41
        L40:
            r4 = 0
        L41:
            java.util.ArrayList r3 = r14.messages
            int r5 = r3.size()
            int r5 = r5 - r1
            java.lang.Object r3 = r3.get(r5)
            org.telegram.tgnet.TLRPC$Message r3 = (org.telegram.tgnet.TLRPC.Message) r3
            int r3 = r3.f1597id
            if (r4 == r3) goto L53
            goto L54
        L53:
            r2 = r13
        L54:
            boolean r13 = org.telegram.messenger.BuildVars.LOGS_ENABLED
            if (r13 == 0) goto L5e
            java.lang.String r13 = "processLoadedDiscussionMessage reset history"
            org.telegram.messenger.FileLog.m1157d(r13)
        L5e:
            r4 = r2
            goto L61
        L60:
            r4 = r13
        L61:
            java.util.ArrayList r2 = new java.util.ArrayList
            r2.<init>()
            if (r14 == 0) goto L8e
            java.util.ArrayList r13 = r14.messages
            if (r13 == 0) goto L8e
            int r13 = r13.size()
        L70:
            if (r0 >= r13) goto L8e
            java.util.ArrayList r3 = r14.messages
            java.lang.Object r3 = r3.get(r0)
            org.telegram.tgnet.TLRPC$Message r3 = (org.telegram.tgnet.TLRPC.Message) r3
            boolean r5 = r3 instanceof org.telegram.tgnet.TLRPC.TL_messageEmpty
            if (r5 == 0) goto L7f
            goto L8b
        L7f:
            r3.isThreadMessage = r1
            org.telegram.messenger.MessageObject r5 = new org.telegram.messenger.MessageObject
            int r6 = org.telegram.messenger.UserConfig.selectedAccount
            r5.<init>(r6, r3, r1, r1)
            r2.add(r5)
        L8b:
            int r0 = r0 + 1
            goto L70
        L8e:
            org.telegram.messenger.MessagesStorage r13 = r12.getMessagesStorage()
            org.telegram.ui.ChatActivity$$ExternalSyntheticLambda468 r0 = new org.telegram.ui.ChatActivity$$ExternalSyntheticLambda468
            r1 = r12
            r3 = r14
            r11 = r18
            r6 = r19
            r5 = r20
            r7 = r21
            r8 = r22
            r0.<init>()
            r13.loadMessageAttachPaths(r2, r0)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.processLoadedDiscussionMessage(boolean, org.telegram.tgnet.TLRPC$TL_messages_discussionMessage, boolean, org.telegram.tgnet.TLRPC$messages_Messages, int, org.telegram.messenger.MessageObject, org.telegram.tgnet.TLRPC$TL_messages_getDiscussionMessage, org.telegram.tgnet.TLRPC$Chat, int, org.telegram.messenger.MessageObject):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processLoadedDiscussionMessage$384(final ArrayList arrayList, TLRPC.TL_messages_discussionMessage tL_messages_discussionMessage, final TLRPC.messages_Messages messages_messages, TLRPC.Chat chat, TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, final int i, MessageObject messageObject, final int i2, int i3, MessageObject messageObject2) {
        int i4;
        TLRPC.TL_messageReactions tL_messageReactions;
        TLRPC.MessageReplies messageReplies;
        TLRPC.MessageReplies messageReplies2;
        int i5 = 0;
        if (!arrayList.isEmpty() && tL_messages_discussionMessage != null) {
            this.hideCommentLoading = true;
            this.chatListView.invalidateViews();
            Bundle bundle = new Bundle();
            final long dialogId = ((MessageObject) arrayList.get(0)).getDialogId();
            bundle.putLong("chat_id", -dialogId);
            bundle.putInt("message_id", Math.max(1, tL_messages_discussionMessage.read_inbox_max_id));
            bundle.putInt("unread_count", tL_messages_discussionMessage.unread_count);
            bundle.putBoolean("historyPreloaded", messages_messages != null);
            final ChatActivity chatActivity = new ChatActivity(bundle);
            chatActivity.setThreadMessages(arrayList, chat, tL_messages_getDiscussionMessage.msg_id, tL_messages_discussionMessage.read_inbox_max_id, tL_messages_discussionMessage.read_outbox_max_id, null);
            if (i != 0) {
                chatActivity.highlightMessageId = i;
            }
            if (messageObject != null && (messageReplies = messageObject.messageOwner.replies) != null && (messageReplies2 = chatActivity.threadMessageObject.messageOwner.replies) != null) {
                messageReplies.replies = messageReplies2.replies;
            }
            if (messageObject != null && (tL_messageReactions = messageObject.messageOwner.reactions) != null) {
                chatActivity.threadMessageObject.messageOwner.reactions = tL_messageReactions;
            }
            final boolean[] zArr = {false};
            Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda478
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$processLoadedDiscussionMessage$382(zArr, i2, chatActivity);
                }
            };
            if (messages_messages != null) {
                if (messages_messages.messages.isEmpty()) {
                    i4 = i3;
                } else {
                    for (int size = messages_messages.messages.size() - 1; size >= 0; size--) {
                        TLRPC.Message message = (TLRPC.Message) messages_messages.messages.get(size);
                        int i6 = message.f1597id;
                        i4 = i3;
                        if (i6 > i4 && !message.out) {
                            i5 = i6;
                            break;
                        }
                    }
                    i4 = i3;
                }
                final int classGuid = chatActivity.getClassGuid();
                NotificationCenter.getInstance(this.currentAccount).addObserver(new AnonymousClass137(classGuid, runnable, chatActivity), NotificationCenter.messagesDidLoad);
                final int i7 = i5;
                final int i8 = i4;
                Utilities.stageQueue.postRunnable(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda479
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$processLoadedDiscussionMessage$383(messages_messages, dialogId, i, i8, classGuid, i7, arrayList);
                    }
                });
                return;
            }
            runnable.run();
            return;
        }
        this.commentLoadingMessageId = 0;
        this.hideCommentLoading = false;
        this.chatListView.invalidateViews();
        if (messageObject2 != null) {
            openOriginalReplyChat(messageObject2);
        } else if (getParentActivity() != null) {
            BulletinFactory.m1267of(this).createErrorBulletin(LocaleController.getString(C2369R.string.ChannelPostDeleted), this.themeDelegate).show();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processLoadedDiscussionMessage$382(boolean[] zArr, int i, ChatActivity chatActivity) {
        ChatActivityEnterView chatActivityEnterView;
        if (zArr[0] || i != this.commentLoadingMessageId || !this.isFullyVisible || isFinishing()) {
            return;
        }
        zArr[0] = true;
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda486
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$processLoadedDiscussionMessage$381();
            }
        }, 200L);
        presentFragment(chatActivity);
        if (!isKeyboardVisible() || chatActivity.hideKeyboardOnShow() || (chatActivityEnterView = chatActivity.chatActivityEnterView) == null || chatActivityEnterView.getEditField() == null) {
            return;
        }
        chatActivity.chatActivityEnterView.getEditField().requestFocus();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processLoadedDiscussionMessage$381() {
        this.commentLoadingMessageId = 0;
        this.hideCommentLoading = false;
        this.chatListView.invalidateViews();
    }

    /* renamed from: org.telegram.ui.ChatActivity$137, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass137 implements NotificationCenter.NotificationCenterDelegate {
        final /* synthetic */ ChatActivity val$chatActivity;
        final /* synthetic */ int val$commentsClassGuid;
        final /* synthetic */ Runnable val$openCommentsChat;

        AnonymousClass137(int i, Runnable runnable, ChatActivity chatActivity) {
            this.val$commentsClassGuid = i;
            this.val$openCommentsChat = runnable;
            this.val$chatActivity = chatActivity;
        }

        @Override // org.telegram.messenger.NotificationCenter.NotificationCenterDelegate
        public void didReceivedNotification(final int i, final int i2, final Object... objArr) {
            int i3 = NotificationCenter.messagesDidLoad;
            if (i == i3 && ((Integer) objArr[10]).intValue() == this.val$commentsClassGuid) {
                this.val$openCommentsChat.run();
                final ChatActivity chatActivity = this.val$chatActivity;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$137$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() throws InterruptedException, Resources.NotFoundException, NumberFormatException {
                        chatActivity.didReceivedNotification(i, i2, objArr);
                    }
                }, 50L);
                NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).removeObserver(this, i3);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$processLoadedDiscussionMessage$383(TLRPC.messages_Messages messages_messages, long j, int i, int i2, int i3, int i4, ArrayList arrayList) {
        getMessagesController().processLoadedMessages(messages_messages, messages_messages.messages.size(), j, 0L, 30, i > 0 ? i : i2, 0, false, i3, i4, 0, 0, 0, i > 0 ? 3 : 2, true, 0, ((MessageObject) arrayList.get(arrayList.size() - 1)).getId(), 1, false, 0, true, this.isTopic, null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openDiscussionMessageChat(long j, final MessageObject messageObject, int i, final long j2, final int i2, final int i3, final MessageObject messageObject2) {
        int id = i;
        final TLRPC.Chat chat = getMessagesController().getChat(Long.valueOf(j));
        final TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage = new TLRPC.TL_messages_getDiscussionMessage();
        tL_messages_getDiscussionMessage.peer = MessagesController.getInputPeer(chat);
        tL_messages_getDiscussionMessage.msg_id = id;
        if (BuildVars.LOGS_ENABLED) {
            FileLog.m1157d("getDiscussionMessage chat = " + chat.f1571id + " msg_id = " + id);
        }
        this.commentLoadingMessageId = 0;
        this.hideCommentLoading = false;
        this.savedDiscussionMessage = null;
        this.savedNoDiscussion = false;
        this.savedNoHistory = false;
        this.savedHistory = null;
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            chatListRecyclerView.invalidateViews();
        }
        if (this.commentMessagesRequestId != -1) {
            getConnectionsManager().cancelRequest(this.commentMessagesRequestId, false);
        }
        if (this.commentRequestId != -1) {
            getConnectionsManager().cancelRequest(this.commentRequestId, false);
        }
        if (messageObject2 != null) {
            id = messageObject2.getId();
        }
        this.commentLoadingMessageId = id;
        this.hideCommentLoading = false;
        this.commentLoadingStartedAt = System.currentTimeMillis();
        ChatListRecyclerView chatListRecyclerView2 = this.chatListView;
        if (chatListRecyclerView2 != null) {
            chatListRecyclerView2.invalidateViews();
        }
        final int i4 = this.commentLoadingGuid + 1;
        this.commentLoadingGuid = i4;
        this.commentRequestId = getConnectionsManager().sendRequest(tL_messages_getDiscussionMessage, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda320
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$openDiscussionMessageChat$390(i4, i2, j2, i3, messageObject2, tL_messages_getDiscussionMessage, chat, messageObject, tLObject, tL_error);
            }
        });
        getConnectionsManager().bindRequestToGuid(this.commentRequestId, this.classGuid);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDiscussionMessageChat$390(final int i, final int i2, final long j, final int i3, final MessageObject messageObject, final TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, final TLRPC.Chat chat, final MessageObject messageObject2, final TLObject tLObject, TLRPC.TL_error tL_error) {
        final Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda377
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$388(i, i2, j, tLObject, i3, messageObject, tL_messages_getDiscussionMessage, chat, messageObject2);
            }
        };
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda378
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$389(runnable);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDiscussionMessageChat$388(int i, final int i2, long j, TLObject tLObject, final int i3, final MessageObject messageObject, final TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, final TLRPC.Chat chat, final MessageObject messageObject2) {
        if (i != this.commentLoadingGuid) {
            return;
        }
        this.commentRequestId = -1;
        if (tLObject instanceof TLRPC.TL_messages_discussionMessage) {
            this.savedDiscussionMessage = (TLRPC.TL_messages_discussionMessage) tLObject;
            getMessagesController().putUsers(this.savedDiscussionMessage.users, false);
            getMessagesController().putChats(this.savedDiscussionMessage.chats, false);
        } else {
            this.savedNoDiscussion = true;
        }
        ArrayList arrayList = new ArrayList();
        TLRPC.TL_messages_discussionMessage tL_messages_discussionMessage = this.savedDiscussionMessage;
        if (tL_messages_discussionMessage != null && tL_messages_discussionMessage.messages != null) {
            for (int i4 = 0; i4 < this.savedDiscussionMessage.messages.size(); i4++) {
                TLRPC.Message message = (TLRPC.Message) this.savedDiscussionMessage.messages.get(i4);
                if (!(message instanceof TLRPC.TL_messageEmpty)) {
                    arrayList.add(message);
                }
            }
        }
        if (arrayList.size() > 0) {
            TLRPC.Message message2 = (TLRPC.Message) arrayList.get(0);
            TLRPC.TL_messages_getReplies tL_messages_getReplies = new TLRPC.TL_messages_getReplies();
            tL_messages_getReplies.peer = getMessagesController().getInputPeer(message2.peer_id);
            tL_messages_getReplies.msg_id = message2.f1597id;
            tL_messages_getReplies.offset_date = 0;
            tL_messages_getReplies.limit = 30;
            if (i3 > 0) {
                tL_messages_getReplies.offset_id = i3;
                tL_messages_getReplies.add_offset = (-30) / 2;
            } else {
                tL_messages_getReplies.offset_id = i2 == 0 ? 1 : i2;
                tL_messages_getReplies.add_offset = (-30) + 10;
            }
            final int i5 = this.commentMessagesLoadingGuid + 1;
            this.commentMessagesLoadingGuid = i5;
            this.commentMessagesRequestId = getConnectionsManager().sendRequest(tL_messages_getReplies, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda445
                @Override // org.telegram.tgnet.RequestDelegate
                public final void run(TLObject tLObject2, TLRPC.TL_error tL_error) {
                    this.f$0.lambda$openDiscussionMessageChat$387(i5, i2, messageObject, tL_messages_getDiscussionMessage, chat, i3, messageObject2, tLObject2, tL_error);
                }
            });
            return;
        }
        this.savedNoHistory = true;
        processLoadedDiscussionMessage(this.savedNoDiscussion, this.savedDiscussionMessage, true, this.savedHistory, i2, messageObject, tL_messages_getDiscussionMessage, chat, i3, messageObject2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDiscussionMessageChat$386(final int i, final TLObject tLObject, final TLRPC.TL_error tL_error, final int i2, final MessageObject messageObject, final TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, final TLRPC.Chat chat, final int i3, final MessageObject messageObject2) {
        lambda$openDiscussionMessageChat$389(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda481
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$385(i, tLObject, tL_error, i2, messageObject, tL_messages_getDiscussionMessage, chat, i3, messageObject2);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDiscussionMessageChat$387(final int i, final int i2, final MessageObject messageObject, final TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, final TLRPC.Chat chat, final int i3, final MessageObject messageObject2, final TLObject tLObject, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda471
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openDiscussionMessageChat$386(i, tLObject, tL_error, i2, messageObject, tL_messages_getDiscussionMessage, chat, i3, messageObject2);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openDiscussionMessageChat$385(int i, TLObject tLObject, TLRPC.TL_error tL_error, int i2, MessageObject messageObject, TLRPC.TL_messages_getDiscussionMessage tL_messages_getDiscussionMessage, TLRPC.Chat chat, int i3, MessageObject messageObject2) {
        if (i != this.commentMessagesLoadingGuid) {
            return;
        }
        this.commentMessagesRequestId = -1;
        if (tLObject != null) {
            this.savedHistory = (TLRPC.messages_Messages) tLObject;
        } else {
            if ("CHANNEL_PRIVATE".equals(tL_error.text)) {
                MessagesController.showCantOpenAlert(this, LocaleController.getString(C2369R.string.ChannelCantOpenBannedByAdmin));
                this.commentLoadingMessageId = 0;
                this.hideCommentLoading = false;
                this.chatListView.invalidateViews();
                return;
            }
            this.savedNoHistory = true;
        }
        processLoadedDiscussionMessage(this.savedNoDiscussion, this.savedDiscussionMessage, this.savedNoHistory, this.savedHistory, i2, messageObject, tL_messages_getDiscussionMessage, chat, i3, messageObject2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openMessageInOriginalDialog(MessageObject messageObject) {
        Bundle bundle = new Bundle();
        TLRPC.Peer peer = messageObject.messageOwner.peer_id;
        long j = peer.channel_id;
        if (j != 0) {
            bundle.putLong("chat_id", j);
        } else {
            long j2 = peer.chat_id;
            if (j2 != 0) {
                bundle.putLong("chat_id", j2);
            } else {
                long j3 = peer.user_id;
                if (j3 != 0) {
                    bundle.putLong("user_id", j3);
                }
            }
        }
        bundle.putInt("message_id", messageObject.getRealId());
        bundle.putBoolean("need_remove_previous_same_chat_activity", false);
        if (getMessagesController().checkCanOpenChat(bundle, this)) {
            presentFragment(new ChatActivity(bundle));
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openOriginalReplyChat(MessageObject messageObject) {
        if (UserObject.isUserSelf(this.currentUser)) {
            TLRPC.MessageFwdHeader messageFwdHeader = messageObject.messageOwner.fwd_from;
            if (messageFwdHeader.saved_from_peer.user_id == this.currentUser.f1734id) {
                scrollToMessageId(messageFwdHeader.saved_from_msg_id, messageObject.getId(), true, 0, true, 0);
                return;
            }
        }
        Bundle bundle = new Bundle();
        TLRPC.Peer peer = messageObject.messageOwner.fwd_from.saved_from_peer;
        long j = peer.channel_id;
        if (j != 0) {
            bundle.putLong("chat_id", j);
        } else {
            long j2 = peer.chat_id;
            if (j2 != 0) {
                bundle.putLong("chat_id", j2);
            } else {
                long j3 = peer.user_id;
                if (j3 != 0) {
                    bundle.putLong("user_id", j3);
                }
            }
        }
        bundle.putInt("message_id", messageObject.messageOwner.fwd_from.saved_from_msg_id);
        if (getMessagesController().checkCanOpenChat(bundle, this)) {
            presentFragment(new ChatActivity(bundle));
        }
    }

    public void showRequestUrlAlert(final TLRPC.TL_urlAuthResultRequest tL_urlAuthResultRequest, final TLRPC.TL_messages_requestUrlAuth tL_messages_requestUrlAuth, final String str, final boolean z) {
        if (getParentActivity() == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(getParentActivity(), this.themeDelegate);
        builder.setTitle(LocaleController.getString(C2369R.string.OpenUrlTitle));
        String string = LocaleController.getString(C2369R.string.OpenUrlAlert2);
        int iIndexOf = string.indexOf("%");
        boolean z2 = true;
        SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(String.format(string, str));
        int i = 33;
        if (iIndexOf >= 0) {
            spannableStringBuilder.setSpan(new URLSpan(str), iIndexOf, str.length() + iIndexOf, 33);
        }
        builder.setMessage(spannableStringBuilder);
        builder.setMessageTextViewClickable(false);
        builder.setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null);
        final CheckBoxCell[] checkBoxCellArr = new CheckBoxCell[2];
        LinearLayout linearLayout = new LinearLayout(getParentActivity());
        linearLayout.setOrientation(1);
        TLRPC.User currentUser = getUserConfig().getCurrentUser();
        int i2 = 0;
        while (true) {
            if (i2 < (tL_urlAuthResultRequest.request_write_access ? 2 : 1)) {
                CheckBoxCell checkBoxCell = new CheckBoxCell(getParentActivity(), 5, this.themeDelegate);
                checkBoxCellArr[i2] = checkBoxCell;
                checkBoxCell.setBackgroundDrawable(Theme.getSelectorDrawable(false));
                checkBoxCellArr[i2].setMultiline(z2);
                checkBoxCellArr[i2].setTag(Integer.valueOf(i2));
                if (i2 != 0) {
                    checkBoxCellArr[i2].setText(AndroidUtilities.replaceTags(LocaleController.formatString("OpenUrlOption2", C2369R.string.OpenUrlOption2, UserObject.getFirstName(tL_urlAuthResultRequest.bot))), "", true, false);
                } else {
                    SpannableStringBuilder spannableStringBuilderReplaceTags = AndroidUtilities.replaceTags(LocaleController.formatString("OpenUrlOption1", C2369R.string.OpenUrlOption1, tL_urlAuthResultRequest.domain, ContactsController.formatName(currentUser.first_name, currentUser.last_name)));
                    int iIndexOf2 = TextUtils.indexOf(spannableStringBuilderReplaceTags, tL_urlAuthResultRequest.domain);
                    if (iIndexOf2 >= 0) {
                        spannableStringBuilderReplaceTags.setSpan(new URLSpan(""), iIndexOf2, tL_urlAuthResultRequest.domain.length() + iIndexOf2, i);
                    }
                    checkBoxCellArr[i2].setText(spannableStringBuilderReplaceTags, "", true, false);
                }
                checkBoxCellArr[i2].setPadding(LocaleController.isRTL ? AndroidUtilities.m1146dp(16.0f) : AndroidUtilities.m1146dp(8.0f), 0, LocaleController.isRTL ? AndroidUtilities.m1146dp(8.0f) : AndroidUtilities.m1146dp(16.0f), 0);
                linearLayout.addView(checkBoxCellArr[i2], LayoutHelper.createLinear(-1, -2));
                checkBoxCellArr[i2].setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda11
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        ChatActivity.$r8$lambda$Ad_C3yeZA23sfC_b_VgHjckM0Sc(checkBoxCellArr, view);
                    }
                });
                i2++;
                i = 33;
                z2 = true;
            } else {
                builder.setView(linearLayout);
                builder.setPositiveButton(LocaleController.getString(C2369R.string.Open), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda12
                    @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                    public final void onClick(AlertDialog alertDialog, int i3) {
                        this.f$0.lambda$showRequestUrlAlert$396(checkBoxCellArr, str, tL_messages_requestUrlAuth, tL_urlAuthResultRequest, z, alertDialog, i3);
                    }
                });
                showDialog(builder.create());
                return;
            }
        }
    }

    public static /* synthetic */ void $r8$lambda$Ad_C3yeZA23sfC_b_VgHjckM0Sc(CheckBoxCell[] checkBoxCellArr, View view) {
        if (view.isEnabled()) {
            Integer num = (Integer) view.getTag();
            checkBoxCellArr[num.intValue()].setChecked(!checkBoxCellArr[num.intValue()].isChecked(), true);
            if (num.intValue() != 0 || checkBoxCellArr[1] == null) {
                return;
            }
            if (checkBoxCellArr[num.intValue()].isChecked()) {
                checkBoxCellArr[1].setEnabled(true);
            } else {
                checkBoxCellArr[1].setChecked(false, true);
                checkBoxCellArr[1].setEnabled(false);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showRequestUrlAlert$396(CheckBoxCell[] checkBoxCellArr, final String str, final TLRPC.TL_messages_requestUrlAuth tL_messages_requestUrlAuth, TLRPC.TL_urlAuthResultRequest tL_urlAuthResultRequest, final boolean z, AlertDialog alertDialog, int i) {
        if (!checkBoxCellArr[0].isChecked()) {
            Browser.openUrl((Context) getParentActivity(), str, false);
            return;
        }
        final AlertDialog[] alertDialogArr = {new AlertDialog(getParentActivity(), 3, this.themeDelegate)};
        TLRPC.TL_messages_acceptUrlAuth tL_messages_acceptUrlAuth = new TLRPC.TL_messages_acceptUrlAuth();
        String str2 = tL_messages_requestUrlAuth.url;
        if (str2 != null) {
            tL_messages_acceptUrlAuth.url = str2;
            tL_messages_acceptUrlAuth.flags |= 4;
        } else {
            tL_messages_acceptUrlAuth.button_id = tL_messages_requestUrlAuth.button_id;
            tL_messages_acceptUrlAuth.msg_id = tL_messages_requestUrlAuth.msg_id;
            tL_messages_acceptUrlAuth.peer = tL_messages_requestUrlAuth.peer;
            tL_messages_acceptUrlAuth.flags |= 2;
        }
        if (tL_urlAuthResultRequest.request_write_access) {
            tL_messages_acceptUrlAuth.write_allowed = checkBoxCellArr[1].isChecked();
        }
        try {
            alertDialogArr[0].dismiss();
        } catch (Throwable unused) {
        }
        alertDialogArr[0] = null;
        final int iSendRequest = getConnectionsManager().sendRequest(tL_messages_acceptUrlAuth, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda139
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$showRequestUrlAlert$393(str, tL_messages_requestUrlAuth, z, tLObject, tL_error);
            }
        });
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda140
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showRequestUrlAlert$395(alertDialogArr, iSendRequest);
            }
        }, 500L);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showRequestUrlAlert$393(final String str, final TLRPC.TL_messages_requestUrlAuth tL_messages_requestUrlAuth, final boolean z, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda321
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showRequestUrlAlert$392(tLObject, str, tL_messages_requestUrlAuth, z);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showRequestUrlAlert$392(TLObject tLObject, String str, TLRPC.TL_messages_requestUrlAuth tL_messages_requestUrlAuth, boolean z) {
        if (tLObject instanceof TLRPC.TL_urlAuthResultAccepted) {
            Browser.openUrl((Context) getParentActivity(), ((TLRPC.TL_urlAuthResultAccepted) tLObject).url, false);
            return;
        }
        if (tLObject instanceof TLRPC.TL_urlAuthResultDefault) {
            Browser.openUrl((Context) getParentActivity(), str, false);
            return;
        }
        String str2 = tL_messages_requestUrlAuth.url;
        if (str2 != null) {
            AlertsCreator.showOpenUrlAlert(this, str2, false, z, this.themeDelegate);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showRequestUrlAlert$395(AlertDialog[] alertDialogArr, final int i) {
        AlertDialog alertDialog = alertDialogArr[0];
        if (alertDialog == null) {
            return;
        }
        alertDialog.setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda219
            @Override // android.content.DialogInterface.OnCancelListener
            public final void onCancel(DialogInterface dialogInterface) {
                this.f$0.lambda$showRequestUrlAlert$394(i, dialogInterface);
            }
        });
        showDialog(alertDialogArr[0]);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showRequestUrlAlert$394(int i, DialogInterface dialogInterface) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void removeMessageObject(MessageObject messageObject) {
        int iIndexOf = this.messages.indexOf(messageObject);
        if (iIndexOf == -1) {
            return;
        }
        this.messages.remove(iIndexOf);
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter == null || chatActivityAdapter.isFiltered) {
            return;
        }
        chatActivityAdapter.notifyItemRemoved(chatActivityAdapter.messagesStartRow + iIndexOf);
    }

    public void removeMessageWithThanos(MessageObject messageObject) {
        int iIndexOf = this.messages.indexOf(messageObject);
        if (iIndexOf == -1) {
            return;
        }
        this.messages.remove(iIndexOf);
        ChatActivityAdapter chatActivityAdapter = this.chatAdapter;
        if (chatActivityAdapter == null || chatActivityAdapter.isFiltered) {
            return;
        }
        chatActivityAdapter.notifyItemRemoved(chatActivityAdapter.messagesStartRow + iIndexOf, true);
    }

    public void openVCard(TLRPC.User user, String str, String str2, String str3, String str4) throws IOException {
        File file;
        if (user != null) {
            Bundle bundle = new Bundle();
            bundle.putLong("user_id", user.f1734id);
            bundle.putBoolean("show_add_to_contacts", true);
            bundle.putString("vcard", str2);
            bundle.putString("vcard_phone", str);
            bundle.putString("vcard_first_name", str3);
            bundle.putString("vcard_last_name", str4);
            presentFragment(new ProfileActivity(bundle));
            return;
        }
        try {
            if (TextUtils.isEmpty(str2)) {
                file = null;
            } else {
                File sharingDirectory = AndroidUtilities.getSharingDirectory();
                sharingDirectory.mkdirs();
                file = new File(sharingDirectory, "vcard.vcf");
                BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(file));
                bufferedWriter.write(str2);
                bufferedWriter.close();
            }
            showDialog(new PhonebookShareAlert(this, null, user, null, file, PhoneFormat.stripExceptNumbers(str), str3, str4, this.themeDelegate));
        } catch (Exception e) {
            FileLog.m1160e(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setCellSelectionBackground(MessageObject messageObject, ChatMessageCell chatMessageCell, int i, boolean z) {
        MessageObject.GroupedMessages validGroupedMessage = getValidGroupedMessage(messageObject);
        if (validGroupedMessage != null) {
            int i2 = 0;
            while (true) {
                if (i2 >= validGroupedMessage.messages.size()) {
                    validGroupedMessage = null;
                    break;
                } else if (this.selectedMessagesIds[i].indexOfKey(validGroupedMessage.messages.get(i2).getId()) < 0) {
                    break;
                } else {
                    i2++;
                }
            }
        }
        chatMessageCell.setDrawSelectionBackground(validGroupedMessage == null);
        chatMessageCell.setChecked(true, validGroupedMessage == null, z);
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:31:0x0084 A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:39:0x00a3  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void openClickableLink(final android.text.style.CharacterStyle r11, final java.lang.String r12, boolean r13, final org.telegram.p023ui.Cells.ChatMessageCell r14, final org.telegram.messenger.MessageObject r15, boolean r16) throws java.io.UnsupportedEncodingException {
        /*
            Method dump skipped, instructions count: 355
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.openClickableLink(android.text.style.CharacterStyle, java.lang.String, boolean, org.telegram.ui.Cells.ChatMessageCell, org.telegram.messenger.MessageObject, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:48:0x00f5  */
    /* JADX WARN: Removed duplicated region for block: B:51:0x00f9  */
    /* JADX WARN: Removed duplicated region for block: B:70:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$openClickableLink$397(java.lang.String r8, android.text.style.CharacterStyle r9, org.telegram.messenger.MessageObject r10, org.telegram.p023ui.Cells.ChatMessageCell r11, int r12, android.content.DialogInterface r13, int r14) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException, java.io.UnsupportedEncodingException {
        /*
            Method dump skipped, instructions count: 315
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$openClickableLink$397(java.lang.String, android.text.style.CharacterStyle, org.telegram.messenger.MessageObject, org.telegram.ui.Cells.ChatMessageCell, int, android.content.DialogInterface, int):void");
    }

    /* renamed from: $r8$lambda$Sbp86_QmemDHYorj5GT-0o3AEAo, reason: not valid java name */
    public static /* synthetic */ void m6506$r8$lambda$Sbp86_QmemDHYorj5GT0o3AEAo(ChatMessageCell chatMessageCell, DialogInterface dialogInterface) {
        if (chatMessageCell != null) {
            chatMessageCell.resetPressedLink(-1);
        }
    }

    public void shakeContent() {
        AndroidUtilities.shakeViewSpring(getChatListView(), 5.0f);
        BotWebViewVibrationEffect.APP_ERROR.vibrate();
        ChatActivityEnterView chatActivityEnterView = getChatActivityEnterView();
        for (int i = 0; i < chatActivityEnterView.getChildCount(); i++) {
            AndroidUtilities.shakeViewSpring(chatActivityEnterView.getChildAt(i), 5.0f);
        }
        ActionBar actionBar = getActionBar();
        for (int i2 = 0; i2 < actionBar.getChildCount(); i2++) {
            AndroidUtilities.shakeViewSpring(actionBar.getChildAt(i2), 5.0f);
        }
    }

    private Browser.Progress makeProgressForLink(ChatMessageCell chatMessageCell, CharacterStyle characterStyle) {
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel(true);
            this.progressDialogCurrent = null;
        }
        if (characterStyle == null || chatMessageCell == null || chatMessageCell.getMessageObject() == null) {
            this.progressDialogCurrent = null;
            return null;
        }
        AnonymousClass138 anonymousClass138 = new AnonymousClass138(chatMessageCell.getMessageObject().getId(), characterStyle, chatMessageCell);
        this.progressDialogCurrent = anonymousClass138;
        return anonymousClass138;
    }

    /* renamed from: org.telegram.ui.ChatActivity$138, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass138 extends Browser.Progress {
        final /* synthetic */ ChatMessageCell val$cell;
        final /* synthetic */ int val$id;
        final /* synthetic */ CharacterStyle val$span;

        AnonymousClass138(int i, CharacterStyle characterStyle, ChatMessageCell chatMessageCell) {
            this.val$id = i;
            this.val$span = characterStyle;
            this.val$cell = chatMessageCell;
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void init() {
            ChatActivity.this.progressDialogAtMessageId = this.val$id;
            ChatActivity.this.progressDialogAtMessageType = 1;
            ChatActivity.this.progressDialogLinkSpan = this.val$span;
            this.val$cell.invalidate();
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void end(boolean z) {
            if (z) {
                return;
            }
            final int i = this.val$id;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$138$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$end$0(i);
                }
            }, 240L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$end$0(int i) {
            if (ChatActivity.this.progressDialogAtMessageId == i) {
                ChatActivity.this.resetProgressDialogLoading();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Browser.Progress makeProgressForForward(ChatMessageCell chatMessageCell) {
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel(true);
            this.progressDialogCurrent = null;
        }
        if (chatMessageCell == null || chatMessageCell.getMessageObject() == null) {
            this.progressDialogCurrent = null;
            return null;
        }
        AnonymousClass139 anonymousClass139 = new AnonymousClass139(chatMessageCell.getMessageObject().getId(), chatMessageCell);
        this.progressDialogCurrent = anonymousClass139;
        return anonymousClass139;
    }

    /* renamed from: org.telegram.ui.ChatActivity$139, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass139 extends Browser.Progress {
        final /* synthetic */ ChatMessageCell val$cell;
        final /* synthetic */ int val$id;

        AnonymousClass139(int i, ChatMessageCell chatMessageCell) {
            this.val$id = i;
            this.val$cell = chatMessageCell;
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void init() {
            ChatActivity.this.progressDialogAtMessageId = this.val$id;
            ChatActivity.this.progressDialogAtMessageType = 6;
            this.val$cell.invalidate();
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void end(boolean z) {
            if (z) {
                return;
            }
            final int i = this.val$id;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$139$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$end$0(i);
                }
            }, 240L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$end$0(int i) {
            if (ChatActivity.this.progressDialogAtMessageId == i) {
                ChatActivity.this.resetProgressDialogLoading();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Browser.Progress makeProgressForBotButton(ChatMessageCell chatMessageCell, String str) {
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel(true);
            this.progressDialogCurrent = null;
        }
        if (str == null || chatMessageCell == null || chatMessageCell.getMessageObject() == null) {
            this.progressDialogCurrent = null;
            return null;
        }
        AnonymousClass140 anonymousClass140 = new AnonymousClass140(chatMessageCell.getMessageObject().getId(), str, chatMessageCell);
        this.progressDialogCurrent = anonymousClass140;
        return anonymousClass140;
    }

    /* renamed from: org.telegram.ui.ChatActivity$140, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass140 extends Browser.Progress {
        final /* synthetic */ ChatMessageCell val$cell;
        final /* synthetic */ int val$id;
        final /* synthetic */ String val$url;

        AnonymousClass140(int i, String str, ChatMessageCell chatMessageCell) {
            this.val$id = i;
            this.val$url = str;
            this.val$cell = chatMessageCell;
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void init() {
            ChatActivity.this.progressDialogAtMessageId = this.val$id;
            ChatActivity.this.progressDialogAtMessageType = 3;
            ChatActivity.this.progressDialogBotButtonUrl = this.val$url;
            this.val$cell.invalidate();
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void end(boolean z) {
            if (z) {
                return;
            }
            final int i = this.val$id;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$140$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$end$0(i);
                }
            }, 240L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$end$0(int i) {
            if (ChatActivity.this.progressDialogAtMessageId == i) {
                ChatActivity.this.resetProgressDialogLoading();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public Browser.Progress makeProgressForPaidMedia(ChatMessageCell chatMessageCell) {
        Browser.Progress progress = this.progressDialogCurrent;
        if (progress != null) {
            progress.cancel(true);
            this.progressDialogCurrent = null;
        }
        if (chatMessageCell == null || chatMessageCell.getMessageObject() == null) {
            this.progressDialogCurrent = null;
            return null;
        }
        AnonymousClass141 anonymousClass141 = new AnonymousClass141(chatMessageCell.getMessageObject().getId(), chatMessageCell);
        this.progressDialogCurrent = anonymousClass141;
        return anonymousClass141;
    }

    /* renamed from: org.telegram.ui.ChatActivity$141, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass141 extends Browser.Progress {
        final /* synthetic */ ChatMessageCell val$cell;
        final /* synthetic */ int val$id;

        AnonymousClass141(int i, ChatMessageCell chatMessageCell) {
            this.val$id = i;
            this.val$cell = chatMessageCell;
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void init() {
            ChatActivity.this.progressDialogAtMessageId = this.val$id;
            ChatActivity.this.progressDialogAtMessageType = 5;
            ChatActivity.this.progressDialogBotButtonUrl = null;
            this.val$cell.invalidate();
        }

        @Override // org.telegram.messenger.browser.Browser.Progress
        public void end(boolean z) {
            if (z) {
                return;
            }
            final int i = this.val$id;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$141$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$end$0(i);
                }
            }, 240L);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$end$0(int i) {
            if (ChatActivity.this.progressDialogAtMessageId == i) {
                ChatActivity.this.resetProgressDialogLoading();
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void processExternalUrl(int i, String str, CharacterStyle characterStyle, ChatMessageCell chatMessageCell, boolean z, boolean z2) {
        try {
            String hostAuthority = AndroidUtilities.getHostAuthority(str);
            if (this.currentEncryptedChat == null || getMessagesController().secretWebpagePreview == 1) {
                if (getMessagesController().authDomains.contains(hostAuthority)) {
                    getSendMessagesHelper().requestUrlAuth(str, this, i == 0 || i == 2);
                    return;
                }
            }
        } catch (Exception e) {
            FileLog.m1160e(e);
        }
        if (TextUtils.isEmpty(str) || !AyuInAppHandlers.isDangerous(str) || (chatMessageCell != null && AyuInAppHandlers.canProceedWithDangerous(chatMessageCell.getMessageObject()))) {
            if (!z && !AndroidUtilities.shouldShowUrlInAlert(str)) {
                if (i == 0) {
                    Browser.openUrl(getParentActivity(), Uri.parse(str), true, !z2, makeProgressForLink(chatMessageCell, characterStyle));
                    return;
                } else if (i == 1) {
                    Browser.openUrl(getParentActivity(), Uri.parse(str), this.inlineReturn == 0, !z2, makeProgressForLink(chatMessageCell, characterStyle));
                    return;
                } else {
                    if (i == 2) {
                        Browser.openUrl(getParentActivity(), Uri.parse(str), this.inlineReturn == 0, !z2, makeProgressForLink(chatMessageCell, characterStyle));
                        return;
                    }
                    return;
                }
            }
            if (i != 0 && i != 2) {
                if (i == 1) {
                    AlertsCreator.showOpenUrlAlert(this, str, true, !z2, false, makeProgressForLink(chatMessageCell, characterStyle), this.themeDelegate);
                }
            } else {
                if ((characterStyle instanceof URLSpanReplacement) && (((URLSpanReplacement) characterStyle).getTextStyleRun().flags & 1024) != 0) {
                    z = true;
                }
                AlertsCreator.showOpenUrlAlert(this, str, true, !z2, true, z, makeProgressForLink(chatMessageCell, characterStyle), this.themeDelegate);
            }
        }
    }

    public void logSponsoredClicked(MessageObject messageObject, boolean z, boolean z2) {
        if (messageObject == null || !messageObject.isSponsored()) {
            return;
        }
        TLRPC.TL_messages_clickSponsoredMessage tL_messages_clickSponsoredMessage = new TLRPC.TL_messages_clickSponsoredMessage();
        tL_messages_clickSponsoredMessage.random_id = messageObject.sponsoredId;
        tL_messages_clickSponsoredMessage.media = z;
        tL_messages_clickSponsoredMessage.fullscreen = z2;
        getConnectionsManager().sendRequest(tL_messages_clickSponsoredMessage, null);
    }

    /* JADX WARN: Removed duplicated region for block: B:86:0x0128  */
    /* JADX WARN: Removed duplicated region for block: B:88:0x0146  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didPressMessageUrl(android.text.style.CharacterStyle r17, boolean r18, org.telegram.messenger.MessageObject r19, org.telegram.p023ui.Cells.ChatMessageCell r20) throws android.content.res.Resources.NotFoundException, java.lang.NumberFormatException, java.io.UnsupportedEncodingException {
        /*
            Method dump skipped, instructions count: 764
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.didPressMessageUrl(android.text.style.CharacterStyle, boolean, org.telegram.messenger.MessageObject, org.telegram.ui.Cells.ChatMessageCell):void");
    }

    public void openPhotoViewerForMessage(ChatMessageCell chatMessageCell, MessageObject messageObject) {
        ChatMessageCell chatMessageCell2;
        AnimatedFileDrawable animation;
        Bitmap animatedBitmap;
        if (chatMessageCell == null) {
            int childCount = this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    chatMessageCell2 = (ChatMessageCell) childAt;
                    if (chatMessageCell2.getMessageObject().equals(messageObject)) {
                        break;
                    }
                }
            }
            chatMessageCell2 = chatMessageCell;
        } else {
            chatMessageCell2 = chatMessageCell;
        }
        if (messageObject.isVideo()) {
            sendSecretMessageRead(messageObject, true);
        }
        PhotoViewer.getInstance().setParentActivity(this, this.themeDelegate);
        MessageObject playingMessageObject = MediaController.getInstance().getPlayingMessageObject();
        if (chatMessageCell2 != null && playingMessageObject != null && playingMessageObject.isVideo()) {
            getFileLoader().setLoadingVideoForPlayer(playingMessageObject.getDocument(), false);
            if (playingMessageObject.equals(messageObject) && (animation = chatMessageCell2.getPhotoImage().getAnimation()) != null && this.videoTextureView != null && this.videoPlayerContainer.getTag() != null && (animatedBitmap = animation.getAnimatedBitmap()) != null) {
                try {
                    Bitmap bitmap = this.videoTextureView.getBitmap(animatedBitmap.getWidth(), animatedBitmap.getHeight());
                    new Canvas(animatedBitmap).drawBitmap(bitmap, 0.0f, 0.0f, (Paint) null);
                    bitmap.recycle();
                } catch (Throwable th) {
                    FileLog.m1160e(th);
                }
            }
            MediaController.getInstance().cleanupPlayer(true, true, false, playingMessageObject.equals(messageObject));
        }
        if (this.chatMode == 1 && (messageObject.isVideo() || messageObject.type == 1)) {
            PhotoViewer.getInstance().setParentChatActivity(this);
            ArrayList arrayList = new ArrayList();
            int size = this.messages.size();
            for (int i2 = 0; i2 < size; i2++) {
                MessageObject messageObject2 = (MessageObject) this.messages.get(i2);
                if (messageObject2.isVideo() || messageObject2.type == 1) {
                    arrayList.add(0, messageObject2);
                }
            }
            PhotoViewer.getInstance().openPhoto(arrayList, arrayList.indexOf(messageObject), this.dialog_id, 0L, getTopicId(), this.photoViewerProvider);
        } else {
            PhotoViewer photoViewer = PhotoViewer.getInstance();
            int i3 = messageObject.type;
            photoViewer.openPhoto(messageObject, this, i3 != 0 ? this.dialog_id : 0L, i3 != 0 ? this.mergeDialogId : 0L, i3 != 0 ? getTopicId() : 0L, this.photoViewerProvider);
        }
        hideHints(false);
        MediaController.getInstance().resetGoingToShowMessageObject();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateMessageListAccessibilityVisibility() {
        ActionBarPopupWindow actionBarPopupWindow;
        if (this.currentEncryptedChat != null) {
            return;
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        chatListRecyclerView.setImportantForAccessibility(((mentionsContainerView == null || !mentionsContainerView.isOpen()) && ((actionBarPopupWindow = this.scrimPopupWindow) == null || !actionBarPopupWindow.isShowing())) ? 0 : 4);
    }

    private void markSponsoredAsRead(MessageObject messageObject) {
        if (messageObject == null || !messageObject.isSponsored() || messageObject.viewsReloaded) {
            return;
        }
        messageObject.viewsReloaded = true;
        TLRPC.TL_messages_viewSponsoredMessage tL_messages_viewSponsoredMessage = new TLRPC.TL_messages_viewSponsoredMessage();
        tL_messages_viewSponsoredMessage.random_id = messageObject.sponsoredId;
        getConnectionsManager().sendRequest(tL_messages_viewSponsoredMessage, null);
        getMessagesController().markSponsoredAsRead(this.dialog_id, messageObject);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean canBeginSlide() {
        QuickShareSelectorOverlayLayout quickShareSelectorOverlayLayout;
        return !(this.chatMode == 5 && (this.messages.isEmpty() || this.threadMessageId == 0)) && this.swipeBackEnabled && this.chatActivityEnterView.swipeToBackEnabled() && this.pullingDownOffset == 0.0f && ((quickShareSelectorOverlayLayout = this.quickShareSelectorOverlay) == null || !quickShareSelectorOverlayLayout.isActive());
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean isSwipeBackEnabled(MotionEvent motionEvent) {
        MessagePreviewView messagePreviewView;
        QuickShareSelectorOverlayLayout quickShareSelectorOverlayLayout;
        return !(this.chatMode == 5 && (this.messages.isEmpty() || this.threadMessageId == 0)) && this.swipeBackEnabled && ((messagePreviewView = this.forwardingPreviewView) == null || !messagePreviewView.isShowing()) && ((quickShareSelectorOverlayLayout = this.quickShareSelectorOverlay) == null || !quickShareSelectorOverlayLayout.isActive());
    }

    public class ChatActivityAdapter extends RecyclerAnimationScrollHelper.AnimatableAdapter {
        public boolean filteredEndReached;
        private boolean isBot;
        public boolean isFiltered;
        public boolean isFrozen;
        private Context mContext;
        private int messagesEndRow;
        public int messagesStartRow;
        private int rowCount;
        private int hintRow = -5;
        private int botInfoRow = -5;
        private int botInfoEmptyRow = -5;
        private int userInfoRow = -5;
        private int loadingUpRow = -5;
        private int loadingDownRow = -5;
        private int userPhotoTimeRow = -5;
        private int userNameTimeRow = -5;
        private int freeSpaceRow = -5;
        public ArrayList frozenMessages = new ArrayList();
        public ArrayList filteredMessages = new ArrayList();

        public static /* synthetic */ void $r8$lambda$I7SdminFf1flZZIJ4_3Pd7YRK78() {
        }

        @Override // org.telegram.ui.Components.RecyclerListView.SelectionAdapter
        public boolean isEnabled(RecyclerView.ViewHolder viewHolder) {
            return false;
        }

        public ArrayList getMessages() {
            if (this.isFrozen) {
                return this.frozenMessages;
            }
            if (this.isFiltered) {
                return this.filteredMessages;
            }
            return ChatActivity.this.messages;
        }

        public ChatActivityAdapter(Context context) {
            this.mContext = context;
            TLRPC.User user = ChatActivity.this.currentUser;
            this.isBot = user != null && user.bot;
            setHasStableIds(true);
        }

        public void updateRowsSafe() {
            int i = this.rowCount;
            int i2 = this.botInfoRow;
            int i3 = this.userInfoRow;
            int i4 = this.hintRow;
            int i5 = this.loadingUpRow;
            int i6 = this.loadingDownRow;
            int i7 = this.messagesStartRow;
            int i8 = this.messagesEndRow;
            int i9 = this.userPhotoTimeRow;
            int i10 = this.userNameTimeRow;
            updateRowsInternal();
            if (i == this.rowCount && i2 == this.botInfoRow && i5 == this.loadingUpRow && i6 == this.loadingDownRow && i7 == this.messagesStartRow && i8 == this.messagesEndRow && i4 == this.hintRow && i3 == this.userInfoRow && i9 == this.userPhotoTimeRow && i10 == this.userNameTimeRow) {
                return;
            }
            notifyDataSetChanged(false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* JADX WARN: Code restructure failed: missing block: B:77:0x017c, code lost:
        
            if (r9.filteredEndReached == false) goto L94;
         */
        /* JADX WARN: Code restructure failed: missing block: B:90:0x01ab, code lost:
        
            if (r0.currentUser == null) goto L92;
         */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void updateRowsInternal() {
            /*
                Method dump skipped, instructions count: 566
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityAdapter.updateRowsInternal():void");
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public int getItemCount() {
            this.botInfoEmptyRow = -5;
            if (ChatActivity.this.isClearingHistory()) {
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC.User user = chatActivity.currentUser;
                if (user == null || !user.bot || chatActivity.chatMode != 0 || ((ChatActivity.this.botInfo.size() <= 0 || (((TL_bots.BotInfo) ChatActivity.this.botInfo.get(ChatActivity.this.currentUser.f1734id)).description == null && ((TL_bots.BotInfo) ChatActivity.this.botInfo.get(ChatActivity.this.currentUser.f1734id)).description_photo == null && ((TL_bots.BotInfo) ChatActivity.this.botInfo.get(ChatActivity.this.currentUser.f1734id)).description_document == null)) && !UserObject.isReplyUser(ChatActivity.this.currentUser))) {
                    return 0;
                }
                this.botInfoEmptyRow = 0;
                return 1;
            }
            return this.rowCount;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public long getItemId(int i) {
            ArrayList arrayList;
            if (ChatActivity.this.isClearingHistory() && i == this.botInfoEmptyRow) {
                return 1L;
            }
            if (this.isFrozen) {
                arrayList = this.frozenMessages;
            } else if (this.isFiltered) {
                arrayList = this.filteredMessages;
            } else {
                arrayList = ChatActivity.this.messages;
            }
            if (i >= this.messagesStartRow && i < this.messagesEndRow) {
                return ((MessageObject) arrayList.get(i - r3)).stableId;
            }
            if (i == this.botInfoRow || i == this.botInfoEmptyRow) {
                return 1L;
            }
            if (i == this.loadingUpRow) {
                return 2L;
            }
            if (i == this.loadingDownRow) {
                return 3L;
            }
            if (i == this.hintRow) {
                return 4L;
            }
            if (i == this.userInfoRow) {
                return 6L;
            }
            if (i == this.userPhotoTimeRow) {
                return 7L;
            }
            if (i == this.userNameTimeRow) {
                return 8L;
            }
            return i == this.freeSpaceRow ? 9L : 5L;
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int i) {
            View chatMessageCell;
            boolean z = true;
            View dummyView = null;
            boolean z2 = false;
            if (i == 0) {
                ArrayList arrayList = (ArrayList) ChatActivity.this.chatMessageCellsCache.get(((BaseFragment) ChatActivity.this).currentAccount);
                if (arrayList == null || arrayList.isEmpty()) {
                    Context context = this.mContext;
                    int i2 = ((BaseFragment) ChatActivity.this).currentAccount;
                    ChatActivity chatActivity = ChatActivity.this;
                    chatMessageCell = new ChatMessageCell(context, i2, true, chatActivity.sharedResources, chatActivity.themeDelegate);
                } else {
                    chatMessageCell = (View) arrayList.get(0);
                    arrayList.remove(0);
                }
                ChatMessageCell chatMessageCell2 = (ChatMessageCell) chatMessageCell;
                chatMessageCell2.setResourcesProvider(ChatActivity.this.themeDelegate);
                chatMessageCell2.shouldCheckVisibleOnScreen = false;
                chatMessageCell2.setDelegate(new ChatMessageCellDelegate());
                chatMessageCell2.draftAnimationsPool = ChatActivity.this.botDraftAnimationsPool;
                if (ChatActivity.this.currentEncryptedChat == null) {
                    chatMessageCell2.setAllowAssistant(true);
                }
                dummyView = chatMessageCell;
            } else if (i == 1) {
                ChatActionCell chatActionCell = new ChatActionCell(this.mContext, z, ChatActivity.this.themeDelegate) { // from class: org.telegram.ui.ChatActivity.ChatActivityAdapter.1
                    @Override // org.telegram.p023ui.Cells.ChatActionCell, android.view.View
                    public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo accessibilityNodeInfo) {
                        super.onInitializeAccessibilityNodeInfo(accessibilityNodeInfo);
                        accessibilityNodeInfo.setVisibleToUser(true);
                    }
                };
                chatActionCell.setInvalidateColors(true);
                chatActionCell.setDelegate(new C31522());
                dummyView = chatActionCell;
            } else if (i == 2) {
                dummyView = new ChatUnreadCell(this.mContext, ChatActivity.this.themeDelegate);
            } else if (i == 3) {
                BotHelpCell botHelpCell = new BotHelpCell(this.mContext, ChatActivity.this.themeDelegate);
                botHelpCell.setDelegate(new BotHelpCell.BotHelpCellDelegate() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$$ExternalSyntheticLambda1
                    @Override // org.telegram.ui.Cells.BotHelpCell.BotHelpCellDelegate
                    public final void didPressUrl(String str) throws Resources.NotFoundException, NumberFormatException {
                        this.f$0.lambda$onCreateViewHolder$0(str);
                    }
                });
                dummyView = botHelpCell;
            } else if (i == 4) {
                Context context2 = this.mContext;
                ChatActivity chatActivity2 = ChatActivity.this;
                dummyView = new ChatLoadingCell(context2, chatActivity2.contentView, chatActivity2.themeDelegate);
            } else if (i == 6) {
                dummyView = new UserInfoCell(this.mContext, ((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.themeDelegate);
            } else if (i == 7) {
                dummyView = new ChatActionCell(this.mContext, false, ChatActivity.this.themeDelegate);
            } else if (i == 8) {
                View view = new View(this.mContext) { // from class: org.telegram.ui.ChatActivity.ChatActivityAdapter.3
                    @Override // android.view.View
                    protected void onMeasure(int i3, int i4) {
                        super.onMeasure(i3, View.MeasureSpec.makeMeasureSpec(AndroidUtilities.m1146dp(50.0f), TLObject.FLAG_30));
                    }
                };
                view.setBackgroundColor(-16711936);
                dummyView = view;
            } else if (i == -1000) {
                dummyView = new DummyView(this.mContext);
            }
            dummyView.setLayoutParams(new RecyclerView.LayoutParams(-1, -2));
            return new RecyclerListView.Holder(dummyView);
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatActivityAdapter$2 */
        class C31522 implements ChatActionCell.ChatActionCellDelegate {
            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public boolean canDrawOutboundsContent() {
                return false;
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public /* synthetic */ long getDialogId() {
                return ChatActionCell.ChatActionCellDelegate.CC.$default$getDialogId(this);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public /* synthetic */ void needOpenInviteLink(TLRPC.TL_chatInviteExported tL_chatInviteExported) {
                ChatActionCell.ChatActionCellDelegate.CC.$default$needOpenInviteLink(this, tL_chatInviteExported);
            }

            C31522() {
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didOpenPremiumGift(ChatActionCell chatActionCell, TLRPC.TL_premiumGiftOption tL_premiumGiftOption, String str, boolean z) {
                if (str != null) {
                    initGiftProgressDialog(chatActionCell);
                    PremiumPreviewGiftLinkBottomSheet.show(str, ChatActivity.this.progressDialogCurrent);
                } else {
                    ChatActivity chatActivity = ChatActivity.this;
                    ChatActivity chatActivity2 = ChatActivity.this;
                    chatActivity.showDialog(new PremiumPreviewBottomSheet(chatActivity2, ((BaseFragment) chatActivity2).currentAccount, ChatActivity.this.getCurrentUser(), new GiftPremiumBottomSheet$GiftTier(tL_premiumGiftOption, (Object) null), null, ChatActivity.this.themeDelegate).setAnimateConfetti(z).setOutboundGift(chatActionCell.getMessageObject().isOut()));
                }
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didPressReaction(ChatActionCell chatActionCell, TLRPC.ReactionCount reactionCount, boolean z, float f, float f2) {
                ChatActivity.this.didPressReaction(chatActionCell, reactionCount, z, f, f2);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void forceUpdate(ChatActionCell chatActionCell, boolean z) {
                MessageObject messageObject;
                int childAdapterPosition;
                int scrollingOffsetForView;
                if (chatActionCell == null || (messageObject = chatActionCell.getMessageObject()) == null) {
                    return;
                }
                messageObject.forceUpdate = true;
                if (ChatActivity.this.chatListView == null || ChatActivity.this.chatLayoutManager == null || ChatActivity.this.chatLayoutManager.hasPendingScrollPosition()) {
                    childAdapterPosition = -1;
                    scrollingOffsetForView = 0;
                } else {
                    for (int childCount = ChatActivity.this.chatListView.getChildCount() - 1; childCount >= 0; childCount--) {
                        View childAt = ChatActivity.this.chatListView.getChildAt(childCount);
                        childAdapterPosition = ChatActivity.this.chatListView.getChildAdapterPosition(childAt);
                        if (childAdapterPosition >= 0) {
                            if (childAt instanceof ChatMessageCell) {
                                if (((ChatMessageCell) childAt).getCurrentMessagesGroup() == null) {
                                    scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                                    break;
                                }
                            } else if (childAt instanceof ChatActionCell) {
                                scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                                break;
                            }
                        }
                    }
                    childAdapterPosition = -1;
                    scrollingOffsetForView = 0;
                }
                ChatActivity.this.lambda$updateMessageAnimated$315(messageObject, false);
                if (!z || childAdapterPosition < 0) {
                    return;
                }
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(childAdapterPosition, scrollingOffsetForView);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didOpenPremiumGiftChannel(ChatActionCell chatActionCell, String str, boolean z) {
                initGiftProgressDialog(chatActionCell);
                GiftInfoBottomSheet.show(getBaseFragment(), str, ChatActivity.this.progressDialogCurrent);
            }

            private void initGiftProgressDialog(ChatActionCell chatActionCell) {
                if (ChatActivity.this.progressDialogCurrent != null) {
                    ChatActivity.this.progressDialogCurrent.cancel(true);
                }
                ChatActivity.this.progressDialogCurrent = (chatActionCell == null || chatActionCell.getMessageObject() == null) ? null : new AnonymousClass1(chatActionCell);
            }

            /* renamed from: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$1, reason: invalid class name */
            /* loaded from: classes5.dex */
            class AnonymousClass1 extends Browser.Progress {
                final /* synthetic */ ChatActionCell val$cell;

                AnonymousClass1(ChatActionCell chatActionCell) {
                    this.val$cell = chatActionCell;
                }

                @Override // org.telegram.messenger.browser.Browser.Progress
                public void init() {
                    ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                    ChatActivity.this.progressDialogAtMessageType = 4;
                    ChatActivity.this.progressDialogLinkSpan = null;
                    this.val$cell.getMessageObject().flickerLoading = true;
                    this.val$cell.invalidate();
                }

                @Override // org.telegram.messenger.browser.Browser.Progress
                public void end(boolean z) {
                    if (z) {
                        return;
                    }
                    final ChatActionCell chatActionCell = this.val$cell;
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$1$$ExternalSyntheticLambda0
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$end$0(chatActionCell);
                        }
                    }, 250L);
                }

                /* JADX INFO: Access modifiers changed from: private */
                public /* synthetic */ void lambda$end$0(ChatActionCell chatActionCell) {
                    ChatActivity.this.resetProgressDialogLoading();
                    chatActionCell.getMessageObject().flickerLoading = false;
                    chatActionCell.invalidate();
                }
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void needShowEffectOverlay(ChatActionCell chatActionCell, TLRPC.Document document, TLRPC.VideoSize videoSize) {
                ChatActivity.this.emojiAnimationsOverlay.showAnimationForActionCell(chatActionCell, document, videoSize);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didClickButton(ChatActionCell chatActionCell) {
                MessageObject messageObject;
                if (chatActionCell != null && (messageObject = chatActionCell.getMessageObject()) != null && messageObject.type == 22 && !chatActionCell.getMessageObject().isOutOwner() && chatActionCell.getMessageObject().isWallpaperForBoth() && chatActionCell.getMessageObject().isCurrentWallpaper()) {
                    AlertDialog alertDialogCreate = new AlertDialog.Builder(ChatActivity.this.getContext(), ChatActivity.this.getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.RemoveWallpaperTitle)).setMessage(LocaleController.getString(C2369R.string.RemoveWallpaperMessage)).setPositiveButton(LocaleController.getString(C2369R.string.Remove), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$$ExternalSyntheticLambda1
                        @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                        public final void onClick(AlertDialog alertDialog, int i) {
                            this.f$0.lambda$didClickButton$0(alertDialog, i);
                        }
                    }).setNegativeButton(LocaleController.getString(C2369R.string.Cancel), null).create();
                    ChatActivity.this.showDialog(alertDialogCreate);
                    TextView textView = (TextView) alertDialogCreate.getButton(-1);
                    if (textView != null) {
                        textView.setTextColor(ChatActivity.this.getThemedColor(Theme.key_text_RedBold));
                    }
                }
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$didClickButton$0(AlertDialog alertDialog, int i) {
                ChatThemeController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearWallpaper(ChatActivity.this.dialog_id, true, true);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didClickImage(ChatActionCell chatActionCell) {
                TLRPC.VideoSize closestVideoSizeWithSize;
                TLRPC.VideoSize emojiMarkup;
                String str;
                MessageObject messageObject = chatActionCell.getMessageObject();
                PhotoViewer photoViewer = PhotoViewer.getInstance();
                ChatActivity chatActivity = ChatActivity.this;
                photoViewer.setParentActivity(chatActivity, chatActivity.themeDelegate);
                TLRPC.PhotoSize closestPhotoSizeWithSize = FileLoader.getClosestPhotoSizeWithSize(messageObject.photoThumbs, 640);
                if (chatActionCell.getMessageObject().type == 24) {
                    StoryViewer orCreateStoryViewer = ChatActivity.this.getOrCreateStoryViewer();
                    ChatActivity chatActivity2 = ChatActivity.this;
                    orCreateStoryViewer.openFor(chatActivity2, chatActivity2.chatListView, chatActionCell);
                    return;
                }
                if (chatActionCell.getMessageObject().type == 22) {
                    MessagesController messagesController = MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount);
                    if (chatActionCell.showingCancelButton() && messageObject.getId() < 0 && (str = messagesController.uploadingWallpaper) != null && TextUtils.equals(messageObject.messageOwner.action.wallpaper.uploadingImage, str)) {
                        messagesController.cancelUploadWallpaper();
                        ChatActivity.this.removeMessageObject(messageObject);
                        return;
                    } else if (chatActionCell.hasButton()) {
                        ThemePreviewActivity.showFor(ChatActivity.this, messageObject);
                        return;
                    } else {
                        ChatActivity.this.showChatThemeBottomSheet();
                        return;
                    }
                }
                ArrayList arrayList = messageObject.messageOwner.action.photo.video_sizes;
                if (arrayList == null || arrayList.isEmpty()) {
                    closestVideoSizeWithSize = null;
                    emojiMarkup = null;
                } else {
                    closestVideoSizeWithSize = FileLoader.getClosestVideoSizeWithSize(messageObject.messageOwner.action.photo.video_sizes, MediaDataController.MAX_STYLE_RUNS_COUNT);
                    emojiMarkup = FileLoader.getEmojiMarkup(messageObject.messageOwner.action.photo.video_sizes);
                }
                if (chatActionCell.getMessageObject().type != 21 || messageObject.isOutOwner()) {
                    if (closestVideoSizeWithSize != null) {
                        PhotoViewer.getInstance().openPhoto(closestVideoSizeWithSize.location, ImageLocation.getForPhoto(closestVideoSizeWithSize, messageObject.messageOwner.action.photo), ChatActivity.this.photoViewerProvider);
                        if (chatActionCell.getMessageObject().type == 21) {
                            PhotoViewer.getInstance().setTitle(LocaleController.getString(C2369R.string.SuggestedVideo));
                            return;
                        }
                        return;
                    }
                    if (closestPhotoSizeWithSize != null) {
                        PhotoViewer.getInstance().openPhoto(closestPhotoSizeWithSize.location, ImageLocation.getForPhoto(closestPhotoSizeWithSize, messageObject.messageOwner.action.photo), ChatActivity.this.photoViewerProvider);
                        if (chatActionCell.getMessageObject().type == 21) {
                            PhotoViewer.getInstance().setTitle(LocaleController.getString(C2369R.string.SuggestedPhoto));
                            return;
                        }
                        return;
                    }
                    PhotoViewer.getInstance().openPhoto(messageObject, (ChatActivity) null, 0L, 0L, 0L, ChatActivity.this.photoViewerProvider);
                    return;
                }
                if (messageObject.settingAvatar) {
                    return;
                }
                if (emojiMarkup != null) {
                    PhotoUtilities.showAvatartConstructorForUpdateUserPhoto(ChatActivity.this, emojiMarkup);
                    return;
                }
                ArrayList arrayList2 = new ArrayList();
                ImageLocation.getForPhoto(closestVideoSizeWithSize, messageObject.messageOwner.action.photo);
                FileLoader fileLoader = ChatActivity.this.getFileLoader();
                File pathToAttach = closestVideoSizeWithSize == null ? fileLoader.getPathToAttach(messageObject.messageOwner.action.photo) : fileLoader.getPathToAttach(closestVideoSizeWithSize);
                File file = new File(FileLoader.getDirectory(4), pathToAttach.getName());
                if (!pathToAttach.exists()) {
                    if (!file.exists()) {
                        return;
                    } else {
                        pathToAttach = file;
                    }
                }
                MediaController.PhotoEntry photoEntry = new MediaController.PhotoEntry(0, 0, 0L, pathToAttach.getAbsolutePath(), 0, false, 0, 0, 0L);
                photoEntry.caption = ChatActivity.this.chatActivityEnterView.getFieldText();
                photoEntry.isVideo = closestVideoSizeWithSize != null;
                arrayList2.add(photoEntry);
                PhotoViewer.getInstance().openPhotoForSelect(arrayList2, 0, 1, false, new AnonymousClass2(messageObject, photoEntry), null);
                if (photoEntry.isVideo) {
                    PhotoViewer.getInstance().setTitle(LocaleController.getString(C2369R.string.SuggestedVideo));
                } else {
                    PhotoViewer.getInstance().setTitle(LocaleController.getString(C2369R.string.SuggestedPhoto));
                }
                ImageUpdater.AvatarFor avatarFor = new ImageUpdater.AvatarFor(ChatActivity.this.getUserConfig().getCurrentUser(), 1);
                avatarFor.isVideo = closestVideoSizeWithSize != null;
                avatarFor.fromObject = ChatActivity.this.getMessagesController().getUser(Long.valueOf(ChatActivity.this.dialog_id));
                PhotoViewer.getInstance().setAvatarFor(avatarFor);
            }

            /* renamed from: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$2, reason: invalid class name */
            /* loaded from: classes5.dex */
            class AnonymousClass2 extends PhotoViewer.EmptyPhotoViewerProvider {
                final /* synthetic */ MediaController.PhotoEntry val$entry;
                final /* synthetic */ MessageObject val$message;

                AnonymousClass2(MessageObject messageObject, MediaController.PhotoEntry photoEntry) {
                    this.val$message = messageObject;
                    this.val$entry = photoEntry;
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public PhotoViewer.PlaceProviderObject getPlaceForPhoto(MessageObject messageObject, TLRPC.FileLocation fileLocation, int i, boolean z, boolean z2) {
                    return ChatActivity.this.photoViewerProvider.getPlaceForPhoto(this.val$message, fileLocation, i, z, false);
                }

                @Override // org.telegram.ui.PhotoViewer.EmptyPhotoViewerProvider, org.telegram.ui.PhotoViewer.PhotoViewerProvider
                public void sendButtonPressed(int i, VideoEditedInfo videoEditedInfo, boolean z, int i2, int i3, boolean z2) {
                    final MessageObject messageObject = this.val$message;
                    messageObject.settingAvatar = true;
                    MediaController.PhotoEntry photoEntry = this.val$entry;
                    if (photoEntry.imagePath != null || photoEntry.isVideo) {
                        PhotoUtilities.setImageAsAvatar(photoEntry, ChatActivity.this, new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$2$$ExternalSyntheticLambda0
                            @Override // java.lang.Runnable
                            public final void run() {
                                messageObject.settingAvatar = false;
                            }
                        });
                        return;
                    }
                    TLRPC.TL_photos_updateProfilePhoto tL_photos_updateProfilePhoto = new TLRPC.TL_photos_updateProfilePhoto();
                    TLRPC.TL_inputPhoto tL_inputPhoto = new TLRPC.TL_inputPhoto();
                    tL_photos_updateProfilePhoto.f1712id = tL_inputPhoto;
                    TLRPC.Photo photo = this.val$message.messageOwner.action.photo;
                    tL_inputPhoto.f1595id = photo.f1603id;
                    tL_inputPhoto.access_hash = photo.access_hash;
                    tL_inputPhoto.file_reference = photo.file_reference;
                    ConnectionsManager connectionsManager = ChatActivity.this.getConnectionsManager();
                    final MessageObject messageObject2 = this.val$message;
                    connectionsManager.sendRequest(tL_photos_updateProfilePhoto, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$2$$ExternalSyntheticLambda1
                        @Override // org.telegram.tgnet.RequestDelegate
                        public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                            this.f$0.lambda$sendButtonPressed$3(messageObject2, tLObject, tL_error);
                        }
                    });
                }

                /* JADX INFO: Access modifiers changed from: private */
                public /* synthetic */ void lambda$sendButtonPressed$3(final MessageObject messageObject, final TLObject tLObject, TLRPC.TL_error tL_error) {
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$2$$ExternalSyntheticLambda2
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$sendButtonPressed$2(tLObject, messageObject);
                        }
                    });
                }

                /* JADX INFO: Access modifiers changed from: private */
                public /* synthetic */ void lambda$sendButtonPressed$2(TLObject tLObject, MessageObject messageObject) {
                    if (tLObject instanceof TLRPC.TL_photos_photo) {
                        TLRPC.TL_photos_photo tL_photos_photo = (TLRPC.TL_photos_photo) tLObject;
                        ChatActivity.this.getMessagesController().putUsers(tL_photos_photo.users, false);
                        TLRPC.User user = ChatActivity.this.getMessagesController().getUser(Long.valueOf(ChatActivity.this.getUserConfig().clientUserId));
                        if ((tL_photos_photo.photo instanceof TLRPC.TL_photo) && user != null) {
                            PhotoUtilities.applyPhotoToUser(messageObject.messageOwner.action.photo, user, false);
                            ChatActivity.this.getUserConfig().setCurrentUser(user);
                            ChatActivity.this.getUserConfig().saveConfig(true);
                            BulletinFactory.m1267of(ChatActivity.this).createUsersBulletin(Collections.singletonList(user), AndroidUtilities.replaceTags(LocaleController.getString(C2369R.string.ApplyAvatarHintTitle)), AndroidUtilities.replaceSingleTag(LocaleController.getString(C2369R.string.ApplyAvatarHint), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$2$$ExternalSyntheticLambda3
                                @Override // java.lang.Runnable
                                public final void run() {
                                    this.f$0.lambda$sendButtonPressed$1();
                                }
                            }), null).show();
                        }
                    }
                    messageObject.settingAvatar = false;
                }

                /* JADX INFO: Access modifiers changed from: private */
                public /* synthetic */ void lambda$sendButtonPressed$1() {
                    Bundle bundle = new Bundle();
                    bundle.putLong("user_id", UserConfig.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clientUserId);
                    ChatActivity.this.presentFragment(new ProfileActivity(bundle));
                }
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public BaseFragment getBaseFragment() {
                return ChatActivity.this;
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public long getTopicId() {
                return ChatActivity.this.getTopicId();
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public boolean didLongPress(ChatActionCell chatActionCell, float f, float f2) {
                if (((BaseFragment) ChatActivity.this).inPreviewMode) {
                    return false;
                }
                return ChatActivity.this.createMenu(chatActionCell, false, false, f, f2, true);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void onTopicClick(ChatActionCell chatActionCell) {
                MessageObject messageObject;
                TopicsTabsView topicsTabsView;
                if (chatActionCell == null || (messageObject = chatActionCell.getMessageObject()) == null || (topicsTabsView = ChatActivity.this.topicsTabs) == null) {
                    return;
                }
                topicsTabsView.selectTopic(messageObject.getMonoForumTopicId(), true);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void needOpenUserProfile(long j) {
                ChatActivity.this.openUserProfile(j);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didPressReplyMessage(final ChatActionCell chatActionCell, final int i) {
                Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressReplyMessage$1(chatActionCell, i);
                    }
                };
                if (ChatActivity.this.chatAdapter.isFiltered) {
                    ChatActivity.this.setFilterMessages(false, true, true);
                    AndroidUtilities.runOnUIThread(runnable, 80L);
                } else {
                    runnable.run();
                }
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$didPressReplyMessage$1(ChatActionCell chatActionCell, int i) {
                MessageObject messageObject = chatActionCell.getMessageObject();
                ChatActivity.this.scrollToMessageId(i, messageObject.getId(), true, messageObject.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0);
            }

            @Override // org.telegram.ui.Cells.ChatActionCell.ChatActionCellDelegate
            public void didPressTaskLink(final ChatActionCell chatActionCell, final int i, final int i2) {
                Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatActivityAdapter$2$$ExternalSyntheticLambda2
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressTaskLink$2(chatActionCell, i, i2);
                    }
                };
                if (ChatActivity.this.chatAdapter.isFiltered) {
                    ChatActivity.this.setFilterMessages(false, true, true);
                    AndroidUtilities.runOnUIThread(runnable, 80L);
                } else {
                    runnable.run();
                }
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$didPressTaskLink$2(ChatActionCell chatActionCell, int i, int i2) {
                MessageObject messageObject = chatActionCell.getMessageObject();
                ChatActivity.this.scrollToMessageId(i, messageObject.getId(), true, messageObject.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0, Integer.valueOf(i2), null);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onCreateViewHolder$0(String str) throws Resources.NotFoundException, NumberFormatException {
            if (str.startsWith("@")) {
                ChatActivity.this.getMessagesController().openByUserName(str.substring(1), ChatActivity.this, 0);
                return;
            }
            if (str.startsWith("#") || str.startsWith("$")) {
                DialogsActivity dialogsActivity = new DialogsActivity(null);
                dialogsActivity.setSearchString(str);
                ChatActivity.this.presentFragment(dialogsActivity);
            } else {
                if (str.startsWith("/")) {
                    ChatActivity.this.chatActivityEnterView.setCommand(null, str, false, false);
                    if (ChatActivity.this.chatActivityEnterView.getFieldText() == null) {
                        ChatActivity.this.hideFieldPanel(false);
                        return;
                    }
                    return;
                }
                ChatActivity.this.processExternalUrl(0, str, null, null, false, false);
            }
        }

        /* JADX WARN: Removed duplicated region for block: B:104:0x01f3  */
        /* JADX WARN: Removed duplicated region for block: B:124:0x0235  */
        /* JADX WARN: Removed duplicated region for block: B:185:0x03a9  */
        /* JADX WARN: Removed duplicated region for block: B:192:0x03d3  */
        /* JADX WARN: Removed duplicated region for block: B:194:0x03d6  */
        /* JADX WARN: Removed duplicated region for block: B:198:0x03e1  */
        /* JADX WARN: Removed duplicated region for block: B:226:0x0448  */
        /* JADX WARN: Removed duplicated region for block: B:253:0x04b8  */
        /* JADX WARN: Removed duplicated region for block: B:257:0x04c0  */
        /* JADX WARN: Removed duplicated region for block: B:276:0x050c  */
        /* JADX WARN: Removed duplicated region for block: B:279:0x0514  */
        /* JADX WARN: Removed duplicated region for block: B:281:0x0518  */
        /* JADX WARN: Removed duplicated region for block: B:284:0x0521  */
        /* JADX WARN: Removed duplicated region for block: B:340:0x060e A[PHI: r20
          0x060e: PHI (r20v5 org.telegram.messenger.MessageObject$GroupedMessages) = 
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
         binds: [B:366:0x067d, B:347:0x0628, B:339:0x060c] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:349:0x062b A[PHI: r20
          0x062b: PHI (r20v4 org.telegram.messenger.MessageObject$GroupedMessages) = 
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v3 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
          (r20v6 org.telegram.messenger.MessageObject$GroupedMessages)
         binds: [B:351:0x0631, B:353:0x0637, B:355:0x064a, B:362:0x0663, B:364:0x066b, B:366:0x067d, B:342:0x0615, B:344:0x061b, B:347:0x0628, B:339:0x060c] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:369:0x0682 A[PHI: r6
          0x0682: PHI (r6v8 boolean) = (r6v7 boolean), (r6v22 boolean) binds: [B:283:0x051f, B:292:0x054e] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:372:0x0690  */
        /* JADX WARN: Removed duplicated region for block: B:381:0x06ae  */
        /* JADX WARN: Removed duplicated region for block: B:383:0x06b1  */
        /* JADX WARN: Removed duplicated region for block: B:385:0x06b4  */
        /* JADX WARN: Removed duplicated region for block: B:392:0x06c7  */
        /* JADX WARN: Removed duplicated region for block: B:398:0x06e5  */
        /* JADX WARN: Removed duplicated region for block: B:402:0x06ef  */
        /* JADX WARN: Removed duplicated region for block: B:405:0x0705  */
        /* JADX WARN: Removed duplicated region for block: B:406:0x0707  */
        /* JADX WARN: Removed duplicated region for block: B:409:0x0714  */
        /* JADX WARN: Removed duplicated region for block: B:412:0x0720  */
        /* JADX WARN: Removed duplicated region for block: B:415:0x072a  */
        /* JADX WARN: Removed duplicated region for block: B:429:0x0762  */
        /* JADX WARN: Removed duplicated region for block: B:434:0x0776  */
        /* JADX WARN: Removed duplicated region for block: B:443:0x079d  */
        /* JADX WARN: Removed duplicated region for block: B:446:0x07ab  */
        /* JADX WARN: Removed duplicated region for block: B:497:0x08a7  */
        /* JADX WARN: Removed duplicated region for block: B:501:0x08cc  */
        /* JADX WARN: Removed duplicated region for block: B:504:0x08e0  */
        /* JADX WARN: Removed duplicated region for block: B:512:0x08f6  */
        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void onBindViewHolder(androidx.recyclerview.widget.RecyclerView.ViewHolder r25, int r26) throws android.content.res.Resources.NotFoundException {
            /*
                Method dump skipped, instructions count: 2656
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityAdapter.onBindViewHolder(androidx.recyclerview.widget.RecyclerView$ViewHolder, int):void");
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatActivityAdapter$4 */
        /* loaded from: classes5.dex */
        class ViewTreeObserverOnPreDrawListenerC31544 implements ViewTreeObserver.OnPreDrawListener {
            final /* synthetic */ ChatMessageCell val$messageCell;

            ViewTreeObserverOnPreDrawListenerC31544(ChatMessageCell chatMessageCell) {
                this.val$messageCell = chatMessageCell;
            }

            @Override // android.view.ViewTreeObserver.OnPreDrawListener
            public boolean onPreDraw() {
                PipRoundVideoView pipRoundVideoView = PipRoundVideoView.getInstance();
                if (pipRoundVideoView != null) {
                    pipRoundVideoView.showTemporary(true);
                }
                this.val$messageCell.getViewTreeObserver().removeOnPreDrawListener(this);
                ImageReceiver photoImage = this.val$messageCell.getPhotoImage();
                float imageWidth = photoImage.getImageWidth();
                org.telegram.p023ui.Components.Rect cameraRect = ChatActivity.this.instantCameraView.getCameraRect();
                float f = imageWidth / cameraRect.width;
                int[] iArr = new int[2];
                this.val$messageCell.getTransitionParams().ignoreAlpha = true;
                this.val$messageCell.setAlpha(0.0f);
                this.val$messageCell.setTimeAlpha(0.0f);
                this.val$messageCell.getLocationOnScreen(iArr);
                iArr[0] = (int) (iArr[0] + (photoImage.getImageX() - this.val$messageCell.getAnimationOffsetX()));
                iArr[1] = (int) (iArr[1] + ((photoImage.getImageY() + this.val$messageCell.getPaddingTop()) - this.val$messageCell.getTranslationY()));
                final InstantCameraView.InstantViewCameraContainer cameraContainer = ChatActivity.this.instantCameraView.getCameraContainer();
                cameraContainer.setPivotX(0.0f);
                cameraContainer.setPivotY(0.0f);
                AnimatorSet animatorSet = new AnimatorSet();
                cameraContainer.setImageReceiver(photoImage);
                AnimatorSet animatorSet2 = new AnimatorSet();
                ObjectAnimator objectAnimatorOfFloat = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_X, f);
                ObjectAnimator objectAnimatorOfFloat2 = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.SCALE_Y, f);
                ObjectAnimator objectAnimatorOfFloat3 = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.TRANSLATION_Y, iArr[1] - cameraRect.f1971y);
                View buttonsLayout = ChatActivity.this.instantCameraView.getButtonsLayout();
                Property property = View.ALPHA;
                animatorSet.playTogether(objectAnimatorOfFloat, objectAnimatorOfFloat2, objectAnimatorOfFloat3, ObjectAnimator.ofFloat(buttonsLayout, (Property<View, Float>) property, 0.0f), ObjectAnimator.ofInt(ChatActivity.this.instantCameraView.getPaint(), (Property<Paint, Integer>) AnimationProperties.PAINT_ALPHA, 0), ObjectAnimator.ofFloat(ChatActivity.this.instantCameraView.getMuteImageView(), (Property<View, Float>) property, 0.0f));
                animatorSet.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
                ObjectAnimator objectAnimatorOfFloat4 = ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.TRANSLATION_X, iArr[0] - cameraRect.f1970x);
                objectAnimatorOfFloat4.setInterpolator(CubicBezierInterpolator.DEFAULT);
                animatorSet2.playTogether(objectAnimatorOfFloat4, animatorSet);
                animatorSet2.setDuration(300L);
                InstantCameraView instantCameraView = ChatActivity.this.instantCameraView;
                if (instantCameraView != null) {
                    instantCameraView.setIsMessageTransition(true);
                }
                animatorSet2.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ChatActivityAdapter.4.1
                    @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                    public void onAnimationEnd(Animator animator) {
                        ViewTreeObserverOnPreDrawListenerC31544.this.val$messageCell.setAlpha(1.0f);
                        ViewTreeObserverOnPreDrawListenerC31544.this.val$messageCell.getTransitionParams().ignoreAlpha = false;
                        AnimationProperties.FloatProperty floatProperty = new AnimationProperties.FloatProperty("alpha") { // from class: org.telegram.ui.ChatActivity.ChatActivityAdapter.4.1.1
                            @Override // org.telegram.ui.Components.AnimationProperties.FloatProperty
                            public void setValue(ChatMessageCell chatMessageCell, float f2) {
                                chatMessageCell.setTimeAlpha(f2);
                            }

                            @Override // android.util.Property
                            public Float get(ChatMessageCell chatMessageCell) {
                                return Float.valueOf(chatMessageCell.getTimeAlpha());
                            }
                        };
                        AnimatorSet animatorSet3 = new AnimatorSet();
                        animatorSet3.playTogether(ObjectAnimator.ofFloat(cameraContainer, (Property<InstantCameraView.InstantViewCameraContainer, Float>) View.ALPHA, 0.0f), ObjectAnimator.ofFloat(ViewTreeObserverOnPreDrawListenerC31544.this.val$messageCell, floatProperty, 1.0f));
                        animatorSet3.setDuration(100L);
                        animatorSet3.setInterpolator(new DecelerateInterpolator());
                        animatorSet3.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ChatActivityAdapter.4.1.2
                            @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                            public void onAnimationEnd(Animator animator2) {
                                InstantCameraView instantCameraView2 = ChatActivity.this.instantCameraView;
                                if (instantCameraView2 != null) {
                                    instantCameraView2.setIsMessageTransition(false);
                                    ChatActivity.this.instantCameraView.hideCamera(true);
                                    ChatActivity.this.instantCameraView.setVisibility(4);
                                }
                            }
                        });
                        animatorSet3.start();
                    }
                });
                animatorSet2.start();
                return true;
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public int getItemViewType(int i) {
            ArrayList arrayList;
            if (ChatActivity.this.isClearingHistory() && i == this.botInfoEmptyRow) {
                return 3;
            }
            if (i == this.hintRow) {
                return 1;
            }
            int i2 = this.messagesStartRow;
            if (i >= i2 && i < this.messagesEndRow) {
                if (this.isFrozen) {
                    arrayList = this.frozenMessages;
                } else if (this.isFiltered) {
                    arrayList = this.filteredMessages;
                } else {
                    arrayList = ChatActivity.this.messages;
                }
                MessageObject messageObject = (MessageObject) arrayList.get(i - i2);
                messageObject.skipAyuFiltering = !ChatActivity.this.hideFilteredMessages;
                if (AyuConfig.filtersEnabled && ChatActivity.this.hideFilteredMessages) {
                    MessageObject.GroupedMessages group = ChatActivity.this.getGroup(messageObject.getGroupId());
                    if (group == null) {
                        group = ChatActivity.this.getValidGroupedMessage(messageObject);
                    }
                    MessageObject messageObjectFindPrimaryMessageObject = group == null ? messageObject : group.findPrimaryMessageObject();
                    if (messageObjectFindPrimaryMessageObject == null) {
                        messageObjectFindPrimaryMessageObject = messageObject;
                    }
                    if (ChatActivity.this.getAyuFilterController().isFiltered(ChatActivity.this.currentChat, messageObjectFindPrimaryMessageObject, group)) {
                        if (ChatActivity.this.actionsPopupWrapper == null) {
                            return -1000;
                        }
                        ChatActivity.this.actionsPopupWrapper.updateSwitchFilteringVisibility();
                        return -1000;
                    }
                }
                return messageObject.contentType;
            }
            if (i == this.botInfoRow) {
                return 3;
            }
            if (i == this.userInfoRow) {
                return 6;
            }
            if (i == this.userNameTimeRow || i == this.userPhotoTimeRow) {
                return 7;
            }
            return i == this.freeSpaceRow ? 8 : 4;
        }

        /* JADX WARN: Removed duplicated region for block: B:77:0x01d2  */
        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void onViewAttachedToWindow(androidx.recyclerview.widget.RecyclerView.ViewHolder r18) {
            /*
                Method dump skipped, instructions count: 901
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityAdapter.onViewAttachedToWindow(androidx.recyclerview.widget.RecyclerView$ViewHolder):void");
        }

        public void updateRowAtPosition(int i) {
            int iIndexOf;
            if (ChatActivity.this.chatLayoutManager == null || this.isFrozen || this.isFiltered) {
                return;
            }
            int scrollingOffsetForView = 0;
            if (ChatActivity.this.wasManualScroll || ChatActivity.this.unreadMessageObject == null) {
                iIndexOf = -1;
            } else {
                int childCount = ChatActivity.this.chatListView.getChildCount();
                int i2 = 0;
                while (true) {
                    if (i2 >= childCount) {
                        break;
                    }
                    View childAt = ChatActivity.this.chatListView.getChildAt(i2);
                    if ((childAt instanceof ChatMessageCell) && ((ChatMessageCell) childAt).getMessageObject() == ChatActivity.this.unreadMessageObject) {
                        ChatActivity chatActivity = ChatActivity.this;
                        if (chatActivity.messages.indexOf(chatActivity.unreadMessageObject) >= 0) {
                            int i3 = this.messagesStartRow;
                            ChatActivity chatActivity2 = ChatActivity.this;
                            iIndexOf = i3 + chatActivity2.messages.indexOf(chatActivity2.unreadMessageObject);
                            scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                        }
                    } else {
                        i2++;
                    }
                }
                iIndexOf = -1;
            }
            notifyItemChanged(i);
            if (iIndexOf != -1) {
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, scrollingOffsetForView);
            }
        }

        public void invalidateRowWithMessageObject(MessageObject messageObject) {
            int childCount = ChatActivity.this.chatListView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = ChatActivity.this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                    if (chatMessageCell.getMessageObject() == messageObject) {
                        chatMessageCell.invalidate();
                        return;
                    }
                }
            }
        }

        public View updateRowWithMessageObject(MessageObject messageObject, boolean z, boolean z2) {
            ArrayList arrayList;
            if (z) {
                int childCount = ChatActivity.this.chatListView.getChildCount();
                int i = 0;
                while (i < childCount) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(i);
                    if (childAt instanceof ChatMessageCell) {
                        ChatMessageCell chatMessageCell = (ChatMessageCell) childAt;
                        if (chatMessageCell.getMessageObject() == messageObject && !chatMessageCell.isAdminLayoutChanged()) {
                            chatMessageCell.setMessageObject(messageObject, chatMessageCell.getCurrentMessagesGroup(), chatMessageCell.isPinnedBottom(), chatMessageCell.isPinnedTop(), chatMessageCell.isFirstInChat(), chatMessageCell.isLastInChatList());
                            return chatMessageCell;
                        }
                    }
                    i++;
                    messageObject = messageObject;
                }
            }
            MessageObject messageObject2 = messageObject;
            if (this.isFrozen) {
                arrayList = this.frozenMessages;
            } else if (this.isFiltered) {
                arrayList = this.filteredMessages;
            } else {
                arrayList = ChatActivity.this.messages;
            }
            int iIndexOf = arrayList.indexOf(messageObject2);
            if (iIndexOf == -1) {
                return null;
            }
            if (z2) {
                int i2 = ChatActivity.lastStableId;
                ChatActivity.lastStableId = i2 + 1;
                messageObject2.stableId = i2;
                notifyDataSetChanged(true);
            } else {
                updateRowAtPosition(this.messagesStartRow + iIndexOf);
            }
            return null;
        }

        /* JADX WARN: Removed duplicated region for block: B:11:0x0045  */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void notifyDataSetChanged(boolean r7) {
            /*
                r6 = this;
                boolean r0 = org.telegram.messenger.BuildVars.LOGS_ENABLED
                if (r0 == 0) goto L1d
                java.lang.StringBuilder r0 = new java.lang.StringBuilder
                r0.<init>()
                java.lang.String r1 = "notify data set changed fragmentOpened="
                r0.append(r1)
                org.telegram.ui.ChatActivity r1 = org.telegram.p023ui.ChatActivity.this
                boolean r1 = r1.fragmentOpened
                r0.append(r1)
                java.lang.String r0 = r0.toString()
                org.telegram.messenger.FileLog.m1157d(r0)
            L1d:
                if (r7 == 0) goto L45
                org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                boolean r0 = r7.fragmentOpened
                if (r0 == 0) goto L45
                org.telegram.ui.ChatActivity$ChatListRecyclerView r7 = org.telegram.p023ui.ChatActivity.m6623$$Nest$fgetchatListView(r7)
                androidx.recyclerview.widget.RecyclerView$ItemAnimator r7 = r7.getItemAnimator()
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                androidx.recyclerview.widget.ChatListItemAnimator r0 = org.telegram.p023ui.ChatActivity.m6621$$Nest$fgetchatListItemAnimator(r0)
                if (r7 == r0) goto L4f
                org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.ChatActivity$ChatListRecyclerView r7 = org.telegram.p023ui.ChatActivity.m6623$$Nest$fgetchatListView(r7)
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                androidx.recyclerview.widget.ChatListItemAnimator r0 = org.telegram.p023ui.ChatActivity.m6621$$Nest$fgetchatListItemAnimator(r0)
                r7.setItemAnimator(r0)
                goto L4f
            L45:
                org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.ChatActivity$ChatListRecyclerView r7 = org.telegram.p023ui.ChatActivity.m6623$$Nest$fgetchatListView(r7)
                r0 = 0
                r7.setItemAnimator(r0)
            L4f:
                r6.updateRowsInternal()
                super.notifyDataSetChanged()     // Catch: java.lang.Exception -> L56
                goto L5a
            L56:
                r7 = move-exception
                org.telegram.messenger.FileLog.m1160e(r7)
            L5a:
                org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                java.util.ArrayList r7 = r7.messages
                int r7 = r7.size()
                r0 = 1
                int r7 = r7 - r0
            L64:
                r1 = 0
                if (r7 < 0) goto L88
                org.telegram.ui.ChatActivity r2 = org.telegram.p023ui.ChatActivity.this
                java.util.ArrayList r2 = r2.messages
                java.lang.Object r2 = r2.get(r7)
                org.telegram.messenger.MessageObject r2 = (org.telegram.messenger.MessageObject) r2
                boolean r3 = r2.isDateObject
                if (r3 == 0) goto L78
                int r7 = r7 + (-1)
                goto L64
            L78:
                org.telegram.tgnet.TLRPC$Message r7 = r2.messageOwner
                if (r7 == 0) goto L88
                org.telegram.tgnet.TLRPC$MessageAction r7 = r7.action
                boolean r2 = r7 instanceof org.telegram.tgnet.TLRPC.TL_messageActionTopicCreate
                if (r2 != 0) goto L86
                boolean r7 = r7 instanceof org.telegram.tgnet.TLRPC.TL_messageActionChannelCreate
                if (r7 == 0) goto L88
            L86:
                r7 = 1
                goto L89
            L88:
                r7 = 0
            L89:
                org.telegram.ui.ChatActivity r2 = org.telegram.p023ui.ChatActivity.this
                boolean[] r2 = org.telegram.p023ui.ChatActivity.m6651$$Nest$fgetendReached(r2)
                boolean r1 = r2[r1]
                if (r1 == 0) goto La9
                org.telegram.ui.ChatActivity r1 = org.telegram.p023ui.ChatActivity.this
                long r1 = org.telegram.p023ui.ChatActivity.m6703$$Nest$fgetmergeDialogId(r1)
                r3 = 0
                int r5 = (r1 > r3 ? 1 : (r1 == r3 ? 0 : -1))
                if (r5 == 0) goto Lab
                org.telegram.ui.ChatActivity r1 = org.telegram.p023ui.ChatActivity.this
                boolean[] r1 = org.telegram.p023ui.ChatActivity.m6651$$Nest$fgetendReached(r1)
                boolean r0 = r1[r0]
                if (r0 != 0) goto Lab
            La9:
                if (r7 == 0) goto Lb4
            Lab:
                org.telegram.ui.ChatActivity r7 = org.telegram.p023ui.ChatActivity.this
                boolean r0 = org.telegram.p023ui.ChatActivity.access$15100(r7)
                org.telegram.p023ui.ChatActivity.m7012$$Nest$mcheckDispatchHideSkeletons(r7, r0)
            Lb4:
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatActivityAdapter.notifyDataSetChanged(boolean):void");
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyDataSetChanged() {
            notifyDataSetChanged(false);
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemChanged(int i) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item changed " + i);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemChanged(i);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeChanged(int i, int i2) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item range changed " + i + ":" + i2);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRangeChanged(i, i2);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemInserted(int i) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item inserted " + i);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemInserted(i);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemMoved(int i, int i2) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item moved" + i + ":" + i2);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemMoved(i, i2);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeInserted(int i, int i2) {
            int i3;
            int i4;
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item range inserted " + i + ":" + i2);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            if (i == 1 && i2 > 0 && (i3 = i + i2) >= (i4 = this.messagesStartRow) && i3 < this.messagesEndRow) {
                MessageObject messageObject = (MessageObject) ChatActivity.this.messages.get(i3 - i4);
                MessageObject messageObject2 = (MessageObject) ChatActivity.this.messages.get((i3 - this.messagesStartRow) - 1);
                if ((ChatActivity.this.currentChat != null && messageObject.getFromChatId() == messageObject2.getFromChatId()) || (ChatActivity.this.currentUser != null && messageObject.isOutOwner() == messageObject2.isOutOwner())) {
                    notifyItemChanged(i);
                }
            }
            try {
                super.notifyItemRangeInserted(i, i2);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRemoved(int i) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item removed " + i);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRemoved(i);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        public void notifyItemRemoved(int i, boolean z) {
            if (BuildVars.LOGS_ENABLED) {
                StringBuilder sb = new StringBuilder();
                sb.append("notify item removed ");
                sb.append(i);
                sb.append(z ? " with thanos effect" : "");
                FileLog.m1157d(sb.toString());
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            if (z && ChatActivity.this.chatListItemAnimator != null && ChatActivity.this.chatListView.getItemAnimator() == ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListItemAnimator.prepareThanos(ChatActivity.this.chatListView.findViewHolderForAdapterPosition(i));
            }
            updateRowsInternal();
            try {
                super.notifyItemRemoved(i);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimatableAdapter, androidx.recyclerview.widget.RecyclerView.Adapter
        public void notifyItemRangeRemoved(int i, int i2) {
            if (BuildVars.LOGS_ENABLED) {
                FileLog.m1157d("notify item range removed" + i + ":" + i2);
            }
            if (!((BaseFragment) ChatActivity.this).fragmentBeginToShow) {
                ChatActivity.this.chatListView.setItemAnimator(null);
            } else if (ChatActivity.this.chatListView.getItemAnimator() != ChatActivity.this.chatListItemAnimator) {
                ChatActivity.this.chatListView.setItemAnimator(ChatActivity.this.chatListItemAnimator);
            }
            updateRowsInternal();
            try {
                super.notifyItemRangeRemoved(i, i2);
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    class SearchItemListener extends ActionBarMenuItem.ActionBarMenuItemSearchListener {
        private float searchAnimationProgress;
        private boolean whiteActionBar;

        private SearchItemListener() {
        }

        /* JADX WARN: Removed duplicated region for block: B:20:0x0061  */
        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean canCollapseSearch() {
            /*
                r5 = this;
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.Components.HashtagHistoryView r0 = org.telegram.p023ui.ChatActivity.m6678$$Nest$fgethashtagHistoryView(r0)
                boolean r0 = r0.isShowing()
                r1 = 1
                if (r0 == 0) goto Le
                return r1
            Le:
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                java.lang.String r0 = org.telegram.p023ui.ChatActivity.m6810$$Nest$fgetsearchingHashtag(r0)
                r2 = 0
                if (r0 == 0) goto L61
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.Components.ChatSearchTabs r3 = r0.hashtagSearchTabs
                if (r3 == 0) goto L61
                org.telegram.ui.Components.ViewPagerFixed r3 = org.telegram.p023ui.ChatActivity.m6806$$Nest$fgetsearchViewPager(r0)
                android.view.View r3 = r3.getCurrentView()
                boolean r4 = r3 instanceof org.telegram.p023ui.ChatActivityContainer
                if (r4 == 0) goto L2d
                org.telegram.ui.ChatActivityContainer r3 = (org.telegram.p023ui.ChatActivityContainer) r3
                org.telegram.ui.ChatActivity r0 = r3.chatActivity
            L2d:
                android.widget.FrameLayout r3 = org.telegram.p023ui.ChatActivity.m6707$$Nest$fgetmessagesSearchListContainer(r0)
                java.lang.Object r3 = r3.getTag()
                if (r3 != 0) goto L3b
                org.telegram.p023ui.ChatActivity.m7104$$Nest$mshowMessagesSearchListView(r0, r1)
                return r2
            L3b:
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.Components.ChatSearchTabs r0 = r0.hashtagSearchTabs
                org.telegram.ui.Components.ViewPagerFixed$TabsView r0 = r0.tabs
                int r0 = r0.getCurrentPosition()
                org.telegram.ui.ChatActivity r3 = org.telegram.p023ui.ChatActivity.this
                int r3 = org.telegram.p023ui.ChatActivity.m6638$$Nest$fgetdefaultSearchPage(r3)
                if (r0 == r3) goto L73
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                org.telegram.ui.Components.ChatSearchTabs r1 = r0.hashtagSearchTabs
                org.telegram.ui.Components.ViewPagerFixed$TabsView r1 = r1.tabs
                int r0 = org.telegram.p023ui.ChatActivity.m6638$$Nest$fgetdefaultSearchPage(r0)
                org.telegram.ui.ChatActivity r3 = org.telegram.p023ui.ChatActivity.this
                int r3 = org.telegram.p023ui.ChatActivity.m6638$$Nest$fgetdefaultSearchPage(r3)
                r1.scrollToTab(r0, r3)
                return r2
            L61:
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                android.widget.FrameLayout r0 = org.telegram.p023ui.ChatActivity.m6707$$Nest$fgetmessagesSearchListContainer(r0)
                java.lang.Object r0 = r0.getTag()
                if (r0 == 0) goto L73
                org.telegram.ui.ChatActivity r0 = org.telegram.p023ui.ChatActivity.this
                org.telegram.p023ui.ChatActivity.m7104$$Nest$mshowMessagesSearchListView(r0, r2)
                return r2
            L73:
                return r1
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.SearchItemListener.canCollapseSearch():boolean");
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchFilterCleared(FiltersView.MediaFilterData mediaFilterData) {
            super.onSearchFilterCleared(mediaFilterData);
            SearchTagsList searchTagsList = ChatActivity.this.actionBarSearchTags;
            if (searchTagsList != null) {
                searchTagsList.clear();
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.searchingReaction = null;
            chatActivity.updateSearchUpDownButtonVisibility(true);
            ChatActivity.this.updatePagedownButtonVisibility(true);
            ChatActivity.this.setFilterMessages(false);
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchCollapse() {
            TLRPC.Chat chat;
            ChatActivity.this.searching = false;
            ChatActivity.this.updatePagedownButtonVisibility(true);
            ChatActivity.this.updateSearchUpDownButtonVisibility(true);
            if (ChatActivity.this.searchCalendarButton != null) {
                ChatActivity.this.searchCalendarButton.setVisibility(0);
            }
            if (ChatActivity.this.searchUserButton != null) {
                ChatActivity.this.searchUserButton.setVisibility(0);
            }
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionContainer.getAdapter().lambda$searchUsernameOrHashtag$7(null, 0, null, false, true);
                ChatActivity.this.searchingForUser = false;
            }
            ChatActivity.this.mentionContainer.setReversed(false);
            ChatActivity.this.mentionContainer.getAdapter().setSearchingMentions(false);
            ChatActivity.this.checkUi_botMenuPosition();
            ChatActivity.this.searchingUserMessages = null;
            ChatActivity.this.searchingChatMessages = null;
            ChatActivity.this.searchingHashtag = null;
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.searchItem.setSearchFieldHint(LocaleController.getString(chatActivity.isSupportedTags() ? C2369R.string.SavedTagSearchHint : C2369R.string.Search));
            ChatActivity.this.searchItem.setSearchFieldCaption(null);
            AndroidUtilities.updateViewVisibilityAnimated(ChatActivity.this.avatarContainer, true, 0.95f, true);
            if (ChatActivity.this.editTextItem != null && ChatActivity.this.editTextItem.getTag() != null) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(0);
                    ChatActivity.this.checkEditTextItemMenu();
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(8);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(8);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(8);
                }
            } else if (ChatActivity.this.chatActivityEnterView.hasText() && TextUtils.isEmpty(ChatActivity.this.chatActivityEnterView.getSlowModeTimer()) && ((chat = ChatActivity.this.currentChat) == null || ChatObject.canSendPlain(chat))) {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(8);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(0);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(8);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(8);
                }
            } else {
                if (ChatActivity.this.headerItem != null) {
                    ChatActivity.this.headerItem.setVisibility(0);
                }
                if (ChatActivity.this.audioCallIconItem != null && ChatActivity.this.showAudioCallAsIcon) {
                    ChatActivity.this.audioCallIconItem.setVisibility(0);
                }
                if (ChatActivity.this.searchIconItem != null && ChatActivity.this.showSearchAsIcon) {
                    ChatActivity.this.searchIconItem.setVisibility(0);
                }
                if (ChatActivity.this.editTextItem != null) {
                    ChatActivity.this.editTextItem.setVisibility(8);
                }
                if (ChatActivity.this.attachItem != null) {
                    ChatActivity.this.attachItem.setVisibility(8);
                }
            }
            if (ChatActivity.this.searchViewPager != null) {
                if (ChatActivity.this.hashtagSearchTabs.tabs.getCurrentPosition() != 0) {
                    ChatActivity.this.hashtagSearchTabs.tabs.scrollToTab(0, 0);
                    ChatActivity.this.requestClearSearchPages = true;
                } else {
                    ChatActivity.this.searchViewPager.clearViews();
                }
            }
            if (ChatActivity.this.chatMode == 3 || ChatActivity.this.chatMode == 8 || ((ChatActivity.this.threadMessageId == 0 && !UserObject.isReplyUser(ChatActivity.this.currentUser)) || (ChatActivity.this.threadMessageObject != null && ChatActivity.this.threadMessageObject.getRepliesCount() < 10))) {
                ChatActivity.this.searchItem.setVisibility(8);
            }
            ChatActivity.this.searchItemVisible = false;
            ChatActivity.this.getMediaDataController().clearFoundMessageObjects();
            if (ChatActivity.this.searchType == 3) {
                HashtagSearchController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearSearchResults(3);
            } else {
                HashtagSearchController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearSearchResults();
            }
            if (ChatActivity.this.messagesSearchAdapter != null) {
                ChatActivity.this.messagesSearchAdapter.notifyDataSetChanged();
            }
            ChatActivity.this.removeSelectedMessageHighlight();
            ChatActivity.this.updateBottomOverlay();
            ChatActivity.this.updatePinnedMessageView(true);
            ChatActivity.this.updateVisibleRows();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.searchAnimationProgress, 0.0f);
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$SearchItemListener$$ExternalSyntheticLambda3
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$onSearchCollapse$0(valueAnimator);
                }
            });
            valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
            valueAnimatorOfFloat.setDuration(320L);
            valueAnimatorOfFloat.start();
            ChatActivity.this.messagesSearchListContainer.setAlpha(0.0f);
            ChatActivity.this.messagesSearchListContainer.setVisibility(8);
            ChatActivity.this.messagesSearchListContainer.setTag(null);
            ChatActivity.this.updateSearchListEmptyView();
            ChatActivity chatActivity2 = ChatActivity.this;
            chatActivity2.searchingReaction = null;
            chatActivity2.updateSearchUpDownButtonVisibility(true);
            ChatActivity.this.updatePagedownButtonVisibility(true);
            SearchTagsList searchTagsList = ChatActivity.this.actionBarSearchTags;
            if (searchTagsList != null) {
                searchTagsList.clear();
                ChatActivity.this.actionBarSearchTags.show(false);
            }
            ChatSearchTabs chatSearchTabs = ChatActivity.this.hashtagSearchTabs;
            if (chatSearchTabs != null) {
                chatSearchTabs.show(false);
            }
            ChatActivity.this.setFilterMessages(false);
            ChatActivity.this.hashtagHistoryView.show(false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onSearchCollapse$0(ValueAnimator valueAnimator) {
            setSearchAnimationProgress(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchExpand() {
            ChatSearchTabs chatSearchTabs;
            ChatActivity.this.searching = true;
            ChatActivity.this.updatePagedownButtonVisibility(true);
            ChatActivity.this.updateSearchUpDownButtonVisibility(true);
            if ((ChatActivity.this.threadMessageId != 0 && ChatActivity.this.chatMode != 3) || UserObject.isReplyUser(ChatActivity.this.currentUser)) {
                ChatActivity chatActivity = ChatActivity.this;
                if (!chatActivity.preventReopenSearchWithText) {
                    chatActivity.lambda$openSearchWithText$374(null);
                }
            }
            if (ChatActivity.this.openSearchKeyboard) {
                ChatActivity.this.saveKeyboardPositionBeforeTransition();
                ChatActivity chatActivity2 = ChatActivity.this;
                if (!chatActivity2.isInsideContainer) {
                    AndroidUtilities.requestAdjustResize(chatActivity2.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                }
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$SearchItemListener$$ExternalSyntheticLambda1
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$onSearchExpand$1();
                    }
                }, 500L);
                ChatActivity.this.hideSendButtonHints();
            }
            this.whiteActionBar = ChatActivity.this.searchingHashtag != null || ChatActivity.this.getDialogId() == ChatActivity.this.getUserConfig().getClientUserId();
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.searchAnimationProgress, 1.0f);
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$SearchItemListener$$ExternalSyntheticLambda2
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                    this.f$0.lambda$onSearchExpand$2(valueAnimator);
                }
            });
            valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
            valueAnimatorOfFloat.setDuration(320L);
            valueAnimatorOfFloat.start();
            ChatActivity chatActivity3 = ChatActivity.this;
            SearchTagsList searchTagsList = chatActivity3.actionBarSearchTags;
            if (searchTagsList != null) {
                searchTagsList.show(!chatActivity3.isInsideContainer && searchTagsList.hasFilters() && ChatActivity.this.searchingHashtag == null);
            }
            if (ChatActivity.this.searchingHashtag == null || (chatSearchTabs = ChatActivity.this.hashtagSearchTabs) == null || chatSearchTabs.tabs.getCurrentPosition() == ChatActivity.this.defaultSearchPage) {
                return;
            }
            ChatActivity chatActivity4 = ChatActivity.this;
            chatActivity4.hashtagSearchTabs.tabs.scrollToTab(chatActivity4.defaultSearchPage, ChatActivity.this.defaultSearchPage);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onSearchExpand$1() {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.searchWas = false;
            chatActivity.searchItem.getSearchField().requestFocus();
            AndroidUtilities.showKeyboard(ChatActivity.this.searchItem.getSearchField());
            ChatActivity.this.removeKeyboardPositionBeforeTransition();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onSearchExpand$2(ValueAnimator valueAnimator) {
            setSearchAnimationProgress(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }

        public void setSearchAnimationProgress(float f) {
            this.searchAnimationProgress = f;
            if (this.whiteActionBar) {
                int themedColor = ChatActivity.this.getThemedColor(Theme.key_actionBarDefaultIcon);
                ActionBar actionBar = ((BaseFragment) ChatActivity.this).actionBar;
                ChatActivity chatActivity = ChatActivity.this;
                int i = Theme.key_actionBarActionModeDefaultIcon;
                actionBar.setItemsColor(ColorUtils.blendARGB(themedColor, chatActivity.getThemedColor(i), this.searchAnimationProgress), false);
                ((BaseFragment) ChatActivity.this).actionBar.setItemsColor(ChatActivity.this.getThemedColor(i), true);
                ((BaseFragment) ChatActivity.this).actionBar.setItemsBackgroundColor(ColorUtils.blendARGB(ChatActivity.this.getThemedColor(Theme.key_actionBarDefaultSelector), ChatActivity.this.getThemedColor(Theme.key_actionBarActionModeDefaultSelector), this.searchAnimationProgress), false);
                ((BaseFragment) ChatActivity.this).actionBar.setBackgroundColor(ColorUtils.blendARGB(ChatActivity.this.getThemedColor(Theme.key_actionBarDefault), ChatActivity.this.getThemedColor(Theme.key_actionBarActionModeDefault), this.searchAnimationProgress));
                ActionBar actionBar2 = ((BaseFragment) ChatActivity.this).actionBar;
                int i2 = Theme.key_actionBarDefaultSearch;
                actionBar2.setSearchTextColor(ColorUtils.blendARGB(Theme.getColor(i2), ChatActivity.this.getThemedColor(Theme.key_windowBackgroundWhiteBlackText), this.searchAnimationProgress), false);
                ((BaseFragment) ChatActivity.this).actionBar.setSearchTextColor(ColorUtils.blendARGB(Theme.getColor(Theme.key_actionBarDefaultSearchPlaceholder), ChatActivity.this.getThemedColor(Theme.key_windowBackgroundWhiteGrayText), this.searchAnimationProgress), true);
                ((BaseFragment) ChatActivity.this).actionBar.setSearchCursorColor(ColorUtils.blendARGB(Theme.getColor(i2), ChatActivity.this.getThemedColor(Theme.key_windowBackgroundWhiteBlueText), this.searchAnimationProgress));
                ChatActivity chatActivity2 = ChatActivity.this;
                if (!chatActivity2.isInsideContainer && chatActivity2.getParentActivity() != null) {
                    AndroidUtilities.setLightStatusBar(ChatActivity.this.getParentActivity().getWindow(), ChatActivity.this.isLightStatusBar());
                }
            }
            View view = ChatActivity.this.fragmentView;
            if (view != null) {
                view.invalidate();
            }
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onSearchPressed(EditText editText) {
            ChatActivity chatActivity = ChatActivity.this;
            boolean z = true;
            chatActivity.searchWas = true;
            boolean z2 = false;
            chatActivity.updateSearchButtons(0, 0, -1);
            ChatActivity chatActivity2 = ChatActivity.this;
            chatActivity2.searchingQuery = editText != null ? editText.getText().toString() : chatActivity2.searchingQuery;
            if (!TextUtils.isEmpty(ChatActivity.this.searchingQuery) && (ChatActivity.this.searchingQuery.startsWith("$") || ChatActivity.this.searchingQuery.startsWith("#"))) {
                if (ChatActivity.this.searchingQuery.contains("@")) {
                    ChatActivity chatActivity3 = ChatActivity.this;
                    chatActivity3.presentFragment(new HashtagActivity(chatActivity3.searchingQuery, ((BaseFragment) ChatActivity.this).resourceProvider));
                    return;
                }
                if (ChatActivity.this.searchingHashtag == null) {
                    ChatActivity chatActivity4 = ChatActivity.this;
                    chatActivity4.searchingHashtag = chatActivity4.searchingQuery;
                    this.whiteActionBar = true;
                    ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(this.searchAnimationProgress, 1.0f);
                    valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$SearchItemListener$$ExternalSyntheticLambda0
                        @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                        public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                            this.f$0.lambda$onSearchPressed$3(valueAnimator);
                        }
                    });
                    valueAnimatorOfFloat.setInterpolator(CubicBezierInterpolator.EASE_OUT_QUINT);
                    valueAnimatorOfFloat.setDuration(320L);
                    valueAnimatorOfFloat.start();
                    ChatActivity chatActivity5 = ChatActivity.this;
                    SearchTagsList searchTagsList = chatActivity5.actionBarSearchTags;
                    if (searchTagsList != null) {
                        if (!chatActivity5.isInsideContainer && searchTagsList.hasFilters() && ChatActivity.this.searchingHashtag == null) {
                            z2 = true;
                        }
                        searchTagsList.show(z2);
                    }
                }
                ChatActivity chatActivity6 = ChatActivity.this;
                chatActivity6.searchingHashtag = chatActivity6.searchingQuery;
                ChatActivity.this.checkHashtagStories(true);
                HashtagSearchController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).putToHistory(ChatActivity.this.searchingHashtag);
                ChatActivity.this.hashtagHistoryView.update();
                View currentView = ChatActivity.this.searchViewPager.getCurrentView();
                if (ChatActivity.this.searchType == 3) {
                    HashtagSearchController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearSearchResults(3);
                } else {
                    HashtagSearchController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).clearSearchResults();
                }
                if (currentView instanceof ChatActivityContainer) {
                    ((ChatActivityContainer) currentView).chatActivity.updateSearchingHashtag(ChatActivity.this.searchingHashtag);
                }
                ChatActivity.this.updateSearchListEmptyView();
                ChatActivity.this.hashtagSearchEmptyView.showProgress(true);
                ChatActivity.this.showMessagesSearchListView(true);
            } else {
                ChatActivity.this.searchingHashtag = null;
                ChatSearchTabs chatSearchTabs = ChatActivity.this.hashtagSearchTabs;
                if (chatSearchTabs != null) {
                    chatSearchTabs.show(false);
                    ChatActivity.this.messagesSearchListContainer.setPadding(0, 0, 0, ChatActivity.this.getHashtagTabsHeight());
                    ChatActivity.this.updateSearchListEmptyView();
                }
                ChatSearchTabs chatSearchTabs2 = ChatActivity.this.hashtagSearchTabs;
                if (chatSearchTabs2 != null && chatSearchTabs2.tabs.getCurrentPosition() != 0) {
                    ChatActivity.this.hashtagSearchTabs.tabs.scrollToTab(0, 0);
                }
                z = false;
            }
            ChatSearchTabs chatSearchTabs3 = ChatActivity.this.hashtagSearchTabs;
            if (chatSearchTabs3 != null) {
                chatSearchTabs3.show(z);
            }
            ChatActivity.this.getMediaDataController().searchMessagesInChat(ChatActivity.this.searchingQuery, ChatActivity.this.dialog_id, ChatActivity.this.mergeDialogId, ((BaseFragment) ChatActivity.this).classGuid, 0, ChatActivity.this.threadMessageId, ChatActivity.this.searchingUserMessages, ChatActivity.this.searchingChatMessages, ChatActivity.this.searchingReaction);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onSearchPressed$3(ValueAnimator valueAnimator) {
            setSearchAnimationProgress(((Float) valueAnimator.getAnimatedValue()).floatValue());
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onTextChanged(EditText editText) {
            if (ChatActivity.this.searchingHashtag == null) {
                ChatActivity.this.showMessagesSearchListView(false);
            }
            ChatActivity.this.createSearchContainer();
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionContainer.getAdapter().lambda$searchUsernameOrHashtag$7("@" + editText.getText().toString(), 0, ChatActivity.this.messages, true, true);
            } else if (ChatActivity.this.searchingUserMessages == null && ChatActivity.this.searchingChatMessages == null && ChatActivity.this.searchUserButton != null && TextUtils.equals(editText.getText(), LocaleController.getString(C2369R.string.SearchFrom))) {
                ChatActivity.this.searchUserButton.callOnClick();
            }
            if (ChatActivity.this.searchingHashtag != null) {
                boolean z = editText.length() == 0;
                if (z != ChatActivity.this.hashtagHistoryView.isShowing()) {
                    ChatActivity.this.hashtagHistoryView.show(z);
                    ChatActivity.this.updateBottomOverlay();
                }
            }
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public boolean canClearCaption() {
            return ChatActivity.this.searchingHashtag == null;
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public void onCaptionCleared() {
            ChatActivity.this.createSearchContainer();
            if (ChatActivity.this.searchingUserMessages != null || ChatActivity.this.searchingChatMessages != null) {
                if (ChatActivity.this.searchUserButton != null) {
                    ChatActivity.this.searchUserButton.callOnClick();
                    return;
                }
                return;
            }
            if (ChatActivity.this.searchingForUser) {
                ChatActivity.this.mentionContainer.getAdapter().lambda$searchUsernameOrHashtag$7(null, 0, null, false, true);
                ChatActivity.this.searchingForUser = false;
                ChatActivity.this.searchItem.setSearchFieldText("", true);
            }
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.searchItem.setSearchFieldHint(LocaleController.getString(chatActivity.isSupportedTags() ? C2369R.string.SavedTagSearchHint : C2369R.string.Search));
            ChatActivity.this.searchCalendarButton.setVisibility(0);
            if (ChatActivity.this.searchUserButton != null) {
                ChatActivity.this.searchUserButton.setVisibility(0);
            }
            ChatActivity.this.searchingUserMessages = null;
            ChatActivity.this.searchingChatMessages = null;
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public boolean forceShowClear() {
            return ChatActivity.this.searchingForUser;
        }

        @Override // org.telegram.ui.ActionBar.ActionBarMenuItem.ActionBarMenuItemSearchListener
        public boolean showClearForCaption() {
            return ChatActivity.this.searchingHashtag == null;
        }
    }

    private SearchItemListener getSearchItemListener() {
        if (this.searchItemListener == null) {
            this.searchItemListener = new SearchItemListener();
        }
        return this.searchItemListener;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isSupportedTags() {
        return getUserConfig().getClientUserId() == getDialogId() && !getMessagesController().getSavedMessagesController().unsupported && getUserConfig().isPremium();
    }

    /* JADX INFO: Access modifiers changed from: private */
    class ChatMessageCellDelegate implements ChatMessageCell.ChatMessageCellDelegate {
        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean canDrawOutboundsContent() {
            return false;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public /* synthetic */ void didLongPressCustomBotButton(ChatMessageCell chatMessageCell, BotInlineKeyboard.ButtonCustom buttonCustom) {
            ChatMessageCell.ChatMessageCellDelegate.CC.$default$didLongPressCustomBotButton(this, chatMessageCell, buttonCustom);
        }

        private ChatMessageCellDelegate() {
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean isReplyOrSelf() {
            return UserObject.isReplyUser(ChatActivity.this.currentUser) || UserObject.isUserSelf(ChatActivity.this.currentUser);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressHint(ChatMessageCell chatMessageCell, int i) {
            if (i == 0) {
                ChatActivity.this.showPollSolution(chatMessageCell.getMessageObject(), ((TLRPC.TL_messageMediaPoll) chatMessageCell.getMessageObject().messageOwner.media).results);
            } else if (i == 1) {
                MessageObject messageObject = chatMessageCell.getMessageObject();
                TLRPC.MessageFwdHeader messageFwdHeader = messageObject.messageOwner.fwd_from;
                if (messageFwdHeader == null || TextUtils.isEmpty(messageFwdHeader.psa_type)) {
                    return;
                }
                String string = LocaleController.getString("PsaMessageInfo_" + messageObject.messageOwner.fwd_from.psa_type);
                if (TextUtils.isEmpty(string)) {
                    string = LocaleController.getString(C2369R.string.PsaMessageInfoDefault);
                }
                SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder(string);
                MessageObject.addLinks(false, spannableStringBuilder);
                MessageObject.GroupedMessages currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup();
                if (currentMessagesGroup != null) {
                    int size = currentMessagesGroup.posArray.size();
                    int i2 = 0;
                    while (true) {
                        if (i2 >= size) {
                            break;
                        }
                        if ((currentMessagesGroup.posArray.get(i2).flags & 1) != 0) {
                            MessageObject messageObject2 = currentMessagesGroup.messages.get(i2);
                            if (messageObject2 != messageObject) {
                                int childCount = ChatActivity.this.chatListView.getChildCount();
                                for (int i3 = 0; i3 < childCount; i3++) {
                                    View childAt = ChatActivity.this.chatListView.getChildAt(i3);
                                    if (childAt instanceof ChatMessageCell) {
                                        ChatMessageCell chatMessageCell2 = (ChatMessageCell) childAt;
                                        if (messageObject2.equals(chatMessageCell2.getMessageObject())) {
                                            chatMessageCell = chatMessageCell2;
                                        }
                                    }
                                }
                                messageObject = messageObject2;
                            }
                        } else {
                            i2++;
                        }
                    }
                }
                ChatActivity.this.showInfoHint(messageObject, spannableStringBuilder, 1);
            }
            chatMessageCell.showHintButton(false, true, i);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean shouldDrawThreadProgress(ChatMessageCell chatMessageCell, boolean z) {
            MessageObject messageObject;
            MessageObject.GroupedMessages currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup();
            if (currentMessagesGroup != null && !currentMessagesGroup.messages.isEmpty()) {
                messageObject = currentMessagesGroup.messages.get(0);
            } else {
                messageObject = chatMessageCell.getMessageObject();
            }
            if (messageObject == null) {
                return false;
            }
            boolean z2 = !ChatActivity.this.hideCommentLoading && messageObject.getId() == ChatActivity.this.commentLoadingMessageId;
            return z ? z2 && System.currentTimeMillis() - ChatActivity.this.commentLoadingStartedAt > 1000 : z2;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressEffect(ChatMessageCell chatMessageCell) {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.emojiAnimationsOverlay.onTapItem(chatMessageCell, chatActivity, true);
            ChatActivity.this.chatListView.cancelClickRunnables(false);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressFactCheckWhat(final ChatMessageCell chatMessageCell, final int i, final int i2) {
            MessageObject messageObject;
            TLRPC.TL_factCheck factCheck;
            String displayCountry;
            if (ChatActivity.this.factCheckHint != null) {
                ChatActivity.this.factCheckHint.hide();
            }
            if (chatMessageCell == null || ChatActivity.this.getContext() == null || (messageObject = chatMessageCell.getMessageObject()) == null || (factCheck = messageObject.getFactCheck()) == null || factCheck.country == null) {
                return;
            }
            try {
                displayCountry = new Locale("", factCheck.country).getDisplayCountry(LocaleController.getInstance().getCurrentLocale());
            } catch (Exception e) {
                FileLog.m1160e(e);
                displayCountry = factCheck.country;
            }
            ChatActivity.this.factCheckHint = new HintView2(ChatActivity.this.getContext(), 3).setMultilineText(true).setTextAlign(Layout.Alignment.ALIGN_NORMAL).setDuration(-1L).setHideByTouch(true).useScale(true).setRounding(12.0f);
            final HintView2 hintView2 = ChatActivity.this.factCheckHint;
            hintView2.setOnHiddenListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda14
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressFactCheckWhat$0(hintView2);
                }
            });
            ChatActivity.this.factCheckHint.setText(AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.FactCheckToast, displayCountry)));
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.contentView.addView(chatActivity.factCheckHint, LayoutHelper.createFrame(-1, 520.0f, 55, 16.0f, 0.0f, 16.0f, 0.0f));
            ChatActivity.this.contentView.post(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda15
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressFactCheckWhat$1(chatMessageCell, i2, i);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressFactCheckWhat$0(HintView2 hintView2) {
            ChatActivity.this.contentView.removeView(hintView2);
            if (hintView2 == ChatActivity.this.factCheckHint) {
                ChatActivity.this.factCheckHint = null;
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressFactCheckWhat$1(ChatMessageCell chatMessageCell, int i, int i2) {
            if (ChatActivity.this.factCheckHint == null) {
                return;
            }
            chatMessageCell.getLocationInWindow(new int[2]);
            ChatActivity.this.factCheckHint.setTranslationY(((r0[1] - ChatActivity.this.factCheckHint.getTop()) - AndroidUtilities.m1146dp(520.0f)) + i);
            ChatActivity.this.factCheckHint.setJointPx(0.0f, (-AndroidUtilities.m1146dp(16.0f)) + r0[0] + i2);
            ChatActivity.this.factCheckHint.show();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressFactCheck(ChatMessageCell chatMessageCell) {
            MessageObject primaryMessageObject;
            int childAdapterPosition;
            int scrollingOffsetForView;
            if (chatMessageCell == null || (primaryMessageObject = chatMessageCell.getPrimaryMessageObject()) == null) {
                return;
            }
            primaryMessageObject.factCheckExpanded = !primaryMessageObject.factCheckExpanded;
            primaryMessageObject.forceUpdate = true;
            if (ChatActivity.this.chatListView == null || ChatActivity.this.chatLayoutManager == null || ChatActivity.this.chatLayoutManager.hasPendingScrollPosition()) {
                childAdapterPosition = -1;
                scrollingOffsetForView = 0;
            } else {
                for (int childCount = ChatActivity.this.chatListView.getChildCount() - 1; childCount >= 0; childCount--) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(childCount);
                    childAdapterPosition = ChatActivity.this.chatListView.getChildAdapterPosition(childAt);
                    if (childAdapterPosition >= 0) {
                        if (childAt instanceof ChatMessageCell) {
                            if (((ChatMessageCell) childAt).getCurrentMessagesGroup() == null) {
                                scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                                break;
                            }
                        } else if (childAt instanceof ChatActionCell) {
                            scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                            break;
                        }
                    }
                }
                childAdapterPosition = -1;
                scrollingOffsetForView = 0;
            }
            ChatActivity.this.lambda$updateMessageAnimated$315(primaryMessageObject, false);
            if (ChatActivity.this.factCheckHint != null) {
                ChatActivity.this.factCheckHint.hide();
            }
            if (childAdapterPosition < 0 || chatMessageCell.getCurrentMessagesGroup() != null) {
                return;
            }
            ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(childAdapterPosition, scrollingOffsetForView);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void forceUpdate(ChatMessageCell chatMessageCell, boolean z) {
            MessageObject primaryMessageObject;
            int childAdapterPosition;
            int scrollingOffsetForView;
            if (chatMessageCell == null || (primaryMessageObject = chatMessageCell.getPrimaryMessageObject()) == null) {
                return;
            }
            primaryMessageObject.forceUpdate = true;
            if (ChatActivity.this.chatListView == null || ChatActivity.this.chatLayoutManager == null || ChatActivity.this.chatLayoutManager.hasPendingScrollPosition()) {
                childAdapterPosition = -1;
                scrollingOffsetForView = 0;
            } else {
                for (int childCount = ChatActivity.this.chatListView.getChildCount() - 1; childCount >= 0; childCount--) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(childCount);
                    childAdapterPosition = ChatActivity.this.chatListView.getChildAdapterPosition(childAt);
                    if (childAdapterPosition >= 0) {
                        if (childAt instanceof ChatMessageCell) {
                            if (((ChatMessageCell) childAt).getCurrentMessagesGroup() == null) {
                                scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                                break;
                            }
                        } else if (childAt instanceof ChatActionCell) {
                            scrollingOffsetForView = ChatActivity.this.getScrollingOffsetForView(childAt);
                            break;
                        }
                    }
                }
                childAdapterPosition = -1;
                scrollingOffsetForView = 0;
            }
            ChatActivity.this.lambda$updateMessageAnimated$315(primaryMessageObject, false);
            if (z && childAdapterPosition >= 0 && chatMessageCell.getCurrentMessagesGroup() == null) {
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(childAdapterPosition, scrollingOffsetForView);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didQuickShareStart(ChatMessageCell chatMessageCell, float f, float f2) {
            if (ChatActivity.this.getParentActivity() == null) {
                return;
            }
            if (ChatActivity.this.quickShareSelectorOverlay == null) {
                ChatActivity.this.quickShareSelectorOverlay = new QuickShareSelectorOverlayLayout(ChatActivity.this.getContext());
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.contentView.addView(chatActivity.quickShareSelectorOverlay, LayoutHelper.createFrame(-1, -1, 48));
            }
            ChatActivity.this.quickShareSelectorOverlay.open(chatMessageCell);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didQuickShareMove(ChatMessageCell chatMessageCell, float f, float f2) {
            if (ChatActivity.this.quickShareSelectorOverlay != null) {
                ChatActivity.this.quickShareSelectorOverlay.onTouchMoveEvent(chatMessageCell, f, f2);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didQuickShareEnd(ChatMessageCell chatMessageCell, float f, float f2) {
            if (ChatActivity.this.quickShareSelectorOverlay == null) {
                return;
            }
            ChatActivity.this.quickShareSelectorOverlay.close(chatMessageCell, sendMessageFromQuickShare(chatMessageCell));
        }

        private Bulletin sendMessageFromQuickShare(ChatMessageCell chatMessageCell) {
            Runnable runnable;
            MessageObject.GroupedMessages groupedMessages;
            if (ChatActivity.this.quickShareSelectorOverlay == null) {
                return null;
            }
            MessageObject selectedMessageObject = ChatActivity.this.quickShareSelectorOverlay.getSelectedMessageObject(chatMessageCell);
            final long selectedDialogId = ChatActivity.this.quickShareSelectorOverlay.getSelectedDialogId(chatMessageCell);
            if (selectedMessageObject == null || selectedDialogId == 0) {
                return null;
            }
            if (AlertsCreator.checkSlowMode(ChatActivity.this.getContext(), ((BaseFragment) ChatActivity.this).currentAccount, selectedDialogId, false)) {
                return null;
            }
            final ArrayList<MessageObject> arrayList = (selectedMessageObject.getGroupId() == 0 || (groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(selectedMessageObject.getGroupId())) == null) ? null : groupedMessages.messages;
            if (arrayList == null) {
                arrayList = new ArrayList<>();
                arrayList.add(selectedMessageObject);
            }
            boolean z = selectedDialogId == UserConfig.getInstance(UserConfig.selectedAccount).clientUserId;
            Runnable runnable2 = new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda23
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$sendMessageFromQuickShare$2(arrayList, selectedDialogId);
                }
            };
            if (z) {
                runnable2.run();
                runnable = null;
            } else {
                runnable = runnable2;
            }
            Context context = ChatActivity.this.getContext();
            ChatActivity chatActivity = ChatActivity.this;
            Bulletin bulletinCreateForwardedBulletin = BulletinFactory.createForwardedBulletin(context, chatActivity, null, 1, selectedDialogId, 1, chatActivity.getThemedColor(Theme.key_undo_background), ChatActivity.this.getThemedColor(Theme.key_undo_infoColor), 5000, null, runnable);
            return bulletinCreateForwardedBulletin.allowBlur().show(bulletinCreateForwardedBulletin.getLayout() instanceof Bulletin.LottieLayoutWithReactions);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$sendMessageFromQuickShare$2(ArrayList arrayList, long j) {
            AlertsCreator.showSendMediaAlert(SendMessagesHelper.getInstance(((BaseFragment) ChatActivity.this).currentAccount).sendMessage(arrayList, j, false, false, true, 0, null, -1, 0L, ChatActivity.this.getSendMonoForumPeerId(), ChatActivity.this.getSendMessageSuggestionParams()), ChatActivity.this, null);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressSideButton(ChatMessageCell chatMessageCell) {
            TLRPC.Message message;
            TLRPC.MessageReplyHeader messageReplyHeader;
            int i;
            TLRPC.MessageFwdHeader messageFwdHeader;
            MessageObject.GroupedMessages groupedMessages;
            if (ChatActivity.this.getParentActivity() == null) {
                return;
            }
            ChatActivity chatActivity = ChatActivity.this;
            if (chatActivity.topicsTabs != null && chatActivity.threadMessageId == 0 && (chatMessageCell.isForum || chatMessageCell.isMonoForum)) {
                ChatActivity.this.topicsTabs.selectTopic(chatMessageCell.getMessageObject().getTopicId(), true);
                return;
            }
            if (ChatActivity.this.getMessagesController().isFrozen()) {
                AccountFrozenAlert.show(((BaseFragment) ChatActivity.this).currentAccount);
                return;
            }
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                chatActivityEnterView.closeKeyboard();
            }
            MessageObject messageObject = chatMessageCell.getMessageObject();
            if (ChatActivity.this.chatMode == 2) {
                ChatActivity.this.chatActivityDelegate.openReplyMessage(messageObject.getId());
                ChatActivity.this.lambda$onBackPressed$371();
                return;
            }
            if (ChatActivity.this.chatMode == 3 || ((ChatActivity.this.chatMode == 7 && ChatActivity.this.searchType == 2) || ((UserObject.isReplyUser(ChatActivity.this.currentUser) || UserObject.isUserSelf(ChatActivity.this.currentUser)) && (messageFwdHeader = messageObject.messageOwner.fwd_from) != null && messageFwdHeader.saved_from_peer != null))) {
                if (UserObject.isReplyUser(ChatActivity.this.currentUser) && (messageReplyHeader = (message = messageObject.messageOwner).reply_to) != null && (i = messageReplyHeader.reply_to_top_id) != 0) {
                    ChatActivity.this.openDiscussionMessageChat(messageReplyHeader.reply_to_peer_id.channel_id, null, i, 0L, -1, message.fwd_from.saved_from_msg_id, messageObject);
                    return;
                } else if (ChatActivity.this.chatMode == 7 && ChatActivity.this.searchType == 2) {
                    ChatActivity.this.openMessageInOriginalDialog(messageObject);
                    return;
                } else {
                    ChatActivity.this.openOriginalReplyChat(messageObject);
                    return;
                }
            }
            ArrayList<MessageObject> arrayList = (messageObject.getGroupId() == 0 || (groupedMessages = (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(messageObject.getGroupId())) == null) ? null : groupedMessages.messages;
            if (arrayList == null) {
                arrayList = new ArrayList<>();
                arrayList.add(messageObject);
            }
            boolean z = ChatActivity.this.getMessagesController().storiesEnabled() && StoryEntry.canRepostMessage(messageObject);
            ChatActivity chatActivity2 = ChatActivity.this;
            Context context = ChatActivity.this.getContext();
            ChatActivity chatActivity3 = ChatActivity.this;
            chatActivity2.showDialog(new DialogC31601(context, chatActivity3, arrayList, null, null, null, ChatObject.isChannel(chatActivity3.currentChat), null, null, false, false, z, null, ChatActivity.this.themeDelegate, z, messageObject));
            AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
            ChatActivity.this.fragmentView.requestLayout();
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$1 */
        /* loaded from: classes5.dex */
        class DialogC31601 extends ShareAlert {
            final /* synthetic */ boolean val$includeStory;
            final /* synthetic */ MessageObject val$messageObject;

            /* JADX WARN: 'super' call moved to the top of the method (can break code semantics) */
            DialogC31601(Context context, ChatActivity chatActivity, ArrayList arrayList, String str, String str2, String str3, boolean z, String str4, String str5, boolean z2, boolean z3, boolean z4, Integer num, Theme.ResourcesProvider resourcesProvider, boolean z5, MessageObject messageObject) {
                super(context, chatActivity, arrayList, str, str2, str3, z, str4, str5, z2, z3, z4, num, resourcesProvider);
                this.val$includeStory = z5;
                this.val$messageObject = messageObject;
                this.includeStoryFromMessage = z5;
            }

            @Override // org.telegram.p023ui.Components.ShareAlert, org.telegram.p023ui.ActionBar.BottomSheet
            public void dismissInternal() {
                AndroidUtilities.requestAdjustResize(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
                super.dismissInternal();
                if (ChatActivity.this.chatActivityEnterView.getVisibility() == 0) {
                    ChatActivity.this.fragmentView.requestLayout();
                }
            }

            @Override // org.telegram.p023ui.Components.ShareAlert
            protected void onShareStory(final View view) {
                StoryRecorder.SourceView sourceViewFromShareCell = view instanceof ShareDialogCell ? StoryRecorder.SourceView.fromShareCell((ShareDialogCell) view) : null;
                ArrayList arrayList = new ArrayList();
                MessageObject.GroupedMessages groupedMessages = this.val$messageObject.getGroupId() != 0 ? (MessageObject.GroupedMessages) ChatActivity.this.groupedMessagesMap.get(this.val$messageObject.getGroupId()) : null;
                if (groupedMessages != null) {
                    arrayList.addAll(groupedMessages.messages);
                } else {
                    arrayList.add(this.val$messageObject);
                }
                final StoryRecorder storyRecorder = StoryRecorder.getInstance(ChatActivity.this.getParentActivity(), this.currentAccount);
                storyRecorder.setOnPrepareCloseListener(new Utilities.Callback4() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$1$$ExternalSyntheticLambda0
                    @Override // org.telegram.messenger.Utilities.Callback4
                    public final void run(Object obj, Object obj2, Object obj3, Object obj4) {
                        this.f$0.lambda$onShareStory$1(storyRecorder, view, (Long) obj, (Runnable) obj2, (Boolean) obj3, (Long) obj4);
                    }
                });
                storyRecorder.openRepost(sourceViewFromShareCell, StoryEntry.repostMessage(arrayList));
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$onShareStory$1(StoryRecorder storyRecorder, View view, Long l, Runnable runnable, Boolean bool, final Long l2) {
                boolean zBooleanValue = bool.booleanValue();
                StoryRecorder.SourceView sourceViewFromShareCell = null;
                if (zBooleanValue) {
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$1$$ExternalSyntheticLambda1
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$onShareStory$0(l2);
                        }
                    });
                    lambda$new$0();
                    storyRecorder.replaceSourceView(null);
                } else {
                    if ((view instanceof ShareDialogCell) && view.isAttachedToWindow()) {
                        sourceViewFromShareCell = StoryRecorder.SourceView.fromShareCell((ShareDialogCell) view);
                    }
                    storyRecorder.replaceSourceView(sourceViewFromShareCell);
                }
                AndroidUtilities.runOnUIThread(runnable);
            }

            /* JADX INFO: Access modifiers changed from: private */
            public /* synthetic */ void lambda$onShareStory$0(Long l) {
                String str;
                String string;
                TLRPC.Chat chat;
                if (l.longValue() < 0 && (chat = ChatActivity.this.getMessagesController().getChat(Long.valueOf(-l.longValue()))) != null) {
                    str = chat.title;
                } else {
                    str = "";
                }
                BulletinFactory bulletinFactoryM1267of = BulletinFactory.m1267of(ChatActivity.this);
                int i = C2369R.raw.contact_check;
                if (TextUtils.isEmpty(str)) {
                    string = LocaleController.getString(C2369R.string.RepostedToProfile);
                } else {
                    string = LocaleController.formatString(C2369R.string.RepostedToChannelProfile, str);
                }
                bulletinFactoryM1267of.createSimpleBulletin(i, AndroidUtilities.replaceTags(string)).show();
            }

            @Override // org.telegram.p023ui.Components.ShareAlert
            protected void onSend(LongSparseArray longSparseArray, int i, TLRPC.TL_forumTopic tL_forumTopic, boolean z) {
                ChatActivity.this.createUndoView();
                if (ChatActivity.this.undoView == null || !z) {
                    return;
                }
                if (longSparseArray.size() != 1) {
                    ChatActivity.this.undoView.showWithAction(0L, 53, Integer.valueOf(i), Integer.valueOf(longSparseArray.size()), (Runnable) null, (Runnable) null);
                } else {
                    if (((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id == ChatActivity.this.getUserConfig().getClientUserId() && BulletinFactory.m1267of(ChatActivity.this).showForwardedBulletinWithTag(((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id, i)) {
                        return;
                    }
                    ChatActivity.this.undoView.showWithAction(((TLRPC.Dialog) longSparseArray.valueAt(0)).f1577id, 53, Integer.valueOf(i), tL_forumTopic, (Runnable) null, (Runnable) null);
                }
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean needPlayMessage(ChatMessageCell chatMessageCell, MessageObject messageObject, boolean z) {
            Runnable runnableSendSecretMediaDelete = null;
            runnableSendSecretMediaDelete = null;
            if (messageObject.isVoiceOnce() || messageObject.isRoundOnce()) {
                if (ChatActivity.this.secretVoicePlayer != null && ChatActivity.this.secretVoicePlayer.isShown()) {
                    return false;
                }
                try {
                    AudioManager audioManager = (AudioManager) ApplicationLoader.applicationContext.getSystemService(MediaStreamTrack.AUDIO_TRACK_KIND);
                    int streamVolume = audioManager.getStreamVolume(3);
                    if (streamVolume == 0) {
                        audioManager.adjustStreamVolume(3, streamVolume, 1);
                        if (!messageObject.isOutOwner()) {
                            BulletinFactory.m1267of(ChatActivity.this).createImageBulletin(C2369R.drawable.tooltip_sound, LocaleController.getString(C2369R.string.VoiceOnceTurnOnSound)).show(true);
                            return false;
                        }
                    }
                } catch (Exception unused) {
                }
                ChatActivity.this.secretVoicePlayer = new SecretVoicePlayer(ChatActivity.this.getContext());
                SecretVoicePlayer secretVoicePlayer = ChatActivity.this.secretVoicePlayer;
                Runnable runnableSendSecretMessageRead = (messageObject.isOutOwner() || AyuConfig.saveDeletedMessages) ? null : ChatActivity.this.sendSecretMessageRead(messageObject, true);
                if (!messageObject.isOutOwner() && !AyuConfig.saveDeletedMessages) {
                    runnableSendSecretMediaDelete = ChatActivity.this.sendSecretMediaDelete(messageObject);
                }
                secretVoicePlayer.setCell(chatMessageCell, runnableSendSecretMessageRead, runnableSendSecretMediaDelete);
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.showDialog(chatActivity.secretVoicePlayer);
                return false;
            }
            if (messageObject.isVoice() || messageObject.isRoundVideo()) {
                boolean zPlayMessage = MediaController.getInstance().playMessage(messageObject, z);
                MediaController.getInstance().setVoiceMessagesPlaylist(zPlayMessage ? ChatActivity.this.createVoiceMessagesPlaylist(messageObject, false) : null, false);
                return zPlayMessage;
            }
            if (messageObject.isMusic()) {
                return MediaController.getInstance().setPlaylist(ChatActivity.this.chatAdapter.getMessages(), messageObject, ChatActivity.this.mergeDialogId, !ChatActivity.this.chatAdapter.isFiltered, null);
            }
            return false;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void videoTimerReached() {
            ChatActivity.this.showNoSoundHint();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressTime(ChatMessageCell chatMessageCell) {
            ChatActivity.this.createUndoView();
            if (ChatActivity.this.undoView == null) {
                return;
            }
            ChatActivity.this.undoView.showWithAction(ChatActivity.this.dialog_id, 47, (Runnable) null);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressChannelAvatar(ChatMessageCell chatMessageCell, TLRPC.Chat chat, int i, float f, float f2, boolean z) {
            MessageObject messageObject;
            if (chat == null) {
                return;
            }
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport()) {
                ChatActivity.this.processRowSelect(chatMessageCell, true, f, f2);
                return;
            }
            if (!z && chat.signature_profiles && (messageObject = chatMessageCell.getMessageObject()) != null && messageObject.getDialogId() != UserObject.REPLY_BOT) {
                ChatActivity.this.openUserProfile(DialogObject.getPeerDialogId(messageObject.messageOwner.from_id));
            } else {
                openChat(chatMessageCell, chat, i, z);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressHiddenForward(ChatMessageCell chatMessageCell) {
            if (chatMessageCell.getMessageObject().isImportedForward()) {
                didPressTime(chatMessageCell);
            } else {
                ChatActivity.this.showForwardHint(chatMessageCell);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressOther(ChatMessageCell chatMessageCell, float f, float f2) {
            final MessageObject messageObject = chatMessageCell.getMessageObject();
            if (messageObject.type == 16) {
                TLRPC.MessageAction messageAction = messageObject.messageOwner.action;
                if (messageAction instanceof TLRPC.TL_messageActionConferenceCall) {
                    int i = 0;
                    final HashSet hashSet = new HashSet();
                    hashSet.add(Long.valueOf(ChatActivity.this.getDialogId()));
                    ArrayList arrayList = ((TLRPC.TL_messageActionConferenceCall) messageAction).other_participants;
                    int size = arrayList.size();
                    while (i < size) {
                        Object obj = arrayList.get(i);
                        i++;
                        hashSet.add(Long.valueOf(DialogObject.getPeerDialogId((TLRPC.Peer) obj)));
                    }
                    final TLRPC.TL_inputGroupCallInviteMessage tL_inputGroupCallInviteMessage = new TLRPC.TL_inputGroupCallInviteMessage();
                    tL_inputGroupCallInviteMessage.msg_id = messageObject.getId();
                    final AlertDialog alertDialog = new AlertDialog(ChatActivity.this.getContext(), 3);
                    TL_phone.getGroupCall getgroupcall = new TL_phone.getGroupCall();
                    getgroupcall.call = tL_inputGroupCallInviteMessage;
                    getgroupcall.limit = ChatActivity.this.getMessagesController().conferenceCallSizeLimit;
                    final int iSendRequest = ChatActivity.this.getConnectionsManager().sendRequest(getgroupcall, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda9
                        @Override // org.telegram.tgnet.RequestDelegate
                        public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                            this.f$0.lambda$didPressOther$4(alertDialog, hashSet, tL_inputGroupCallInviteMessage, messageObject, tLObject, tL_error);
                        }
                    });
                    alertDialog.setOnCancelListener(new DialogInterface.OnCancelListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda10
                        @Override // android.content.DialogInterface.OnCancelListener
                        public final void onCancel(DialogInterface dialogInterface) {
                            this.f$0.lambda$didPressOther$5(iSendRequest, dialogInterface);
                        }
                    });
                    alertDialog.showDelayed(600L);
                    return;
                }
                TLRPC.User user = ChatActivity.this.currentUser;
                if (user != null) {
                    boolean zIsVideoCall = messageObject.isVideoCall();
                    ChatActivity chatActivity = ChatActivity.this;
                    TLRPC.UserFull userFull = chatActivity.userInfo;
                    VoIPHelper.startCall(user, zIsVideoCall, userFull != null && userFull.video_calls_available, chatActivity.getParentActivity(), ChatActivity.this.getMessagesController().getUserFull(ChatActivity.this.currentUser.f1734id), ChatActivity.this.getAccountInstance());
                    return;
                }
                return;
            }
            ChatActivity.this.createMenu(chatMessageCell, true, false, f, f2, messageObject.isMusic(), false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressOther$4(final AlertDialog alertDialog, final HashSet hashSet, final TLRPC.TL_inputGroupCallInviteMessage tL_inputGroupCallInviteMessage, final MessageObject messageObject, final TLObject tLObject, final TLRPC.TL_error tL_error) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda29
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressOther$3(alertDialog, tLObject, hashSet, tL_inputGroupCallInviteMessage, messageObject, tL_error);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressOther$3(AlertDialog alertDialog, TLObject tLObject, HashSet hashSet, TLRPC.TL_inputGroupCallInviteMessage tL_inputGroupCallInviteMessage, MessageObject messageObject, TLRPC.TL_error tL_error) {
            alertDialog.dismiss();
            if (tLObject instanceof TL_phone.groupCall) {
                TL_phone.groupCall groupcall = (TL_phone.groupCall) tLObject;
                ChatActivity.this.getMessagesController().putUsers(groupcall.users, false);
                ChatActivity.this.getMessagesController().putChats(groupcall.chats, false);
                if (!groupcall.participants.isEmpty()) {
                    VoIPHelper.joinConference(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).currentAccount, tL_inputGroupCallInviteMessage, messageObject.messageOwner.action.video, groupcall.call);
                    return;
                } else {
                    ChatActivity.this.showDialog(new CreateGroupCallSheet(ChatActivity.this.getContext(), hashSet));
                    return;
                }
            }
            if (tL_error != null && "GROUPCALL_INVALID".equalsIgnoreCase(tL_error.text)) {
                ChatActivity.this.showDialog(new CreateGroupCallSheet(ChatActivity.this.getContext(), hashSet));
            } else if (tL_error != null) {
                BulletinFactory.m1267of(ChatActivity.this).showForError(tL_error);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressOther$5(int i, DialogInterface dialogInterface) {
            ChatActivity.this.getConnectionsManager().cancelRequest(i, true);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressSponsoredClose(ChatMessageCell chatMessageCell) {
            ChatActivity.this.selectedObject = chatMessageCell.getMessageObject();
            ChatActivity.this.hideAds();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressSponsoredInfo(ChatMessageCell chatMessageCell, float f, float f2) {
            ChatActivity.this.createMenu(chatMessageCell, true, false, f, f2, false, false);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressUserStatus(ChatMessageCell chatMessageCell, TLRPC.User user, TLRPC.Document document, String str) {
            CharSequence string;
            ImageLocation forDocument;
            if (chatMessageCell == null) {
                return;
            }
            if (!TextUtils.isEmpty(str)) {
                Browser.openUrl(ChatActivity.this.getContext(), "https://" + ChatActivity.this.getMessagesController().linkPrefix + "/nft/" + str);
                return;
            }
            if (!user.premium || DialogObject.getEmojiStatusDocumentId(user.emoji_status) == 0) {
                BadgesController badgesController = BadgesController.INSTANCE;
                BadgeDTO badge = badgesController.getBadge(user);
                if (badge != null) {
                    boolean zIsDeveloper = badgesController.isDeveloper(user);
                    BulletinFactory bulletinFactoryM1267of = BulletinFactory.m1267of(ChatActivity.this);
                    TLRPC.Document documentFindDocument = AnimatedEmojiDrawable.findDocument(((BaseFragment) ChatActivity.this).currentAccount, badge.getDocumentId());
                    if (badge.getText() != null) {
                        string = LocaleUtils.formatWithUsernames(badge.getText());
                    } else {
                        string = LocaleController.formatString(zIsDeveloper ? C2369R.string.Developer : C2369R.string.Supporter, user.first_name);
                    }
                    bulletinFactoryM1267of.createEmojiBulletin(documentFindDocument, string, zIsDeveloper ? null : LocaleController.getString(C2369R.string.FragmentUsernameOpen), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda17
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$didPressUserStatus$6();
                        }
                    }).show();
                    return;
                }
                return;
            }
            ChatActivity chatActivity = ChatActivity.this;
            PremiumPreviewBottomSheet premiumPreviewBottomSheet = new PremiumPreviewBottomSheet(chatActivity, ((BaseFragment) chatActivity).currentAccount, user, ChatActivity.this.themeDelegate);
            chatMessageCell.getLocationOnScreen(new int[2]);
            premiumPreviewBottomSheet.startEnterFromX = chatMessageCell.getNameStatusX();
            premiumPreviewBottomSheet.startEnterFromY = chatMessageCell.getNameStatusY();
            premiumPreviewBottomSheet.startEnterFromScale = chatMessageCell.getScaleX();
            premiumPreviewBottomSheet.startEnterFromX1 = chatMessageCell.getLeft();
            premiumPreviewBottomSheet.startEnterFromY1 = chatMessageCell.getTop();
            premiumPreviewBottomSheet.startEnterFromView = chatMessageCell;
            int colorId = UserObject.getColorId(user);
            if (colorId >= 7) {
                MessagesController.PeerColors peerColors = MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).peerColors;
                MessagesController.PeerColor color = peerColors != null ? peerColors.getColor(colorId) : null;
                premiumPreviewBottomSheet.accentColor = color != null ? Integer.valueOf(color.getColor1()) : null;
            } else {
                premiumPreviewBottomSheet.accentColor = Integer.valueOf(ChatActivity.this.getThemedColor(Theme.keys_avatar_nameInMessage[colorId]));
            }
            AnimatedEmojiDrawable.SwapAnimatedEmojiDrawable swapAnimatedEmojiDrawable = chatMessageCell.currentNameStatusDrawable;
            if (swapAnimatedEmojiDrawable != null && (swapAnimatedEmojiDrawable.getDrawable() instanceof AnimatedEmojiDrawable)) {
                premiumPreviewBottomSheet.startEnterFromScale *= 0.95f;
                if (document != null) {
                    BackupImageView backupImageView = new BackupImageView(ChatActivity.this.getContext());
                    SvgHelper.SvgDrawable svgThumb = DocumentObject.getSvgThumb(document.thumbs, Theme.key_windowBackgroundWhiteGrayIcon, 0.2f);
                    TLRPC.PhotoSize closestPhotoSizeWithSize = FileLoader.getClosestPhotoSizeWithSize(document.thumbs, 90);
                    String str2 = "160_160";
                    if ("video/webm".equals(document.mime_type)) {
                        forDocument = ImageLocation.getForDocument(document);
                        str2 = "160_160_" + ImageLoader.AUTOPLAY_FILTER;
                        if (svgThumb != null) {
                            svgThumb.overrideWidthAndHeight(512, 512);
                        }
                    } else {
                        if (svgThumb != null && MessageObject.isAnimatedStickerDocument(document, false)) {
                            svgThumb.overrideWidthAndHeight(512, 512);
                        }
                        forDocument = ImageLocation.getForDocument(document);
                    }
                    String str3 = str2;
                    ImageLocation imageLocation = forDocument;
                    backupImageView.setLayerNum(7);
                    backupImageView.setRoundRadius(AndroidUtilities.m1146dp(4.0f));
                    backupImageView.setImage(imageLocation, str3, ImageLocation.getForDocument(closestPhotoSizeWithSize, document), "140_140", svgThumb, document);
                    if (MessageObject.isTextColorEmoji(document)) {
                        Integer num = premiumPreviewBottomSheet.accentColor;
                        backupImageView.setColorFilter(new PorterDuffColorFilter(num != null ? num.intValue() : ChatActivity.this.getThemedColor(Theme.key_windowBackgroundWhiteBlueIcon), PorterDuff.Mode.SRC_IN));
                        premiumPreviewBottomSheet.statusStickerSet = MessageObject.getInputStickerSet(document);
                    } else {
                        premiumPreviewBottomSheet.statusStickerSet = MessageObject.getInputStickerSet(document);
                    }
                    premiumPreviewBottomSheet.overrideTitleIcon = backupImageView;
                    premiumPreviewBottomSheet.isEmojiStatus = true;
                }
            }
            ChatActivity.this.showDialog(premiumPreviewBottomSheet);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressUserStatus$6() {
            ChatActivity chatActivity = ChatActivity.this;
            SupporterBottomSheet.showAlert(chatActivity, chatActivity.getResourceProvider());
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressUserAvatar(ChatMessageCell chatMessageCell, TLRPC.User user, float f, float f2, boolean z) throws IOException {
            boolean z2 = true;
            if (((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport()) {
                ChatActivity.this.processRowSelect(chatMessageCell, true, f, f2);
                return;
            }
            if (chatMessageCell != null && chatMessageCell.getMessageObject() != null && chatMessageCell.getMessageObject().isSponsored()) {
                didPressInstantButton(chatMessageCell, 10);
                return;
            }
            if (!ChatObject.isForum(ChatActivity.this.currentChat) && !ChatActivity.this.isThreadChat()) {
                z2 = false;
            }
            openProfile(user, z2);
        }

        /* JADX WARN: Multi-variable type inference failed */
        /* JADX WARN: Type inference failed for: r0v10 */
        /* JADX WARN: Type inference failed for: r0v2 */
        /* JADX WARN: Type inference failed for: r0v3, types: [boolean, int] */
        /* JADX WARN: Type inference failed for: r10v11 */
        /* JADX WARN: Type inference failed for: r10v3 */
        /* JADX WARN: Type inference failed for: r10v4, types: [boolean, int] */
        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean didLongPressUserAvatar(final ChatMessageCell chatMessageCell, final TLRPC.User user, float f, float f2) {
            AvatarPreviewer.Data dataM1240of;
            if (!isAvatarPreviewerEnabled()) {
                return false;
            }
            ChatActivity chatActivity = ChatActivity.this;
            ?? r10 = (chatActivity.currentChat == null || (chatActivity.bottomChannelButtonsLayout != null && ChatActivity.this.bottomChannelButtonsLayout.getVisibility() == 0) || (ChatActivity.this.bottomOverlay != null && ChatActivity.this.bottomOverlay.getVisibility() == 0)) ? 0 : 1;
            ChatActivity chatActivity2 = ChatActivity.this;
            ?? r0 = (chatActivity2.currentChat == null || !(chatActivity2.threadMessageId == 0 || ChatActivity.this.isTopic) || (ChatObject.isChannel(ChatActivity.this.currentChat) && !ChatActivity.this.currentChat.megagroup)) ? 0 : 1;
            AvatarPreviewer.MenuItem[] menuItemArr = new AvatarPreviewer.MenuItem[r10 + 2 + r0];
            menuItemArr[0] = AvatarPreviewer.MenuItem.OPEN_PROFILE;
            menuItemArr[1] = AvatarPreviewer.MenuItem.SEND_MESSAGE;
            char c = 2;
            if (r10 != 0) {
                menuItemArr[2] = AvatarPreviewer.MenuItem.MENTION;
                c = 3;
            }
            if (r0 != 0) {
                menuItemArr[c] = AvatarPreviewer.MenuItem.SEARCH_MESSAGES;
            }
            TLRPC.UserFull userFull = ChatActivity.this.getMessagesController().getUserFull(user.f1734id);
            if (userFull == null) {
                dataM1240of = AvatarPreviewer.Data.m1240of(user, ((BaseFragment) ChatActivity.this).classGuid, menuItemArr);
            } else {
                dataM1240of = AvatarPreviewer.Data.m1241of(user, userFull, menuItemArr);
                if (!AvatarPreviewer.canPreview(dataM1240of)) {
                    dataM1240of = AvatarPreviewer.Data.m1240of(user, ((BaseFragment) ChatActivity.this).classGuid, menuItemArr);
                }
            }
            if (AvatarPreviewer.canPreview(dataM1240of)) {
                AvatarPreviewer avatarPreviewer = AvatarPreviewer.getInstance();
                ChatActivity chatActivity3 = ChatActivity.this;
                avatarPreviewer.show((ViewGroup) chatActivity3.fragmentView, chatActivity3.themeDelegate, dataM1240of, new AvatarPreviewer.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda36
                    @Override // org.telegram.ui.AvatarPreviewer.Callback
                    public final void onMenuClick(AvatarPreviewer.MenuItem menuItem) {
                        this.f$0.lambda$didLongPressUserAvatar$7(chatMessageCell, user, menuItem);
                    }
                });
                return true;
            }
            ItemOptions.makeOptions(ChatActivity.this, chatMessageCell).add(C2369R.drawable.msg_openprofile, LocaleController.getString(C2369R.string.OpenProfile), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda37
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUserAvatar$8(user);
                }
            }).add(C2369R.drawable.msg_discussion, LocaleController.getString(C2369R.string.SendMessage), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda38
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUserAvatar$9(chatMessageCell, user);
                }
            }).addIf(r10, C2369R.drawable.msg_mention, LocaleController.getString(C2369R.string.Mention), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda39
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUserAvatar$10(user);
                }
            }).addIf(r0, C2369R.drawable.msg_search, LocaleController.getString(C2369R.string.AvatarPreviewSearchMessages), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda40
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUserAvatar$11(user);
                }
            }).setDrawScrim(false).setGravity(3).forceBottom(true).translate(0.0f, -AndroidUtilities.m1146dp(48.0f)).show();
            return true;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressUserAvatar$7(ChatMessageCell chatMessageCell, TLRPC.User user, AvatarPreviewer.MenuItem menuItem) {
            int i = AnonymousClass147.$SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[menuItem.ordinal()];
            if (i == 1) {
                lambda$didLongPressUserAvatar$8(user);
                return;
            }
            if (i == 2) {
                lambda$didLongPressUserAvatar$10(user);
            } else if (i == 3) {
                ChatActivity.this.lambda$openSearchWithUser$376(user);
            } else {
                if (i != 6) {
                    return;
                }
                lambda$didLongPressUserAvatar$9(chatMessageCell, user);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressUserAvatar$11(TLRPC.User user) {
            ChatActivity.this.lambda$openSearchWithUser$376(user);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: appendMention, reason: merged with bridge method [inline-methods] */
        public void lambda$didLongPressChannelAvatar$17(TLRPC.Chat chat) {
            SpannableStringBuilder spannableStringBuilder;
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                CharSequence fieldText = chatActivityEnterView.getFieldText();
                if (fieldText != null) {
                    spannableStringBuilder = new SpannableStringBuilder(fieldText);
                    if (fieldText.charAt(fieldText.length() - 1) != ' ') {
                        spannableStringBuilder.append((CharSequence) " ");
                    }
                } else {
                    spannableStringBuilder = new SpannableStringBuilder();
                }
                if (spannableStringBuilder.length() > 0 && spannableStringBuilder.charAt(spannableStringBuilder.length() - 1) != ' ') {
                    spannableStringBuilder.append(' ');
                }
                String publicUsername = ChatObject.getPublicUsername(chat);
                if (publicUsername != null) {
                    spannableStringBuilder.append((CharSequence) "@").append((CharSequence) publicUsername).append((CharSequence) " ");
                    ChatActivity.this.chatActivityEnterView.setFieldText(spannableStringBuilder);
                    AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda48
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$appendMention$12();
                        }
                    }, 200L);
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$appendMention$12() {
            ChatActivity.this.chatActivityEnterView.openKeyboard();
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: appendMention, reason: merged with bridge method [inline-methods] */
        public void lambda$didLongPressUserAvatar$10(TLRPC.User user) {
            SpannableStringBuilder spannableStringBuilder;
            ChatActivityEnterView chatActivityEnterView = ChatActivity.this.chatActivityEnterView;
            if (chatActivityEnterView != null) {
                CharSequence fieldText = chatActivityEnterView.getFieldText();
                String str = " ";
                if (fieldText != null) {
                    spannableStringBuilder = new SpannableStringBuilder(fieldText);
                    if (fieldText.charAt(fieldText.length() - 1) != ' ') {
                        spannableStringBuilder.append((CharSequence) " ");
                    }
                } else {
                    spannableStringBuilder = new SpannableStringBuilder();
                }
                if (spannableStringBuilder.length() > 0 && spannableStringBuilder.charAt(spannableStringBuilder.length() - 1) != ' ') {
                    spannableStringBuilder.append(' ');
                }
                String publicUsername = UserObject.getPublicUsername(user);
                if (publicUsername != null) {
                    SpannableStringBuilder spannableStringBuilderAppend = spannableStringBuilder.append((CharSequence) "@").append((CharSequence) publicUsername);
                    if (ExteraConfig.addCommaAfterMention) {
                        str = ", ";
                    }
                    spannableStringBuilderAppend.append((CharSequence) str);
                } else {
                    String firstName = UserObject.getFirstName(user, false);
                    StringBuilder sb = new StringBuilder();
                    sb.append(firstName);
                    if (ExteraConfig.addCommaAfterMention) {
                        str = ", ";
                    }
                    sb.append(str);
                    SpannableString spannableString = new SpannableString(sb.toString());
                    spannableString.setSpan(new URLSpanUserMention("" + user.f1734id, 3), 0, firstName.length(), 33);
                    spannableStringBuilder.append((CharSequence) spannableString);
                }
                ChatActivity.this.chatActivityEnterView.setFieldText(spannableStringBuilder);
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda50
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$appendMention$13();
                    }
                }, 200L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$appendMention$13() {
            ChatActivity.this.chatActivityEnterView.openKeyboard();
        }

        /* JADX WARN: Multi-variable type inference failed */
        /* JADX WARN: Removed duplicated region for block: B:17:0x0040  */
        /* JADX WARN: Type inference failed for: r0v1 */
        /* JADX WARN: Type inference failed for: r0v2, types: [boolean, int] */
        /* JADX WARN: Type inference failed for: r0v9 */
        /* JADX WARN: Type inference failed for: r10v13 */
        /* JADX WARN: Type inference failed for: r10v4 */
        /* JADX WARN: Type inference failed for: r10v5, types: [boolean, int] */
        /* JADX WARN: Type inference failed for: r1v2 */
        /* JADX WARN: Type inference failed for: r1v3, types: [boolean, int] */
        /* JADX WARN: Type inference failed for: r1v9 */
        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public boolean didLongPressChannelAvatar(final org.telegram.p023ui.Cells.ChatMessageCell r8, final org.telegram.tgnet.TLRPC.Chat r9, int r10, float r11, float r12) {
            /*
                Method dump skipped, instructions count: 346
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatMessageCellDelegate.didLongPressChannelAvatar(org.telegram.ui.Cells.ChatMessageCell, org.telegram.tgnet.TLRPC$Chat, int, float, float):boolean");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressChannelAvatar$14(TLRPC.Chat chat, ChatMessageCell chatMessageCell, AvatarPreviewer.MenuItem menuItem) {
            int i = AnonymousClass147.$SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[menuItem.ordinal()];
            if (i == 1) {
                lambda$didLongPressChannelAvatar$15(chat);
                return;
            }
            if (i == 2) {
                lambda$didLongPressChannelAvatar$17(chat);
                return;
            }
            if (i == 3) {
                ChatActivity.this.lambda$openSearchWithChat$377(chat);
            } else if (i == 4 || i == 5) {
                openChat(chatMessageCell, chat, 0, false);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressChannelAvatar$16(ChatMessageCell chatMessageCell, TLRPC.Chat chat) {
            openChat(chatMessageCell, chat, 0, false);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressChannelAvatar$18(TLRPC.Chat chat) {
            ChatActivity.this.lambda$openSearchWithChat$377(chat);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: openProfile, reason: merged with bridge method [inline-methods] */
        public void lambda$didLongPressUserAvatar$8(TLRPC.User user) {
            openProfile(user, false);
        }

        private void openProfile(TLRPC.User user, boolean z) {
            if (user == null || user.f1734id == UserObject.VERIFY) {
                return;
            }
            TLRPC.UserProfilePhoto userProfilePhoto = user.photo;
            int i = 0;
            if (userProfilePhoto == null || (userProfilePhoto instanceof TLRPC.TL_userProfilePhotoEmpty)) {
                z = false;
            }
            Bundle bundle = new Bundle();
            bundle.putLong("user_id", user.f1734id);
            bundle.putBoolean("expandPhoto", z);
            ProfileActivity profileActivity = new ProfileActivity(bundle);
            TLRPC.User user2 = ChatActivity.this.currentUser;
            if (user2 != null && user2.f1734id == user.f1734id) {
                i = 1;
            }
            profileActivity.setPlayProfileAnimation(i);
            AndroidUtilities.setAdjustResizeToNothing(ChatActivity.this.getParentActivity(), ((BaseFragment) ChatActivity.this).classGuid);
            ChatActivity.this.presentFragment(profileActivity);
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: openProfile, reason: merged with bridge method [inline-methods] */
        public void lambda$didLongPressChannelAvatar$15(TLRPC.Chat chat) {
            openProfile(chat, false);
        }

        private void openProfile(TLRPC.Chat chat, boolean z) {
            if (chat != null) {
                Bundle bundle = new Bundle();
                bundle.putLong("chat_id", chat.f1571id);
                bundle.putBoolean("expandPhoto", z);
                ChatActivity.this.presentFragment(new ProfileActivity(bundle));
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        /* renamed from: openDialog, reason: merged with bridge method [inline-methods] */
        public void lambda$didLongPressUserAvatar$9(ChatMessageCell chatMessageCell, TLRPC.User user) {
            if (user != null) {
                Bundle bundle = new Bundle();
                bundle.putLong("user_id", user.f1734id);
                if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this, chatMessageCell.getMessageObject())) {
                    ChatActivity.this.presentFragment(new ChatActivity(bundle));
                }
            }
        }

        private void openChat(ChatMessageCell chatMessageCell, final TLRPC.Chat chat, final int i, boolean z) {
            ChatActivity chatActivity = ChatActivity.this;
            TLRPC.Chat chat2 = chatActivity.currentChat;
            if (chat2 != null && chat.f1571id == chat2.f1571id) {
                ChatAvatarContainer chatAvatarContainer = chatActivity.avatarContainer;
                if (chatAvatarContainer != null && i == 0) {
                    chatAvatarContainer.openProfile(false);
                    return;
                } else {
                    if (chatMessageCell.getMessageObject() != null) {
                        ChatActivity.this.scrollToMessageId(i, chatMessageCell.getMessageObject().getId(), true, 0, false, 0);
                        return;
                    }
                    return;
                }
            }
            if (chat2 == null || chat.f1571id != chat2.f1571id || chatActivity.isThreadChat()) {
                Bundle bundle = new Bundle();
                bundle.putLong("chat_id", chat.f1571id);
                if (i != 0) {
                    bundle.putInt("message_id", i);
                }
                final Browser.Progress progressMakeProgressForForward = z ? ChatActivity.this.makeProgressForForward(chatMessageCell) : null;
                if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this, chatMessageCell.getMessageObject(), progressMakeProgressForForward)) {
                    final ChatActivity chatActivity2 = new ChatActivity(bundle);
                    if (progressMakeProgressForForward != null && i != 0) {
                        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda28
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$openChat$19(progressMakeProgressForForward, chat, i, chatActivity2);
                            }
                        }, 5000L);
                        progressMakeProgressForForward.init();
                    } else {
                        ChatActivity.this.presentFragment(chatActivity2);
                    }
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$openChat$19(final Browser.Progress progress, TLRPC.Chat chat, int i, final ChatActivity chatActivity) {
            progress.onCancel(ChatActivity.this.getMessagesController().ensureMessagesLoaded(-chat.f1571id, i, new MessagesController.MessagesLoadedCallback() { // from class: org.telegram.ui.ChatActivity.ChatMessageCellDelegate.2
                @Override // org.telegram.messenger.MessagesController.MessagesLoadedCallback
                public void onMessagesLoaded(boolean z) {
                    progress.end();
                    ChatActivity.this.presentFragment(chatActivity);
                }

                @Override // org.telegram.messenger.MessagesController.MessagesLoadedCallback
                public void onError() {
                    progress.end();
                    ChatActivity.this.presentFragment(chatActivity);
                }
            }));
        }

        private boolean isAvatarPreviewerEnabled() {
            if (UserObject.isUserSelf(ChatActivity.this.currentUser)) {
                return true;
            }
            TLRPC.Chat chat = ChatActivity.this.currentChat;
            if (chat != null) {
                return !ChatObject.isChannel(chat) || ChatActivity.this.currentChat.megagroup;
            }
            return false;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressBotButton(ChatMessageCell chatMessageCell, TLRPC.KeyboardButton keyboardButton) {
            if (ChatActivity.this.chatMode == 5 || ChatActivity.this.getParentActivity() == null) {
                return;
            }
            if (ChatActivity.this.bottomChannelButtonsLayout.getVisibility() != 0 || (keyboardButton instanceof TLRPC.TL_keyboardButtonSwitchInline) || (keyboardButton instanceof TLRPC.TL_keyboardButtonCallback) || (keyboardButton instanceof TLRPC.TL_keyboardButtonGame) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrl) || (keyboardButton instanceof TLRPC.TL_keyboardButtonBuy) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrlAuth) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUserProfile) || (keyboardButton instanceof TLRPC.TL_keyboardButtonRequestPeer) || (keyboardButton instanceof TLRPC.TL_keyboardButtonCopy)) {
                ChatActivity.this.chatActivityEnterView.didPressedBotButton(keyboardButton, chatMessageCell.getMessageObject(), chatMessageCell.getMessageObject(), ChatActivity.this.makeProgressForBotButton(chatMessageCell, keyboardButton instanceof TLRPC.TL_keyboardButtonUrl ? keyboardButton.url : null));
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressCustomBotButton(ChatMessageCell chatMessageCell, BotInlineKeyboard.ButtonCustom buttonCustom) {
            final TLRPC.Message message;
            final MessageObject messageObject = chatMessageCell.getMessageObject();
            if (messageObject == null || (message = messageObject.messageOwner) == null) {
                return;
            }
            int i = buttonCustom.f1433id;
            if (i == 1) {
                AlertsCreator.showDeclineSuggestedPostDialog(ChatActivity.this, DialogObject.getPeerDialogId(message.from_id), true, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda3
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$didPressCustomBotButton$20(message, (String) obj);
                    }
                });
                return;
            }
            if (i != 2) {
                if (i == 3) {
                    ChatActivity.this.createMenu(chatMessageCell, true, false, chatMessageCell.getLastTouchX(), chatMessageCell.getLastTouchY(), true, false, true);
                    return;
                } else {
                    if (i == 4) {
                        ChatActivity.this.topicsTabs.selectTopic(messageObject.getTopicId(), true);
                        return;
                    }
                    return;
                }
            }
            if (message.suggested_post != null) {
                final boolean zCanManageMonoForum = ChatObject.canManageMonoForum(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.currentChat);
                if (zCanManageMonoForum) {
                    ChatObject.canUserDoChannelDirectAdminAction(((BaseFragment) ChatActivity.this).currentAccount, ChatActivity.this.currentChat, 5);
                }
                Runnable runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda4
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressCustomBotButton$24(message, zCanManageMonoForum, messageObject);
                    }
                };
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC.SuggestedPost suggestedPost = message.suggested_post;
                chatActivity.checkStarsNeedSheet(runnable, AmountUtils$Amount.m1213of(suggestedPost != null ? suggestedPost.price : null), !zCanManageMonoForum);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressCustomBotButton$20(TLRPC.Message message, String str) {
            ChatActivity.this.getMessagesController().rejectSuggestedMessage(DialogObject.getPeerDialogId(message.peer_id), message.f1597id, str);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressCustomBotButton$24(final TLRPC.Message message, boolean z, final MessageObject messageObject) {
            int i;
            int i2;
            SpannableStringBuilder spannableStringBuilder = new SpannableStringBuilder();
            spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfo, ChatActivity.this.getMessagesController().getPeerName(DialogObject.getPeerDialogId(message.from_id)))));
            spannableStringBuilder.append((CharSequence) "\n\n");
            AmountUtils$Amount amountUtils$AmountOfSafe = AmountUtils$Amount.ofSafe(message.suggested_post.price);
            if (amountUtils$AmountOfSafe.currency == AmountUtils$Currency.TON) {
                i = ChatActivity.this.getMessagesController().config.tonSuggestedPostCommissionPermille.get();
            } else {
                i = ChatActivity.this.getMessagesController().config.starsSuggestedPostCommissionPermille.get();
            }
            if (z) {
                amountUtils$AmountOfSafe = AmountUtils$Amount.fromNano((amountUtils$AmountOfSafe.asNano() / 1000) * i, amountUtils$AmountOfSafe.currency);
            }
            AmountUtils$Amount amountUtils$Amount = amountUtils$AmountOfSafe;
            if (message.suggested_post.schedule_date == 0) {
                if (z) {
                    spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfoAnytimeAdmin2, amountUtils$Amount.formatAsDecimalSpaced(), AffiliateProgramFragment.percents(i))));
                } else {
                    spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfoAnytimeUser2, amountUtils$Amount.formatAsDecimalSpaced())));
                }
            } else if (z) {
                spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfoAdmin2, amountUtils$Amount.formatAsDecimalSpaced(), MessageSuggestionOfferSheet.formatDateTime(message.suggested_post.schedule_date), AffiliateProgramFragment.percents(i))));
            } else {
                spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfoUser2, amountUtils$Amount.formatAsDecimalSpaced(), MessageSuggestionOfferSheet.formatDateTime(message.suggested_post.schedule_date))));
            }
            spannableStringBuilder.append(' ');
            spannableStringBuilder.append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.SuggestedMessageAcceptInfo3, Long.valueOf(MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).config.starsSuggestedPostAgeMin.get(TimeUnit.HOURS)))));
            final Bulletin[] bulletinArr = new Bulletin[1];
            final DialogInterface.OnDismissListener onDismissListener = new DialogInterface.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda20
                @Override // android.content.DialogInterface.OnDismissListener
                public final void onDismiss(DialogInterface dialogInterface) {
                    ChatActivity.ChatMessageCellDelegate.m7182$r8$lambda$gJSAhEldbsG5w0n2ohMP3dIQow(bulletinArr, dialogInterface);
                }
            };
            final AlertDialog[] alertDialogArr = new AlertDialog[1];
            ChatActivity chatActivity = ChatActivity.this;
            String string = LocaleController.getString(C2369R.string.SuggestedPostAcceptTitle);
            if (message.suggested_post.schedule_date == 0) {
                i2 = C2369R.string.Next;
            } else {
                i2 = C2369R.string.SuggestedPostPublish;
            }
            AlertDialog alertDialogShowSimpleConfirmAlert = AlertsCreator.showSimpleConfirmAlert(chatActivity, string, spannableStringBuilder, LocaleController.getString(i2), false, new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda21
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressCustomBotButton$23(message, alertDialogArr, messageObject, onDismissListener);
                }
            });
            alertDialogArr[0] = alertDialogShowSimpleConfirmAlert;
            alertDialogShowSimpleConfirmAlert.setOnDismissListener(onDismissListener);
            if (z && amountUtils$Amount.currency == AmountUtils$Currency.STARS) {
                bulletinArr[0] = BulletinFactory.m1266of(Bulletin.BulletinWindow.make(ChatActivity.this.getContext()), ((BaseFragment) ChatActivity.this).resourceProvider).createSimpleBulletin(C2369R.raw.info, LocaleController.getString(C2369R.string.SuggestedMessageAcceptStarsDisclaimer), 10).setDuration(60000).show(true);
            }
        }

        /* renamed from: $r8$lambda$gJSAhEldbsG5w0n2ohMP-3dIQow, reason: not valid java name */
        public static /* synthetic */ void m7182$r8$lambda$gJSAhEldbsG5w0n2ohMP3dIQow(Bulletin[] bulletinArr, DialogInterface dialogInterface) {
            Bulletin bulletin = bulletinArr[0];
            if (bulletin != null) {
                bulletin.hide();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressCustomBotButton$23(TLRPC.Message message, AlertDialog[] alertDialogArr, final MessageObject messageObject, DialogInterface.OnDismissListener onDismissListener) {
            if (message.suggested_post.schedule_date == 0) {
                alertDialogArr[0].setOnDismissListener(null);
                AlertsCreator.createSuggestedMessageDatePickerDialog(ChatActivity.this.getContext(), 0L, new AlertsCreator.ScheduleDatePickerDelegate() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda35
                    @Override // org.telegram.ui.Components.AlertsCreator.ScheduleDatePickerDelegate
                    public final void didSelectDate(boolean z, int i, int i2) {
                        this.f$0.lambda$didPressCustomBotButton$22(messageObject, z, i, i2);
                    }
                }, ChatActivity.this.getResourceProvider(), 1).show().setOnDismissListener(onDismissListener);
            } else {
                ChatActivity.this.getMessagesController().approveSuggestedMessage(DialogObject.getPeerDialogId(messageObject.messageOwner.peer_id), messageObject.messageOwner.f1597id, 0);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressCustomBotButton$22(MessageObject messageObject, boolean z, int i, int i2) {
            if (z) {
                ChatActivity.this.getMessagesController().approveSuggestedMessage(DialogObject.getPeerDialogId(messageObject.messageOwner.peer_id), messageObject.messageOwner.f1597id, i);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void needShowPremiumBulletin(int i) {
            String strReplaceSingleTag;
            try {
                if (i == 0) {
                    ChatActivity.this.checkTopUndoView();
                    if (ChatActivity.this.topUndoView == null) {
                        return;
                    }
                    ChatActivity.this.topUndoView.showWithAction(0L, 84, null, new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda32
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$needShowPremiumBulletin$25();
                        }
                    });
                    ChatActivity.this.topUndoView.performHapticFeedback(3, 2);
                    return;
                }
                if (i == 1) {
                    BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.transcribe, ChatActivity.this.getMessagesController().transcribeAudioTrialCooldownUntil > 0 ? AndroidUtilities.replaceTags(LocaleController.formatPluralString("TranscriptionTrialLeftUntil", TranscribeButton.getTranscribeTrialCount(((BaseFragment) ChatActivity.this).currentAccount), LocaleController.formatDateTime(ChatActivity.this.getMessagesController().transcribeAudioTrialCooldownUntil, true))) : AndroidUtilities.replaceTags(LocaleController.formatPluralString("TranscriptionTrialLeft", TranscribeButton.getTranscribeTrialCount(((BaseFragment) ChatActivity.this).currentAccount), new Object[0])), 6).show(true);
                    ChatActivity.this.fragmentView.performHapticFeedback(3, 2);
                    return;
                }
                if (i == 2 || i == 3) {
                    String dateTime = LocaleController.formatDateTime(ChatActivity.this.getMessagesController().transcribeAudioTrialCooldownUntil, true);
                    BulletinFactory bulletinFactoryM1267of = BulletinFactory.m1267of(ChatActivity.this);
                    int i2 = C2369R.raw.transcribe;
                    SpannableStringBuilder spannableStringBuilderAppend = new SpannableStringBuilder().append((CharSequence) AndroidUtilities.replaceTags(LocaleController.formatPluralString("TranscriptionTrialEnd", ChatActivity.this.getMessagesController().transcribeAudioTrialWeeklyNumber, new Object[0]))).append((CharSequence) " ");
                    if (i == 2) {
                        strReplaceSingleTag = AndroidUtilities.replaceSingleTag(LocaleController.getString(C2369R.string.TranscriptionTrialEndBuy), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda33
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$needShowPremiumBulletin$26();
                            }
                        });
                    } else {
                        strReplaceSingleTag = ChatActivity.this.getMessagesController().transcribeAudioTrialCooldownUntil <= 0 ? "" : AndroidUtilities.replaceSingleTag(LocaleController.formatString(C2369R.string.TranscriptionTrialEndWaitOrBuy, dateTime), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda34
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$needShowPremiumBulletin$27();
                            }
                        });
                    }
                    bulletinFactoryM1267of.createSimpleBulletin(i2, spannableStringBuilderAppend.append(strReplaceSingleTag), 6, 7000).show(true);
                    BotWebViewVibrationEffect.APP_ERROR.vibrate();
                }
            } catch (Exception unused) {
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$needShowPremiumBulletin$25() {
            new PremiumFeatureBottomSheet(ChatActivity.this, 8, true).show();
            ChatActivity.this.getMessagesController().pressTranscribeButton();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$needShowPremiumBulletin$26() {
            new PremiumFeatureBottomSheet(ChatActivity.this, 8, true).show();
            ChatActivity.this.getMessagesController().pressTranscribeButton();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$needShowPremiumBulletin$27() {
            new PremiumFeatureBottomSheet(ChatActivity.this, 8, true).show();
            ChatActivity.this.getMessagesController().pressTranscribeButton();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didLongPressBotButton(ChatMessageCell chatMessageCell, final TLRPC.KeyboardButton keyboardButton) throws UnsupportedEncodingException {
            ChatMessageCell chatMessageCell2;
            if (ChatActivity.this.chatMode == 5 || ChatActivity.this.getParentActivity() == null) {
                return;
            }
            if (ChatActivity.this.bottomChannelButtonsLayout.getVisibility() != 0 || (keyboardButton instanceof TLRPC.TL_keyboardButtonSwitchInline) || (keyboardButton instanceof TLRPC.TL_keyboardButtonCallback) || (keyboardButton instanceof TLRPC.TL_keyboardButtonGame) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrl) || (keyboardButton instanceof TLRPC.TL_keyboardButtonBuy) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUrlAuth) || (keyboardButton instanceof TLRPC.TL_keyboardButtonUserProfile) || (keyboardButton instanceof TLRPC.TL_keyboardButtonCopy)) {
                if (keyboardButton instanceof TLRPC.TL_keyboardButtonCopy) {
                    ChatActivity.this.didLongPressCopyButton(((TLRPC.TL_keyboardButtonCopy) keyboardButton).copy_text);
                    return;
                }
                if (!TextUtils.isEmpty(keyboardButton.url)) {
                    chatMessageCell2 = chatMessageCell;
                    ChatActivity.this.openClickableLink(null, keyboardButton.url, true, chatMessageCell2, chatMessageCell.getMessageObject(), false);
                } else {
                    chatMessageCell2 = chatMessageCell;
                    BottomSheet.Builder builder = new BottomSheet.Builder(ChatActivity.this.getParentActivity(), false, ChatActivity.this.themeDelegate);
                    builder.setTitle(keyboardButton.text);
                    builder.setItems(new CharSequence[]{LocaleController.getString(C2369R.string.CopyTitle), keyboardButton.data != null ? LocaleController.getString(C2369R.string.CopyCallback) : null, keyboardButton.query != null ? LocaleController.getString(C2369R.string.CopyInlineQuery) : null, keyboardButton.user_id != 0 ? LocaleController.getString(C2369R.string.CopyID) : null}, new DialogInterface.OnClickListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda11
                        @Override // android.content.DialogInterface.OnClickListener
                        public final void onClick(DialogInterface dialogInterface, int i) {
                            this.f$0.lambda$didLongPressBotButton$28(keyboardButton, dialogInterface, i);
                        }
                    });
                    ChatActivity.this.showDialog(builder.create());
                }
                try {
                    chatMessageCell2.performHapticFeedback(VibratorUtils.getType(0), 1);
                } catch (Exception unused) {
                }
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressBotButton$28(TLRPC.KeyboardButton keyboardButton, DialogInterface dialogInterface, int i) {
            if (i == 0) {
                AndroidUtilities.addToClipboard(keyboardButton.text);
            } else if (i == 1) {
                AndroidUtilities.addToClipboard(ChatUtils.getInstance().getTextFromCallback(keyboardButton.data));
            } else if (i == 2) {
                AndroidUtilities.addToClipboard(keyboardButton.query);
            } else if (i == 3) {
                AndroidUtilities.addToClipboard(String.valueOf(keyboardButton.user_id));
            }
            ChatActivity.this.createUndoView();
            if (ChatActivity.this.undoView != null) {
                ChatActivity.this.undoView.showWithAction(0L, 58, (Runnable) null);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressReaction(ChatMessageCell chatMessageCell, TLRPC.ReactionCount reactionCount, boolean z, float f, float f2) {
            ChatActivity.this.didPressReaction(chatMessageCell, reactionCount, z, f, f2);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean didLongPressToDoButton(ChatMessageCell chatMessageCell, TLRPC.TodoItem todoItem) {
            if (ChatActivity.this.getParentActivity() == null || ChatActivity.this.getContext() == null) {
                return false;
            }
            if (ChatActivity.this.savedMessagesTagHint != null && ChatActivity.this.savedMessagesTagHint.shown()) {
                ChatActivity.this.savedMessagesTagHint.hide();
            }
            if (ChatActivity.this.videoConversionTimeHint != null && ChatActivity.this.videoConversionTimeHint.shown()) {
                ChatActivity.this.videoConversionTimeHint.hide();
            }
            MessageObject primaryMessageObject = chatMessageCell.getPrimaryMessageObject();
            TLRPC.MessageMedia media = MessageObject.getMedia(primaryMessageObject);
            if (primaryMessageObject == null || !(media instanceof TLRPC.TL_messageMediaToDo)) {
                return false;
            }
            ChatActivity.this.selectedObject = primaryMessageObject;
            ChatActivity.this.selectedObjectGroup = null;
            TodoItemMenu todoItemMenu = new TodoItemMenu(ChatActivity.this.getContext(), ChatActivity.this.getResourceProvider());
            todoItemMenu.setCell(ChatActivity.this, chatMessageCell, todoItem.f1732id);
            ArrayList arrayList = new ArrayList();
            ArrayList arrayList2 = new ArrayList();
            ArrayList arrayList3 = new ArrayList();
            ChatActivity.this.fillMessageMenu(primaryMessageObject, arrayList, arrayList2, arrayList3);
            final ChatActivity chatActivity = ChatActivity.this;
            todoItemMenu.setupMessageOptions(chatActivity, arrayList, arrayList2, arrayList3, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda46
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) throws Resources.NotFoundException {
                    chatActivity.processSelectedOption(((Integer) obj).intValue());
                }
            });
            todoItemMenu.setOnDismissListener(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda47
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressToDoButton$29();
                }
            });
            todoItemMenu.show();
            return true;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didLongPressToDoButton$29() {
            ChatActivity.this.selectedObject = null;
            ChatActivity.this.selectedObjectGroup = null;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressVoteButtons(ChatMessageCell chatMessageCell, ArrayList arrayList, int i, int i2, int i3) {
            int i4;
            int i5;
            int i6;
            int i7;
            if (i >= 0 || arrayList.isEmpty()) {
                if (ChatActivity.this.getParentActivity() == null) {
                    return;
                }
                if (ChatActivity.this.pollHintView == null) {
                    ChatActivity.this.pollHintView = new HintView(ChatActivity.this.getParentActivity(), 5, ChatActivity.this.themeDelegate);
                    ChatActivity.this.pollHintView.setAlpha(0.0f);
                    ChatActivity.this.pollHintView.setVisibility(4);
                    ChatActivity chatActivity = ChatActivity.this;
                    int iIndexOfChild = chatActivity.contentView.indexOfChild(chatActivity.chatInputViewsContainer);
                    if (iIndexOfChild == -1) {
                        return;
                    }
                    ChatActivity chatActivity2 = ChatActivity.this;
                    chatActivity2.contentView.addView(chatActivity2.pollHintView, iIndexOfChild + 1, LayoutHelper.createFrame(-2, -2.0f, 51, 19.0f, 0.0f, 19.0f, 0.0f));
                }
                if (!arrayList.isEmpty() || i >= 0) {
                    i4 = i2;
                    i5 = i3;
                } else {
                    ArrayList<ChatMessageCell.PollButton> pollButtons = chatMessageCell.getPollButtons();
                    int size = pollButtons.size();
                    int i8 = 0;
                    float f = 0.0f;
                    while (true) {
                        if (i8 >= size) {
                            i6 = i2;
                            i7 = i3;
                            break;
                        }
                        ChatMessageCell.PollButton pollButton = pollButtons.get(i8);
                        float y = (chatMessageCell.getY() + pollButton.f1806y) - AndroidUtilities.m1146dp(4.0f);
                        ChatActivity chatActivity3 = ChatActivity.this;
                        float f2 = y - chatActivity3.chatListViewPaddingTop;
                        chatActivity3.pollHintX = pollButton.f1805x + AndroidUtilities.m1146dp(13.3f);
                        ChatActivity.this.pollHintY = (pollButton.f1806y - AndroidUtilities.m1146dp(6.0f)) + i3;
                        if (f2 > 0.0f) {
                            i6 = ChatActivity.this.pollHintX;
                            i7 = ChatActivity.this.pollHintY;
                            f = 0.0f;
                            break;
                        }
                        i8++;
                        f = f2;
                    }
                    if (f != 0.0f) {
                        ChatActivity.this.chatListView.smoothScrollBy(0, (int) f);
                        ChatActivity.this.pollHintCell = chatMessageCell;
                        return;
                    } else {
                        i4 = i6;
                        i5 = i7;
                    }
                }
                ChatActivity.this.pollHintView.showForMessageCell(chatMessageCell, Integer.valueOf(i), i4, i5, true);
                return;
            }
            ChatActivity.this.getSendMessagesHelper().sendVote(chatMessageCell.getMessageObject(), arrayList, null);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean didPressToDoButton(ChatMessageCell chatMessageCell, TLRPC.TodoItem todoItem, boolean z) {
            if (chatMessageCell.getMessageObject().isForwarded()) {
                BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.passcode_lock_close, AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.TodoCompleteForbiddenForward, DialogObject.getName(((BaseFragment) ChatActivity.this).currentAccount, DialogObject.getPeerDialogId(chatMessageCell.getMessageObject().getFromPeer()))))).show(true);
                return false;
            }
            if (!chatMessageCell.getMessageObject().canCompleteTodo()) {
                BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.passcode_lock_close, AndroidUtilities.replaceTags(LocaleController.formatString(C2369R.string.TodoCompleteForbidden, DialogObject.getName(((BaseFragment) ChatActivity.this).currentAccount, DialogObject.getPeerDialogId(chatMessageCell.getMessageObject().getFromPeer()))))).show(true);
                return false;
            }
            if (!ChatActivity.this.getUserConfig().isPremium()) {
                BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.star_premium_2, AndroidUtilities.premiumText(LocaleController.getString(C2369R.string.TodoPremiumRequired), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda5
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressToDoButton$35();
                    }
                })).show(true);
                return false;
            }
            ChatActivity chatActivity = ChatActivity.this;
            ChatActivity.this.getSendMessagesHelper().toggleTodo(ChatObject.getSendAsPeerId(chatActivity.currentChat, chatActivity.chatInfo, true), chatMessageCell.getMessageObject(), todoItem, z, null);
            return true;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressToDoButton$35() {
            ChatActivity.this.showDialog(new PremiumFeatureBottomSheet(ChatActivity.this, 39, false));
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressCancelSendButton(ChatMessageCell chatMessageCell) {
            MessageObject messageObject = chatMessageCell.getMessageObject();
            if (messageObject.messageOwner.send_state != 0) {
                ChatActivity.this.getSendMessagesHelper().cancelSendingMessage(messageObject);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didLongPress(ChatMessageCell chatMessageCell, float f, float f2) {
            ChatActivity.this.createMenu(chatMessageCell, false, false, f, f2, false);
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.startMultiselect(chatActivity.chatListView.getChildAdapterPosition(chatMessageCell));
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean canPerformActions() {
            return (((BaseFragment) ChatActivity.this).actionBar == null || ((BaseFragment) ChatActivity.this).actionBar.isActionModeShowed() || ChatActivity.this.isReport() || ((BaseFragment) ChatActivity.this).inPreviewMode) ? false : true;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean canPerformReply() {
            return (ChatActivity.this.isReport() || ((BaseFragment) ChatActivity.this).inPreviewMode) ? false : true;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressUrl(ChatMessageCell chatMessageCell, CharacterStyle characterStyle, boolean z) throws Resources.NotFoundException, NumberFormatException, UnsupportedEncodingException {
            ChatActivity.this.didPressMessageUrl(characterStyle, z, chatMessageCell.getMessageObject(), chatMessageCell);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressCodeCopy(ChatMessageCell chatMessageCell, MessageObject.TextLayoutBlock textLayoutBlock) {
            StaticLayout staticLayout;
            if (textLayoutBlock == null || (staticLayout = textLayoutBlock.textLayout) == null || staticLayout.getText() == null) {
                return;
            }
            String string = textLayoutBlock.textLayout.getText().toString();
            SpannableString spannableString = new SpannableString(string);
            spannableString.setSpan(new CodeHighlighting.Span(false, 0, null, textLayoutBlock.language, string), 0, spannableString.length(), 33);
            AndroidUtilities.addToClipboard(spannableString);
            BulletinFactory.m1267of(ChatActivity.this).createCopyBulletin(LocaleController.getString(C2369R.string.CodeCopied)).show();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressMoreChannelRecommendations(ChatMessageCell chatMessageCell) {
            if (ChatActivity.this.getUserConfig().isPremium()) {
                Bundle bundle = new Bundle();
                bundle.putLong("dialog_id", ChatActivity.this.dialog_id);
                bundle.putInt("start_from", 10);
                ChatActivity chatActivity = ChatActivity.this;
                chatActivity.presentFragment(new MediaActivity(bundle, chatActivity.avatarContainer.getSharedMediaPreloader()));
                return;
            }
            BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.star_premium_2, AndroidUtilities.replaceSingleTag(LocaleController.formatPluralStringComma("UnlockSimilarChannelsPremium", ChatActivity.this.getMessagesController().recommendedChannelsLimitPremium), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda13
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressMoreChannelRecommendations$36();
                }
            })).show();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressMoreChannelRecommendations$36() {
            ChatActivity.this.presentFragment(new PremiumPreviewFragment("similar_channels"));
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressChannelRecommendation(final ChatMessageCell chatMessageCell, TLObject tLObject, boolean z) {
            if (ChatActivity.this.getContext() == null || tLObject == null) {
                return;
            }
            if (((BaseFragment) ChatActivity.this).parentLayout == null || !((BaseFragment) ChatActivity.this).parentLayout.isInPreviewMode()) {
                Bundle bundle = new Bundle();
                boolean z2 = tLObject instanceof TLRPC.Chat;
                if (z2) {
                    bundle.putLong("chat_id", ((TLRPC.Chat) tLObject).f1571id);
                } else if (!(tLObject instanceof TLRPC.User)) {
                    return;
                } else {
                    bundle.putLong("user_id", ((TLRPC.User) tLObject).f1734id);
                }
                if (z && z2) {
                    final TLRPC.Chat chat = (TLRPC.Chat) tLObject;
                    ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout = new ActionBarPopupWindow.ActionBarPopupWindowLayout(ChatActivity.this.getContext(), C2369R.drawable.popup_fixed_alert, ChatActivity.this.getResourceProvider(), 2);
                    actionBarPopupWindowLayout.setBackgroundColor(ChatActivity.this.getThemedColor(Theme.key_actionBarDefaultSubmenuBackground));
                    ActionBarMenuSubItem actionBarMenuSubItem = new ActionBarMenuSubItem(ChatActivity.this.getParentActivity(), false, false);
                    actionBarMenuSubItem.setTextAndIcon(LocaleController.getString(C2369R.string.OpenChannel2), C2369R.drawable.msg_channel);
                    actionBarMenuSubItem.setMinimumWidth(Opcodes.IF_ICMPNE);
                    actionBarMenuSubItem.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda1
                        @Override // android.view.View.OnClickListener
                        public final void onClick(View view) {
                            this.f$0.lambda$didPressChannelRecommendation$37(view);
                        }
                    });
                    actionBarPopupWindowLayout.addView(actionBarMenuSubItem);
                    ActionBarMenuSubItem actionBarMenuSubItem2 = new ActionBarMenuSubItem(ChatActivity.this.getParentActivity(), false, false);
                    actionBarMenuSubItem2.setTextAndIcon(LocaleController.getString(C2369R.string.ProfileJoinChannel), C2369R.drawable.msg_addbot);
                    actionBarMenuSubItem2.setMinimumWidth(Opcodes.IF_ICMPNE);
                    actionBarMenuSubItem2.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda2
                        @Override // android.view.View.OnClickListener
                        public final void onClick(View view) {
                            this.f$0.lambda$didPressChannelRecommendation$39(chat, chatMessageCell, view);
                        }
                    });
                    actionBarPopupWindowLayout.addView(actionBarMenuSubItem2);
                    ChatActivity chatActivity = new ChatActivity(bundle);
                    chatActivity.allowExpandPreviewByClick = true;
                    ChatActivity.this.presentFragmentAsPreviewWithMenu(chatActivity, actionBarPopupWindowLayout);
                    ChatActivity.this.checkShowBlur(true);
                    return;
                }
                ChatActivity.this.presentFragment(new ChatActivity(bundle));
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressChannelRecommendation$37(View view) {
            if (((BaseFragment) ChatActivity.this).parentLayout != null) {
                ((BaseFragment) ChatActivity.this).parentLayout.expandPreviewFragment();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressChannelRecommendation$39(final TLRPC.Chat chat, ChatMessageCell chatMessageCell, View view) {
            ChatActivity.this.finishPreviewFragment();
            chat.left = false;
            if (chatMessageCell != null && chatMessageCell.channelRecommendationsCell != null) {
                ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.channelRecommendationsLoaded, Long.valueOf(chatMessageCell.channelRecommendationsCell.chatId));
            }
            ChatActivity.this.getMessagesController().addUserToChat(chat.f1571id, ChatActivity.this.getUserConfig().getCurrentUser(), 0, null, ChatActivity.this, new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda24
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressChannelRecommendation$38(chat);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressChannelRecommendation$38(TLRPC.Chat chat) {
            BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.contact_check, LocaleController.formatString(C2369R.string.YouJoinedChannel, chat == null ? "" : chat.title)).show(true);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressChannelRecommendationsClose(ChatMessageCell chatMessageCell) {
            MessageObject messageObject = chatMessageCell.getMessageObject();
            if (messageObject == null || messageObject.type != 27) {
                return;
            }
            messageObject.toggleChannelRecommendations();
            messageObject.forceUpdate = true;
            chatMessageCell.forceResetMessageObject();
            chatMessageCell.requestLayout();
            ChatActivity.this.chatAdapter.updateRowWithMessageObject(messageObject, false, false);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean didPressAnimatedEmoji(ChatMessageCell chatMessageCell, AnimatedEmojiSpan animatedEmojiSpan) {
            TLRPC.InputStickerSet inputStickerSet;
            if (ChatActivity.this.getMessagesController().premiumFeaturesBlocked() || animatedEmojiSpan == null || animatedEmojiSpan.standard) {
                return false;
            }
            long documentId = animatedEmojiSpan.getDocumentId();
            TLRPC.Document documentFindDocument = animatedEmojiSpan.document;
            if (documentFindDocument == null) {
                documentFindDocument = AnimatedEmojiDrawable.findDocument(((BaseFragment) ChatActivity.this).currentAccount, documentId);
            }
            if (documentFindDocument == null || (inputStickerSet = MessageObject.getInputStickerSet(documentFindDocument)) == null) {
                return false;
            }
            MediaDataController.getInstance(UserConfig.selectedAccount).getStickerSet(inputStickerSet, true);
            ArrayList arrayList = new ArrayList(1);
            arrayList.add(inputStickerSet);
            ChatActivity chatActivity = ChatActivity.this;
            EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(chatActivity, chatActivity.getParentActivity(), ChatActivity.this.themeDelegate, arrayList);
            emojiPacksAlert.setPreviewEmoji(documentFindDocument);
            emojiPacksAlert.setCalcMandatoryInsets(ChatActivity.this.isKeyboardVisible());
            ChatActivity.this.showDialog(emojiPacksAlert);
            return true;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressExtendedMediaPreview(ChatMessageCell chatMessageCell, TLRPC.KeyboardButton keyboardButton) {
            ChatActivity.this.getSendMessagesHelper().sendCallback(true, chatMessageCell.getMessageObject(), keyboardButton, ChatActivity.this);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void needOpenWebView(MessageObject messageObject, String str, String str2, String str3, String str4, int i, int i2) {
            try {
                ChatActivity chatActivity = ChatActivity.this;
                EmbedBottomSheet.show(chatActivity, messageObject, chatActivity.photoViewerProvider, str2, str3, str4, str, i, i2, ChatActivity.this.isKeyboardVisible());
            } catch (Throwable th) {
                FileLog.m1160e(th);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressWebPage(ChatMessageCell chatMessageCell, TLRPC.WebPage webPage, String str, boolean z) {
            Uri uri;
            if (str == null || (uri = Uri.parse(str)) == null) {
                return;
            }
            if (!z && Browser.isTelegraphUrl(str, false)) {
                z = true;
            }
            if (ChatActivity.this.progressDialogCurrent != null) {
                ChatActivity.this.progressDialogCurrent.cancel(true);
            }
            ChatActivity.this.progressDialogCurrent = (chatMessageCell == null || chatMessageCell.getMessageObject() == null) ? null : new C31685(chatMessageCell);
            if (!z && !Browser.isInternalUri(uri, null)) {
                ChatActivity chatActivity = ChatActivity.this;
                AlertsCreator.showOpenUrlAlert(chatActivity, str, true, true, true, !z, chatActivity.progressDialogCurrent, ChatActivity.this.themeDelegate);
            } else {
                Browser.openUrl(ChatActivity.this.getContext(), uri, true, true, false, ChatActivity.this.progressDialogCurrent, null, false, true, false);
            }
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$5 */
        /* loaded from: classes5.dex */
        class C31685 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C31685(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$5$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* JADX WARN: Removed duplicated region for block: B:176:0x0406  */
        /* JADX WARN: Removed duplicated region for block: B:180:0x040f  */
        /* JADX WARN: Removed duplicated region for block: B:182:0x0415  */
        /* JADX WARN: Removed duplicated region for block: B:183:0x0418  */
        /* JADX WARN: Removed duplicated region for block: B:78:0x027e  */
        /* JADX WARN: Removed duplicated region for block: B:79:0x0280 A[PHI: r14
          0x0280: PHI (r14v4 long) = (r14v3 long), (r14v3 long), (r14v3 long), (r14v6 long), (r14v7 long), (r14v8 long), (r14v3 long) binds: [B:68:0x025c, B:70:0x0260, B:81:0x0284, B:89:0x0297, B:86:0x028e, B:78:0x027e, B:77:0x027c] A[DONT_GENERATE, DONT_INLINE]] */
        /* JADX WARN: Removed duplicated region for block: B:92:0x02a0  */
        /* JADX WARN: Removed duplicated region for block: B:93:0x02b0  */
        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void didPressReplyMessage(final org.telegram.p023ui.Cells.ChatMessageCell r23, final int r24, final float r25, final float r26, boolean r27) {
            /*
                Method dump skipped, instructions count: 1071
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatMessageCellDelegate.didPressReplyMessage(org.telegram.ui.Cells.ChatMessageCell, int, float, float, boolean):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressReplyMessage$40(AtomicReference atomicReference, ChatMessageCell chatMessageCell, float f, float f2, View view) {
            ((ActionBarPopupWindow) atomicReference.get()).dismiss();
            didLongPress(chatMessageCell, f, f2);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressReplyMessage$41(ArrayList arrayList, AtomicReference atomicReference, View view) {
            ChatActivity chatActivity = ChatActivity.this;
            EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(chatActivity, chatActivity.getParentActivity(), ChatActivity.this.themeDelegate, arrayList) { // from class: org.telegram.ui.ChatActivity.ChatMessageCellDelegate.7
                @Override // org.telegram.p023ui.Components.EmojiPacksAlert, org.telegram.p023ui.ActionBar.BottomSheet, android.app.Dialog, android.content.DialogInterface, org.telegram.ui.ActionBar.BaseFragment.AttachedSheet
                /* renamed from: dismiss */
                public void lambda$new$0() {
                    super.lambda$new$0();
                    ChatActivity.this.dimBehindView(false);
                }
            };
            ((ActionBarPopupWindow) atomicReference.get()).dismiss();
            emojiPacksAlert.setCalcMandatoryInsets(ChatActivity.this.isKeyboardVisible());
            emojiPacksAlert.setDimBehind(false);
            ChatActivity.this.dimBehindView(true);
            ChatActivity.this.showDialog(emojiPacksAlert);
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$8 */
        /* loaded from: classes5.dex */
        class C31718 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;
            final /* synthetic */ MessageObject val$messageObject;

            C31718(MessageObject messageObject, ChatMessageCell chatMessageCell) {
                this.val$messageObject = messageObject;
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$messageObject.getId();
                ChatActivity.this.progressDialogAtMessageType = 0;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$8$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressReplyMessage$43(int i, final MessageObject messageObject, Integer num) {
            ChatActivity.this.scrollToMessageId(i, messageObject.getId(), true, messageObject.getDialogId() == ChatActivity.this.mergeDialogId ? 1 : 0, true, 0, num, new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda27
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressReplyMessage$42(messageObject);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressReplyMessage$42(MessageObject messageObject) {
            ChatActivity.this.progressDialogAtMessageId = messageObject.getId();
            ChatActivity.this.progressDialogAtMessageType = 0;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean isProgressLoading(ChatMessageCell chatMessageCell, int i) {
            return ChatActivity.this.progressDialogAtMessageId != 0 && chatMessageCell.getMessageObject() != null && ChatActivity.this.progressDialogAtMessageId == chatMessageCell.getMessageObject().getId() && ChatActivity.this.progressDialogAtMessageType == i;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public CharacterStyle getProgressLoadingLink(ChatMessageCell chatMessageCell) {
            if (chatMessageCell.getMessageObject() == null || ChatActivity.this.progressDialogAtMessageId == 0 || ChatActivity.this.progressDialogAtMessageId != chatMessageCell.getMessageObject().getId() || ChatActivity.this.progressDialogAtMessageType != 1) {
                return null;
            }
            return ChatActivity.this.progressDialogLinkSpan;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public String getProgressLoadingBotButtonUrl(ChatMessageCell chatMessageCell) {
            if (chatMessageCell.getMessageObject() == null || ChatActivity.this.progressDialogAtMessageId == 0 || ChatActivity.this.progressDialogAtMessageId != chatMessageCell.getMessageObject().getId() || ChatActivity.this.progressDialogAtMessageType != 3) {
                return null;
            }
            return ChatActivity.this.progressDialogBotButtonUrl;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressViaBotNotInline(ChatMessageCell chatMessageCell, long j) {
            Bundle bundle = new Bundle();
            bundle.putLong("user_id", j);
            if (ChatActivity.this.getMessagesController().checkCanOpenChat(bundle, ChatActivity.this, chatMessageCell.getMessageObject())) {
                ChatActivity.this.presentFragment(new ChatActivity(bundle));
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressViaBot(ChatMessageCell chatMessageCell, String str) {
            if (ChatActivity.this.bottomChannelButtonsLayout == null || ChatActivity.this.bottomChannelButtonsLayout.getVisibility() != 0) {
                if ((ChatActivity.this.bottomOverlay == null || ChatActivity.this.bottomOverlay.getVisibility() != 0) && ChatActivity.this.chatActivityEnterView != null && str != null && str.length() > 0) {
                    ChatActivity.this.chatActivityEnterView.setFieldText("@" + str + " ");
                    ChatActivity.this.chatActivityEnterView.openKeyboard();
                }
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressBoostCounter(ChatMessageCell chatMessageCell) {
            ChatActivity.this.getNotificationCenter().lambda$postNotificationNameOnUIThread$1(NotificationCenter.openBoostForUsersDialog, Long.valueOf(ChatActivity.this.dialog_id), chatMessageCell);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didStartVideoStream(MessageObject messageObject) {
            if (messageObject.isVideo()) {
                ChatActivity.this.sendSecretMessageRead(messageObject, true);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void needReloadPolls() {
            ChatActivity.this.invalidateMessagesVisiblePart();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressGroupImage(ChatMessageCell chatMessageCell, ImageReceiver imageReceiver, TLRPC.MessageExtendedMedia messageExtendedMedia, float f, float f2) {
            MessageObject messageObject = chatMessageCell.getMessageObject();
            if (messageExtendedMedia instanceof TLRPC.TL_messageExtendedMediaPreview) {
                Browser.Progress progressMakeProgressForPaidMedia = ChatActivity.this.makeProgressForPaidMedia(chatMessageCell);
                StarsController starsController = StarsController.getInstance(((BaseFragment) ChatActivity.this).currentAccount);
                Objects.requireNonNull(progressMakeProgressForPaidMedia);
                Runnable runnablePay = starsController.pay(messageObject, new ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda12(progressMakeProgressForPaidMedia));
                if (runnablePay != null) {
                    progressMakeProgressForPaidMedia.onCancel(runnablePay);
                    progressMakeProgressForPaidMedia.init();
                    return;
                }
                return;
            }
            TLRPC.Message message = messageObject.messageOwner;
            TLRPC.MessageMedia messageMedia = message.media;
            if (messageMedia instanceof TLRPC.TL_messageMediaPaidMedia) {
                TLRPC.TL_messageMediaPaidMedia tL_messageMediaPaidMedia = (TLRPC.TL_messageMediaPaidMedia) messageMedia;
                ArrayList arrayList = new ArrayList();
                int size = -1;
                for (int i = 0; i < tL_messageMediaPaidMedia.extended_media.size(); i++) {
                    TLRPC.MessageExtendedMedia messageExtendedMedia2 = tL_messageMediaPaidMedia.extended_media.get(i);
                    if (messageExtendedMedia2 instanceof TLRPC.TL_messageExtendedMedia) {
                        TLRPC.TL_messageExtendedMedia tL_messageExtendedMedia = (TLRPC.TL_messageExtendedMedia) messageExtendedMedia2;
                        if (tL_messageExtendedMedia == messageExtendedMedia) {
                            size = arrayList.size();
                        }
                        TLRPC.TL_message tL_message = new TLRPC.TL_message();
                        tL_message.f1597id = message.f1597id;
                        tL_message.from_id = message.from_id;
                        tL_message.from_boosts_applied = message.from_boosts_applied;
                        tL_message.peer_id = message.peer_id;
                        tL_message.saved_peer_id = message.saved_peer_id;
                        tL_message.date = message.date;
                        tL_message.expire_date = message.expire_date;
                        tL_message.action = message.action;
                        tL_message.message = message.message;
                        tL_message.flags = message.flags;
                        tL_message.flags2 = message.flags2;
                        tL_message.mentioned = message.mentioned;
                        tL_message.media_unread = message.media_unread;
                        tL_message.out = message.out;
                        tL_message.unread = message.unread;
                        tL_message.entities = message.entities;
                        tL_message.via_bot_name = message.via_bot_name;
                        tL_message.reply_markup = message.reply_markup;
                        tL_message.views = message.views;
                        tL_message.forwards = message.forwards;
                        tL_message.replies = message.replies;
                        tL_message.edit_date = message.edit_date;
                        tL_message.silent = message.silent;
                        tL_message.post = message.post;
                        tL_message.from_scheduled = message.from_scheduled;
                        tL_message.legacy = message.legacy;
                        tL_message.edit_hide = message.edit_hide;
                        tL_message.pinned = message.pinned;
                        tL_message.fwd_from = message.fwd_from;
                        tL_message.via_bot_id = message.via_bot_id;
                        tL_message.via_business_bot_id = message.via_business_bot_id;
                        tL_message.reply_to = message.reply_to;
                        tL_message.post_author = message.post_author;
                        tL_message.grouped_id = message.grouped_id;
                        tL_message.reactions = message.reactions;
                        tL_message.restriction_reason = message.restriction_reason;
                        tL_message.ttl_period = message.ttl_period;
                        tL_message.quick_reply_shortcut_id = message.quick_reply_shortcut_id;
                        tL_message.effect = message.effect;
                        tL_message.noforwards = message.noforwards;
                        tL_message.invert_media = message.invert_media;
                        tL_message.offline = message.offline;
                        tL_message.factcheck = message.factcheck;
                        tL_message.send_state = message.send_state;
                        tL_message.fwd_msg_id = message.fwd_msg_id;
                        if (!TextUtils.isEmpty(tL_messageExtendedMedia.attachPath)) {
                            tL_message.attachPath = tL_messageExtendedMedia.attachPath;
                        } else if (tL_messageMediaPaidMedia.extended_media.size() == 1) {
                            tL_message.attachPath = message.attachPath;
                        }
                        tL_message.params = message.params;
                        tL_message.random_id = message.random_id;
                        tL_message.local_id = message.local_id;
                        tL_message.dialog_id = message.dialog_id;
                        tL_message.ttl = message.ttl;
                        tL_message.destroyTime = message.destroyTime;
                        tL_message.destroyTimeMillis = message.destroyTimeMillis;
                        tL_message.layer = message.layer;
                        tL_message.seq_in = message.seq_in;
                        tL_message.seq_out = message.seq_out;
                        tL_message.with_my_score = message.with_my_score;
                        tL_message.replyMessage = message.replyMessage;
                        tL_message.reqId = message.reqId;
                        tL_message.realId = message.realId;
                        tL_message.stickerVerified = message.stickerVerified;
                        tL_message.isThreadMessage = message.isThreadMessage;
                        tL_message.voiceTranscription = message.voiceTranscription;
                        tL_message.voiceTranscriptionOpen = message.voiceTranscriptionOpen;
                        tL_message.voiceTranscriptionRated = message.voiceTranscriptionRated;
                        tL_message.voiceTranscriptionFinal = message.voiceTranscriptionFinal;
                        tL_message.voiceTranscriptionForce = message.voiceTranscriptionForce;
                        tL_message.voiceTranscriptionId = message.voiceTranscriptionId;
                        tL_message.premiumEffectWasPlayed = message.premiumEffectWasPlayed;
                        tL_message.originalLanguage = message.originalLanguage;
                        tL_message.translatedToLanguage = message.translatedToLanguage;
                        tL_message.translatedText = message.translatedText;
                        tL_message.replyStory = message.replyStory;
                        tL_message.media = tL_messageExtendedMedia.media;
                        tL_message.quick_reply_shortcut = message.quick_reply_shortcut;
                        tL_message.noforwards = true;
                        arrayList.add(new MessageObject(messageObject.currentAccount, tL_message, false, true));
                    }
                }
                if (size <= -1 || arrayList.isEmpty()) {
                    return;
                }
                PhotoViewer photoViewer = PhotoViewer.getInstance();
                ChatActivity chatActivity = ChatActivity.this;
                photoViewer.setParentActivity(chatActivity, chatActivity.themeDelegate);
                PhotoViewer.getInstance().openPhoto(arrayList, size, ChatActivity.this.getDialogId(), 0L, 0L, ChatActivity.this.photoViewerPaidMediaProvider);
            }
        }

        /* JADX WARN: Removed duplicated region for block: B:173:0x03ba  */
        /* JADX WARN: Removed duplicated region for block: B:175:0x03bd  */
        /* JADX WARN: Removed duplicated region for block: B:180:0x03da  */
        /* JADX WARN: Removed duplicated region for block: B:182:0x03e5  */
        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void didPressImage(org.telegram.p023ui.Cells.ChatMessageCell r22, float r23, float r24, boolean r25) {
            /*
                Method dump skipped, instructions count: 1303
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ChatMessageCellDelegate.didPressImage(org.telegram.ui.Cells.ChatMessageCell, float, float, boolean):void");
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$9 */
        /* loaded from: classes5.dex */
        class C31729 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C31729(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$9$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressImage$44(MessageObject messageObject) {
            if (ChatActivity.this.checkSlowModeAlert()) {
                SendMessagesHelper.SendMessageParams sendMessageParamsM1191of = SendMessagesHelper.SendMessageParams.m1191of(messageObject.getDiceEmoji(), ChatActivity.this.dialog_id, ChatActivity.this.replyingMessageObject, ChatActivity.this.getThreadMessage(), null, false, null, null, null, true, 0, 0, null, false);
                sendMessageParamsM1191of.quick_reply_shortcut_id = ChatActivity.this.getQuickReplyId();
                ChatActivity chatActivity = ChatActivity.this;
                sendMessageParamsM1191of.quick_reply_shortcut = chatActivity.quickReplyShortcut;
                chatActivity.getSendMessagesHelper().sendMessage(sendMessageParamsM1191of);
            }
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$10 */
        /* loaded from: classes5.dex */
        class C316110 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316110(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$10$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressInstantButton(ChatMessageCell chatMessageCell, int i) throws IOException {
            TLRPC.MessageMedia messageMedia;
            TLRPC.TL_webPageAttributeStory tL_webPageAttributeStory;
            TL_stories.StoryItem storyItem;
            TLRPC.Message message;
            TLRPC.MessageMedia messageMedia2;
            String string;
            TLRPC.WebPage webPage;
            MessageObject messageObject = chatMessageCell.getMessageObject();
            if (i == 19) {
                if (ChatActivity.this.progressDialogCurrent != null) {
                    ChatActivity.this.progressDialogCurrent.cancel(true);
                }
                ChatActivity.this.progressDialogCurrent = chatMessageCell.getMessageObject() != null ? new C316211(chatMessageCell) : null;
                BoostDialogs.openGiveAwayStatusDialog(messageObject, ChatActivity.this.progressDialogCurrent, ChatActivity.this.getContext(), ChatActivity.this.getResourceProvider());
                return;
            }
            if (i == 21) {
                if (LaunchActivity.instance != null) {
                    if (ChatActivity.this.progressDialogCurrent != null) {
                        ChatActivity.this.progressDialogCurrent.cancel(true);
                    }
                    ChatActivity.this.progressDialogCurrent = chatMessageCell.getMessageObject() != null ? new C316312(chatMessageCell) : null;
                    LaunchActivity.instance.checkAppUpdate(true, ChatActivity.this.progressDialogCurrent);
                    return;
                }
                return;
            }
            if (i == 8) {
                PollVotesAlert.showForPoll(ChatActivity.this, messageObject);
                return;
            }
            if (i == 0) {
                TLRPC.MessageMedia messageMedia3 = messageObject.messageOwner.media;
                if (messageMedia3 == null || (webPage = messageMedia3.webpage) == null || webPage.cached_page == null) {
                    return;
                }
                LaunchActivity launchActivity = LaunchActivity.instance;
                if (launchActivity == null || launchActivity.getBottomSheetTabs() == null || LaunchActivity.instance.getBottomSheetTabs().tryReopenTab(messageObject) == null) {
                    ChatActivity.this.createArticleViewer(false).open(messageObject);
                    return;
                }
                return;
            }
            if (i == 5) {
                long j = messageObject.messageOwner.media.user_id;
                TLRPC.User user = j != 0 ? MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getUser(Long.valueOf(j)) : null;
                ChatActivity chatActivity = ChatActivity.this;
                TLRPC.MessageMedia messageMedia4 = messageObject.messageOwner.media;
                chatActivity.openVCard(user, messageMedia4.phone_number, messageMedia4.vcard, messageMedia4.first_name, messageMedia4.last_name);
                return;
            }
            if (i == 30) {
                long j2 = messageObject.messageOwner.media.user_id;
                Bundle bundle = new Bundle();
                bundle.putLong("user_id", j2);
                ChatActivity.this.presentFragment(new ChatActivity(bundle));
                return;
            }
            if (i == 31) {
                long j3 = messageObject.messageOwner.media.user_id;
                TLRPC.User user2 = j3 != 0 ? MessagesController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getUser(Long.valueOf(j3)) : null;
                if (user2 != null) {
                    if (!TextUtils.isEmpty(messageObject.vCardData)) {
                        string = messageObject.vCardData.toString();
                    } else if (!TextUtils.isEmpty(user2.phone)) {
                        string = PhoneFormat.getInstance().format("+" + user2.phone);
                    } else {
                        String str = MessageObject.getMedia(messageObject.messageOwner).phone_number;
                        if (!TextUtils.isEmpty(str)) {
                            string = PhoneFormat.getInstance().format(str);
                        } else {
                            string = LocaleController.getString(C2369R.string.NumberUnknown);
                        }
                    }
                    Bundle bundle2 = new Bundle();
                    bundle2.putLong("user_id", user2.f1734id);
                    bundle2.putString("phone", string);
                    bundle2.putBoolean("addContact", true);
                    ChatActivity.this.presentFragment(new ContactAddActivity(bundle2));
                    return;
                }
                return;
            }
            if (i == 23 || i == 24) {
                final boolean z = i == 24;
                TLRPC.Message message2 = messageObject.messageOwner;
                TLRPC.WebPage webPage2 = (message2 == null || (messageMedia = message2.media) == null) ? null : messageMedia.webpage;
                if (webPage2 == null || webPage2.url == null) {
                    return;
                }
                Matcher matcher = Pattern.compile("^https?\\:\\/\\/t\\.me\\/add(?:emoji|stickers)\\/(.+)$").matcher(webPage2.url);
                if (ChatActivity.this.progressDialogCurrent != null) {
                    ChatActivity.this.progressDialogCurrent.cancel(true);
                }
                ChatActivity.this.progressDialogCurrent = chatMessageCell.getMessageObject() != null ? new C316413(chatMessageCell) : null;
                if (matcher.matches() && matcher.groupCount() > 1 && matcher.group(1) != null) {
                    String strGroup = matcher.group(1);
                    if (MediaDataController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).getStickerSetByName(strGroup) == null) {
                        ChatActivity.this.progressDialogCurrent.init();
                        TLRPC.TL_messages_getStickerSet tL_messages_getStickerSet = new TLRPC.TL_messages_getStickerSet();
                        TLRPC.TL_inputStickerSetShortName tL_inputStickerSetShortName = new TLRPC.TL_inputStickerSetShortName();
                        tL_inputStickerSetShortName.short_name = strGroup;
                        tL_messages_getStickerSet.stickerset = tL_inputStickerSetShortName;
                        final int iSendRequest = ConnectionsManager.getInstance(((BaseFragment) ChatActivity.this).currentAccount).sendRequest(tL_messages_getStickerSet, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda18
                            @Override // org.telegram.tgnet.RequestDelegate
                            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                                this.f$0.lambda$didPressInstantButton$46(z, tLObject, tL_error);
                            }
                        });
                        ChatActivity.this.progressDialogCurrent.onCancel(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda19
                            @Override // java.lang.Runnable
                            public final void run() {
                                this.f$0.lambda$didPressInstantButton$47(iSendRequest);
                            }
                        });
                        return;
                    }
                }
                Browser.openUrl(ChatActivity.this.getParentActivity(), Uri.parse(webPage2.url), true, true, false, ChatActivity.this.progressDialogCurrent, null, false, true, false);
                return;
            }
            if (messageObject.isSponsored()) {
                ChatActivity.this.logSponsoredClicked(messageObject, false, false);
                if (messageObject.sponsoredUrl != null) {
                    if (ChatActivity.this.progressDialogCurrent != null) {
                        ChatActivity.this.progressDialogCurrent.cancel(true);
                    }
                    ChatActivity.this.progressDialogCurrent = chatMessageCell.getMessageObject() != null ? new C316514(chatMessageCell) : null;
                    Browser.openUrl(ChatActivity.this.getContext(), Uri.parse(messageObject.sponsoredUrl), true, false, false, ChatActivity.this.progressDialogCurrent, null, false, ChatActivity.this.getMessagesController().sponsoredLinksInappAllow, false);
                    return;
                }
                return;
            }
            TLRPC.WebPage storyMentionWebpage = messageObject.getStoryMentionWebpage();
            if (storyMentionWebpage == null && (message = messageObject.messageOwner) != null && (messageMedia2 = message.media) != null) {
                storyMentionWebpage = messageMedia2.webpage;
            }
            if (storyMentionWebpage == null) {
                return;
            }
            if (storyMentionWebpage.attributes != null) {
                for (int i2 = 0; i2 < storyMentionWebpage.attributes.size(); i2++) {
                    if ((storyMentionWebpage.attributes.get(i2) instanceof TLRPC.TL_webPageAttributeStory) && (storyItem = (tL_webPageAttributeStory = (TLRPC.TL_webPageAttributeStory) storyMentionWebpage.attributes.get(i2)).storyItem) != null) {
                        storyItem.dialogId = DialogObject.getPeerDialogId(tL_webPageAttributeStory.peer);
                        tL_webPageAttributeStory.storyItem.messageId = messageObject.getId();
                        tL_webPageAttributeStory.storyItem.messageType = 1;
                        ChatActivity.this.getOrCreateStoryViewer().open(ChatActivity.this.getContext(), tL_webPageAttributeStory.storyItem, StoriesListPlaceProvider.m1334of(ChatActivity.this.chatListView));
                        return;
                    }
                }
            }
            if (ChatActivity.this.openLinkInternally(storyMentionWebpage.url, chatMessageCell, null, messageObject.getId(), 2)) {
                return;
            }
            if (ChatActivity.this.progressDialogCurrent != null) {
                ChatActivity.this.progressDialogCurrent.cancel(true);
            }
            ChatActivity.this.progressDialogCurrent = chatMessageCell.getMessageObject() != null ? new C316615(chatMessageCell) : null;
            Browser.openUrl(ChatActivity.this.getParentActivity(), Uri.parse(storyMentionWebpage.url), true, true, false, ChatActivity.this.progressDialogCurrent, null, false, true, false);
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$11 */
        /* loaded from: classes5.dex */
        class C316211 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316211(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$11$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$12 */
        /* loaded from: classes5.dex */
        class C316312 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316312(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$12$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$13 */
        /* loaded from: classes5.dex */
        class C316413 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316413(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$13$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressInstantButton$46(final boolean z, final TLObject tLObject, TLRPC.TL_error tL_error) {
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda22
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressInstantButton$45(tLObject, z);
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressInstantButton$45(TLObject tLObject, boolean z) {
            ChatActivity.this.progressDialogCurrent.end();
            if (!(tLObject instanceof TLRPC.TL_messages_stickerSet)) {
                BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.error, LocaleController.getString(z ? C2369R.string.AddEmojiNotFound : C2369R.string.AddStickersNotFound)).show(true);
                return;
            }
            TLRPC.TL_messages_stickerSet tL_messages_stickerSet = (TLRPC.TL_messages_stickerSet) tLObject;
            MediaDataController.getInstance(((BaseFragment) ChatActivity.this).currentAccount).putStickerSet(tL_messages_stickerSet, false);
            if (ChatActivity.this.getParentActivity() == null || ChatActivity.this.getContext() == null) {
                return;
            }
            TLRPC.TL_inputStickerSetID tL_inputStickerSetID = new TLRPC.TL_inputStickerSetID();
            TLRPC.StickerSet stickerSet = tL_messages_stickerSet.set;
            tL_inputStickerSetID.access_hash = stickerSet.access_hash;
            tL_inputStickerSetID.f1596id = stickerSet.f1607id;
            if (z) {
                ArrayList arrayList = new ArrayList(1);
                arrayList.add(tL_inputStickerSetID);
                ChatActivity chatActivity = ChatActivity.this;
                EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(chatActivity, chatActivity.getParentActivity(), ChatActivity.this.themeDelegate, arrayList);
                emojiPacksAlert.setCalcMandatoryInsets(ChatActivity.this.isKeyboardVisible());
                ChatActivity.this.showDialog(emojiPacksAlert);
                return;
            }
            Activity parentActivity = ChatActivity.this.getParentActivity();
            ChatActivity chatActivity2 = ChatActivity.this;
            StickersAlert stickersAlert = new StickersAlert(parentActivity, chatActivity2, tL_inputStickerSetID, null, chatActivity2.chatActivityEnterView, chatActivity2.themeDelegate, false);
            stickersAlert.setCalcMandatoryInsets(ChatActivity.this.isKeyboardVisible());
            ChatActivity.this.showDialog(stickersAlert);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressInstantButton$47(int i) {
            ConnectionsManager.getInstance(((BaseFragment) ChatActivity.this).currentAccount).cancelRequest(i, true);
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$14 */
        /* loaded from: classes5.dex */
        class C316514 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316514(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$14$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        /* renamed from: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$15 */
        /* loaded from: classes5.dex */
        class C316615 extends Browser.Progress {
            final /* synthetic */ ChatMessageCell val$cell;

            C316615(ChatMessageCell chatMessageCell) {
                this.val$cell = chatMessageCell;
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void init() {
                ChatActivity.this.progressDialogAtMessageId = this.val$cell.getMessageObject().getId();
                ChatActivity.this.progressDialogAtMessageType = 2;
                ChatActivity.this.progressDialogLinkSpan = null;
                this.val$cell.invalidate();
            }

            @Override // org.telegram.messenger.browser.Browser.Progress
            public void end(boolean z) {
                if (z) {
                    return;
                }
                final ChatActivity chatActivity = ChatActivity.this;
                AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$15$$ExternalSyntheticLambda0
                    @Override // java.lang.Runnable
                    public final void run() {
                        chatActivity.resetProgressDialogLoading();
                    }
                }, 250L);
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressGiveawayChatButton(ChatMessageCell chatMessageCell, int i) {
            if (chatMessageCell.getMessageObject().messageOwner.media instanceof TLRPC.TL_messageMediaGiveaway) {
                long j = -((Long) ((TLRPC.TL_messageMediaGiveaway) chatMessageCell.getMessageObject().messageOwner.media).channels.get(i)).longValue();
                if (ChatActivity.this.dialog_id != j) {
                    ChatActivity.this.presentFragment(ChatActivity.m1258of(j));
                } else {
                    ChatActivity.this.avatarContainer.openProfile(false);
                }
            }
            if (chatMessageCell.getMessageObject().messageOwner.media instanceof TLRPC.TL_messageMediaGiveawayResults) {
                ChatActivity.this.presentFragment(ProfileActivity.m1314of(((Long) ((TLRPC.TL_messageMediaGiveawayResults) chatMessageCell.getMessageObject().messageOwner.media).winners.get(i)).longValue()));
            }
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressCommentButton(ChatMessageCell chatMessageCell) {
            MessageObject messageObject;
            long j;
            int i;
            MessageObject.GroupedMessages currentMessagesGroup = chatMessageCell.getCurrentMessagesGroup();
            if (currentMessagesGroup != null && !currentMessagesGroup.messages.isEmpty()) {
                messageObject = currentMessagesGroup.messages.get(0);
            } else {
                messageObject = chatMessageCell.getMessageObject();
            }
            MessageObject messageObject2 = messageObject;
            TLRPC.MessageReplies messageReplies = messageObject2.messageOwner.replies;
            if (messageReplies != null) {
                int i2 = messageReplies.read_max_id;
                j = messageReplies.channel_id;
                i = i2;
            } else {
                j = 0;
                i = -1;
            }
            long j2 = j;
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.openDiscussionMessageChat(chatActivity.currentChat.f1571id, messageObject2, messageObject2.getId(), j2, i, 0, null);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public String getAdminRank(long j) {
            String adminRank;
            if (UserObject.isBotForum(ChatActivity.this.currentUser)) {
                return null;
            }
            if (ChatObject.isChannel(ChatActivity.this.currentChat)) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.currentChat.megagroup && (adminRank = chatActivity.getMessagesController().getAdminRank(ChatActivity.this.currentChat.f1571id, j)) != null) {
                    return adminRank;
                }
            }
            if (ChatActivity.this.forumTopic == null || ChatActivity.this.forumTopic.from_id == null || !(ChatActivity.this.forumTopic.from_id.user_id == j || ChatActivity.this.forumTopic.from_id.channel_id == j || ChatActivity.this.forumTopic.from_id.chat_id == j)) {
                return null;
            }
            return LocaleController.getString(C2369R.string.TopicCreator);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean shouldRepeatSticker(MessageObject messageObject) {
            return !ChatActivity.this.alreadyPlayedStickers.containsKey(messageObject);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void setShouldNotRepeatSticker(MessageObject messageObject) {
            ChatActivity.this.alreadyPlayedStickers.put(messageObject, Boolean.TRUE);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public TextSelectionHelper.ChatListTextSelectionHelper getTextSelectionHelper() {
            return ChatActivity.this.textSelectionHelper;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean hasSelectedMessages() {
            return ChatActivity.this.selectedMessagesIds[0].size() + ChatActivity.this.selectedMessagesIds[1].size() > 0;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void onDiceFinished() {
            ChatActivity.this.startFireworks();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public PinchToZoomHelper getPinchToZoomHelper() {
            return ChatActivity.this.pinchToZoomHelper;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean keyboardIsOpened() {
            return ChatActivity.this.contentView.getKeyboardHeight() + ChatActivity.this.chatEmojiViewPadding >= AndroidUtilities.m1146dp(20.0f);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean isLandscape() {
            return ChatActivity.this.contentView.getMeasuredWidth() > ChatActivity.this.contentView.getMeasuredHeight();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void invalidateBlur() {
            ChatActivity.this.contentView.invalidateBlur();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean onAccessibilityAction(int i, Bundle bundle) {
            if (i != 16 && i != C2369R.id.acc_action_small_button && i != C2369R.id.acc_action_msg_options) {
                return false;
            }
            if (((BaseFragment) ChatActivity.this).inPreviewMode) {
                ChatActivity chatActivity = ChatActivity.this;
                if (chatActivity.allowExpandPreviewByClick) {
                    if (((BaseFragment) chatActivity).parentLayout != null) {
                        ((BaseFragment) ChatActivity.this).parentLayout.expandPreviewFragment();
                    }
                    return true;
                }
            }
            return !canPerformActions();
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public boolean doNotShowLoadingReply(MessageObject messageObject) {
            return ((messageObject != null && messageObject.getDialogId() == UserObject.REPLY_BOT) || (ChatActivity.this.chatAdapter != null && ChatActivity.this.chatAdapter.isFiltered)) && ChatActivity.this.chatMode != 7;
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressAboutRevenueSharingAds() {
            ChatActivity chatActivity = ChatActivity.this;
            if (chatActivity.contentView == null || chatActivity.getParentActivity() == null) {
                return;
            }
            Context context = ChatActivity.this.contentView.getContext();
            ChatActivity chatActivity2 = ChatActivity.this;
            RevenueSharingAdsInfoBottomSheet.showAlert(context, chatActivity2, false, ((BaseFragment) chatActivity2).resourceProvider);
        }

        @Override // org.telegram.ui.Cells.ChatMessageCell.ChatMessageCellDelegate
        public void didPressRevealSensitiveContent(final ChatMessageCell chatMessageCell) throws Resources.NotFoundException {
            if (!ChatActivity.this.getMessagesController().showSensitiveContent()) {
                final AlertDialog alertDialog = new AlertDialog(ChatActivity.this.getContext(), 3);
                alertDialog.showDelayed(200L);
                ChatActivity.this.getMessagesController().getContentSettings(new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda16
                    @Override // org.telegram.messenger.Utilities.Callback
                    public final void run(Object obj) {
                        this.f$0.lambda$didPressRevealSensitiveContent$53(alertDialog, chatMessageCell, (TL_account.contentSettings) obj);
                    }
                });
            } else {
                if (chatMessageCell.getMessageObject() != null) {
                    chatMessageCell.getMessageObject().isSensitiveCached = Boolean.FALSE;
                }
                chatMessageCell.startRevealMedia();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressRevealSensitiveContent$53(AlertDialog alertDialog, final ChatMessageCell chatMessageCell, final TL_account.contentSettings contentsettings) {
            alertDialog.dismissUnless(200L);
            boolean z = ChatActivity.this.getMessagesController().config.needAgeVideoVerification.get() && !TextUtils.isEmpty(ChatActivity.this.getMessagesController().verifyAgeBotUsername);
            boolean z2 = (contentsettings == null || !contentsettings.sensitive_can_change) && z;
            final boolean[] zArr = new boolean[1];
            Context context = alertDialog.getContext();
            FrameLayout frameLayout = new FrameLayout(context);
            if (z) {
                zArr[0] = true;
            } else if (contentsettings != null && contentsettings.sensitive_can_change) {
                CheckBoxCell checkBoxCell = new CheckBoxCell(context, 1, ChatActivity.this.getResourceProvider());
                checkBoxCell.setBackground(Theme.getSelectorDrawable(false));
                checkBoxCell.setText(LocaleController.getString(C2369R.string.MessageShowSensitiveContentAlways), "", zArr[0], false);
                checkBoxCell.setPadding(LocaleController.isRTL ? AndroidUtilities.m1146dp(16.0f) : AndroidUtilities.m1146dp(8.0f), 0, LocaleController.isRTL ? AndroidUtilities.m1146dp(8.0f) : AndroidUtilities.m1146dp(16.0f), 0);
                frameLayout.addView(checkBoxCell, LayoutHelper.createFrame(-1, 48.0f, 51, 0.0f, 0.0f, 0.0f, 0.0f));
                checkBoxCell.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda25
                    @Override // android.view.View.OnClickListener
                    public final void onClick(View view) {
                        ChatActivity.ChatMessageCellDelegate.$r8$lambda$RcWZ4vY2HaGrQiFn1I6IN8ARXRg(zArr, view);
                    }
                });
            }
            AlertDialog.Builder negativeButton = new AlertDialog.Builder(context, ChatActivity.this.getResourceProvider()).setTitle(LocaleController.getString(C2369R.string.MessageShowSensitiveContentMediaTitle)).setMessage(LocaleController.getString(z2 ? C2369R.string.MessageShowSensitiveContentMediaTextClosed : C2369R.string.MessageShowSensitiveContentMediaText)).setView(frameLayout).setCustomViewOffset(9).setNegativeButton(LocaleController.getString(z2 ? C2369R.string.MessageShowSensitiveContentMediaTextClosedButton : C2369R.string.Cancel), null);
            if (!z2) {
                final boolean z3 = z;
                negativeButton.setPositiveButton(LocaleController.getString(C2369R.string.MessageShowSensitiveContentButton), new AlertDialog.OnButtonClickListener() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda26
                    @Override // org.telegram.ui.ActionBar.AlertDialog.OnButtonClickListener
                    public final void onClick(AlertDialog alertDialog2, int i) {
                        this.f$0.lambda$didPressRevealSensitiveContent$52(chatMessageCell, zArr, z3, contentsettings, alertDialog2, i);
                    }
                });
            }
            ChatActivity.this.showDialog(negativeButton.create());
        }

        public static /* synthetic */ void $r8$lambda$RcWZ4vY2HaGrQiFn1I6IN8ARXRg(boolean[] zArr, View view) {
            boolean z = !zArr[0];
            zArr[0] = z;
            ((CheckBoxCell) view).setChecked(z, true);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressRevealSensitiveContent$52(final ChatMessageCell chatMessageCell, boolean[] zArr, boolean z, TL_account.contentSettings contentsettings, AlertDialog alertDialog, int i) {
            final Utilities.Callback callback = new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda30
                @Override // org.telegram.messenger.Utilities.Callback
                public final void run(Object obj) throws Resources.NotFoundException {
                    this.f$0.lambda$didPressRevealSensitiveContent$49(chatMessageCell, (Boolean) obj);
                }
            };
            if (zArr[0]) {
                if (z || (contentsettings != null && contentsettings.sensitive_can_change)) {
                    ThemeActivity.verifyAge(ChatActivity.this.getContext(), ((BaseFragment) ChatActivity.this).currentAccount, new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda31
                        @Override // org.telegram.messenger.Utilities.Callback
                        public final void run(Object obj) {
                            this.f$0.lambda$didPressRevealSensitiveContent$51(callback, (Boolean) obj);
                        }
                    }, ChatActivity.this.getResourceProvider());
                    return;
                } else {
                    callback.run(Boolean.TRUE);
                    return;
                }
            }
            callback.run(Boolean.FALSE);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressRevealSensitiveContent$49(ChatMessageCell chatMessageCell, Boolean bool) throws Resources.NotFoundException {
            if (bool.booleanValue()) {
                for (int i = 0; i < ChatActivity.this.chatListView.getChildCount(); i++) {
                    View childAt = ChatActivity.this.chatListView.getChildAt(i);
                    if (childAt instanceof ChatMessageCell) {
                        ChatMessageCell chatMessageCell2 = (ChatMessageCell) childAt;
                        if (chatMessageCell2.getMessageObject() != null && chatMessageCell2.getMessageObject().isSensitive()) {
                            chatMessageCell2.startRevealMedia();
                        }
                    }
                }
                return;
            }
            if (chatMessageCell.getMessageObject() != null) {
                chatMessageCell.getMessageObject().isSensitiveCached = Boolean.FALSE;
            }
            chatMessageCell.startRevealMedia();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressRevealSensitiveContent$51(Utilities.Callback callback, Boolean bool) {
            if (!bool.booleanValue()) {
                BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletin(C2369R.raw.error, LocaleController.getString(C2369R.string.AgeVerificationFailedTitle), LocaleController.getString(C2369R.string.AgeVerificationFailedText)).show();
                return;
            }
            ChatActivity.this.getMessagesController().setContentSettings(true);
            BulletinFactory.m1267of(ChatActivity.this).createSimpleBulletinDetail(C2369R.raw.chats_infotip, AndroidUtilities.replaceArrows(AndroidUtilities.premiumText(LocaleController.getString(C2369R.string.SensitiveContentSettingsToast), new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatMessageCellDelegate$$ExternalSyntheticLambda49
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressRevealSensitiveContent$50();
                }
            }), true)).show(true);
            callback.run(Boolean.TRUE);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$didPressRevealSensitiveContent$50() {
            ChatActivity.this.presentFragment(new ThemeActivity(0).highlightSensitiveRow());
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$147, reason: invalid class name */
    /* loaded from: classes5.dex */
    static /* synthetic */ class AnonymousClass147 {
        static final /* synthetic */ int[] $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem;

        static {
            int[] iArr = new int[AvatarPreviewer.MenuItem.values().length];
            $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem = iArr;
            try {
                iArr[AvatarPreviewer.MenuItem.OPEN_PROFILE.ordinal()] = 1;
            } catch (NoSuchFieldError unused) {
            }
            try {
                $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.MENTION.ordinal()] = 2;
            } catch (NoSuchFieldError unused2) {
            }
            try {
                $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.SEARCH_MESSAGES.ordinal()] = 3;
            } catch (NoSuchFieldError unused3) {
            }
            try {
                $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.OPEN_GROUP.ordinal()] = 4;
            } catch (NoSuchFieldError unused4) {
            }
            try {
                $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.OPEN_CHANNEL.ordinal()] = 5;
            } catch (NoSuchFieldError unused5) {
            }
            try {
                $SwitchMap$org$telegram$ui$AvatarPreviewer$MenuItem[AvatarPreviewer.MenuItem.SEND_MESSAGE.ordinal()] = 6;
            } catch (NoSuchFieldError unused6) {
            }
        }
    }

    public void openThisProfile() {
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer == null) {
            return;
        }
        chatAvatarContainer.openProfile(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void openUserProfile(long j) {
        if (j < 0) {
            if (j == getDialogId()) {
                this.avatarContainer.openProfile(true);
                return;
            }
            Bundle bundle = new Bundle();
            bundle.putLong("chat_id", -j);
            if (getMessagesController().checkCanOpenChat(bundle, this)) {
                presentFragment(new ChatActivity(bundle));
                return;
            }
            return;
        }
        if (j == getUserConfig().getClientUserId()) {
            Bundle bundle2 = new Bundle();
            bundle2.putLong("user_id", j);
            bundle2.putBoolean("my_profile", true);
            presentFragment(new ProfileActivity(bundle2, null));
            return;
        }
        if (j == getDialogId()) {
            this.avatarContainer.openProfile(true);
            return;
        }
        Bundle bundle3 = new Bundle();
        bundle3.putLong("user_id", j);
        if (this.currentEncryptedChat != null && j == this.currentUser.f1734id) {
            bundle3.putLong("dialog_id", this.dialog_id);
        }
        ProfileActivity profileActivity = new ProfileActivity(bundle3);
        TLRPC.User user = this.currentUser;
        profileActivity.setPlayProfileAnimation((user == null || user.f1734id != j) ? 0 : 1);
        presentFragment(profileActivity);
    }

    private boolean openLinkInternally(String str, ChatMessageCell chatMessageCell, CharacterStyle characterStyle, int i) throws NumberFormatException {
        return openLinkInternally(str, chatMessageCell, characterStyle, i, 1);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean openLinkInternally(String str, final ChatMessageCell chatMessageCell, final CharacterStyle characterStyle, final int i, final int i2) throws NumberFormatException {
        boolean z;
        int i3;
        int i4;
        TLRPC.TL_forumTopic tL_forumTopicFindTopic;
        if (this.currentChat == null || str == null || this.chatMode != 0) {
            return false;
        }
        Runnable runnable = (chatMessageCell == null || (characterStyle == null && i2 == 1)) ? null : new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda166
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$openLinkInternally$399(i, i2, characterStyle, chatMessageCell);
            }
        };
        if (str.startsWith("tg:privatepost") || str.startsWith("tg://privatepost")) {
            Uri uri = Uri.parse(str.replace("tg:privatepost", "tg://telegram.org").replace("tg://privatepost", "tg://telegram.org"));
            int iIntValue = Utilities.parseInt((CharSequence) uri.getQueryParameter("post")).intValue();
            long jLongValue = Utilities.parseLong(uri.getQueryParameter("channel")).longValue();
            int iIntValue2 = Utilities.parseInt((CharSequence) uri.getQueryParameter("thread")).intValue();
            long j = this.currentChat.f1571id;
            if (jLongValue != j || iIntValue == 0) {
                return false;
            }
            if (iIntValue2 != 0) {
                openDiscussionMessageChat(j, null, iIntValue2, 0L, -1, 0, null);
            } else {
                this.showScrollToMessageError = true;
                if (this.chatMode == 2) {
                    this.chatActivityDelegate.openReplyMessage(iIntValue);
                    lambda$onBackPressed$371();
                } else {
                    scrollToMessageId(iIntValue, i, true, 0, false, 0, null, runnable);
                }
            }
            return true;
        }
        if (ChatObject.getPublicUsername(this.currentChat) != null) {
            try {
                if (publicMsgUrlPattern == null) {
                    publicMsgUrlPattern = Pattern.compile("(https://)?t.me/([0-9a-zA-Z_]+)/([0-9]+)/?([0-9]+)?");
                    voiceChatUrlPattern = Pattern.compile("(https://)?t.me/([0-9a-zA-Z_]+)\\?(voicechat+)");
                }
                Matcher matcher = publicMsgUrlPattern.matcher(str);
                if (matcher.find(2) && matcher.find(3)) {
                    z = false;
                    try {
                        if (ChatObject.hasPublicLink(this.currentChat, matcher.group(2))) {
                            Uri uri2 = Uri.parse(str);
                            int iIntValue3 = Utilities.parseInt((CharSequence) uri2.getQueryParameter("thread")).intValue();
                            int iIntValue4 = Utilities.parseInt((CharSequence) uri2.getQueryParameter("comment")).intValue();
                            Integer num = uri2.getQueryParameter("task") != null ? Utilities.parseInt((CharSequence) uri2.getQueryParameter("task")) : null;
                            if (iIntValue3 == 0 && iIntValue4 == 0) {
                                if (matcher.group(4) != null) {
                                    i4 = Integer.parseInt(matcher.group(3));
                                    i3 = Integer.parseInt(matcher.group(4));
                                } else {
                                    i3 = Integer.parseInt(matcher.group(3));
                                    i4 = 0;
                                }
                                int i5 = i3;
                                if (ChatObject.isForum(this.currentChat) && i4 != getTopicId()) {
                                    return false;
                                }
                                this.showScrollToMessageError = true;
                                if (this.chatMode == 2) {
                                    this.chatActivityDelegate.openReplyMessage(i5);
                                    lambda$onBackPressed$371();
                                } else {
                                    int timestampFromLink = LaunchActivity.getTimestampFromLink(uri2);
                                    this.startFromVideoTimestamp = timestampFromLink;
                                    if (timestampFromLink >= 0) {
                                        this.startFromVideoMessageId = i5;
                                    }
                                    scrollToMessageId(i5, i, true, 0, false, 0, num, runnable);
                                }
                                return true;
                            }
                            return false;
                        }
                    } catch (Exception e) {
                        e = e;
                        FileLog.m1160e(e);
                        return z;
                    }
                } else {
                    z = false;
                }
                if (!str.startsWith("tg:resolve") && !str.startsWith("tg://resolve")) {
                    Matcher matcher2 = voiceChatUrlPattern.matcher(str);
                    try {
                        if (!matcher2.find(2) || !matcher2.find(3) || !ChatObject.hasPublicLink(this.currentChat, matcher2.group(2))) {
                            return z;
                        }
                        String queryParameter = Uri.parse(str).getQueryParameter("voicechat");
                        if (TextUtils.isEmpty(queryParameter)) {
                            return z;
                        }
                        this.voiceChatHash = queryParameter;
                        checkGroupCallJoin(true);
                        return true;
                    } catch (Exception e2) {
                        FileLog.m1160e(e2);
                        return z;
                    }
                }
                Uri uri3 = Uri.parse(str.replace("tg:resolve", "tg://telegram.org").replace("tg://resolve", "tg://telegram.org"));
                String lowerCase = uri3.getQueryParameter("domain").toLowerCase();
                int iIntValue5 = Utilities.parseInt((CharSequence) uri3.getQueryParameter("post")).intValue();
                int iIntValue6 = Utilities.parseInt((CharSequence) uri3.getQueryParameter("thread")).intValue();
                int iIntValue7 = Utilities.parseInt((CharSequence) uri3.getQueryParameter("comment")).intValue();
                if (ChatObject.hasPublicLink(this.currentChat, lowerCase) && iIntValue5 != 0 && iIntValue6 == 0 && iIntValue7 == 0) {
                    if (this.chatMode == 2) {
                        this.chatActivityDelegate.openReplyMessage(iIntValue5);
                        lambda$onBackPressed$371();
                    } else {
                        scrollToMessageId(iIntValue5, i, true, 0, false, 0, null, runnable);
                    }
                    return true;
                }
                return z;
            } catch (Exception e3) {
                e = e3;
                z = false;
            }
        } else {
            try {
                if (privateMsgUrlPattern == null) {
                    privateMsgUrlPattern = Pattern.compile("(https://)?t.me/c/([0-9]+)/([0-9]+)/?([0-9]+)?");
                }
                Matcher matcher3 = privateMsgUrlPattern.matcher(str);
                if (!matcher3.find(2) || !matcher3.find(3) || matcher3.group(4) != null) {
                    return false;
                }
                long j2 = Long.parseLong(matcher3.group(2));
                int i6 = Integer.parseInt(matcher3.group(3));
                if (j2 != this.currentChat.f1571id || i6 == 0) {
                    return false;
                }
                Uri uri4 = Uri.parse(str);
                int iIntValue8 = Utilities.parseInt((CharSequence) uri4.getQueryParameter("thread")).intValue();
                int iIntValue9 = Utilities.parseInt((CharSequence) uri4.getQueryParameter("topic")).intValue();
                int iIntValue10 = Utilities.parseInt((CharSequence) uri4.getQueryParameter("comment")).intValue();
                Integer num2 = Utilities.parseInt((CharSequence) uri4.getQueryParameter("task"));
                num2.intValue();
                if (iIntValue8 == 0 && iIntValue9 == 0 && iIntValue10 == 0) {
                    if (ChatObject.isForum(this.currentChat) && (tL_forumTopicFindTopic = getMessagesController().getTopicsController().findTopic(j2, i6)) != null) {
                        TLRPC.TL_forumTopic tL_forumTopic = this.forumTopic;
                        return tL_forumTopic != null && tL_forumTopic.f1631id == tL_forumTopicFindTopic.f1631id;
                    }
                    this.showScrollToMessageError = true;
                    if (this.chatMode == 2) {
                        this.chatActivityDelegate.openReplyMessage(i6);
                        lambda$onBackPressed$371();
                    } else {
                        scrollToMessageId(i6, i, true, 0, false, 0, num2, runnable);
                    }
                    return true;
                }
                return false;
            } catch (Exception e4) {
                FileLog.m1160e(e4);
                return false;
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$openLinkInternally$399(int i, int i2, CharacterStyle characterStyle, ChatMessageCell chatMessageCell) {
        this.progressDialogAtMessageId = i;
        this.progressDialogAtMessageType = i2;
        this.progressDialogLinkSpan = characterStyle;
        chatMessageCell.invalidate();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void setInMenuMode(boolean z) {
        super.setInMenuMode(z);
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            actionBar.createMenu().setVisibility(this.inMenuMode ? 8 : 0);
        }
    }

    public void setPreloadedSticker(TLRPC.Document document, boolean z) {
        this.preloadedGreetingsSticker = document;
        this.forceHistoryEmpty = z;
    }

    public void forceEmptyHistory() {
        this.forceHistoryEmpty = true;
    }

    public class ChatScrollCallback extends RecyclerAnimationScrollHelper.AnimationCallback {
        private boolean lastBottom;
        private int lastItemOffset;
        private int lastPadding;
        private MessageObject scrollTo;
        private int position = 0;
        private boolean bottom = true;
        private int offset = 0;

        public ChatScrollCallback() {
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void onStartAnimation() {
            super.onStartAnimation();
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.scrollCallbackAnimationIndex = chatActivity.getNotificationCenter().setAnimationInProgress(ChatActivity.this.scrollCallbackAnimationIndex, ChatActivity.allowedNotificationsDuringChatListAnimations);
            if (ChatActivity.this.pinchToZoomHelper.isInOverlayMode()) {
                ChatActivity.this.pinchToZoomHelper.finishZoom();
            }
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void onEndAnimation() {
            if (this.scrollTo != null) {
                ChatActivity.this.chatAdapter.updateRowsSafe();
                int iIndexOf = ChatActivity.this.chatAdapter.messagesStartRow + ChatActivity.this.messages.indexOf(this.scrollTo);
                if (iIndexOf >= 0) {
                    ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(iIndexOf, (int) ((this.lastItemOffset + this.lastPadding) - ChatActivity.this.chatListViewPaddingTop), this.lastBottom);
                }
            } else {
                ChatActivity.this.chatAdapter.updateRowsSafe();
                ChatActivity.this.chatLayoutManager.scrollToPositionWithOffset(this.position, this.offset, this.bottom);
            }
            this.scrollTo = null;
            ChatActivity.this.checkTextureViewPosition = true;
            ChatActivity.this.updateVisibleRows();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$ChatScrollCallback$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onEndAnimation$0();
                }
            });
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onEndAnimation$0() {
            ChatActivity.this.getNotificationCenter().onAnimationFinish(ChatActivity.this.scrollCallbackAnimationIndex);
        }

        @Override // org.telegram.ui.Components.RecyclerAnimationScrollHelper.AnimationCallback
        public void recycleView(View view) {
            if (view instanceof ChatMessageCell) {
                ChatMessageCell chatMessageCell = (ChatMessageCell) view;
                chatMessageCell.setDelegate(null);
                ArrayList arrayList = (ArrayList) ChatActivity.this.chatMessageCellsCache.get(((BaseFragment) ChatActivity.this).currentAccount);
                if (arrayList == null) {
                    LongSparseArray longSparseArray = ChatActivity.this.chatMessageCellsCache;
                    long j = ((BaseFragment) ChatActivity.this).currentAccount;
                    ArrayList arrayList2 = new ArrayList();
                    longSparseArray.put(j, arrayList2);
                    arrayList = arrayList2;
                }
                arrayList.add(chatMessageCell);
            }
        }
    }

    public static boolean isClickableLink(String str) {
        return str.startsWith("https://") || str.startsWith("@") || str.startsWith("#") || str.startsWith("$") || str.startsWith("video?");
    }

    public SimpleTextView getReplyNameTextView() {
        return this.replyNameTextView;
    }

    public SimpleTextView getReplyObjectTextView() {
        return this.replyObjectTextView;
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public ArrayList getThemeDescriptions() {
        int i;
        if (this.forceDisallowRedrawThemeDescriptions) {
            return null;
        }
        if (this.isPauseOnThemePreview) {
            this.isPauseOnThemePreview = false;
            return null;
        }
        ThemeDescription.ThemeDescriptionDelegate themeDescriptionDelegate = new ThemeDescription.ThemeDescriptionDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda94
            @Override // org.telegram.ui.ActionBar.ThemeDescription.ThemeDescriptionDelegate
            public final void didSetColor() throws InterruptedException {
                this.f$0.lambda$getThemeDescriptions$400();
            }

            @Override // org.telegram.ui.ActionBar.ThemeDescription.ThemeDescriptionDelegate
            public /* synthetic */ void onAnimationProgress(float f) {
                ThemeDescription.ThemeDescriptionDelegate.CC.$default$onAnimationProgress(this, f);
            }
        };
        ArrayList arrayList = new ArrayList();
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, Theme.key_chat_wallpaper));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, Theme.key_chat_wallpaper_gradient_to1));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, Theme.key_chat_wallpaper_gradient_to2));
        arrayList.add(new ThemeDescription(this.fragmentView, 0, null, null, null, null, Theme.key_chat_wallpaper_gradient_to3));
        arrayList.add(new ThemeDescription(this.messagesSearchListContainer, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, Theme.key_windowBackgroundWhite));
        if (!isReport()) {
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, Theme.key_actionBarDefault));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_ITEMSCOLOR, null, null, null, null, Theme.key_actionBarDefaultIcon));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, Theme.key_actionBarDefaultSelector));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_TITLECOLOR, null, null, null, null, Theme.key_actionBarDefaultTitle));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBTITLECOLOR, null, null, null, null, Theme.key_actionBarDefaultSubtitle));
        } else {
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_BACKGROUND, null, null, null, null, Theme.key_actionBarActionModeDefault));
            ActionBar actionBar = this.actionBar;
            int i2 = ThemeDescription.FLAG_AB_ITEMSCOLOR;
            int i3 = Theme.key_actionBarActionModeDefaultIcon;
            arrayList.add(new ThemeDescription(actionBar, i2, null, null, null, null, i3));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, Theme.key_actionBarActionModeDefaultSelector));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_TITLECOLOR, null, null, null, null, i3));
            arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBTITLECOLOR, null, null, null, null, i3));
        }
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUBACKGROUND, null, null, null, themeDescriptionDelegate, Theme.key_actionBarDefaultSubmenuBackground));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUITEM, null, null, null, themeDescriptionDelegate, Theme.key_actionBarDefaultSubmenuItem));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SUBMENUITEM | ThemeDescription.FLAG_IMAGECOLOR, null, null, null, themeDescriptionDelegate, Theme.key_actionBarDefaultSubmenuItemIcon));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LISTGLOWCOLOR, null, null, null, null, Theme.key_actionBarDefault));
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer != null ? chatAvatarContainer.getTitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_actionBarDefaultTitle));
        ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
        SimpleTextView titleTextView = chatAvatarContainer2 != null ? chatAvatarContainer2.getTitleTextView() : null;
        int i4 = ThemeDescription.FLAG_IMAGECOLOR;
        int i5 = Theme.key_actionBarDefaultSubtitle;
        arrayList.add(new ThemeDescription(titleTextView, i4, null, null, null, null, i5));
        ChatAvatarContainer chatAvatarContainer3 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer3 != null ? chatAvatarContainer3.getSubtitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, (Class[]) null, new Paint[]{Theme.chat_statusPaint, Theme.chat_statusRecordPaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_status, (Object) null));
        ChatAvatarContainer chatAvatarContainer4 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer4 != null ? chatAvatarContainer4.getSubtitleTextView() : null, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, (Class[]) null, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i5, (Object) null));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SELECTORCOLOR, null, null, null, null, Theme.key_actionBarDefaultSelector));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCH, null, null, null, null, Theme.key_actionBarDefaultSearch));
        ActionBar actionBar2 = this.actionBar;
        int i6 = ThemeDescription.FLAG_AB_SEARCHPLACEHOLDER;
        int i7 = Theme.key_actionBarDefaultSearchPlaceholder;
        arrayList.add(new ThemeDescription(actionBar2, i6, null, null, null, null, i7));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_SEARCHPLACEHOLDER, null, null, null, null, i7));
        ActionBar actionBar3 = this.actionBar;
        int i8 = ThemeDescription.FLAG_AB_AM_ITEMSCOLOR;
        int i9 = Theme.key_actionBarActionModeDefaultIcon;
        arrayList.add(new ThemeDescription(actionBar3, i8, null, null, null, null, i9));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_BACKGROUND, null, null, null, null, Theme.key_actionBarActionModeDefault));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_TOPBACKGROUND, null, null, null, null, Theme.key_actionBarActionModeDefaultTop));
        arrayList.add(new ThemeDescription(this.actionBar, ThemeDescription.FLAG_AB_AM_SELECTORCOLOR, null, null, null, null, Theme.key_actionBarActionModeDefaultSelector));
        arrayList.add(new ThemeDescription(this.selectedMessagesCountTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, i9));
        ChatAvatarContainer chatAvatarContainer5 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer5 != null ? chatAvatarContainer5.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_muteIconDrawable}, null, Theme.key_chat_muteIcon));
        ChatAvatarContainer chatAvatarContainer6 = this.avatarContainer;
        arrayList.add(new ThemeDescription(chatAvatarContainer6 != null ? chatAvatarContainer6.getTitleTextView() : null, 0, null, null, new Drawable[]{Theme.chat_lockIconDrawable}, null, Theme.key_chat_lockIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.avatarDrawables, null, Theme.key_avatar_text));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundRed));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundOrange));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundViolet));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundGreen));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundCyan));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundBlue));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_backgroundPink));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageRed));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageOrange));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageViolet));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageGreen));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageCyan));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessageBlue));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_avatar_nameInMessagePink));
        Theme.MessageDrawable messageDrawable = (Theme.MessageDrawable) getThemedDrawable("drawableMsgIn");
        Theme.MessageDrawable messageDrawable2 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInMedia");
        Theme.MessageDrawable messageDrawable3 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInSelected");
        Theme.MessageDrawable messageDrawable4 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgInMediaSelected");
        Theme.MessageDrawable messageDrawable5 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOut");
        Theme.MessageDrawable messageDrawable6 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutMedia");
        Theme.MessageDrawable messageDrawable7 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutSelected");
        Theme.MessageDrawable messageDrawable8 = (Theme.MessageDrawable) getThemedDrawable("drawableMsgOutMediaSelected");
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, new Drawable[]{messageDrawable, messageDrawable2}, null, Theme.key_chat_inBubble));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable3, messageDrawable4}, null, Theme.key_chat_inBubbleSelected));
        if (messageDrawable != null) {
            Drawable[] shadowDrawables = messageDrawable.getShadowDrawables();
            int i10 = Theme.key_chat_inBubbleShadow;
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, shadowDrawables, null, i10));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable2.getShadowDrawables(), null, i10));
            Drawable[] shadowDrawables2 = messageDrawable5.getShadowDrawables();
            int i11 = Theme.key_chat_outBubbleShadow;
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, shadowDrawables2, null, i11));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, messageDrawable6.getShadowDrawables(), null, i11));
        }
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, Theme.key_chat_outBubble));
        if (this.themeDelegate.isThemeChangeAvailable(false)) {
            i = 1;
        } else {
            i = 1;
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, Theme.key_chat_outBubbleGradient1));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, Theme.key_chat_outBubbleGradient2));
            arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{messageDrawable5, messageDrawable6}, null, Theme.key_chat_outBubbleGradient3));
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        Class[] clsArr = new Class[i];
        clsArr[0] = ChatMessageCell.class;
        Drawable[] drawableArr = new Drawable[2];
        drawableArr[0] = messageDrawable7;
        drawableArr[i] = messageDrawable8;
        arrayList.add(new ThemeDescription(chatListRecyclerView, 0, clsArr, null, drawableArr, null, Theme.key_chat_outBubbleSelected));
        ChatListRecyclerView chatListRecyclerView2 = this.chatListView;
        Class[] clsArr2 = new Class[i];
        clsArr2[0] = ChatMessageCell.class;
        Drawable[] drawableArr2 = new Drawable[2];
        drawableArr2[0] = messageDrawable7;
        drawableArr2[i] = messageDrawable8;
        arrayList.add(new ThemeDescription(chatListRecyclerView2, 0, clsArr2, null, drawableArr2, null, Theme.key_chat_outBubbleGradientSelectedOverlay));
        ChatListRecyclerView chatListRecyclerView3 = this.chatListView;
        int i12 = ThemeDescription.FLAG_TEXTCOLOR;
        Class[] clsArr3 = new Class[i];
        clsArr3[0] = ChatActionCell.class;
        Paint themedPaint = getThemedPaint("paintChatActionText");
        int i13 = Theme.key_chat_serviceText;
        arrayList.add(new ThemeDescription(chatListRecyclerView3, i12, clsArr3, themedPaint, null, null, i13));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatActionCell.class}, getThemedPaint("paintChatActionText"), null, null, Theme.key_chat_serviceLink));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_botCardDrawable, getThemedDrawable("drawableShareIcon"), getThemedDrawable("drawableReplyIcon"), getThemedDrawable("drawableBotInline"), getThemedDrawable("drawableBotLink"), getThemedDrawable("drawableBotLock"), getThemedDrawable("drawable_botInvite"), getThemedDrawable("drawableGoIcon"), getThemedDrawable("drawableCommentSticker")}, null, Theme.key_chat_serviceIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, Theme.key_chat_serviceBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, ChatActionCell.class}, null, null, null, Theme.key_chat_serviceBackgroundSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class, BotHelpCell.class}, null, null, null, Theme.key_chat_messageTextIn));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_messageTextOut));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class, BotHelpCell.class}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messageLinkIn, (Object) null));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{ChatMessageCell.class}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messageLinkOut, (Object) null));
        Drawable[] drawableArr3 = {Theme.chat_msgNoSoundDrawable};
        int i14 = Theme.key_chat_mediaTimeText;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, drawableArr3, null, i14));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheck")}, null, Theme.key_chat_outSentCheck));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckSelected")}, null, Theme.key_chat_outSentCheckSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckRead"), getThemedDrawable("drawableMsgOutHalfCheck")}, null, Theme.key_chat_outSentCheckRead));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCheckReadSelected"), getThemedDrawable("drawableMsgOutHalfCheckSelected")}, null, Theme.key_chat_outSentCheckReadSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outSentClock));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outSentClockSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inSentClock));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inSentClockSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaCheckDrawable, Theme.chat_msgMediaHalfCheckDrawable}, null, Theme.key_chat_mediaSentCheck));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgStickerHalfCheck"), getThemedDrawable("drawableMsgStickerCheck"), getThemedDrawable("drawableMsgStickerClock"), getThemedDrawable("drawableMsgStickerViews"), getThemedDrawable("drawableMsgStickerReplies"), getThemedDrawable("drawableMsgStickerPinned")}, null, i13));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_mediaSentClock));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutViews"), getThemedDrawable("drawableMsgOutReplies"), getThemedDrawable("drawableMsgOutPinned")}, null, Theme.key_chat_outViews));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutViewsSelected"), getThemedDrawable("drawableMsgOutReplies"), getThemedDrawable("drawableMsgOutPinnedSelected")}, null, Theme.key_chat_outViewsSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsDrawable, Theme.chat_msgInRepliesDrawable, Theme.chat_msgInPinnedDrawable}, null, Theme.key_chat_inViews));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInViewsSelectedDrawable, Theme.chat_msgInRepliesSelectedDrawable, Theme.chat_msgInPinnedSelectedDrawable}, null, Theme.key_chat_inViewsSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaViewsDrawable, Theme.chat_msgMediaRepliesDrawable, Theme.chat_msgMediaPinnedDrawable}, null, Theme.key_chat_mediaViews));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutMenu")}, null, Theme.key_chat_outMenu));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutMenuSelected")}, null, Theme.key_chat_outMenuSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuDrawable}, null, Theme.key_chat_inMenu));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgInMenuSelectedDrawable}, null, Theme.key_chat_inMenuSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgMediaMenuDrawable}, null, Theme.key_chat_mediaMenu));
        Drawable[] drawableArr4 = {getThemedDrawable("drawableMsgOutInstant")};
        int i15 = Theme.key_chat_outInstant;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, drawableArr4, null, i15));
        Drawable[] drawableArr5 = {Theme.chat_msgInInstantDrawable, Theme.chat_commentDrawable, Theme.chat_commentArrowDrawable};
        int i16 = Theme.key_chat_inInstant;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, drawableArr5, null, i16));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCallAudio"), getThemedDrawable("drawableMsgOutCallVideo")}, null, i15));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{getThemedDrawable("drawableMsgOutCallAudioSelected"), getThemedDrawable("drawableMsgOutCallVideo")}, null, i15));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.chat_msgInCallDrawable, null, i16));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, Theme.chat_msgInCallSelectedDrawable, null, Theme.key_chat_inInstantSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallUpGreenDrawable}, null, Theme.key_chat_outGreenCall));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallDownRedDrawable}, null, Theme.key_fill_RedNormal));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgCallDownGreenDrawable}, null, Theme.key_chat_inGreenCall));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_msgErrorPaint, null, null, Theme.key_chat_sentError));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_msgErrorDrawable}, null, Theme.key_chat_sentErrorIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, themeDescriptionDelegate, Theme.key_chat_selectedBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_durationPaint, null, null, Theme.key_chat_previewDurationText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_gamePaint, null, null, Theme.key_chat_previewGameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inPreviewInstantText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outPreviewInstantText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_deleteProgressPaint, null, null, Theme.key_chat_secretTimeText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_stickerNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, getThemedPaint("paintChatBotButton"), null, null, Theme.key_chat_botButtonText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, getThemedPaint("paintChatTimeBackground"), null, null, Theme.key_chat_mediaTimeBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inForwardedNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outForwardedNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inPsaNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outPsaNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inViaBotNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outViaBotNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_stickerViaBotNameText));
        int i17 = Theme.key_chat_inReplyLine;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, i17));
        int i18 = Theme.key_chat_outReplyLine;
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, i18));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_stickerReplyLine));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inReplyNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outReplyNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_stickerReplyNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inReplyMessageText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outReplyMessageText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inReplyMediaMessageText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outReplyMediaMessageText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inReplyMediaMessageSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outReplyMediaMessageSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_stickerReplyMessageText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inPreviewLine));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outPreviewLine));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inSiteNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outSiteNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inContactNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outContactNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inContactPhoneText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inContactPhoneSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outContactPhoneText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outContactPhoneSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_mediaProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioSelectedProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioSelectedProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, i14));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inTimeText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outTimeText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inTimeSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAdminText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAdminSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAdminText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAdminSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outTimeSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioPerformerText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioPerformerSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioPerformerText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioPerformerSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioTitleText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioTitleText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioDurationText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioDurationText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioDurationSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioDurationSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioSeekbarSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioSeekbarSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioSeekbarFill));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inAudioCacheSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioSeekbarFill));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outAudioCacheSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inVoiceSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outVoiceSeekbar));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inVoiceSeekbarSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outVoiceSeekbarSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inVoiceSeekbarFill));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outVoiceSeekbarFill));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileProgress));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileProgressSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileProgressSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileNameText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileInfoText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileInfoText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileInfoSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileInfoSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inFileBackgroundSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outFileBackgroundSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inVenueInfoText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outVenueInfoText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inVenueInfoSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outVenueInfoSelectedText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_mediaInfoText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_urlPaint, null, null, Theme.key_chat_linkSelectBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_outUrlPaint, null, null, i18));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, Theme.chat_textSearchSelectionPaint, null, null, i17));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outLoader));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outMediaIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outLoaderSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outMediaIconSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inLoader));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inMediaIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inLoaderSelected));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inMediaIconSelected));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, Theme.key_chat_inContactBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[0]}, null, Theme.key_chat_inContactIcon));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, Theme.key_chat_outContactBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_contactDrawable[1]}, null, Theme.key_chat_outContactIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inLocationBackground));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[0]}, null, Theme.key_chat_inLocationIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_locationDrawable[1]}, null, Theme.key_chat_outLocationIcon));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inPollCorrectAnswer));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outPollCorrectAnswer));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_inPollWrongAnswer));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, null, null, Theme.key_chat_outPollWrongAnswer));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_pollHintDrawable[0]}, null, Theme.key_chat_inPreviewInstantText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_pollHintDrawable[1]}, null, Theme.key_chat_outPreviewInstantText));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_psaHelpDrawable[0]}, null, Theme.key_chat_inViews));
        arrayList.add(new ThemeDescription(this.chatListView, 0, new Class[]{ChatMessageCell.class}, null, new Drawable[]{Theme.chat_psaHelpDrawable[1]}, null, Theme.key_chat_outViews));
        if (!this.themeDelegate.isThemeChangeAvailable(false)) {
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, Theme.avatarDrawables, null, Theme.key_avatar_text));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_countPaint, null, null, Theme.key_chats_unreadCounter));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, new Paint[]{Theme.dialogs_namePaint[0], Theme.dialogs_namePaint[1], Theme.dialogs_searchNamePaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chats_name));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, new Paint[]{Theme.dialogs_nameEncryptedPaint[0], Theme.dialogs_nameEncryptedPaint[1], Theme.dialogs_searchNameEncryptedPaint}, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chats_secretName));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_lockDrawable}, null, Theme.key_chats_secretIcon));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_scamDrawable, Theme.dialogs_fakeDrawable}, null, Theme.key_chats_draft));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_messagePaint[1], null, null, Theme.key_chats_message_threeLines));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_messageNamePaint, null, null, Theme.key_chats_nameMessage_threeLines));
            arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chats_nameMessage));
            arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chats_attachMessage));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, (String[]) null, Theme.dialogs_messagePrintingPaint, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chats_actionMessage));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, Theme.dialogs_timePaint, null, null, Theme.key_chats_date));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_checkDrawable}, null, Theme.key_chats_sentCheck));
            arrayList.add(new ThemeDescription(this.messagesSearchListView, 0, new Class[]{DialogCell.class}, null, new Drawable[]{Theme.dialogs_checkReadDrawable, Theme.dialogs_halfCheckDrawable}, null, Theme.key_chats_sentReadCheck));
        }
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        Paint themedPaint2 = getThemedPaint("paintChatComposeBackground");
        int i19 = Theme.key_chat_messagePanelBackground;
        arrayList.add(new ThemeDescription(mentionsContainerView, 0, null, themedPaint2, null, null, i19));
        MentionsContainerView mentionsContainerView2 = this.mentionContainer;
        Drawable[] drawableArr6 = {Theme.chat_composeShadowDrawable};
        int i20 = Theme.key_chat_messagePanelShadow;
        arrayList.add(new ThemeDescription(mentionsContainerView2, 0, null, null, drawableArr6, null, i20));
        arrayList.add(new ThemeDescription(this.mentionContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowRoundDrawable}, null, i19));
        arrayList.add(new ThemeDescription(this.searchContainer, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, i19));
        arrayList.add(new ThemeDescription(this.searchContainer, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, i20));
        arrayList.add(new ThemeDescription(this.bottomOverlay, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, i19));
        arrayList.add(new ThemeDescription(this.bottomOverlay, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, i20));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, getThemedPaint("paintChatComposeBackground"), null, null, i19));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, new Drawable[]{Theme.chat_composeShadowDrawable}, null, i20));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelText));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_CURSORCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelCursor));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_HINTTEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"messageEditText"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_glass_defaultText));
        int i21 = Theme.key_chat_messagePanelSend;
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"sendButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i21));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"sendButton"}, null, null, 24, null, i21));
        int i22 = Theme.key_glass_defaultIcon;
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"botButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        int i23 = Theme.key_listSelector;
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"botButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR | ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        int i24 = Theme.key_chat_recordedVoiceDot;
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i24));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"scheduledButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"attachButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"attachButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"suggestButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"suggestButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"notifyButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"videoTimelineView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i21));
        int i25 = Theme.key_chat_messagePanelVoicePressed;
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"micDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i25));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"cameraDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i25));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"sendDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i25));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, Theme.key_chat_messagePanelVoiceLock));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, null, null, null, Theme.key_chat_messagePanelVoiceLockBackground));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"lockShadowDrawable"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelVoiceLockShadow));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"recordDeleteImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_BACKGROUNDFILTER, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioBackground"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_recordedVoiceBackground));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, Theme.key_chat_recordTime));
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        int i26 = Theme.key_chat_recordVoiceCancel;
        arrayList.add(new ThemeDescription(chatActivityEnterView, 0, null, null, null, null, i26));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"recordedAudioTimeTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelVoiceDuration));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, null, null, null, null, i26));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatActivityEnterView.class}, new String[]{"cancelBotButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelCancelInlineBot));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, new Class[]{ChatActivityEnterView.class}, new String[]{"cancelBotButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i23));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"redDotPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i24));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"paint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_messagePanelVoiceBackground));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, new String[]{"dotPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_emojiPanelNewTrending));
        arrayList.add(new ThemeDescription(this.chatActivityEnterView, 0, new Class[]{ChatActivityEnterView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_recordedVoicePlayPause));
        ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView2 != null ? chatActivityEnterView2.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelBackground));
        ChatActivityEnterView chatActivityEnterView3 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView3 != null ? chatActivityEnterView3.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelShadowLine));
        ChatActivityEnterView chatActivityEnterView4 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView4 != null ? chatActivityEnterView4.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelEmptyText));
        ChatActivityEnterView chatActivityEnterView5 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView5 != null ? chatActivityEnterView5.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelIcon));
        ChatActivityEnterView chatActivityEnterView6 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView6 != null ? chatActivityEnterView6.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelIconSelected));
        ChatActivityEnterView chatActivityEnterView7 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView7 != null ? chatActivityEnterView7.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelStickerPackSelector));
        ChatActivityEnterView chatActivityEnterView8 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView8 != null ? chatActivityEnterView8.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelBackspace));
        ChatActivityEnterView chatActivityEnterView9 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView9 != null ? chatActivityEnterView9.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelTrendingTitle));
        ChatActivityEnterView chatActivityEnterView10 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView10 != null ? chatActivityEnterView10.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelTrendingDescription));
        ChatActivityEnterView chatActivityEnterView11 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView11 != null ? chatActivityEnterView11.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiBottomPanelIcon));
        ChatActivityEnterView chatActivityEnterView12 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView12 != null ? chatActivityEnterView12.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiSearchIcon));
        ChatActivityEnterView chatActivityEnterView13 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView13 != null ? chatActivityEnterView13.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelStickerSetNameHighlight));
        ChatActivityEnterView chatActivityEnterView14 = this.chatActivityEnterView;
        arrayList.add(new ThemeDescription(chatActivityEnterView14 != null ? chatActivityEnterView14.getEmojiView() : null, 0, new Class[]{EmojiView.class}, (String[]) null, (Paint[]) null, (Drawable[]) null, themeDescriptionDelegate, Theme.key_chat_emojiPanelStickerPackSelectorLine));
        ChatActivityEnterView chatActivityEnterView15 = this.chatActivityEnterView;
        if (chatActivityEnterView15 != null) {
            TrendingStickersAlert trendingStickersAlert = chatActivityEnterView15.getTrendingStickersAlert();
            if (trendingStickersAlert != null) {
                arrayList.addAll(trendingStickersAlert.getThemeDescriptions());
            }
            arrayList.add(new ThemeDescription((View) null, 0, (Class[]) null, (String[]) null, (Paint[]) null, new Drawable[]{this.chatActivityEnterView.getStickersArrowDrawable()}, (ThemeDescription.ThemeDescriptionDelegate) null, i22));
        }
        int i27 = 0;
        while (i27 < 2) {
            UndoView undoView = i27 == 0 ? this.undoView : this.topUndoView;
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, Theme.key_undo_background));
            int i28 = Theme.key_undo_cancelColor;
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"undoImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i28));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"undoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i28));
            int i29 = Theme.key_undo_infoColor;
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"infoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i29));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"subinfoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i29));
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_LINKCOLOR, new Class[]{UndoView.class}, new String[]{"subinfoTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i28));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"textPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i29));
            arrayList.add(new ThemeDescription(undoView, 0, new Class[]{UndoView.class}, new String[]{"progressPaint"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i29));
            arrayList.add(new ThemeDescription(undoView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{UndoView.class}, new String[]{"leftImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i29));
            i27++;
        }
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_botKeyboardButtonText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_botKeyboardButtonBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_botKeyboardButtonBackgroundPressed));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_inappPlayerBackground));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"playButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_inappPlayerPlayPause));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_inappPlayerTitle));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_inappPlayerPerformer));
        int i30 = Theme.key_inappPlayerClose;
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_FASTSCROLL, new Class[]{FragmentContextView.class}, new String[]{"subtitleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i30));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{FragmentContextView.class}, new String[]{"closeButton"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i30));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_BACKGROUND | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"frameLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_returnToCallBackground));
        arrayList.add(new ThemeDescription(this.fragmentView, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, new Class[]{FragmentContextView.class}, new String[]{"titleTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_returnToCallText));
        arrayList.add(new ThemeDescription(this.pinnedLineView, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_topPanelLine));
        arrayList.add(new ThemeDescription(this.pinnedLineView, 0, null, null, null, themeDescriptionDelegate, Theme.key_windowBackgroundWhite));
        arrayList.add(new ThemeDescription(this.pinnedCounterTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_topPanelTitle));
        for (int i31 = 0; i31 < 2; i31++) {
            arrayList.add(new ThemeDescription(this.pinnedNameTextView[i31], ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_topPanelTitle));
            arrayList.add(new ThemeDescription(this.pinnedMessageTextView[i31], ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_topPanelMessage));
        }
        arrayList.add(new ThemeDescription(this.alertNameTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_topPanelTitle));
        arrayList.add(new ThemeDescription(this.alertTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_topPanelMessage));
        ImageView imageView = this.closePinned;
        int i32 = ThemeDescription.FLAG_IMAGECOLOR;
        int i33 = Theme.key_chat_topPanelClose;
        arrayList.add(new ThemeDescription(imageView, i32, null, null, null, null, i33));
        arrayList.add(new ThemeDescription(this.pinnedListButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, i33));
        arrayList.add(new ThemeDescription(this.closeReportSpam, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, i33));
        BlurredFrameLayout blurredFrameLayout = this.topChatPanelView;
        int i34 = ThemeDescription.FLAG_BACKGROUNDFILTER;
        int i35 = Theme.key_chat_topPanelBackground;
        arrayList.add(new ThemeDescription(blurredFrameLayout, i34, null, null, null, null, i35));
        arrayList.add(new ThemeDescription(this.topChatPanelView2, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, i35));
        arrayList.add(new ThemeDescription(this.alertView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, i35));
        arrayList.add(new ThemeDescription(this.pinnedMessageView, ThemeDescription.FLAG_BACKGROUNDFILTER, null, null, null, null, i35));
        TextView textView = this.addToContactsButton;
        int i36 = ThemeDescription.FLAG_TEXTCOLOR;
        int i37 = Theme.key_chat_addContact;
        arrayList.add(new ThemeDescription(textView, i36, null, null, null, null, i37));
        arrayList.add(new ThemeDescription(this.reportSpamButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, null, null, null, null, Theme.key_text_RedBold));
        arrayList.add(new ThemeDescription(this.reportSpamButton, ThemeDescription.FLAG_TEXTCOLOR | ThemeDescription.FLAG_CHECKTAG, null, null, null, null, i37));
        SimpleTextView simpleTextView = this.replyNameTextView;
        int i38 = ThemeDescription.FLAG_TEXTCOLOR;
        int i39 = Theme.key_chat_replyPanelName;
        arrayList.add(new ThemeDescription(simpleTextView, i38, null, null, null, null, i39));
        SimpleTextView simpleTextView2 = this.replyObjectTextView;
        int i40 = ThemeDescription.FLAG_TEXTCOLOR;
        int i41 = Theme.key_glass_defaultText;
        arrayList.add(new ThemeDescription(simpleTextView2, i40, null, null, null, null, i41));
        arrayList.add(new ThemeDescription(this.replyObjectHintTextView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, i41));
        arrayList.add(new ThemeDescription(this.replyIconImageView, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, Theme.key_chat_replyPanelIcons));
        ImageView imageView2 = this.replyCloseImageView;
        int i42 = ThemeDescription.FLAG_IMAGECOLOR;
        int i43 = Theme.key_glass_defaultIcon;
        arrayList.add(new ThemeDescription(imageView2, i42, null, null, null, null, i43));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i39));
        ImageView imageView3 = this.searchCalendarButton;
        int i44 = ThemeDescription.FLAG_IMAGECOLOR;
        int i45 = Theme.key_chat_searchPanelIcons;
        arrayList.add(new ThemeDescription(imageView3, i44, null, null, null, null, i45));
        ImageView imageView4 = this.searchCalendarButton;
        int i46 = ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE;
        int i47 = Theme.key_actionBarActionModeDefaultSelector;
        arrayList.add(new ThemeDescription(imageView4, i46, null, null, null, null, i47));
        arrayList.add(new ThemeDescription(this.searchUserButton, ThemeDescription.FLAG_IMAGECOLOR, null, null, null, null, i45));
        arrayList.add(new ThemeDescription(this.searchUserButton, ThemeDescription.FLAG_BACKGROUNDFILTER | ThemeDescription.FLAG_DRAWABLESELECTEDSTATE, null, null, null, null, i47));
        arrayList.add(new ThemeDescription(this.bottomOverlayText, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, Theme.key_chat_secretChatStatusText));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, i41));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, Theme.key_chat_goDownButtonCounterBackground));
        arrayList.add(new ThemeDescription(this.bottomOverlayChatText, 0, null, null, null, null, Theme.key_chat_messagePanelBackground));
        arrayList.add(new ThemeDescription(this.bottomOverlayProgress, 0, null, null, null, null, i43));
        ChatBigEmptyView chatBigEmptyView = this.bigEmptyView;
        int i48 = ThemeDescription.FLAG_TEXTCOLOR;
        int i49 = Theme.key_chat_serviceText;
        arrayList.add(new ThemeDescription(chatBigEmptyView, i48, null, null, null, null, i49));
        arrayList.add(new ThemeDescription(this.emptyView, ThemeDescription.FLAG_TEXTCOLOR, null, null, null, null, i49));
        arrayList.add(new ThemeDescription(this.progressBar, ThemeDescription.FLAG_PROGRESSBAR, null, null, null, null, i49));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_USEBACKGROUNDDRAWABLE, new Class[]{ChatUnreadCell.class}, new String[]{"backgroundLayout"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_unreadMessagesStartBackground));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"imageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_unreadMessagesStartArrowIcon));
        arrayList.add(new ThemeDescription(this.chatListView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{ChatUnreadCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_unreadMessagesStartText));
        View view = this.progressView2;
        int i50 = ThemeDescription.FLAG_SERVICEBACKGROUND;
        int i51 = Theme.key_chat_serviceBackground;
        arrayList.add(new ThemeDescription(view, i50, null, null, null, null, i51));
        arrayList.add(new ThemeDescription(this.emptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, i51));
        arrayList.add(new ThemeDescription(this.bigEmptyView, ThemeDescription.FLAG_SERVICEBACKGROUND, null, null, null, null, i51));
        if (this.mentionContainer != null) {
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotSwitchCell.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_chat_botSwitchToInlineText));
            int i52 = Theme.key_windowBackgroundWhiteBlackText;
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"nameTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i52));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), ThemeDescription.FLAG_TEXTCOLOR, new Class[]{MentionCell.class}, new String[]{"usernameTextView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_windowBackgroundWhiteGrayText3));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, new Drawable[]{Theme.chat_inlineResultFile, Theme.chat_inlineResultAudio, Theme.chat_inlineResultLocation}, null, Theme.key_chat_inlineResultIcon));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, Theme.key_windowBackgroundWhiteGrayText2));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, Theme.key_windowBackgroundWhiteLinkText));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, i52));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, Theme.key_chat_inAudioProgress));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, Theme.key_chat_inAudioSelectedProgress));
            arrayList.add(new ThemeDescription(this.mentionContainer.getListView(), 0, new Class[]{ContextLinkCell.class}, null, null, null, Theme.key_divider));
        }
        HintView hintView = this.gifHintTextView;
        int i53 = ThemeDescription.FLAG_BACKGROUNDFILTER;
        int i54 = Theme.key_chat_gifSaveHintBackground;
        arrayList.add(new ThemeDescription(hintView, i53, null, null, null, null, i54));
        HintView hintView2 = this.gifHintTextView;
        int i55 = ThemeDescription.FLAG_TEXTCOLOR;
        int i56 = Theme.key_chat_gifSaveHintText;
        arrayList.add(new ThemeDescription(hintView2, i55, null, null, null, null, i56));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i56));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_IMAGECOLOR, new Class[]{HintView.class}, new String[]{"imageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i56));
        arrayList.add(new ThemeDescription(this.noSoundHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i54));
        arrayList.add(new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"textView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i56));
        arrayList.add(new ThemeDescription(this.forwardHintView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{HintView.class}, new String[]{"arrowImageView"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, i54));
        arrayList.add(new ThemeDescription(this.floatingDateView, 0, null, null, null, null, i49));
        arrayList.add(new ThemeDescription(this.floatingDateView, 0, null, null, null, null, i51));
        arrayList.add(new ThemeDescription(this.infoTopView, 0, null, null, null, null, i49));
        arrayList.add(new ThemeDescription(this.infoTopView, 0, null, null, null, null, i51));
        int i57 = Theme.key_chat_attachIcon;
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachGalleryBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachGalleryText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachAudioBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachAudioText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachFileBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachFileText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachContactBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachContactText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachLocationBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachLocationText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, i57));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachPollBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachPollText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachTodoBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachTodoText));
        arrayList.add(new ThemeDescription(null, 0, null, null, new Drawable[]{Theme.chat_attachEmptyDrawable}, null, Theme.key_chat_attachEmptyImage));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_attachPhotoBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogBackgroundGray));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogTextGray2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogScrollGlow));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogGrayLine));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogCameraIcon));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_dialogButtonSelector));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_windowBackgroundWhiteLinkSelection));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_windowBackgroundWhiteInputField));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_outTextSelectionHighlight));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_inTextSelectionHighlight));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_TextSelectionCursor));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayGreen1));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayGreen2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayBlue1));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayBlue2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_topPanelGreen1));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_topPanelGreen2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_topPanelBlue1));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_topPanelBlue2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_topPanelGray));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertGradientMuted));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertGradientMuted2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertGradientUnmuted));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertGradientUnmuted2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_mutedByAdminGradient));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_mutedByAdminGradient2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_mutedByAdminGradient3));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertMutedByAdmin));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_voipgroup_overlayAlertMutedByAdmin2));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_windowBackgroundGray));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_outReactionButtonBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_inReactionButtonBackground));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_inReactionButtonText));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, Theme.key_chat_outReactionButtonText));
        int i58 = Theme.key_chat_inReactionButtonTextSelected;
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, i58));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, null, i58));
        arrayList.add(new ThemeDescription(null, 0, null, null, null, themeDescriptionDelegate, Theme.key_chat_BlurAlpha));
        ChatActivityEnterView chatActivityEnterView16 = this.chatActivityEnterView;
        if (chatActivityEnterView16 != null && chatActivityEnterView16.botCommandsMenuContainer != null) {
            arrayList.add(new ThemeDescription(this.chatActivityEnterView.botCommandsMenuContainer.listView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotCommandsMenuView.BotCommandView.class}, new String[]{"description"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_windowBackgroundWhiteBlackText));
            arrayList.add(new ThemeDescription(this.chatActivityEnterView.botCommandsMenuContainer.listView, ThemeDescription.FLAG_TEXTCOLOR, new Class[]{BotCommandsMenuView.BotCommandView.class}, new String[]{"command"}, (Paint[]) null, (Drawable[]) null, (ThemeDescription.ThemeDescriptionDelegate) null, Theme.key_windowBackgroundWhiteGrayText));
        }
        ChatActivityMemberRequestsDelegate chatActivityMemberRequestsDelegate = this.pendingRequestsDelegate;
        if (chatActivityMemberRequestsDelegate != null) {
            chatActivityMemberRequestsDelegate.fillThemeDescriptions(arrayList);
        }
        int size = arrayList.size();
        int i59 = 0;
        while (i59 < size) {
            Object obj = arrayList.get(i59);
            i59++;
            ((ThemeDescription) obj).resourcesProvider = this.themeDelegate;
        }
        return arrayList;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getThemeDescriptions$400() throws InterruptedException {
        BlurredBackgroundColorProviderThemed blurredBackgroundColorProviderThemed = this.blurredBackgroundColorProvider;
        if (blurredBackgroundColorProviderThemed != null) {
            blurredBackgroundColorProviderThemed.updateColors();
        }
        BlurredBackgroundColorProviderThemed blurredBackgroundColorProviderThemed2 = this.blurredBackgroundColorProviderWhite;
        if (blurredBackgroundColorProviderThemed2 != null) {
            blurredBackgroundColorProviderThemed2.updateColors();
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.updateColors();
        }
        Theme.refreshAttachButtonsColors();
        ChatAttachAlert chatAttachAlert = this.chatAttachAlert;
        if (chatAttachAlert != null) {
            chatAttachAlert.checkColors();
        }
        ChatListRecyclerView chatListRecyclerView = this.chatListView;
        if (chatListRecyclerView != null) {
            int childCount = chatListRecyclerView.getChildCount();
            for (int i = 0; i < childCount; i++) {
                View childAt = this.chatListView.getChildAt(i);
                if (childAt instanceof ChatMessageCell) {
                    ((ChatMessageCell) childAt).createSelectorDrawable(0);
                } else if (childAt instanceof ChatActionCell) {
                    ((ChatActionCell) childAt).setInvalidateColors(true);
                }
            }
        }
        RecyclerListView recyclerListView = this.messagesSearchListView;
        if (recyclerListView != null) {
            int childCount2 = recyclerListView.getChildCount();
            for (int i2 = 0; i2 < childCount2; i2++) {
                View childAt2 = this.messagesSearchListView.getChildAt(i2);
                if (childAt2 instanceof DialogCell) {
                    ((DialogCell) childAt2).update(0);
                }
            }
        }
        ActionBarMenuSubItem[] actionBarMenuSubItemArr = this.scrimPopupWindowItems;
        if (actionBarMenuSubItemArr != null) {
            for (ActionBarMenuSubItem actionBarMenuSubItem : actionBarMenuSubItemArr) {
                if (actionBarMenuSubItem != null) {
                    actionBarMenuSubItem.setColors(getThemedColor(Theme.key_actionBarDefaultSubmenuItem), getThemedColor(Theme.key_actionBarDefaultSubmenuItemIcon));
                    actionBarMenuSubItem.setSelectorColor(getThemedColor(Theme.key_dialogButtonSelector));
                }
            }
        }
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            View contentView = actionBarPopupWindow.getContentView();
            contentView.setBackgroundColor(getThemedColor(Theme.key_actionBarDefaultSubmenuBackground));
            contentView.invalidate();
        }
        PinnedLineView pinnedLineView = this.pinnedLineView;
        if (pinnedLineView != null) {
            pinnedLineView.updateColors();
        }
        ChatActivityEnterTopView chatActivityEnterTopView = this.chatActivityEnterTopView;
        if (chatActivityEnterTopView != null && chatActivityEnterTopView.getEditView() != null) {
            this.chatActivityEnterTopView.getEditView().updateColors();
        }
        ActionBarMenuItem actionBarMenuItem = this.headerItem;
        if (actionBarMenuItem != null) {
            actionBarMenuItem.updateColor();
        }
        FragmentContextView fragmentContextView = this.fragmentContextView;
        if (fragmentContextView != null) {
            fragmentContextView.updateColors();
        }
        ChatAvatarContainer chatAvatarContainer = this.avatarContainer;
        if (chatAvatarContainer != null) {
            chatAvatarContainer.updateColors();
        }
        BlurredFrameLayout blurredFrameLayout = this.pinnedMessageView;
        if (blurredFrameLayout != null) {
            blurredFrameLayout.backgroundColor = getThemedColor(Theme.key_chat_topPanelBackground);
        }
        BlurredFrameLayout blurredFrameLayout2 = this.topChatPanelView;
        if (blurredFrameLayout2 != null) {
            blurredFrameLayout2.backgroundColor = getThemedColor(Theme.key_chat_topPanelBackground);
        }
        BlurredFrameLayout blurredFrameLayout3 = this.topChatPanelView2;
        if (blurredFrameLayout3 != null) {
            blurredFrameLayout3.backgroundColor = getThemedColor(Theme.key_chat_topPanelBackground);
        }
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView != null) {
            chatActivityFragmentView.invalidateBlurredViews();
            this.contentView.invalidateBackground();
        }
        INavigationLayout iNavigationLayout = this.parentLayout;
        if (iNavigationLayout != null && iNavigationLayout.getDrawerLayoutContainer() != null) {
            this.parentLayout.getDrawerLayoutContainer().setBehindKeyboardColor(getThemedColor(Theme.key_windowBackgroundWhite));
        }
        SuggestEmojiView suggestEmojiView = this.suggestEmojiPanel;
        if (suggestEmojiView != null) {
            suggestEmojiView.updateColors();
        }
        ChatAvatarContainer chatAvatarContainer2 = this.avatarContainer;
        if (chatAvatarContainer2 != null && chatAvatarContainer2.getTimeItem() != null) {
            this.avatarContainer.getTimeItem().invalidate();
        }
        TranslateButton translateButton = this.translateButton;
        if (translateButton != null) {
            translateButton.updateColors();
        }
        ChatInputViewsContainer chatInputViewsContainer = this.chatInputViewsContainer;
        if (chatInputViewsContainer != null) {
            chatInputViewsContainer.updateColors();
        }
        ChatActivitySideControlsButtonsLayout chatActivitySideControlsButtonsLayout = this.sideControlsButtonsLayout;
        if (chatActivitySideControlsButtonsLayout != null) {
            chatActivitySideControlsButtonsLayout.updateColors();
        }
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
        if (chatActivityChannelButtonsLayout != null) {
            chatActivityChannelButtonsLayout.updateColors();
        }
        invalidateAllGlassAttachedViews();
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public ChatAvatarContainer getAvatarContainer() {
        return this.avatarContainer;
    }

    public void openedInstantly() {
        this.fragmentOpened = true;
        this.fragmentBeginToShow = true;
        this.fragmentTransition = null;
        this.contentView.invalidate();
        this.contentView.setSkipBackgroundDrawing(false);
        this.toPullingDownTransition = false;
        this.fragmentView.setAlpha(1.0f);
        this.avatarContainer.setTranslationY(0.0f);
        this.avatarContainer.getAvatarImageView().setScaleX(1.0f);
        this.avatarContainer.getAvatarImageView().setScaleY(1.0f);
        this.avatarContainer.getAvatarImageView().setAlpha(1.0f);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public AnimatorSet onCustomTransitionAnimation(boolean z, Runnable runnable) {
        ValueAnimator valueAnimatorOfFloat;
        if (z && this.fromPullingDownTransition && getParentLayout() != null && getParentLayout().getFragmentStack().size() > 1) {
            BaseFragment baseFragment = (BaseFragment) getParentLayout().getFragmentStack().get(getParentLayout().getFragmentStack().size() - 2);
            if (baseFragment instanceof ChatActivity) {
                this.wasManualScroll = true;
                final ChatActivity chatActivity = (ChatActivity) baseFragment;
                chatActivity.setTransitionToChatActivity(this);
                this.fragmentView.setAlpha(0.0f);
                this.contentView.setSkipBackgroundDrawing(true);
                this.avatarContainer.setTranslationY(AndroidUtilities.m1146dp(8.0f));
                this.avatarContainer.getAvatarImageView().setAlpha(0.0f);
                this.avatarContainer.getAvatarImageView().setTranslationY(-AndroidUtilities.m1146dp(8.0f));
                this.toPullingDownTransition = true;
                ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(0.0f, 1.0f);
                ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
                if (chatActivityEnterView != null) {
                    chatActivityEnterView.measure(View.MeasureSpec.makeMeasureSpec(AndroidUtilities.displaySize.x, TLObject.FLAG_30), View.MeasureSpec.makeMeasureSpec(999999, TLObject.FLAG_31));
                }
                FrameLayout frameLayout = this.bottomOverlay;
                if (frameLayout != null) {
                    frameLayout.measure(View.MeasureSpec.makeMeasureSpec(AndroidUtilities.displaySize.x, TLObject.FLAG_30), View.MeasureSpec.makeMeasureSpec(999999, TLObject.FLAG_31));
                }
                ChatActivityEnterView chatActivityEnterView2 = this.chatActivityEnterView;
                int measuredHeight = chatActivityEnterView2 == null ? 0 : chatActivityEnterView2.getMeasuredHeight();
                FrameLayout frameLayout2 = this.bottomOverlay;
                int iMax = Math.max(measuredHeight, frameLayout2 == null ? 0 : frameLayout2.getMeasuredHeight());
                ChatActivityEnterView chatActivityEnterView3 = chatActivity.chatActivityEnterView;
                int measuredHeight2 = chatActivityEnterView3 == null ? 0 : chatActivityEnterView3.getMeasuredHeight();
                this.pullingBottomOffset = -(Math.max(measuredHeight2, this.bottomOverlay == null ? 0 : r7.getMeasuredHeight()) - iMax);
                final boolean z2 = chatActivity.fragmentContextView.getMeasuredHeight() != this.fragmentContextView.getMeasuredHeight();
                valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda97
                    @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                    public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                        this.f$0.lambda$onCustomTransitionAnimation$401(chatActivity, z2, valueAnimator);
                    }
                });
                updateChatListViewTopPadding();
                AnimatorSet animatorSet = new AnimatorSet();
                this.fragmentTransition = animatorSet;
                animatorSet.addListener(new AnonymousClass142(chatActivity, runnable));
                this.fragmentTransition.setDuration(300L);
                this.fragmentTransition.setInterpolator(CubicBezierInterpolator.DEFAULT);
                this.fragmentTransition.playTogether(valueAnimatorOfFloat2);
                AndroidUtilities.runOnUIThread(this.fragmentTransitionRunnable, 200L);
                return this.fragmentTransition;
            }
        }
        if (!this.switchFromTopics || getParentLayout() == null || getParentLayout().getFragmentStack().size() <= 1) {
            return null;
        }
        BaseFragment baseFragment2 = (BaseFragment) getParentLayout().getFragmentStack().get(getParentLayout().getFragmentStack().size() - 2);
        if (!(baseFragment2 instanceof TopicsFragment)) {
            return null;
        }
        float[] fArr = {1.0f, 0.0f};
        if (z) {
            // fill-array-data instruction
            fArr[0] = 0.0f;
            fArr[1] = 1.0f;
            valueAnimatorOfFloat = ValueAnimator.ofFloat(fArr);
        } else {
            valueAnimatorOfFloat = ValueAnimator.ofFloat(fArr);
        }
        baseFragment2.getFragmentView().getWidth();
        this.switchingFromTopicsProgress = z ? 0.0f : 1.0f;
        valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda98
            @Override // android.animation.ValueAnimator.AnimatorUpdateListener
            public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                this.f$0.lambda$onCustomTransitionAnimation$402(valueAnimator);
            }
        });
        this.switchingFromTopics = true;
        ActionBar actionBar = this.actionBar;
        if (actionBar != null) {
            actionBar.invalidate();
        }
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView != null) {
            chatActivityFragmentView.invalidate();
        }
        AnimatorSet animatorSet2 = new AnimatorSet();
        this.fragmentTransition = animatorSet2;
        animatorSet2.addListener(new AnonymousClass143(z, runnable));
        this.fragmentTransition.setDuration(150L);
        this.fragmentTransition.playTogether(valueAnimatorOfFloat);
        if (z) {
            AndroidUtilities.runOnUIThread(this.fragmentTransitionRunnable, 200L);
        } else {
            this.fragmentTransition.start();
        }
        return this.fragmentTransition;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onCustomTransitionAnimation$401(ChatActivity chatActivity, boolean z, ValueAnimator valueAnimator) {
        float fFloatValue = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        chatActivity.setTransitionToChatProgress(fFloatValue);
        float f = 1.0f - fFloatValue;
        float fM1146dp = AndroidUtilities.m1146dp(8.0f) * f;
        this.avatarContainer.setTranslationY(fM1146dp);
        this.avatarContainer.getAvatarImageView().setTranslationY(-fM1146dp);
        float f2 = (-AndroidUtilities.m1146dp(8.0f)) * fFloatValue;
        chatActivity.avatarContainer.setTranslationY(f2);
        chatActivity.avatarContainer.getAvatarImageView().setTranslationY(-f2);
        float f3 = (fFloatValue * 0.2f) + 0.8f;
        this.avatarContainer.getAvatarImageView().setScaleX(f3);
        this.avatarContainer.getAvatarImageView().setScaleY(f3);
        this.avatarContainer.getAvatarImageView().setAlpha(fFloatValue);
        float f4 = (0.2f * f) + 0.8f;
        chatActivity.avatarContainer.getAvatarImageView().setScaleX(f4);
        chatActivity.avatarContainer.getAvatarImageView().setScaleY(f4);
        chatActivity.avatarContainer.getAvatarImageView().setAlpha(f);
        if (z) {
            chatActivity.fragmentContextView.setAlpha(f);
        }
        BlurredFrameLayout blurredFrameLayout = chatActivity.pinnedMessageView;
        if (blurredFrameLayout != null) {
            blurredFrameLayout.setAlpha(f);
        }
        BlurredFrameLayout blurredFrameLayout2 = chatActivity.topChatPanelView;
        if (blurredFrameLayout2 != null) {
            blurredFrameLayout2.setAlpha(f);
        }
        BlurredFrameLayout blurredFrameLayout3 = chatActivity.topChatPanelView2;
        if (blurredFrameLayout3 != null) {
            blurredFrameLayout3.setAlpha(f);
        }
    }

    /* renamed from: org.telegram.ui.ChatActivity$142, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass142 extends AnimatorListenerAdapter {
        int index;
        final /* synthetic */ Runnable val$callback;
        final /* synthetic */ ChatActivity val$previousChat;

        AnonymousClass142(ChatActivity chatActivity, Runnable runnable) {
            this.val$previousChat = chatActivity;
            this.val$callback = runnable;
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationStart(Animator animator) {
            super.onAnimationStart(animator);
            this.index = NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).setAnimationInProgress(this.index, null);
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationEnd(Animator animator) {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.fragmentOpened = true;
            ((BaseFragment) chatActivity).fragmentBeginToShow = true;
            ChatActivity.this.fragmentTransition = null;
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$142$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAnimationEnd$0();
                }
            }, 32L);
            super.onAnimationEnd(animator);
            ChatActivity.this.contentView.invalidate();
            ChatActivity.this.contentView.setSkipBackgroundDrawing(false);
            ChatActivity.this.toPullingDownTransition = false;
            this.val$previousChat.setTransitionToChatProgress(0.0f);
            this.val$previousChat.setTransitionToChatActivity(null);
            ChatActivity.this.fragmentView.setAlpha(1.0f);
            this.val$callback.run();
            ChatActivity.this.avatarContainer.setTranslationY(0.0f);
            this.val$previousChat.avatarContainer.setTranslationY(0.0f);
            this.val$previousChat.avatarContainer.getAvatarImageView().setTranslationY(0.0f);
            ChatActivity.this.avatarContainer.getAvatarImageView().setScaleX(1.0f);
            ChatActivity.this.avatarContainer.getAvatarImageView().setScaleY(1.0f);
            ChatActivity.this.avatarContainer.getAvatarImageView().setAlpha(1.0f);
            this.val$previousChat.avatarContainer.getAvatarImageView().setScaleX(1.0f);
            this.val$previousChat.avatarContainer.getAvatarImageView().setScaleY(1.0f);
            this.val$previousChat.avatarContainer.getAvatarImageView().setAlpha(1.0f);
            if (this.val$previousChat.pinnedMessageView != null) {
                this.val$previousChat.pinnedMessageView.setAlpha(1.0f);
            }
            if (this.val$previousChat.topChatPanelView != null) {
                this.val$previousChat.topChatPanelView.setAlpha(1.0f);
            }
            if (this.val$previousChat.topChatPanelView2 != null) {
                this.val$previousChat.topChatPanelView2.setAlpha(1.0f);
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onAnimationEnd$0() {
            NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).onAnimationFinish(this.index);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onCustomTransitionAnimation$402(ValueAnimator valueAnimator) {
        this.switchingFromTopicsProgress = ((Float) valueAnimator.getAnimatedValue()).floatValue();
        this.contentView.invalidate();
    }

    /* renamed from: org.telegram.ui.ChatActivity$143, reason: invalid class name */
    /* loaded from: classes5.dex */
    class AnonymousClass143 extends AnimatorListenerAdapter {
        int index;
        final /* synthetic */ Runnable val$callback;
        final /* synthetic */ boolean val$isOpen;

        AnonymousClass143(boolean z, Runnable runnable) {
            this.val$isOpen = z;
            this.val$callback = runnable;
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationStart(Animator animator) {
            super.onAnimationStart(animator);
            this.index = NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).setAnimationInProgress(this.index, null);
        }

        @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
        public void onAnimationEnd(Animator animator) {
            ChatActivity chatActivity = ChatActivity.this;
            chatActivity.fragmentOpened = true;
            ((BaseFragment) chatActivity).fragmentBeginToShow = true;
            ChatActivity.this.fragmentTransition = null;
            if (this.val$isOpen) {
                ChatActivity.this.switchingFromTopics = false;
            }
            ((BaseFragment) ChatActivity.this).actionBar.invalidate();
            ChatActivity.this.contentView.invalidate();
            AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$143$$ExternalSyntheticLambda0
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onAnimationEnd$0();
                }
            }, 32L);
            this.val$callback.run();
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$onAnimationEnd$0() {
            NotificationCenter.getInstance(((BaseFragment) ChatActivity.this).currentAccount).onAnimationFinish(this.index);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setTransitionToChatActivity(ChatActivity chatActivity) {
        this.pullingDownAnimateToActivity = chatActivity;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void setTransitionToChatProgress(float f) {
        this.pullingDownAnimateProgress = f;
        this.fragmentView.invalidate();
        this.chatListView.invalidate();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void showChatThemeBottomSheet() {
        TLRPC.Chat chat = this.currentChat;
        if (chat != null) {
            if (ChatObject.isMegagroup(chat)) {
                if (ChatObject.hasAdminRights(this.currentChat)) {
                    presentFragment(new GroupColorActivity(getDialogId()).setOnApplied(this));
                    return;
                }
                return;
            } else {
                if (ChatObject.canChangeChatInfo(this.currentChat)) {
                    presentFragment(new ChannelColorActivity(getDialogId()).setOnApplied(this));
                    return;
                }
                return;
            }
        }
        this.chatThemeBottomSheet = new ChatThemeBottomSheet(this, this.themeDelegate);
        this.chatListView.setOnInterceptTouchListener(new RecyclerListView.OnInterceptTouchListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda233
            @Override // org.telegram.ui.Components.RecyclerListView.OnInterceptTouchListener
            public final boolean onInterceptTouchEvent(MotionEvent motionEvent) {
                return ChatActivity.$r8$lambda$0LfNPxxk8Qg8WAWWu23jTywiTR8(motionEvent);
            }
        });
        setChildrenEnabled(this.contentView, false);
        showDialog(this.chatThemeBottomSheet, new DialogInterface.OnDismissListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda234
            @Override // android.content.DialogInterface.OnDismissListener
            public final void onDismiss(DialogInterface dialogInterface) {
                this.f$0.lambda$showChatThemeBottomSheet$404(dialogInterface);
            }
        });
    }

    public static /* synthetic */ boolean $r8$lambda$0LfNPxxk8Qg8WAWWu23jTywiTR8(MotionEvent motionEvent) {
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showChatThemeBottomSheet$404(DialogInterface dialogInterface) {
        this.chatThemeBottomSheet = null;
        this.chatListView.setOnInterceptTouchListener(null);
        setChildrenEnabled(this.contentView, true);
        ChatThemeController.getInstance(this.currentAccount).clearWallpaperThumbImages();
    }

    private void setChildrenEnabled(View view, boolean z) {
        if (view instanceof ViewGroup) {
            ViewGroup viewGroup = (ViewGroup) view;
            for (int i = 0; i < viewGroup.getChildCount(); i++) {
                setChildrenEnabled(viewGroup.getChildAt(i), z);
            }
        }
        if (view == this.chatListView || view == this.contentView) {
            return;
        }
        view.setEnabled(z);
    }

    private void checkThemeEmoticonOrWallpaper() {
        getNotificationCenter().doOnIdle(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda155
            @Override // java.lang.Runnable
            public final void run() throws InterruptedException {
                this.f$0.lambda$checkThemeEmoticonOrWallpaper$405();
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$checkThemeEmoticonOrWallpaper$405() throws InterruptedException {
        TLRPC.UserFull userFull = this.userInfo;
        setChatThemeEmoticon(userFull != null ? userFull.theme : null);
    }

    private void setChatThemeEmoticon(TLRPC.ChatTheme chatTheme) throws InterruptedException {
        if (this.themeDelegate == null || this.parentThemeDelegate != null) {
            return;
        }
        ThemeKey themeKeyM1236of = ThemeKey.m1236of(chatTheme);
        ChatThemeController chatThemeController = ChatThemeController.getInstance(this.currentAccount);
        chatThemeController.setDialogTheme(this.dialog_id, chatTheme, false);
        if (chatTheme instanceof TLRPC.TL_chatThemeUniqueGift) {
            chatThemeController.putThemeIfNeeded(chatTheme);
            EmojiThemes theme = chatThemeController.getTheme(themeKeyM1236of);
            if (theme == null) {
                theme = new EmojiThemes(this.currentAccount, (TLRPC.TL_chatThemeUniqueGift) chatTheme);
                theme.initColors(null);
                theme.loadPreviewColors(this.currentAccount);
            }
            ThemeDelegate themeDelegate = this.themeDelegate;
            themeDelegate.setCurrentTheme(theme, themeDelegate.wallpaper, this.openAnimationStartTime != 0, null);
            return;
        }
        if (themeKeyM1236of != null && !themeKeyM1236of.isEmpty()) {
            chatThemeController.requestChatTheme(themeKeyM1236of, new ResultCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda253
                @Override // org.telegram.tgnet.ResultCallback
                public final void onComplete(Object obj) throws InterruptedException {
                    this.f$0.lambda$setChatThemeEmoticon$406((EmojiThemes) obj);
                }

                @Override // org.telegram.tgnet.ResultCallback
                public /* synthetic */ void onError(TLRPC.TL_error tL_error) {
                    ResultCallback.CC.$default$onError(this, tL_error);
                }
            });
        }
        TLRPC.WallPaper dialogWallpaper = chatThemeController.getDialogWallpaper(this.dialog_id);
        ThemeDelegate themeDelegate2 = this.themeDelegate;
        themeDelegate2.setCurrentTheme(themeDelegate2.chatTheme, dialogWallpaper, this.openAnimationStartTime != 0, null);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$setChatThemeEmoticon$406(EmojiThemes emojiThemes) throws InterruptedException {
        ThemeDelegate themeDelegate = this.themeDelegate;
        themeDelegate.setCurrentTheme(emojiThemes, themeDelegate.wallpaper, this.openAnimationStartTime != 0, null);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public void setNavigationBarColor(int i) {
        super.setNavigationBarColor(i);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public Drawable getThemedDrawable(String str) {
        Drawable drawable = this.themeDelegate.getDrawable(str);
        return drawable != null ? drawable : super.getThemedDrawable(str);
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public Paint getThemedPaint(String str) {
        Paint paint = this.themeDelegate.getPaint(str);
        return paint != null ? paint : Theme.getThemePaint(str);
    }

    public float getChatListViewPadding() {
        return this.chatListViewPaddingTop;
    }

    public FragmentContextView getFragmentContextView() {
        return this.fragmentContextView;
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public Theme.ResourcesProvider getResourceProvider() {
        return this.themeDelegate;
    }

    public static class ThemeDelegate implements Theme.ResourcesProvider, MessagePreviewView.ResourcesDelegate {
        private WeakReference activity;
        private SparseIntArray animatingColors;
        Theme.MessageDrawable animatingMessageDrawable;
        Theme.MessageDrawable animatingMessageMediaDrawable;
        private Drawable backgroundDrawable;
        private EmojiThemes chatTheme;
        private int currentAccount;
        private int currentColor;
        int currentServiceColor;
        private long dialog_id;
        boolean drawSelectedGradient;
        boolean drawServiceGradient;
        private AnimatorSet patternAlphaAnimator;
        private ValueAnimator patternIntensityAnimator;
        private Bitmap serviceBitmap;
        private Bitmap serviceBitmapSource;
        private Canvas serviceCanvas;
        private BitmapShader serviceShader;
        private BitmapShader serviceShaderSource;
        Bitmap startServiceBitmap;
        int startServiceButtonColor;
        int startServiceColor;
        int startServiceIconColor;
        int startServiceLinkColor;
        int startServiceTextColor;
        private boolean useSourceShader;
        private TLRPC.WallPaper wallpaper;
        private final HashMap currentDrawables = new HashMap();
        private final HashMap currentPaints = new HashMap();
        private final Matrix actionMatrix = new Matrix();
        private SparseIntArray currentColors = new SparseIntArray();
        private final Paint paint = new Paint();
        final Rect src = new Rect();
        final Rect dst = new Rect();
        private boolean isDark = Theme.getActiveTheme().isDark();

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public /* synthetic */ ColorFilter getAnimatedEmojiColorFilter() {
            return Theme.chat_animatedEmojiTextColorFilter;
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public /* synthetic */ int getColorOrDefault(int i) {
            return getColor(i);
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public /* synthetic */ boolean isDark() {
            return Theme.isCurrentThemeDark();
        }

        /* JADX WARN: Removed duplicated region for block: B:8:0x0087  */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        ThemeDelegate(org.telegram.p023ui.ChatActivity r6) throws java.io.IOException {
            /*
                r5 = this;
                r5.<init>()
                java.util.HashMap r0 = new java.util.HashMap
                r0.<init>()
                r5.currentDrawables = r0
                java.util.HashMap r0 = new java.util.HashMap
                r0.<init>()
                r5.currentPaints = r0
                android.graphics.Matrix r0 = new android.graphics.Matrix
                r0.<init>()
                r5.actionMatrix = r0
                android.util.SparseIntArray r0 = new android.util.SparseIntArray
                r0.<init>()
                r5.currentColors = r0
                android.graphics.Paint r0 = new android.graphics.Paint
                r0.<init>()
                r5.paint = r0
                android.graphics.Rect r0 = new android.graphics.Rect
                r0.<init>()
                r5.src = r0
                android.graphics.Rect r0 = new android.graphics.Rect
                r0.<init>()
                r5.dst = r0
                java.lang.ref.WeakReference r0 = new java.lang.ref.WeakReference
                r0.<init>(r6)
                r5.activity = r0
                int r0 = org.telegram.p023ui.ChatActivity.access$23300(r6)
                r5.currentAccount = r0
                long r0 = org.telegram.p023ui.ChatActivity.m6639$$Nest$fgetdialog_id(r6)
                r5.dialog_id = r0
                org.telegram.ui.ActionBar.Theme$ThemeInfo r0 = org.telegram.p023ui.ActionBar.Theme.getActiveTheme()
                boolean r0 = r0.isDark()
                r5.isDark = r0
                r0 = 0
                boolean r1 = r5.isThemeChangeAvailable(r0)
                r2 = 1
                if (r1 == 0) goto L87
                int r1 = org.telegram.p023ui.ChatActivity.access$23400(r6)
                org.telegram.messenger.ChatThemeController r1 = org.telegram.messenger.ChatThemeController.getInstance(r1)
                long r3 = org.telegram.p023ui.ChatActivity.m6639$$Nest$fgetdialog_id(r6)
                org.telegram.ui.ActionBar.EmojiThemes r1 = r1.getDialogTheme(r3)
                r5.chatTheme = r1
                int r1 = org.telegram.p023ui.ChatActivity.access$23500(r6)
                org.telegram.messenger.ChatThemeController r1 = org.telegram.messenger.ChatThemeController.getInstance(r1)
                long r3 = org.telegram.p023ui.ChatActivity.m6639$$Nest$fgetdialog_id(r6)
                org.telegram.tgnet.TLRPC$WallPaper r6 = r1.getDialogWallpaper(r3)
                r5.wallpaper = r6
                org.telegram.ui.ActionBar.EmojiThemes r1 = r5.chatTheme
                if (r1 != 0) goto L83
                if (r6 == 0) goto L87
            L83:
                r5.setupChatTheme(r1, r6, r0, r2)
                goto L91
            L87:
                org.telegram.ui.Components.ThemeEditorView r6 = org.telegram.p023ui.Components.ThemeEditorView.getInstance()
                if (r6 != 0) goto L91
                org.telegram.p023ui.ActionBar.Theme.refreshThemeColors(r2, r2)
                return
            L91:
                org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda0 r6 = new org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda0
                r6.<init>()
                org.telegram.messenger.AndroidUtilities.runOnUIThread(r6)
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ThemeDelegate.<init>(org.telegram.ui.ChatActivity):void");
        }

        /* renamed from: $r8$lambda$mMGvre1sP8Ham1MWkh-NZNg-uCM, reason: not valid java name */
        public static /* synthetic */ void m7198$r8$lambda$mMGvre1sP8Ham1MWkhNZNguCM() {
            NotificationCenter globalInstance = NotificationCenter.getGlobalInstance();
            int i = NotificationCenter.didSetNewTheme;
            Boolean bool = Boolean.TRUE;
            globalInstance.lambda$postNotificationNameOnUIThread$1(i, Boolean.FALSE, bool, bool);
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public int getColor(int i) {
            int iIndexOfKey;
            int iIndexOfKey2;
            SparseIntArray sparseIntArray = this.animatingColors;
            if (sparseIntArray != null && (iIndexOfKey2 = sparseIntArray.indexOfKey(i)) >= 0) {
                return this.animatingColors.valueAt(iIndexOfKey2);
            }
            if (this.chatTheme == null) {
                return Theme.getColor(i);
            }
            int iIndexOfKey3 = this.currentColors.indexOfKey(i);
            if (iIndexOfKey3 >= 0) {
                return this.currentColors.valueAt(iIndexOfKey3);
            }
            int fallbackKey = Theme.getFallbackKey(i);
            if (fallbackKey >= 0 && (iIndexOfKey = this.currentColors.indexOfKey(fallbackKey)) >= 0) {
                return this.currentColors.valueAt(iIndexOfKey);
            }
            return Theme.getColor(i);
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public int getCurrentColor(int i) {
            return getCurrentColor(i, false);
        }

        public int getCurrentColor(int i, boolean z) {
            int iIndexOfKey;
            SparseIntArray sparseIntArray;
            int iIndexOfKey2;
            if (this.chatTheme == null && this.backgroundDrawable == null) {
                return Theme.getColor(i);
            }
            if (!z && (sparseIntArray = this.animatingColors) != null && (iIndexOfKey2 = sparseIntArray.indexOfKey(i)) >= 0) {
                return this.animatingColors.valueAt(iIndexOfKey2);
            }
            SparseIntArray sparseIntArray2 = this.currentColors;
            if (sparseIntArray2 != null && (iIndexOfKey = sparseIntArray2.indexOfKey(i)) >= 0) {
                return this.currentColors.valueAt(iIndexOfKey);
            }
            return Theme.getColor(i);
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public void setAnimatedColor(int i, int i2) {
            SparseIntArray sparseIntArray = this.animatingColors;
            if (sparseIntArray != null) {
                sparseIntArray.put(i, i2);
            }
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public void applyServiceShaderMatrix(int i, int i2, float f, float f2) {
            Bitmap bitmap;
            BitmapShader bitmapShader;
            if (this.backgroundDrawable == null || (bitmap = this.serviceBitmap) == null || (bitmapShader = this.serviceShader) == null) {
                Theme.applyServiceShaderMatrix(i, i2, f, f2);
            } else if (this.useSourceShader) {
                Theme.applyServiceShaderMatrix(this.serviceBitmapSource, this.serviceShaderSource, this.actionMatrix, i, i2, f, f2);
            } else {
                Theme.applyServiceShaderMatrix(bitmap, bitmapShader, this.actionMatrix, i, i2, f, f2);
            }
        }

        public boolean isGiftTheme() {
            EmojiThemes currentTheme = getCurrentTheme();
            return (currentTheme == null || currentTheme.getThemeGift() == null) ? false : true;
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public boolean hasGradientService() {
            return this.backgroundDrawable != null ? this.serviceShader != null : Theme.hasGradientService();
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public Drawable getDrawable(String str) {
            if (this.currentDrawables.isEmpty()) {
                return null;
            }
            return (Drawable) this.currentDrawables.get(str);
        }

        @Override // org.telegram.ui.ActionBar.Theme.ResourcesProvider
        public Paint getPaint(String str) {
            if (this.chatTheme == null && this.backgroundDrawable == null) {
                return null;
            }
            return (Paint) this.currentPaints.get(str);
        }

        public boolean isThemeChangeAvailable(boolean z) {
            TLRPC.User user;
            ChatActivity chatActivity = (ChatActivity) this.activity.get();
            if (chatActivity != null && chatActivity.currentEncryptedChat == null) {
                if (!z) {
                    return true;
                }
                if (chatActivity.currentChat == null && (user = chatActivity.currentUser) != null && !user.bot) {
                    return true;
                }
            }
            return false;
        }

        public EmojiThemes getCurrentTheme() {
            return this.chatTheme;
        }

        @Override // org.telegram.ui.Components.MessagePreviewView.ResourcesDelegate
        public Drawable getWallpaperDrawable() {
            Drawable drawable = this.backgroundDrawable;
            return drawable != null ? drawable : Theme.getCachedWallpaperNonBlocking();
        }

        @Override // org.telegram.ui.Components.MessagePreviewView.ResourcesDelegate
        public boolean isWallpaperMotion() {
            return this.chatTheme == null && Theme.isWallpaperMotion();
        }

        public void setCurrentTheme(EmojiThemes emojiThemes, TLRPC.WallPaper wallPaper, boolean z, Boolean bool) throws InterruptedException {
            setCurrentTheme(emojiThemes, wallPaper, z, bool, false);
        }

        /* JADX WARN: Removed duplicated region for block: B:65:0x00eb  */
        /*
            Code decompiled incorrectly, please refer to instructions dump.
            To view partially-correct add '--show-bad-code' argument
        */
        public void setCurrentTheme(final org.telegram.p023ui.ActionBar.EmojiThemes r11, final org.telegram.tgnet.TLRPC.WallPaper r12, final boolean r13, java.lang.Boolean r14, boolean r15) throws java.lang.InterruptedException {
            /*
                Method dump skipped, instructions count: 406
                To view this dump add '--comments-level debug' option
            */
            throw new UnsupportedOperationException("Method not decompiled: org.telegram.ui.ChatActivity.ThemeDelegate.setCurrentTheme(org.telegram.ui.ActionBar.EmojiThemes, org.telegram.tgnet.TLRPC$WallPaper, boolean, java.lang.Boolean, boolean):void");
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$setCurrentTheme$1(EmojiThemes emojiThemes, TLRPC.WallPaper wallPaper, boolean z, ChatActivity chatActivity) {
            setupChatTheme(emojiThemes, wallPaper, z, true);
            initServiceMessageColors(this.backgroundDrawable);
            ChatActivityFragmentView chatActivityFragmentView = chatActivity.contentView;
            if (chatActivityFragmentView != null) {
                chatActivityFragmentView.invalidateBackground();
            }
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$setCurrentTheme$2(ChatActivity chatActivity, float f) {
            chatActivity.chatListView.invalidate();
            this.animatingMessageDrawable.crossfadeProgress = f;
            this.animatingMessageMediaDrawable.crossfadeProgress = f;
            updateServiceMessageColor(f);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$setCurrentTheme$3(ChatActivity chatActivity) {
            this.animatingColors = new SparseIntArray();
            Theme.MessageDrawable messageDrawable = (Theme.MessageDrawable) chatActivity.getThemedDrawable("drawableMsgOut");
            this.animatingMessageDrawable = messageDrawable;
            messageDrawable.crossfadeFromDrawable = ((BaseFragment) chatActivity).parentLayout.getMessageDrawableOutStart();
            Theme.MessageDrawable messageDrawable2 = (Theme.MessageDrawable) chatActivity.getThemedDrawable("drawableMsgOutMedia");
            this.animatingMessageMediaDrawable = messageDrawable2;
            messageDrawable2.crossfadeFromDrawable = ((BaseFragment) chatActivity).parentLayout.getMessageDrawableOutMediaStart();
            this.animatingMessageDrawable.crossfadeProgress = 0.0f;
            this.animatingMessageMediaDrawable.crossfadeProgress = 0.0f;
            chatActivity.updateMessagesVisiblePart(false);
            updateServiceMessageColor(0.0f);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$setCurrentTheme$4() {
            this.animatingMessageDrawable.crossfadeFromDrawable = null;
            this.animatingMessageMediaDrawable.crossfadeFromDrawable = null;
            this.animatingColors = null;
            updateServiceMessageColor(1.0f);
        }

        private void setupChatTheme(EmojiThemes emojiThemes, TLRPC.WallPaper wallPaper, boolean z, boolean z2) {
            Theme.ThemeInfo theme;
            Theme.ThemeInfo theme2;
            if (ExteraConfig.customThemes) {
                ChatActivity chatActivity = (ChatActivity) this.activity.get();
                if (chatActivity == null || chatActivity.parentThemeDelegate == null) {
                    this.chatTheme = emojiThemes;
                    this.wallpaper = wallPaper;
                    Drawable backgroundImage = (chatActivity == null || chatActivity.fragmentView == null) ? null : chatActivity.contentView.getBackgroundImage();
                    final MotionBackgroundDrawable motionBackgroundDrawable = backgroundImage instanceof MotionBackgroundDrawable ? (MotionBackgroundDrawable) backgroundImage : null;
                    int phase = motionBackgroundDrawable != null ? motionBackgroundDrawable.getPhase() : 0;
                    if ((emojiThemes == null || emojiThemes.showAsDefaultStub) && wallPaper == null) {
                        this.currentColor = Theme.getServiceMessageColor();
                    }
                    String str = "Dark Blue";
                    String str2 = "Blue";
                    if (emojiThemes == null && wallPaper == null) {
                        this.currentColors = new SparseIntArray();
                        this.currentPaints.clear();
                        this.currentDrawables.clear();
                        Drawable cachedWallpaperNonBlocking = Theme.getCachedWallpaperNonBlocking();
                        if (cachedWallpaperNonBlocking instanceof MotionBackgroundDrawable) {
                            ((MotionBackgroundDrawable) cachedWallpaperNonBlocking).setPhase(phase);
                        }
                        this.backgroundDrawable = null;
                        if (Theme.getActiveTheme().isDark() == this.isDark) {
                            theme2 = Theme.getActiveTheme();
                        } else {
                            SharedPreferences sharedPreferences = ApplicationLoader.applicationContext.getSharedPreferences("themeconfig", 0);
                            String string = sharedPreferences.getString("lastDayTheme", "Blue");
                            if (Theme.getTheme(string) != null && !Theme.getTheme(string).isDark()) {
                                str2 = string;
                            }
                            String string2 = sharedPreferences.getString("lastDarkTheme", "Dark Blue");
                            if (Theme.getTheme(string2) != null && Theme.getTheme(string2).isDark()) {
                                str = string2;
                            }
                            theme2 = this.isDark ? Theme.getTheme(str) : Theme.getTheme(str2);
                        }
                        Theme.applyTheme(theme2, false, this.isDark);
                        initServiceMessageColors(this.backgroundDrawable);
                        return;
                    }
                    if (ApplicationLoader.applicationContext != null) {
                        Theme.createChatResources(ApplicationLoader.applicationContext, false);
                    }
                    if (emojiThemes == null) {
                        this.currentColors = new SparseIntArray();
                    } else {
                        this.currentColors = emojiThemes.createColors(this.currentAccount, this.isDark ? 1 : 0);
                    }
                    if (!TextUtils.isEmpty(ChatThemeController.getWallpaperEmoticon(this.wallpaper))) {
                        this.backgroundDrawable = PreviewView.getBackgroundDrawable(this.backgroundDrawable, this.currentAccount, this.wallpaper, this.isDark);
                    } else if (wallPaper != null) {
                        this.backgroundDrawable = ChatBackgroundDrawable.getOrCreate(this.backgroundDrawable, wallPaper, this.isDark);
                    } else {
                        this.backgroundDrawable = getBackgroundDrawableFromTheme(emojiThemes, phase);
                    }
                    AnimatorSet animatorSet = this.patternAlphaAnimator;
                    if (animatorSet != null) {
                        animatorSet.cancel();
                    }
                    if (z) {
                        this.patternAlphaAnimator = new AnimatorSet();
                        if (motionBackgroundDrawable != null) {
                            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(1.0f, 0.0f);
                            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda5
                                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                    motionBackgroundDrawable.setPatternAlpha(((Float) valueAnimator.getAnimatedValue()).floatValue());
                                }
                            });
                            valueAnimatorOfFloat.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ThemeDelegate.1
                                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                                public void onAnimationEnd(Animator animator) {
                                    super.onAnimationEnd(animator);
                                    motionBackgroundDrawable.setPatternAlpha(1.0f);
                                }
                            });
                            valueAnimatorOfFloat.setDuration(200L);
                            this.patternAlphaAnimator.playTogether(valueAnimatorOfFloat);
                        }
                        Drawable drawable = this.backgroundDrawable;
                        if (drawable instanceof MotionBackgroundDrawable) {
                            final MotionBackgroundDrawable motionBackgroundDrawable2 = (MotionBackgroundDrawable) drawable;
                            motionBackgroundDrawable2.setPatternAlpha(0.0f);
                            ValueAnimator valueAnimatorOfFloat2 = ValueAnimator.ofFloat(0.0f, 1.0f);
                            valueAnimatorOfFloat2.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda6
                                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                                public final void onAnimationUpdate(ValueAnimator valueAnimator) {
                                    motionBackgroundDrawable2.setPatternAlpha(((Float) valueAnimator.getAnimatedValue()).floatValue());
                                }
                            });
                            valueAnimatorOfFloat2.addListener(new AnimatorListenerAdapter() { // from class: org.telegram.ui.ChatActivity.ThemeDelegate.2
                                @Override // android.animation.AnimatorListenerAdapter, android.animation.Animator.AnimatorListener
                                public void onAnimationEnd(Animator animator) {
                                    super.onAnimationEnd(animator);
                                    motionBackgroundDrawable2.setPatternAlpha(1.0f);
                                }
                            });
                            valueAnimatorOfFloat2.setDuration(250L);
                            this.patternAlphaAnimator.playTogether(valueAnimatorOfFloat2);
                        }
                        this.patternAlphaAnimator.start();
                    }
                    if (emojiThemes == null && this.dialog_id >= 0) {
                        if (Theme.getActiveTheme().isDark() == this.isDark) {
                            theme = Theme.getActiveTheme();
                        } else {
                            SharedPreferences sharedPreferences2 = ApplicationLoader.applicationContext.getSharedPreferences("themeconfig", 0);
                            String string3 = sharedPreferences2.getString("lastDayTheme", "Blue");
                            if (Theme.getTheme(string3) != null && !Theme.getTheme(string3).isDark()) {
                                str2 = string3;
                            }
                            String string4 = sharedPreferences2.getString("lastDarkTheme", "Dark Blue");
                            if (Theme.getTheme(string4) != null && Theme.getTheme(string4).isDark()) {
                                str = string4;
                            }
                            theme = this.isDark ? Theme.getTheme(str) : Theme.getTheme(str2);
                        }
                        Theme.applyTheme(theme, false, this.isDark);
                    }
                    if (z2) {
                        this.currentColor = AndroidUtilities.calcDrawableColor(this.backgroundDrawable)[0];
                        initDrawables();
                        initPaints();
                        initServiceMessageColors(this.backgroundDrawable);
                        updateServiceMessageColor(1.0f);
                    }
                }
            }
        }

        private void initDrawables() {
            Drawable messageDrawable;
            int themeDrawableColorKey;
            for (Map.Entry entry : Theme.getThemeDrawablesMap().entrySet()) {
                String str = (String) entry.getKey();
                str.getClass();
                switch (str) {
                    case "drawableMsgIn":
                        messageDrawable = new Theme.MessageDrawable(0, false, false, this);
                        break;
                    case "drawableMsgInMedia":
                        messageDrawable = new Theme.MessageDrawable(1, false, false, this);
                        break;
                    case "drawableMsgInMediaSelected":
                        messageDrawable = new Theme.MessageDrawable(1, false, true, this);
                        break;
                    case "drawableMsgOutMedia":
                        messageDrawable = new Theme.MessageDrawable(1, true, false, this);
                        break;
                    case "drawableMsgOutSelected":
                        messageDrawable = new Theme.MessageDrawable(0, true, true, this);
                        break;
                    case "drawableMsgOutMediaSelected":
                        messageDrawable = new Theme.MessageDrawable(1, true, true, this);
                        break;
                    case "drawableMsgInSelected":
                        messageDrawable = new Theme.MessageDrawable(0, false, true, this);
                        break;
                    case "drawableMsgOut":
                        messageDrawable = new Theme.MessageDrawable(0, true, false, this);
                        break;
                    default:
                        Drawable.ConstantState constantState = ((Drawable) entry.getValue()).getConstantState();
                        messageDrawable = constantState != null ? constantState.newDrawable().mutate() : null;
                        if (messageDrawable != null && (themeDrawableColorKey = Theme.getThemeDrawableColorKey((String) entry.getKey())) >= 0) {
                            Theme.setDrawableColor(messageDrawable, getColor(themeDrawableColorKey));
                            break;
                        }
                        break;
                }
                if (messageDrawable != null) {
                    this.currentDrawables.put((String) entry.getKey(), messageDrawable);
                }
            }
        }

        private void initPaints() {
            Paint paint;
            for (Map.Entry entry : Theme.getThemePaintsMap().entrySet()) {
                Paint paint2 = (Paint) entry.getValue();
                if (paint2 instanceof TextPaint) {
                    paint = new TextPaint();
                    paint.setTextSize(paint2.getTextSize());
                    paint.setTypeface(paint2.getTypeface());
                } else {
                    paint = new Paint();
                }
                if ((paint2.getFlags() & 1) != 0) {
                    paint.setFlags(1);
                }
                int themePaintColorKey = Theme.getThemePaintColorKey((String) entry.getKey());
                if (themePaintColorKey >= 0 && !"paintChatActionBackgroundDarken".equals(entry.getKey())) {
                    paint.setColor(getColor(themePaintColorKey));
                }
                this.currentPaints.put((String) entry.getKey(), paint);
            }
        }

        private void initServiceMessageColors(Drawable drawable) {
            float dimAmount;
            float f;
            int width;
            Drawable drawable2 = drawable;
            ChatActivity chatActivity = (ChatActivity) this.activity.get();
            if (chatActivity == null || chatActivity.parentThemeDelegate == null) {
                int i = AndroidUtilities.calcDrawableColor(drawable2)[0];
                int currentColor = getCurrentColor(Theme.key_chat_serviceBackground);
                int i2 = Theme.key_chat_selectedBackground;
                int currentColor2 = getCurrentColor(i2);
                if (currentColor != 0 && this.wallpaper == null) {
                    i = currentColor;
                }
                this.currentServiceColor = i;
                if (drawable2 instanceof ChatBackgroundDrawable) {
                    ChatBackgroundDrawable chatBackgroundDrawable = (ChatBackgroundDrawable) drawable2;
                    dimAmount = chatBackgroundDrawable.getDimAmount();
                    drawable2 = chatBackgroundDrawable.getDrawable(false);
                } else {
                    dimAmount = 0.0f;
                }
                boolean z = drawable2 instanceof MotionBackgroundDrawable;
                this.drawServiceGradient = (z || (drawable2 instanceof BitmapDrawable)) && SharedConfig.getDevicePerformanceClass() != 0;
                boolean z2 = isGiftTheme() && this.isDark;
                boolean z3 = this.drawServiceGradient;
                this.drawSelectedGradient = z3;
                if (z3) {
                    if (drawable2 instanceof BitmapDrawable) {
                        Bitmap bitmap = ((BitmapDrawable) drawable2).getBitmap();
                        f = 0.0f;
                        int height = 40;
                        if (bitmap.getWidth() > bitmap.getHeight()) {
                            width = (int) ((40 / bitmap.getWidth()) * bitmap.getHeight());
                        } else {
                            height = (int) ((40 / bitmap.getHeight()) * bitmap.getWidth());
                            width = 40;
                        }
                        this.serviceBitmap = Bitmap.createBitmap(height, width, Bitmap.Config.ARGB_8888);
                        this.serviceCanvas = new Canvas(this.serviceBitmap);
                        this.src.set(0, 0, bitmap.getWidth(), bitmap.getHeight());
                        this.dst.set(0, 0, this.serviceBitmap.getWidth(), this.serviceBitmap.getHeight());
                        this.serviceCanvas.drawBitmap(bitmap, this.src, this.dst, (Paint) null);
                        Bitmap bitmap2 = this.serviceBitmap;
                        Utilities.blurBitmap(bitmap2, 3, 1, bitmap2.getWidth(), this.serviceBitmap.getHeight(), this.serviceBitmap.getRowBytes());
                        this.serviceCanvas.drawColor(ColorUtils.setAlphaComponent(-16777216, (int) (dimAmount * 255.0f)));
                        Bitmap bitmap3 = this.serviceBitmap;
                        Shader.TileMode tileMode = Shader.TileMode.CLAMP;
                        this.serviceShader = new BitmapShader(bitmap3, tileMode, tileMode);
                        this.serviceBitmapSource = Bitmap.createBitmap(this.serviceBitmap);
                        this.serviceShaderSource = new BitmapShader(this.serviceBitmapSource, tileMode, tileMode);
                        if (Build.VERSION.SDK_INT >= 33) {
                            this.serviceShader.setFilterMode(2);
                            this.serviceShaderSource.setFilterMode(2);
                        }
                        this.useSourceShader = true;
                    } else {
                        f = 0.0f;
                        this.serviceBitmap = Bitmap.createBitmap(60, 80, Bitmap.Config.ARGB_8888);
                        Bitmap bitmap4 = ((MotionBackgroundDrawable) drawable2).getBitmap();
                        this.serviceBitmapSource = bitmap4;
                        if (z2) {
                            this.serviceBitmapSource = Bitmap.createBitmap(bitmap4);
                            new Canvas(this.serviceBitmapSource).drawColor(-870178270);
                        }
                        this.serviceCanvas = new Canvas(this.serviceBitmap);
                        this.src.set(0, 0, this.serviceBitmapSource.getWidth(), this.serviceBitmapSource.getHeight());
                        this.dst.set(0, 0, this.serviceBitmap.getWidth(), this.serviceBitmap.getHeight());
                        this.serviceCanvas.drawBitmap(this.serviceBitmapSource, this.src, this.dst, (Paint) null);
                        this.serviceCanvas.drawColor(ColorUtils.setAlphaComponent(-16777216, (int) (dimAmount * 255.0f)));
                        if (z2) {
                            this.serviceCanvas.drawColor(-870178270);
                        }
                        Bitmap bitmap5 = this.serviceBitmap;
                        Shader.TileMode tileMode2 = Shader.TileMode.CLAMP;
                        this.serviceShader = new BitmapShader(bitmap5, tileMode2, tileMode2);
                        this.serviceShaderSource = new BitmapShader(this.serviceBitmapSource, tileMode2, tileMode2);
                        if (Build.VERSION.SDK_INT >= 33) {
                            this.serviceShader.setFilterMode(2);
                            this.serviceShaderSource.setFilterMode(2);
                        }
                        this.useSourceShader = true;
                    }
                } else {
                    f = 0.0f;
                    this.serviceBitmap = null;
                    this.serviceShader = null;
                    this.serviceBitmapSource = null;
                    this.serviceCanvas = null;
                    this.useSourceShader = false;
                }
                Paint paint = getPaint("paintChatActionBackground");
                Paint paint2 = getPaint("paintChatActionBackgroundSelected");
                Paint paint3 = getPaint("paintChatMessageBackgroundSelected");
                if (paint != null) {
                    Paint paint4 = (Paint) this.currentPaints.get("paintChatActionBackgroundDarken");
                    if (paint4 == null) {
                        HashMap map = this.currentPaints;
                        Paint paint5 = new Paint(1);
                        map.put("paintChatActionBackgroundDarken", paint5);
                        paint5.setColor(0);
                        paint4 = paint5;
                    }
                    if (this.drawServiceGradient) {
                        ColorMatrix colorMatrix = new ColorMatrix();
                        if (z) {
                            if (((MotionBackgroundDrawable) drawable2).getIntensity() >= f) {
                                colorMatrix.setSaturation(1.6f);
                                AndroidUtilities.multiplyBrightnessColorMatrix(colorMatrix, this.isDark ? 0.97f : 0.92f);
                                AndroidUtilities.adjustBrightnessColorMatrix(colorMatrix, this.isDark ? 0.12f : -0.06f);
                            } else {
                                colorMatrix.setSaturation(1.1f);
                                AndroidUtilities.multiplyBrightnessColorMatrix(colorMatrix, this.isDark ? 0.4f : 0.8f);
                                AndroidUtilities.adjustBrightnessColorMatrix(colorMatrix, this.isDark ? 0.08f : -0.06f);
                            }
                        } else {
                            colorMatrix.setSaturation(1.6f);
                            AndroidUtilities.multiplyBrightnessColorMatrix(colorMatrix, this.isDark ? 0.9f : 0.84f);
                            AndroidUtilities.adjustBrightnessColorMatrix(colorMatrix, this.isDark ? 0.04f : 0.06f);
                        }
                        paint.setAlpha(255);
                        paint.setColorFilter(new ColorMatrixColorFilter(colorMatrix));
                        paint.setShader(this.serviceShaderSource);
                        paint.setFilterBitmap(true);
                        paint2.setAlpha(255);
                        ColorMatrix colorMatrix2 = new ColorMatrix(colorMatrix);
                        AndroidUtilities.adjustSaturationColorMatrix(colorMatrix2, 0.26f);
                        AndroidUtilities.multiplyBrightnessColorMatrix(colorMatrix2, 0.92f);
                        paint2.setColorFilter(new ColorMatrixColorFilter(colorMatrix2));
                        paint2.setShader(this.serviceShaderSource);
                        paint2.setFilterBitmap(true);
                        paint4.setAlpha(0);
                    } else {
                        paint.setColorFilter(null);
                        paint.setShader(null);
                        paint2.setColorFilter(null);
                        paint2.setShader(null);
                        paint4.setAlpha(21);
                    }
                }
                if (paint3 == null) {
                    paint3 = new Paint(1);
                    this.currentPaints.put("paintChatMessageBackgroundSelected", paint3);
                }
                if (this.drawSelectedGradient) {
                    ColorMatrix colorMatrix3 = new ColorMatrix();
                    AndroidUtilities.adjustSaturationColorMatrix(colorMatrix3, 2.5f);
                    AndroidUtilities.multiplyBrightnessColorMatrix(colorMatrix3, 0.75f);
                    paint3.setAlpha(64);
                    paint3.setColorFilter(new ColorMatrixColorFilter(colorMatrix3));
                    paint3.setShader(this.serviceShaderSource);
                    paint3.setFilterBitmap(true);
                    return;
                }
                if (currentColor2 == 0) {
                    currentColor2 = getColor(i2);
                }
                paint3.setColor(currentColor2);
                paint3.setColorFilter(null);
                paint3.setShader(null);
            }
        }

        private void updateServiceMessageColor(float f) {
            Bitmap bitmap;
            Bitmap bitmap2;
            if (this.currentPaints.isEmpty()) {
                return;
            }
            Paint paint = getPaint("paintChatActionBackground");
            Paint paint2 = getPaint("paintChatActionBackgroundSelected");
            Paint paint3 = getPaint("paintChatMessageBackgroundSelected");
            int iBlendARGB = this.currentServiceColor;
            int currentColor = this.drawServiceGradient ? -1 : getCurrentColor(Theme.key_chat_serviceText, true);
            int currentColor2 = this.drawServiceGradient ? -1 : getCurrentColor(Theme.key_chat_serviceLink, true);
            int currentColor3 = this.drawServiceGradient ? -1 : getCurrentColor(Theme.key_chat_serviceLink, true);
            int currentColor4 = this.drawServiceGradient ? -1 : getCurrentColor(Theme.key_chat_serviceIcon, true);
            if (f != 1.0f) {
                iBlendARGB = ColorUtils.blendARGB(this.startServiceColor, iBlendARGB, f);
                currentColor = ColorUtils.blendARGB(this.startServiceTextColor, currentColor, f);
                currentColor2 = ColorUtils.blendARGB(this.startServiceLinkColor, currentColor2, f);
                currentColor3 = ColorUtils.blendARGB(this.startServiceButtonColor, currentColor3, f);
                currentColor4 = ColorUtils.blendARGB(this.startServiceIconColor, currentColor4, f);
            }
            if (paint != null && !this.drawServiceGradient) {
                paint.setColor(iBlendARGB);
                paint2.setColor(iBlendARGB);
            }
            this.currentColor = iBlendARGB;
            Paint paint4 = getPaint("paintChatActionText");
            if (paint4 != null) {
                ((TextPaint) paint4).linkColor = currentColor2;
                getPaint("paintChatActionText").setColor(currentColor);
                getPaint("paintChatBotButton").setColor(currentColor3);
            }
            Theme.setDrawableColor(getDrawable("drawableMsgStickerCheck"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerClock"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerHalfCheck"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerPinned"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerReplies"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableMsgStickerViews"), currentColor);
            Theme.setDrawableColor(getDrawable("drawableBotInline"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableBotLink"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableBotLock"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawable_botInvite"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableCommentSticker"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableGoIcon"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableReplyIcon"), currentColor4);
            Theme.setDrawableColor(getDrawable("drawableShareIcon"), currentColor4);
            if (this.serviceCanvas == null || (bitmap = this.serviceBitmapSource) == null) {
                return;
            }
            if (f != 1.0f && (bitmap2 = this.startServiceBitmap) != null) {
                this.useSourceShader = false;
                this.src.set(0, 0, bitmap2.getWidth(), this.startServiceBitmap.getHeight());
                this.dst.set(0, 0, this.serviceBitmap.getWidth(), this.serviceBitmap.getHeight());
                this.serviceCanvas.drawBitmap(this.startServiceBitmap, this.src, this.dst, (Paint) null);
                this.paint.setAlpha((int) (f * 255.0f));
                this.src.set(0, 0, this.serviceBitmapSource.getWidth(), this.serviceBitmapSource.getHeight());
                this.dst.set(0, 0, this.serviceBitmap.getWidth(), this.serviceBitmap.getHeight());
                this.serviceCanvas.drawBitmap(this.serviceBitmapSource, this.src, this.dst, this.paint);
                if (paint != null) {
                    paint.setShader(this.serviceShader);
                    paint2.setShader(this.serviceShader);
                }
                if (paint3 != null) {
                    paint3.setShader(this.serviceShader);
                    return;
                }
                return;
            }
            this.useSourceShader = true;
            this.src.set(0, 0, bitmap.getWidth(), this.serviceBitmapSource.getHeight());
            this.dst.set(0, 0, this.serviceBitmap.getWidth(), this.serviceBitmap.getHeight());
            this.serviceCanvas.drawBitmap(this.serviceBitmapSource, this.src, this.dst, (Paint) null);
            if (paint != null) {
                paint.setShader(this.serviceShaderSource);
                paint2.setShader(this.serviceShaderSource);
            }
            if (paint3 != null) {
                paint3.setShader(this.serviceShaderSource);
            }
        }

        private Drawable getBackgroundDrawableFromTheme(final EmojiThemes emojiThemes, int i) {
            if (emojiThemes.showAsDefaultStub) {
                Drawable drawable = Theme.createBackgroundDrawable(EmojiThemes.getDefaultThemeInfo(this.isDark), emojiThemes.getPreviewColors(this.currentAccount, this.isDark ? 1 : 0), emojiThemes.getWallpaperLink(this.isDark ? 1 : 0), i, false).wallpaper;
                return new ColorDrawable(-16777216);
            }
            int color = getColor(Theme.key_chat_wallpaper);
            int color2 = getColor(Theme.key_chat_wallpaper_gradient_to1);
            int color3 = getColor(Theme.key_chat_wallpaper_gradient_to2);
            int color4 = getColor(Theme.key_chat_wallpaper_gradient_to3);
            final MotionBackgroundDrawable motionBackgroundDrawable = new MotionBackgroundDrawable();
            motionBackgroundDrawable.setPatternBitmap(emojiThemes.getWallpaper(this.isDark ? 1 : 0).settings.intensity);
            motionBackgroundDrawable.setGiftDrawable(emojiThemes.getEmojiAnimatedSticker());
            motionBackgroundDrawable.setColors(color, color2, color3, color4, 0, true);
            motionBackgroundDrawable.setPhase(i);
            final int patternColor = motionBackgroundDrawable.getPatternColor();
            final boolean z = this.isDark;
            emojiThemes.loadWallpaperGiftPattern(z ? 1 : 0, new ResultCallback() { // from class: org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda7
                @Override // org.telegram.tgnet.ResultCallback
                public final void onComplete(Object obj) {
                    this.f$0.lambda$getBackgroundDrawableFromTheme$7(motionBackgroundDrawable, (Pair) obj);
                }

                @Override // org.telegram.tgnet.ResultCallback
                public /* synthetic */ void onError(TLRPC.TL_error tL_error) {
                    ResultCallback.CC.$default$onError(this, tL_error);
                }
            });
            boolean z2 = this.isDark;
            emojiThemes.loadWallpaper(z2 ? 1 : 0, new ResultCallback() { // from class: org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda8
                @Override // org.telegram.tgnet.ResultCallback
                public final void onComplete(Object obj) {
                    this.f$0.lambda$getBackgroundDrawableFromTheme$9(emojiThemes, z, motionBackgroundDrawable, patternColor, (Pair) obj);
                }

                @Override // org.telegram.tgnet.ResultCallback
                public /* synthetic */ void onError(TLRPC.TL_error tL_error) {
                    ResultCallback.CC.$default$onError(this, tL_error);
                }
            });
            return motionBackgroundDrawable;
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$getBackgroundDrawableFromTheme$7(MotionBackgroundDrawable motionBackgroundDrawable, Pair pair) {
            if (pair == null) {
                return;
            }
            long jLongValue = ((Long) pair.first).longValue();
            Bitmap bitmap = (Bitmap) pair.second;
            EmojiThemes emojiThemes = this.chatTheme;
            if (emojiThemes == null || jLongValue != emojiThemes.getThemeId(this.isDark ? 1 : 0) || bitmap == null) {
                return;
            }
            motionBackgroundDrawable.setGiftPatternBitmap(bitmap);
        }

        /* JADX INFO: Access modifiers changed from: private */
        public /* synthetic */ void lambda$getBackgroundDrawableFromTheme$9(EmojiThemes emojiThemes, boolean z, final MotionBackgroundDrawable motionBackgroundDrawable, int i, Pair pair) {
            if (pair == null) {
                return;
            }
            long jLongValue = ((Long) pair.first).longValue();
            Bitmap bitmap = ((WallpaperBitmapHolder) pair.second).bitmap;
            EmojiThemes emojiThemes2 = this.chatTheme;
            if (emojiThemes2 == null || jLongValue != emojiThemes2.getThemeId(this.isDark ? 1 : 0) || bitmap == null) {
                return;
            }
            ValueAnimator valueAnimator = this.patternIntensityAnimator;
            if (valueAnimator != null) {
                valueAnimator.cancel();
            }
            int i2 = emojiThemes.getWallpaper(z ? 1 : 0).settings.intensity;
            motionBackgroundDrawable.setPatternGiftPositions(((WallpaperBitmapHolder) pair.second).giftPatternPositions);
            motionBackgroundDrawable.setGiftPatternRandomSeed(ChatActivity.wallpaperRandomSeed);
            motionBackgroundDrawable.setPatternBitmap(i2, bitmap);
            motionBackgroundDrawable.setPatternColorFilter(i);
            ValueAnimator valueAnimatorOfFloat = ValueAnimator.ofFloat(0.0f, 1.0f);
            this.patternIntensityAnimator = valueAnimatorOfFloat;
            valueAnimatorOfFloat.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() { // from class: org.telegram.ui.ChatActivity$ThemeDelegate$$ExternalSyntheticLambda9
                @Override // android.animation.ValueAnimator.AnimatorUpdateListener
                public final void onAnimationUpdate(ValueAnimator valueAnimator2) {
                    motionBackgroundDrawable.setPatternAlpha(((Float) valueAnimator2.getAnimatedValue()).floatValue());
                }
            });
            this.patternIntensityAnimator.setDuration(250L);
            this.patternIntensityAnimator.start();
        }

        public TLRPC.WallPaper getCurrentWallpaper() {
            return this.wallpaper;
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateBackground() throws InterruptedException {
        if (this.contentView == null || this.parentThemeDelegate != null) {
            return;
        }
        if (this.themeDelegate.backgroundDrawable == null || this.contentView.getBackgroundImage() == null) {
            if (this.contentView.getBackgroundImage() == null || AndroidUtilities.isTablet()) {
                this.contentView.setBackgroundImage(Theme.getCachedWallpaper(), Theme.isWallpaperMotion());
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void updateBotHelpCellClick(final BotHelpCell botHelpCell) {
        if (MessagesController.getInstance(this.currentAccount).getTranslateController().isContextTranslateEnabled() && LanguageDetector.hasSupport()) {
            final CharSequence text = botHelpCell.getText();
            LanguageDetector.detectLanguage(text == null ? "" : text.toString(), new LanguageDetector.StringCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda277
                @Override // org.telegram.messenger.LanguageDetector.StringCallback
                public final void run(String str) {
                    this.f$0.lambda$updateBotHelpCellClick$410(botHelpCell, text, str);
                }
            }, new LanguageDetector.ExceptionCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda278
                @Override // org.telegram.messenger.LanguageDetector.ExceptionCallback
                public final void run(Exception exc) {
                    botHelpCell.setClickable(false);
                }
            });
        } else {
            botHelpCell.setClickable(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBotHelpCellClick$410(final BotHelpCell botHelpCell, final CharSequence charSequence, final String str) {
        final String language = LocaleController.getInstance().getCurrentLocale().getLanguage();
        if (str != null && ((!str.equals(language) || str.equals(TranslateController.UNKNOWN_LANGUAGE)) && !RestrictedLanguagesSelectActivity.getRestrictedLanguages().contains(str))) {
            botHelpCell.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda364
                @Override // android.view.View.OnClickListener
                public final void onClick(View view) {
                    this.f$0.lambda$updateBotHelpCellClick$409(str, language, charSequence, botHelpCell, view);
                }
            });
        } else {
            botHelpCell.setClickable(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBotHelpCellClick$409(final String str, final String str2, final CharSequence charSequence, BotHelpCell botHelpCell, View view) {
        ActionBarPopupWindow.ActionBarPopupWindowLayout actionBarPopupWindowLayout = new ActionBarPopupWindow.ActionBarPopupWindowLayout(getContext());
        Drawable drawableMutate = ContextCompat.getDrawable(getContext(), C2369R.drawable.popup_fixed_alert).mutate();
        drawableMutate.setColorFilter(new PorterDuffColorFilter(getThemedColor(Theme.key_actionBarDefaultSubmenuBackground), PorterDuff.Mode.MULTIPLY));
        actionBarPopupWindowLayout.setBackground(drawableMutate);
        ActionBarMenuSubItem actionBarMenuSubItem = new ActionBarMenuSubItem(getContext(), true, true);
        actionBarMenuSubItem.setTextAndIcon(LocaleController.getString(C2369R.string.TranslateMessage), C2369R.drawable.msg_translate);
        actionBarMenuSubItem.setOnClickListener(new View.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda457
            @Override // android.view.View.OnClickListener
            public final void onClick(View view2) {
                this.f$0.lambda$updateBotHelpCellClick$407(str, str2, charSequence, runnableArr, view2);
            }
        });
        actionBarPopupWindowLayout.addView(actionBarMenuSubItem);
        final ActionBarPopupWindow actionBarPopupWindow = new ActionBarPopupWindow(actionBarPopupWindowLayout, -2, -2);
        final Runnable[] runnableArr = {new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda458
            @Override // java.lang.Runnable
            public final void run() {
                actionBarPopupWindow.dismiss();
            }
        }};
        actionBarPopupWindow.setPauseNotifications(true);
        actionBarPopupWindow.setDismissAnimationDuration(220);
        actionBarPopupWindow.setOutsideTouchable(true);
        actionBarPopupWindow.setClippingEnabled(true);
        actionBarPopupWindow.setAnimationStyle(C2369R.style.PopupContextAnimation);
        actionBarPopupWindow.setFocusable(true);
        actionBarPopupWindow.showAsDropDown(botHelpCell, (botHelpCell.getWidth() / 2) - AndroidUtilities.m1146dp(90.0f), AndroidUtilities.m1146dp(-16.0f), 83);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$updateBotHelpCellClick$407(String str, String str2, CharSequence charSequence, Runnable[] runnableArr, View view) {
        TranslateAlert2.showAlert(getContext(), this, this.currentAccount, str, str2, charSequence, null, false, null, null);
        Runnable runnable = runnableArr[0];
        if (runnable != null) {
            runnable.run();
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    protected boolean allowPresentFragment() {
        return !this.inPreviewMode;
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    protected boolean hideKeyboardOnShow() {
        MessageObject messageObject = this.threadMessageObject;
        if (messageObject != null && messageObject.getRepliesCount() == 0 && ChatObject.canSendMessages(this.currentChat)) {
            return false;
        }
        return super.hideKeyboardOnShow();
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean isLightStatusBar() {
        int color;
        if (isReport()) {
            Theme.ResourcesProvider resourceProvider = getResourceProvider();
            if (resourceProvider != null) {
                color = resourceProvider.getColorOrDefault(Theme.key_actionBarActionModeDefault);
            } else {
                color = Theme.getColor(Theme.key_actionBarActionModeDefault, null, true);
            }
            return ColorUtils.calculateLuminance(color) > 0.699999988079071d;
        }
        ActionBar actionBar = this.actionBar;
        if (actionBar == null) {
            return !Theme.isCurrentThemeDark();
        }
        return AndroidUtilities.computePerceivedBrightness(actionBar.getBackgroundColor()) > 0.721f;
    }

    public MessageObject.GroupedMessages getGroup(long j) {
        return (MessageObject.GroupedMessages) this.groupedMessagesMap.get(j);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public MessageSkeleton getNewSkeleton(boolean z) {
        MessageSkeleton messageSkeleton = new MessageSkeleton();
        TLRPC.Chat chat = this.currentChat;
        if (chat != null && ChatObject.isChannelAndNotMegaGroup(chat)) {
            messageSkeleton.height = AndroidUtilities.m1146dp(128.0f) + Utilities.fastRandom.nextInt(AndroidUtilities.m1146dp(64.0f));
        } else {
            messageSkeleton.height = AndroidUtilities.m1146dp(64.0f) + Utilities.fastRandom.nextInt(AndroidUtilities.m1146dp(64.0f));
        }
        messageSkeleton.width = (int) Math.min((this.chatListView.getWidth() * 0.8f) - (z ? 0 : AndroidUtilities.m1146dp(42.0f)), AndroidUtilities.m1146dp(42.0f) + (((Utilities.fastRandom.nextFloat() * 0.35f) + 0.4f) * this.chatListView.getWidth()));
        return messageSkeleton;
    }

    @Override // org.telegram.p023ui.Components.ChatActivityInterface
    public SizeNotifierFrameLayout getContentView() {
        return this.contentView;
    }

    private static final class MessageSkeleton {
        int height;
        int lastBottom;
        int width;

        private MessageSkeleton() {
        }
    }

    private boolean haveDiscussion() {
        TLRPC.ChatFull chatFull = this.chatInfo;
        return (chatFull == null || chatFull.linked_chat_id == 0) ? false : true;
    }

    private void openDiscussion() {
        if (haveDiscussion()) {
            Bundle bundle = new Bundle();
            bundle.putLong("chat_id", this.chatInfo.linked_chat_id);
            if (getMessagesController().checkCanOpenChat(bundle, this)) {
                presentFragment(new ChatActivity(bundle));
            }
        }
    }

    public boolean isPinHidden() {
        if (!this.pinnedMessageIds.isEmpty()) {
            if (((Integer) this.pinnedMessageIds.get(0)).intValue() == MessagesController.getNotificationsSettings(this.currentAccount).getInt("pin_" + this.dialog_id, 0)) {
                return true;
            }
        }
        return false;
    }

    public void setPinVisibility(boolean z) {
        if (this.pinnedMessageIds.isEmpty()) {
            return;
        }
        SharedPreferences notificationsSettings = MessagesController.getNotificationsSettings(this.currentAccount);
        if (!z) {
            notificationsSettings.edit().putInt("pin_" + this.dialog_id, ((Integer) this.pinnedMessageIds.get(0)).intValue()).apply();
        } else {
            notificationsSettings.edit().remove("pin_" + this.dialog_id).apply();
        }
        updatePinnedMessageView(true);
    }

    private class RecyclerListViewInternal extends RecyclerListView implements StoriesListPlaceProvider.ClippedView {
        public RecyclerListViewInternal(Context context, ThemeDelegate themeDelegate) {
            super(context, themeDelegate);
        }

        @Override // org.telegram.ui.Stories.StoriesListPlaceProvider.ClippedView
        public void updateClip(int[] iArr) {
            iArr[0] = ((int) ChatActivity.this.chatListViewPaddingTop) - AndroidUtilities.m1146dp(4.0f);
            iArr[1] = ChatActivity.this.chatListView.getMeasuredHeight() - (ChatActivity.this.chatListView.getPaddingBottom() - AndroidUtilities.m1146dp(3.0f));
        }
    }

    private void updateVisibleWallpaperActions() throws Resources.NotFoundException {
        MessageObject messageObject;
        if (this.chatListView == null || this.chatAdapter == null) {
            return;
        }
        for (int i = 0; i < this.chatListView.getChildCount(); i++) {
            View childAt = this.chatListView.getChildAt(i);
            int childAdapterPosition = this.chatListView.getChildAdapterPosition(childAt) - this.chatAdapter.messagesStartRow;
            if ((childAt instanceof ChatActionCell) && childAdapterPosition >= 0 && childAdapterPosition < this.messages.size() && (messageObject = (MessageObject) this.messages.get(childAdapterPosition)) != null && messageObject.isWallpaperForBoth()) {
                ((ChatActionCell) childAt).setMessageObject(messageObject, true);
            }
        }
    }

    private void checkLeaveChannelButton() {
        ActionBarMenuItem actionBarMenuItem = this.headerItem;
        if (actionBarMenuItem == null || this.chatMode == 3 || actionBarMenuItem.hasSubItem(16) || this.isTopic) {
            return;
        }
        if (ChatObject.isChannel(this.currentChat)) {
            TLRPC.Chat chat = this.currentChat;
            if (!chat.creator) {
                if (ChatObject.isNotInChat(chat)) {
                    return;
                }
                if (this.currentChat.megagroup) {
                    this.headerItem.lazilyAddSubItem(16, C2369R.drawable.msg_leave, LocaleController.getString(C2369R.string.LeaveMegaMenu));
                    return;
                } else {
                    this.headerItem.lazilyAddSubItem(16, C2369R.drawable.msg_leave, LocaleController.getString(C2369R.string.LeaveChannelMenu));
                    return;
                }
            }
        }
        if (ChatObject.isChannel(this.currentChat)) {
            return;
        }
        if (this.currentChat != null) {
            this.headerItem.lazilyAddSubItem(16, C2369R.drawable.msg_leave, LocaleController.getString(C2369R.string.DeleteAndExit));
            return;
        }
        TLRPC.User user = this.currentUser;
        if (user != null && user.bot) {
            ActionBarMenuItem.Item itemLazilyAddSubItem = this.headerItem.lazilyAddSubItem(16, C2369R.drawable.msg_block2, LocaleController.getString(C2369R.string.DeleteAndBlock));
            int i = Theme.key_text_RedRegular;
            itemLazilyAddSubItem.setColors(getThemedColor(i), getThemedColor(i));
            return;
        }
        this.headerItem.lazilyAddSubItem(16, C2369R.drawable.msg_delete, LocaleController.getString(C2369R.string.DeleteChatUser));
    }

    public boolean supportsThanosEffect() {
        return ThanosEffect.supports() && LiteMode.isEnabled(65536);
    }

    public ThanosEffect getChatThanosEffect() {
        if (LiteMode.isEnabled(65536) && ThanosEffect.supports()) {
            ThanosEffect thanosEffect = this.chatListThanosEffect;
            if (thanosEffect == null || thanosEffect.destroyed) {
                if (getContext() != null && ThanosEffect.supports() && this.chatListView != null && this.contentView != null) {
                    ThanosEffect thanosEffect2 = this.chatListThanosEffect;
                    if (thanosEffect2 != null) {
                        AndroidUtilities.removeFromParent(thanosEffect2);
                    }
                    ThanosEffect thanosEffect3 = new ThanosEffect(getContext(), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda146
                        @Override // java.lang.Runnable
                        public final void run() {
                            this.f$0.lambda$getChatThanosEffect$412(thanosEffectArr);
                        }
                    });
                    this.chatListThanosEffect = thanosEffect3;
                    final ThanosEffect[] thanosEffectArr = {thanosEffect3};
                    ChatActivityFragmentView chatActivityFragmentView = this.contentView;
                    chatActivityFragmentView.addView(thanosEffect3, chatActivityFragmentView.indexOfChild(this.chatListView) + 1, LayoutHelper.createFrame(-1, -1.0f));
                }
            }
            return this.chatListThanosEffect;
        }
        return null;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$getChatThanosEffect$412(ThanosEffect[] thanosEffectArr) {
        ThanosEffect thanosEffect;
        if (this.removingFromParent || (thanosEffect = thanosEffectArr[0]) == null) {
            return;
        }
        thanosEffectArr[0] = null;
        if (this.chatListThanosEffect == thanosEffect) {
            this.chatListThanosEffect = null;
        }
        AndroidUtilities.removeFromParent(thanosEffect);
    }

    public StarReactionsOverlay getStarReactionsOverlay() {
        if (this.starReactionsOverlay == null) {
            this.starReactionsOverlay = new StarReactionsOverlay(this);
        }
        FrameLayout layoutContainer = getLayoutContainer();
        if (layoutContainer == null) {
            return null;
        }
        if (this.starReactionsOverlay.getParent() != layoutContainer) {
            AndroidUtilities.removeFromParent(this.starReactionsOverlay);
            layoutContainer.addView(this.starReactionsOverlay, LayoutHelper.createFrame(-1, -1.0f));
        } else if (layoutContainer.indexOfChild(this.starReactionsOverlay) < layoutContainer.indexOfChild(this.fragmentView)) {
            this.starReactionsOverlay.bringToFront();
        }
        return this.starReactionsOverlay;
    }

    private void checkGroupMessagesOrder() {
        int i;
        if (this.reversed) {
            int i2 = -1;
            long j = 0;
            for (int i3 = 0; i3 < this.messages.size(); i3++) {
                long groupIdForUse = ((MessageObject) this.messages.get(i3)).getGroupIdForUse();
                if (j != groupIdForUse) {
                    if (i2 >= 0 && j != 0 && (i = i3 - i2) > 1) {
                        ArrayList arrayList = new ArrayList();
                        for (int i4 = 0; i4 < i; i4++) {
                            arrayList.add((MessageObject) this.messages.remove(i2));
                        }
                        Collections.sort(arrayList, new java.util.Comparator() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda208
                            @Override // java.util.Comparator
                            public final int compare(Object obj, Object obj2) {
                                return ChatActivity.$r8$lambda$wbvQpvIquixKcDpa9n1aNGnWRRE((MessageObject) obj, (MessageObject) obj2);
                            }
                        });
                        this.messages.addAll(i2, arrayList);
                    }
                    i2 = i3;
                    j = groupIdForUse;
                }
            }
            if (i2 < 0 || j == 0 || this.messages.size() - i2 <= 1) {
                return;
            }
            int size = this.messages.size() - i2;
            ArrayList arrayList2 = new ArrayList();
            for (int i5 = 0; i5 < size; i5++) {
                arrayList2.add((MessageObject) this.messages.remove(i2));
            }
            this.messages.addAll(i2, arrayList2);
        }
    }

    public static /* synthetic */ int $r8$lambda$wbvQpvIquixKcDpa9n1aNGnWRRE(MessageObject messageObject, MessageObject messageObject2) {
        return messageObject2.getId() - messageObject.getId();
    }

    private void invalidatePremiumBlocked() {
        TLRPC.User user;
        if (getDialogId() == getUserConfig().getClientUserId() || getUserConfig().isPremiumReal() || (user = this.currentUser) == null || !user.contact_require_premium) {
            return;
        }
        if (this.messages.isEmpty() == (getMessagesController().isUserContactBlocked(getDialogId()) != null)) {
            return;
        }
        getMessagesController().invalidateUserPremiumBlocked(getDialogId(), this.classGuid);
    }

    public InstantCameraView getInstantCameraView() {
        return this.instantCameraView;
    }

    public boolean checkCanRemoveRestrictionsByBoosts() {
        boolean zIsPossibleRemoveChatRestrictionsByBoosts = ChatObject.isPossibleRemoveChatRestrictionsByBoosts(this.chatInfo);
        if (zIsPossibleRemoveChatRestrictionsByBoosts) {
            AndroidUtilities.hideKeyboard(getParentActivity().getCurrentFocus());
            LimitReachedBottomSheet.openBoostsForRemoveRestrictions(this, this.boostsStatus, this.canApplyBoosts, this.dialog_id, false);
        }
        return zIsPossibleRemoveChatRestrictionsByBoosts;
    }

    public void showPremiumFloodWaitBulletin(final boolean z) {
        float f;
        long jCurrentTimeMillis = System.currentTimeMillis();
        if (jCurrentTimeMillis - ConnectionsManager.lastPremiumFloodWaitShown < MessagesController.getInstance(this.currentAccount).uploadPremiumSpeedupNotifyPeriod * 1000) {
            return;
        }
        ConnectionsManager.lastPremiumFloodWaitShown = jCurrentTimeMillis;
        if (UserConfig.getInstance(this.currentAccount).isPremium() || MessagesController.getInstance(this.currentAccount).premiumFeaturesBlocked()) {
            return;
        }
        if (z) {
            f = MessagesController.getInstance(this.currentAccount).uploadPremiumSpeedupUpload;
        } else {
            f = MessagesController.getInstance(this.currentAccount).uploadPremiumSpeedupDownload;
        }
        SpannableString spannableString = new SpannableString(Double.toString(Math.round(f * 10.0f) / 10.0d).replaceAll("\\.0$", ""));
        spannableString.setSpan(new TypefaceSpan(AndroidUtilities.bold()), 0, spannableString.length(), 33);
        if (hasStoryViewer()) {
            return;
        }
        BulletinFactory.m1267of(this).createSimpleBulletin(C2369R.raw.speed_limit, LocaleController.getString(z ? C2369R.string.UploadSpeedLimited : C2369R.string.DownloadSpeedLimited), AndroidUtilities.replaceCharSequence("%d", AndroidUtilities.premiumText(LocaleController.getString(z ? C2369R.string.UploadSpeedLimitedMessage : C2369R.string.DownloadSpeedLimitedMessage), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda167
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$showPremiumFloodWaitBulletin$414(z);
            }
        }), spannableString)).setDuration(8000).show(true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$showPremiumFloodWaitBulletin$414(boolean z) {
        presentFragment(new PremiumPreviewFragment(z ? "upload_speed" : "download_speed"));
    }

    /* JADX WARN: Removed duplicated region for block: B:75:0x0178  */
    /* JADX WARN: Removed duplicated region for block: B:78:0x0187  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didLongPressLink(final org.telegram.p023ui.Cells.ChatMessageCell r17, org.telegram.messenger.MessageObject r18, android.text.style.CharacterStyle r19, final java.lang.String r20) throws java.io.UnsupportedEncodingException {
        /*
            Method dump skipped, instructions count: 403
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.didLongPressLink(org.telegram.ui.Cells.ChatMessageCell, org.telegram.messenger.MessageObject, android.text.style.CharacterStyle, java.lang.String):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressLink$415(String str, CharacterStyle characterStyle, MessageObject messageObject, ChatMessageCell chatMessageCell, boolean z, boolean z2) throws Resources.NotFoundException, NumberFormatException, UnsupportedEncodingException {
        if (str.startsWith("video?")) {
            didPressMessageUrl(characterStyle, false, messageObject, chatMessageCell);
        } else if (z && !z2) {
            Browser.openInTelegramBrowser(getParentActivity(), str, null);
        } else {
            logSponsoredClicked(messageObject, false, false);
            openClickableLink(characterStyle, str, false, chatMessageCell, messageObject, false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressLink$416(String str) {
        Browser.openInExternalBrowser(getParentActivity(), str, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressLink$417(MessageObject messageObject) {
        TLRPC.WebPage webPage;
        TLRPC.MessageMedia messageMedia = messageObject.messageOwner.media;
        if (messageMedia == null || (webPage = messageMedia.webpage) == null || webPage.cached_page == null) {
            return;
        }
        LaunchActivity launchActivity = LaunchActivity.instance;
        if (launchActivity == null || launchActivity.getBottomSheetTabs() == null || LaunchActivity.instance.getBottomSheetTabs().tryReopenTab(messageObject) == null) {
            createArticleViewer(false).open(messageObject);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:41:0x00e2  */
    /* JADX WARN: Removed duplicated region for block: B:44:0x00e6  */
    /* JADX WARN: Removed duplicated region for block: B:64:? A[RETURN, SYNTHETIC] */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$didLongPressLink$418(java.lang.String r8, org.telegram.messenger.MessageObject r9, boolean r10) {
        /*
            Method dump skipped, instructions count: 307
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$didLongPressLink$418(java.lang.String, org.telegram.messenger.MessageObject, boolean):void");
    }

    public void didLongPressCard(final ChatMessageCell chatMessageCell, final CharacterStyle characterStyle, final String str) {
        final Browser.Progress progressMakeProgressForLink = makeProgressForLink(chatMessageCell, characterStyle);
        TLRPC.TL_payments_getBankCardData tL_payments_getBankCardData = new TLRPC.TL_payments_getBankCardData();
        tL_payments_getBankCardData.number = str;
        final int iSendRequest = getConnectionsManager().sendRequest(tL_payments_getBankCardData, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda193
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$didLongPressCard$422(progressMakeProgressForLink, chatMessageCell, str, characterStyle, tLObject, tL_error);
            }
        }, null, null, 0, getMessagesController().webFileDatacenterId, 1, true);
        progressMakeProgressForLink.onCancel(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda194
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressCard$423(iSendRequest);
            }
        });
        progressMakeProgressForLink.init();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCard$422(final Browser.Progress progress, final ChatMessageCell chatMessageCell, final String str, final CharacterStyle characterStyle, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda238
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressCard$421(progress, chatMessageCell, str, tLObject, characterStyle);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCard$421(Browser.Progress progress, ChatMessageCell chatMessageCell, final String str, TLObject tLObject, CharacterStyle characterStyle) {
        progress.end();
        ItemOptions itemOptionsMakeOptions = ItemOptions.makeOptions((BaseFragment) this, (View) chatMessageCell, true);
        final ScrimOptions scrimOptions = new ScrimOptions(getContext(), this.themeDelegate);
        itemOptionsMakeOptions.setOnDismiss(new ChatActivity$$ExternalSyntheticLambda115(scrimOptions));
        itemOptionsMakeOptions.add(C2369R.drawable.msg_copy, LocaleController.getString(C2369R.string.CopyCardNumber), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda349
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressCard$419(scrimOptions, str);
            }
        });
        if (tLObject instanceof TLRPC.TL_payments_bankCardData) {
            TLRPC.TL_payments_bankCardData tL_payments_bankCardData = (TLRPC.TL_payments_bankCardData) tLObject;
            ArrayList arrayList = tL_payments_bankCardData.open_urls;
            int size = arrayList.size();
            int i = 0;
            while (i < size) {
                Object obj = arrayList.get(i);
                i++;
                final TLRPC.TL_bankCardOpenUrl tL_bankCardOpenUrl = (TLRPC.TL_bankCardOpenUrl) obj;
                itemOptionsMakeOptions.add(C2369R.drawable.msg_payment_card, tL_bankCardOpenUrl.name, new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda350
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didLongPressCard$420(tL_bankCardOpenUrl);
                    }
                });
            }
            if (!TextUtils.isEmpty(tL_payments_bankCardData.title)) {
                itemOptionsMakeOptions.addGap();
                itemOptionsMakeOptions.addText(tL_payments_bankCardData.title, 13, AndroidUtilities.m1146dp(200.0f));
            }
        }
        scrimOptions.setItemOptions(itemOptionsMakeOptions);
        scrimOptions.setScrim(chatMessageCell, characterStyle, null);
        showDialog(scrimOptions);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCard$419(ScrimOptions scrimOptions, String str) {
        scrimOptions.dismiss();
        AndroidUtilities.addToClipboard(str);
        BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.getString(C2369R.string.CardNumberCopied)).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCard$420(TLRPC.TL_bankCardOpenUrl tL_bankCardOpenUrl) {
        Browser.openUrl(getContext(), tL_bankCardOpenUrl.url, this.inlineReturn == 0, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCard$423(int i) {
        getConnectionsManager().cancelRequest(i, true);
    }

    public void didLongPressUsername(final ChatMessageCell chatMessageCell, final CharacterStyle characterStyle, final String str) {
        final Browser.Progress progressMakeProgressForLink = makeProgressForLink(chatMessageCell, characterStyle);
        final TLObject userOrChat = getMessagesController().getUserOrChat(str);
        final Utilities.Callback2 callback2 = new Utilities.Callback2() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda241
            @Override // org.telegram.messenger.Utilities.Callback2
            public final void run(Object obj, Object obj2) {
                this.f$0.lambda$didLongPressUsername$428(progressMakeProgressForLink, chatMessageCell, str, characterStyle, (TLObject) obj, (Boolean) obj2);
            }
        };
        TL_account.checkUsername checkusername = new TL_account.checkUsername();
        checkusername.username = str;
        final int iSendRequest = getConnectionsManager().sendRequest(checkusername, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda242
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$didLongPressUsername$433(userOrChat, callback2, str, progressMakeProgressForLink, tLObject, tL_error);
            }
        });
        progressMakeProgressForLink.onCancel(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda243
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressUsername$434(iSendRequest);
            }
        });
        progressMakeProgressForLink.init();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$428(Browser.Progress progress, ChatMessageCell chatMessageCell, final String str, CharacterStyle characterStyle, TLObject tLObject, Boolean bool) {
        final long j;
        boolean z;
        int i;
        progress.end();
        boolean zIsChannelAndNotMegaGroup = false;
        if (tLObject instanceof TLRPC.User) {
            j = ((TLRPC.User) tLObject).f1734id;
            z = true;
        } else {
            if (tLObject instanceof TLRPC.Chat) {
                TLRPC.Chat chat = (TLRPC.Chat) tLObject;
                j = -chat.f1571id;
                zIsChannelAndNotMegaGroup = ChatObject.isChannelAndNotMegaGroup(chat);
            } else {
                j = 0;
            }
            z = false;
        }
        ItemOptions itemOptionsMakeOptions = ItemOptions.makeOptions((BaseFragment) this, (View) chatMessageCell, true);
        final ScrimOptions scrimOptions = new ScrimOptions(getContext(), this.themeDelegate);
        itemOptionsMakeOptions.setOnDismiss(new ChatActivity$$ExternalSyntheticLambda115(scrimOptions));
        if (j != 0) {
            itemOptionsMakeOptions.add(zIsChannelAndNotMegaGroup ? C2369R.drawable.msg_channel : C2369R.drawable.msg_discussion, LocaleController.getString(zIsChannelAndNotMegaGroup ? C2369R.string.ViewChannel : C2369R.string.SendMessage), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda371
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUsername$424(j);
                }
            });
        }
        itemOptionsMakeOptions.add(C2369R.drawable.msg_copy, LocaleController.getString(C2369R.string.ProfileCopyUsername), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda372
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressUsername$425(scrimOptions, str);
            }
        });
        if (bool.booleanValue()) {
            itemOptionsMakeOptions.add(C2369R.drawable.msg_ton, LocaleController.getString(C2369R.string.BuyUsernameOnFragment), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda373
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUsername$426(str);
                }
            });
        }
        itemOptionsMakeOptions.addGap();
        if (j != 0) {
            if (z) {
                i = C2369R.string.ViewProfile;
            } else {
                i = zIsChannelAndNotMegaGroup ? C2369R.string.ViewChannelProfile : C2369R.string.ViewGroupProfile;
            }
            itemOptionsMakeOptions.addProfile(tLObject, LocaleController.getString(i), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda374
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didLongPressUsername$427(j);
                }
            });
        } else {
            itemOptionsMakeOptions.addText(LocaleController.getString(C2369R.string.NoUsernameFound2), 13, AndroidUtilities.m1146dp(200.0f));
        }
        scrimOptions.setItemOptions(itemOptionsMakeOptions);
        scrimOptions.setScrim(chatMessageCell, characterStyle, null);
        showDialog(scrimOptions);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$424(long j) {
        presentFragment(m1258of(j));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$425(ScrimOptions scrimOptions, String str) {
        scrimOptions.dismiss();
        AndroidUtilities.addToClipboard("@" + str);
        BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.getString(C2369R.string.UsernameCopied)).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$426(String str) {
        Browser.openUrl(getContext(), "https://fragment.com/username/" + str);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$427(long j) {
        presentFragment(ProfileActivity.m1314of(j));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$433(final TLObject tLObject, final Utilities.Callback2 callback2, final String str, final Browser.Progress progress, final TLObject tLObject2, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda381
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressUsername$432(tL_error, tLObject, tLObject2, callback2, str, progress);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$432(TLRPC.TL_error tL_error, TLObject tLObject, TLObject tLObject2, final Utilities.Callback2 callback2, String str, final Browser.Progress progress) {
        final boolean z = tL_error != null && "USERNAME_PURCHASE_AVAILABLE".equals(tL_error.text);
        if (tLObject != null || (tL_error == null && (tLObject2 instanceof TLRPC.TL_boolTrue))) {
            callback2.run(tLObject, Boolean.valueOf(z));
            return;
        }
        TLRPC.TL_contacts_resolveUsername tL_contacts_resolveUsername = new TLRPC.TL_contacts_resolveUsername();
        tL_contacts_resolveUsername.username = str;
        final int iSendRequest = getConnectionsManager().sendRequest(tL_contacts_resolveUsername, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda433
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject3, TLRPC.TL_error tL_error2) {
                this.f$0.lambda$didLongPressUsername$430(progress, callback2, z, tLObject3, tL_error2);
            }
        });
        progress.onCancel(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda434
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressUsername$431(iSendRequest);
            }
        });
        progress.init();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$430(final Browser.Progress progress, final Utilities.Callback2 callback2, final boolean z, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda467
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didLongPressUsername$429(progress, tLObject, callback2, z);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:9:0x0045  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$didLongPressUsername$429(org.telegram.messenger.browser.Browser.Progress r4, org.telegram.tgnet.TLObject r5, org.telegram.messenger.Utilities.Callback2 r6, boolean r7) {
        /*
            r3 = this;
            r4.end()
            boolean r4 = r5 instanceof org.telegram.tgnet.TLRPC.TL_contacts_resolvedPeer
            if (r4 == 0) goto L45
            org.telegram.tgnet.TLRPC$TL_contacts_resolvedPeer r5 = (org.telegram.tgnet.TLRPC.TL_contacts_resolvedPeer) r5
            org.telegram.messenger.MessagesController r4 = r3.getMessagesController()
            java.util.ArrayList r0 = r5.users
            r1 = 0
            r4.putUsers(r0, r1)
            org.telegram.messenger.MessagesController r4 = r3.getMessagesController()
            java.util.ArrayList r0 = r5.chats
            r4.putChats(r0, r1)
            org.telegram.tgnet.TLRPC$Peer r4 = r5.peer
            long r4 = org.telegram.messenger.DialogObject.getPeerDialogId(r4)
            r0 = 0
            int r2 = (r4 > r0 ? 1 : (r4 == r0 ? 0 : -1))
            if (r2 < 0) goto L35
            org.telegram.messenger.MessagesController r0 = r3.getMessagesController()
            java.lang.Long r4 = java.lang.Long.valueOf(r4)
            org.telegram.tgnet.TLRPC$User r4 = r0.getUser(r4)
            goto L46
        L35:
            if (r2 >= 0) goto L45
            org.telegram.messenger.MessagesController r0 = r3.getMessagesController()
            long r4 = -r4
            java.lang.Long r4 = java.lang.Long.valueOf(r4)
            org.telegram.tgnet.TLRPC$Chat r4 = r0.getChat(r4)
            goto L46
        L45:
            r4 = 0
        L46:
            java.lang.Boolean r5 = java.lang.Boolean.valueOf(r7)
            r6.run(r4, r5)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$didLongPressUsername$429(org.telegram.messenger.browser.Browser$Progress, org.telegram.tgnet.TLObject, org.telegram.messenger.Utilities$Callback2, boolean):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$431(int i) {
        getConnectionsManager().cancelRequest(i, true);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressUsername$434(int i) {
        getConnectionsManager().cancelRequest(i, true);
    }

    public void didLongPressCopyButton(final String str) {
        BottomSheet.Builder builder = new BottomSheet.Builder(getParentActivity(), false, this.themeDelegate);
        builder.setTitle(str);
        builder.setTitleMultipleLines(true);
        builder.setItems(new CharSequence[]{LocaleController.getString(C2369R.string.Copy)}, new DialogInterface.OnClickListener() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda380
            @Override // android.content.DialogInterface.OnClickListener
            public final void onClick(DialogInterface dialogInterface, int i) {
                this.f$0.lambda$didLongPressCopyButton$438(str, dialogInterface, i);
            }
        });
        showDialog(builder.create());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didLongPressCopyButton$438(String str, DialogInterface dialogInterface, int i) {
        AndroidUtilities.addToClipboard(str);
        BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.formatString(C2369R.string.ExactTextCopied, str)).show();
    }

    public void didPressPhoneNumber(final ChatMessageCell chatMessageCell, final CharacterStyle characterStyle, final String str) {
        final Browser.Progress progressMakeProgressForLink = makeProgressForLink(chatMessageCell, characterStyle);
        final TLRPC.TL_contact tL_contact = getContactsController().contactsByPhone.get(PhoneFormat.stripExceptNumbers(str));
        final Utilities.Callback callback = new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda159
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) {
                this.f$0.lambda$didPressPhoneNumber$452(chatMessageCell, str, tL_contact, characterStyle, (TLRPC.User) obj);
            }
        };
        if (tL_contact != null) {
            TLRPC.User user = getMessagesController().getUser(Long.valueOf(tL_contact.user_id));
            if (user != null) {
                callback.run(user);
                return;
            } else {
                getMessagesStorage().getStorageQueue().postRunnable(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda160
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressPhoneNumber$454(tL_contact, callback);
                    }
                });
                return;
            }
        }
        TLRPC.TL_contacts_resolvePhone tL_contacts_resolvePhone = new TLRPC.TL_contacts_resolvePhone();
        tL_contacts_resolvePhone.phone = PhoneFormat.stripExceptNumbers(str);
        final int iSendRequest = getConnectionsManager().sendRequest(tL_contacts_resolvePhone, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda161
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$didPressPhoneNumber$457(str, progressMakeProgressForLink, callback, tLObject, tL_error);
            }
        });
        progressMakeProgressForLink.onCancel(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda162
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didPressPhoneNumber$458(iSendRequest);
            }
        });
        progressMakeProgressForLink.init();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$452(ChatMessageCell chatMessageCell, final String str, TLRPC.TL_contact tL_contact, CharacterStyle characterStyle, final TLRPC.User user) {
        final TLRPC.UserFull userFull = user != null ? getMessagesController().getUserFull(user.f1734id) : null;
        final ItemOptions itemOptionsMakeOptions = ItemOptions.makeOptions((BaseFragment) this, (View) chatMessageCell, true);
        final ScrimOptions scrimOptions = new ScrimOptions(getContext(), this.themeDelegate);
        itemOptionsMakeOptions.setOnDismiss(new RunnableC1517x113c1cf4(scrimOptions));
        final Utilities.Callback callback = new Utilities.Callback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda269
            @Override // org.telegram.messenger.Utilities.Callback
            public final void run(Object obj) throws IOException {
                this.f$0.lambda$didPressPhoneNumber$439(user, str, (Boolean) obj);
            }
        };
        final ItemOptions itemOptionsMakeSwipeback = itemOptionsMakeOptions.makeSwipeback();
        itemOptionsMakeSwipeback.add(C2369R.drawable.ic_ab_back, LocaleController.getString(C2369R.string.Back), new RunnableC1500x164780ca(itemOptionsMakeOptions));
        itemOptionsMakeSwipeback.addGap();
        itemOptionsMakeSwipeback.add(C2369R.drawable.msg_addbot, LocaleController.getString(C2369R.string.CreateNewContact), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda270
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didPressPhoneNumber$440(itemOptionsMakeOptions, str);
            }
        });
        itemOptionsMakeSwipeback.add(C2369R.drawable.menu_contact_existing, LocaleController.getString(C2369R.string.AddToExistingContact), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda271
            @Override // java.lang.Runnable
            public final void run() {
                callback.run(Boolean.FALSE);
            }
        });
        if (tL_contact == null && (user == null || !getContactsController().contactsDict.containsKey(Long.valueOf(user.f1734id)))) {
            itemOptionsMakeOptions.add(C2369R.drawable.msg_contact_add, LocaleController.getString(C2369R.string.AddToContacts), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda272
                @Override // java.lang.Runnable
                public final void run() {
                    itemOptionsMakeOptions.openSwipeback(itemOptionsMakeSwipeback);
                }
            });
            itemOptionsMakeOptions.addGap();
        }
        if (user == null) {
            itemOptionsMakeOptions.add(C2369R.drawable.menu_invit_telegram, LocaleController.getString(C2369R.string.InviteToTelegramShort), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda273
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$443(str);
                }
            });
            itemOptionsMakeOptions.add(C2369R.drawable.msg_calls_regular, LocaleController.getString(C2369R.string.VoiceCallViaCarrier), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda274
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$444(str);
                }
            });
            itemOptionsMakeOptions.add(C2369R.drawable.msg_copy, LocaleController.getString(C2369R.string.CopyNumber), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda275
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$445(str);
                }
            });
            itemOptionsMakeOptions.addGap();
            itemOptionsMakeOptions.addText(LocaleController.getString(C2369R.string.NumberNotOnTelegram), 13);
        } else {
            itemOptionsMakeOptions.add(C2369R.drawable.msg_discussion, LocaleController.getString(C2369R.string.SendMessage), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda276
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$446(user);
                }
            });
            if (!UserObject.isUserSelf(user)) {
                itemOptionsMakeOptions.add(C2369R.drawable.msg_calls, LocaleController.getString(C2369R.string.VoiceCallViaTelegram), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda264
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressPhoneNumber$447(user, userFull);
                    }
                });
                itemOptionsMakeOptions.add(C2369R.drawable.msg_videocall, LocaleController.getString(C2369R.string.VideoCallViaTelegram), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda265
                    @Override // java.lang.Runnable
                    public final void run() {
                        this.f$0.lambda$didPressPhoneNumber$448(user, userFull);
                    }
                });
            }
            itemOptionsMakeOptions.add(C2369R.drawable.msg_calls_regular, LocaleController.getString(C2369R.string.VoiceCallViaCarrier), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda266
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$449(str);
                }
            });
            itemOptionsMakeOptions.add(C2369R.drawable.msg_copy, LocaleController.getString(C2369R.string.CopyNumber), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda267
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$450(str);
                }
            });
            itemOptionsMakeOptions.addGap();
            itemOptionsMakeOptions.addProfile(user, LocaleController.getString(C2369R.string.ViewProfile), new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda268
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$didPressPhoneNumber$451(scrimOptions, user);
                }
            });
        }
        scrimOptions.setItemOptions(itemOptionsMakeOptions);
        scrimOptions.setScrim(chatMessageCell, characterStyle, null);
        showDialog(scrimOptions);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$439(TLRPC.User user, String str, Boolean bool) throws IOException {
        Intent intent;
        if (getParentActivity() == null) {
            return;
        }
        if (bool.booleanValue()) {
            intent = new Intent("android.intent.action.INSERT");
            intent.setType("vnd.android.cursor.dir/raw_contact");
        } else {
            intent = new Intent("android.intent.action.INSERT_OR_EDIT");
            intent.setType("vnd.android.cursor.item/contact");
        }
        if (user != null) {
            intent.putExtra("name", ContactsController.formatName(user.first_name, user.last_name));
        }
        ArrayList<? extends Parcelable> arrayList = new ArrayList<>();
        ContentValues contentValues = new ContentValues();
        contentValues.put("mimetype", "vnd.android.cursor.item/phone_v2");
        if (!str.startsWith("+")) {
            TLRPC.User currentUser = getUserConfig().getCurrentUser();
            HashMap map = new HashMap();
            boolean z = false;
            try {
                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(ApplicationLoader.applicationContext.getResources().getAssets().open("countries.txt")));
                while (true) {
                    String line = bufferedReader.readLine();
                    if (line == null) {
                        break;
                    }
                    String[] strArrSplit = line.split(";");
                    CountrySelectActivity.Country country = new CountrySelectActivity.Country();
                    country.name = strArrSplit[2];
                    String str2 = strArrSplit[0];
                    country.code = str2;
                    country.shortname = strArrSplit[1];
                    List arrayList2 = (List) map.get(str2);
                    if (arrayList2 == null) {
                        String str3 = strArrSplit[0];
                        arrayList2 = new ArrayList();
                        map.put(str3, arrayList2);
                    }
                    arrayList2.add(country);
                }
                bufferedReader.close();
            } catch (Exception e) {
                FileLog.m1160e(e);
            }
            String str4 = currentUser.phone;
            int i = 4;
            while (true) {
                if (i < 1) {
                    break;
                }
                List list = (List) map.get(str4.substring(0, i));
                if (list == null || list.size() <= 0) {
                    i--;
                } else {
                    String str5 = ((CountrySelectActivity.Country) list.get(0)).code;
                    if (str5.endsWith(MVEL.VERSION_SUB) && str.startsWith(MVEL.VERSION_SUB)) {
                        str = str.substring(1);
                    }
                    str = "+" + str5 + str;
                    z = true;
                }
            }
            if (!z && Build.VERSION.SDK_INT >= 23) {
                Context context = ApplicationLoader.applicationContext;
                String upperCase = context != null ? ((TelephonyManager) context.getSystemService(TelephonyManager.class)).getSimCountryIso().toUpperCase(Locale.US) : Locale.getDefault().getCountry();
                if (upperCase.endsWith(MVEL.VERSION_SUB) && str.startsWith(MVEL.VERSION_SUB)) {
                    str = str.substring(1);
                }
                str = "+" + upperCase + str;
            }
        }
        contentValues.put("data1", str);
        contentValues.put("data2", (Integer) 2);
        arrayList.add(contentValues);
        intent.putExtra("finishActivityOnSaveCompleted", true);
        intent.putParcelableArrayListExtra("data", arrayList);
        getParentActivity().startActivity(intent);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$440(ItemOptions itemOptions, String str) {
        itemOptions.dismiss();
        new NewContactBottomSheet(this, getContext()).setInitialPhoneNumber(str, false).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$443(String str) {
        if (getParentActivity() == null) {
            return;
        }
        try {
            Intent intent = new Intent("android.intent.action.VIEW", Uri.fromParts("sms", str, null));
            intent.putExtra("sms_body", ContactsController.getInstance(this.currentAccount).getInviteText(1));
            getParentActivity().startActivityForResult(intent, 500);
        } catch (Exception e) {
            FileLog.m1160e(e);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$444(String str) {
        Browser.openUrl(getContext(), "tel:" + str);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$445(String str) {
        AndroidUtilities.addToClipboard(str);
        BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.getString(C2369R.string.PhoneCopied)).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$446(TLRPC.User user) {
        presentFragment(m1258of(user.f1734id));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$447(TLRPC.User user, TLRPC.UserFull userFull) {
        VoIPHelper.startCall(user, false, userFull != null && userFull.video_calls_available, getParentActivity(), userFull, getAccountInstance());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$448(TLRPC.User user, TLRPC.UserFull userFull) {
        VoIPHelper.startCall(user, true, userFull != null && userFull.video_calls_available, getParentActivity(), userFull, getAccountInstance());
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$449(String str) {
        Browser.openUrl(getContext(), "tel:" + str);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$450(String str) {
        AndroidUtilities.addToClipboard(str);
        BulletinFactory.m1267of(this).createCopyBulletin(LocaleController.getString(C2369R.string.PhoneCopied)).show();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$451(ScrimOptions scrimOptions, TLRPC.User user) {
        scrimOptions.dismiss();
        presentFragment(ProfileActivity.m1314of(user.f1734id));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$454(TLRPC.TL_contact tL_contact, final Utilities.Callback callback) {
        final TLRPC.User user = getMessagesStorage().getUser(tL_contact.user_id);
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda239
            @Override // java.lang.Runnable
            public final void run() {
                callback.run(user);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$457(final String str, final Browser.Progress progress, final Utilities.Callback callback, final TLObject tLObject, TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda256
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$didPressPhoneNumber$456(tLObject, str, progress, callback);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    /* JADX WARN: Removed duplicated region for block: B:7:0x0032  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public /* synthetic */ void lambda$didPressPhoneNumber$456(org.telegram.tgnet.TLObject r6, java.lang.String r7, final org.telegram.messenger.browser.Browser.Progress r8, final org.telegram.messenger.Utilities.Callback r9) {
        /*
            r5 = this;
            boolean r0 = r6 instanceof org.telegram.tgnet.TLRPC.TL_contacts_resolvedPeer
            r1 = 0
            if (r0 == 0) goto L32
            org.telegram.tgnet.TLRPC$TL_contacts_resolvedPeer r6 = (org.telegram.tgnet.TLRPC.TL_contacts_resolvedPeer) r6
            org.telegram.messenger.MessagesController r0 = r5.getMessagesController()
            java.util.ArrayList r3 = r6.users
            r4 = 0
            r0.putUsers(r3, r4)
            org.telegram.messenger.MessagesController r0 = r5.getMessagesController()
            java.util.ArrayList r3 = r6.chats
            r0.putChats(r3, r4)
            org.telegram.tgnet.TLRPC$Peer r6 = r6.peer
            long r3 = org.telegram.messenger.DialogObject.getPeerDialogId(r6)
            int r6 = (r3 > r1 ? 1 : (r3 == r1 ? 0 : -1))
            if (r6 < 0) goto L32
            org.telegram.messenger.MessagesController r6 = r5.getMessagesController()
            java.lang.Long r0 = java.lang.Long.valueOf(r3)
            org.telegram.tgnet.TLRPC$User r6 = r6.getUser(r0)
            goto L33
        L32:
            r6 = 0
        L33:
            if (r6 != 0) goto L4e
            java.lang.Long r7 = org.telegram.messenger.Utilities.parseLong(r7)
            long r3 = r7.longValue()
            int r0 = (r3 > r1 ? 1 : (r3 == r1 ? 0 : -1))
            if (r0 == 0) goto L4e
            com.exteragram.messenger.utils.ChatUtils r6 = com.exteragram.messenger.utils.ChatUtils.getInstance()
            org.telegram.ui.ChatActivity$$ExternalSyntheticLambda348 r0 = new org.telegram.ui.ChatActivity$$ExternalSyntheticLambda348
            r0.<init>()
            r6.searchUserById(r7, r0)
            return
        L4e:
            r8.end()
            r9.run(r6)
            return
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.lambda$didPressPhoneNumber$456(org.telegram.tgnet.TLObject, java.lang.String, org.telegram.messenger.browser.Browser$Progress, org.telegram.messenger.Utilities$Callback):void");
    }

    public static /* synthetic */ void $r8$lambda$ZKYXGhFVrr5FOeFUcO_4E8ZSZ9g(Browser.Progress progress, Utilities.Callback callback, TLRPC.User user) {
        progress.end();
        callback.run(user);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressPhoneNumber$458(int i) {
        getConnectionsManager().cancelRequest(i, true);
    }

    public class FirstViewPage extends View {
        private final ArrayList views;
        private final ArrayList viewsToMakeVisible;

        @Override // android.view.View
        public boolean dispatchTouchEvent(MotionEvent motionEvent) {
            return false;
        }

        public FirstViewPage(Context context) {
            super(context);
            this.views = new ArrayList();
            this.viewsToMakeVisible = new ArrayList();
        }

        private void updateViews() {
            this.views.clear();
            this.views.add(ChatActivity.this.topChatPanelView);
            this.views.add(ChatActivity.this.topChatPanelView2);
            this.views.add(ChatActivity.this.chatListView);
            this.views.add(ChatActivity.this.messagesSearchListContainer);
            this.views.add(ChatActivity.this.mentionContainer);
            this.views.add(ChatActivity.this.floatingDateView);
            this.views.add(ChatActivity.this.chatActivityEnterView);
            this.views.add(ChatActivity.this.sideControlsButtonsLayout);
            this.views.add(ChatActivity.this.chatInputViewsContainer);
            this.views.removeAll(Collections.singleton(null));
        }

        @Override // android.view.View
        public void setTranslationX(float f) {
            super.setTranslationX(f);
            updateViews();
            ArrayList arrayList = this.views;
            int size = arrayList.size();
            int i = 0;
            while (i < size) {
                Object obj = arrayList.get(i);
                i++;
                View view = (View) obj;
                if (view != null) {
                    view.setTranslationX(f);
                }
            }
        }

        @Override // android.view.View
        protected void onAttachedToWindow() {
            super.onAttachedToWindow();
            ArrayList arrayList = this.viewsToMakeVisible;
            int size = arrayList.size();
            int i = 0;
            while (i < size) {
                Object obj = arrayList.get(i);
                i++;
                ((View) obj).setVisibility(0);
            }
            this.viewsToMakeVisible.clear();
        }

        @Override // android.view.View
        protected void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            updateViews();
            ArrayList arrayList = this.views;
            int size = arrayList.size();
            int i = 0;
            while (i < size) {
                Object obj = arrayList.get(i);
                i++;
                View view = (View) obj;
                if (view.getVisibility() == 0) {
                    view.setVisibility(8);
                    this.viewsToMakeVisible.add(view);
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkHashtagStories(boolean z) {
        MessagesSearchAdapter messagesSearchAdapter;
        if (this.searchType == 2 && (messagesSearchAdapter = this.messagesSearchAdapter) != null) {
            messagesSearchAdapter.searchStories(this.searchingHashtag, z);
        }
    }

    public float getClipTop() {
        return this.chatListView.getY() + (((this.fragmentTransition == null || (this.fromPullingDownTransition && !this.toPullingDownTransition)) && !this.isInsideContainer) ? (this.chatListViewPaddingTop - this.chatListViewPaddingVisibleOffset) - AndroidUtilities.m1146dp(4.0f) : 0.0f);
    }

    public float getClipBottom() {
        return (this.fragmentView.getBottom() - this.chatListView.getBottom()) + (((this.fragmentTransition == null || (this.fromPullingDownTransition && !this.toPullingDownTransition)) && !this.isInsideContainer) ? this.blurredViewBottomOffset : 0);
    }

    private void gotChatInfo() throws Resources.NotFoundException, NumberFormatException {
        TLRPC.ChatFull chatFull = this.chatInfo;
        if (chatFull != null && chatFull.paid_reactions_available) {
            getMessagesController().getPaidReactionsDialogId();
            if (!StarsController.getInstance(this.currentAccount).balanceAvailable()) {
                StarsController.getInstance(this.currentAccount).getBalance();
            }
        }
        TLRPC.ChatFull chatFull2 = this.chatInfo;
        if (chatFull2 != null && chatFull2.bot_verification != null) {
            updateTopPanel(true);
        }
        TLRPC.ChatFull chatFull3 = this.chatInfo;
        if (chatFull3 != null) {
            boolean z = chatFull3.stargifts_available;
            ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
            boolean z2 = z != (chatActivityChannelButtonsLayout != null && chatActivityChannelButtonsLayout.isButtonVisible(1));
            TLRPC.Chat chat = this.currentChat;
            boolean z3 = (chat == null || !chat.broadcast_messages_allowed || chat.linked_monoforum_id == 0) ? false : true;
            ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout2 = this.bottomChannelButtonsLayout;
            boolean z4 = z3 != (chatActivityChannelButtonsLayout2 != null && chatActivityChannelButtonsLayout2.isButtonVisible(2));
            if (z2 || z4) {
                updateBottomOverlay(true);
            }
        }
    }

    @Override // org.telegram.p023ui.ActionBar.BaseFragment
    public boolean allowFinishFragmentInsteadOfRemoveFromStack() {
        return !this.inPreviewMode;
    }

    public int getHashtagTabsHeight() {
        ChatActivity chatActivity = this.parentChatActivity;
        if (chatActivity == null) {
            chatActivity = this;
        }
        ChatSearchTabs chatSearchTabs = chatActivity.hashtagSearchTabs;
        if (chatSearchTabs == null) {
            return 0;
        }
        return chatSearchTabs.getCurrentHeight();
    }

    /* JADX WARN: Multi-variable type inference failed */
    /* JADX WARN: Removed duplicated region for block: B:130:0x03b2  */
    /* JADX WARN: Removed duplicated region for block: B:133:0x03de  */
    /* JADX WARN: Removed duplicated region for block: B:135:0x03ec  */
    /* JADX WARN: Removed duplicated region for block: B:149:0x0447  */
    /* JADX WARN: Removed duplicated region for block: B:156:0x045b  */
    /* JADX WARN: Removed duplicated region for block: B:162:0x048f  */
    /* JADX WARN: Removed duplicated region for block: B:165:0x049f  */
    /* JADX WARN: Removed duplicated region for block: B:168:0x04a6  */
    /* JADX WARN: Type inference failed for: r4v11 */
    /* JADX WARN: Type inference failed for: r4v12, types: [boolean, int] */
    /* JADX WARN: Type inference failed for: r4v16 */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void didPressReaction(final android.view.View r27, final org.telegram.tgnet.TLRPC.ReactionCount r28, boolean r29, float r30, float r31) {
        /*
            Method dump skipped, instructions count: 1214
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.didPressReaction(android.view.View, org.telegram.tgnet.TLRPC$ReactionCount, boolean, float, float):void");
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$459(TLRPC.ReactionCount reactionCount, View view) {
        closeMenu();
        SearchTagsList.openRenameTagAlert(getContext(), this.currentAccount, reactionCount.reaction, this.themeDelegate, false);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$460(TLRPC.ReactionCount reactionCount, View view) {
        closeMenu();
        lambda$openSearchWithText$374("");
        SearchTagsList searchTagsList = this.actionBarSearchTags;
        if (searchTagsList != null) {
            searchTagsList.setChosen(ReactionsLayoutInBubble.VisibleReaction.fromTL(reactionCount.reaction), true);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$461(View view, TLRPC.ReactionCount reactionCount, View view2) {
        pressedReaction(view, reactionCount, 0.0f, 0.0f);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$462(ReactedUsersListView reactedUsersListView, ArrayList arrayList) {
        if (getParentActivity() == null || getContext() == null) {
            return;
        }
        EmojiPacksAlert emojiPacksAlert = new EmojiPacksAlert(this, getParentActivity(), this.themeDelegate, arrayList) { // from class: org.telegram.ui.ChatActivity.145
            @Override // org.telegram.p023ui.Components.EmojiPacksAlert, org.telegram.p023ui.ActionBar.BottomSheet, android.app.Dialog, android.content.DialogInterface, org.telegram.ui.ActionBar.BaseFragment.AttachedSheet
            /* renamed from: dismiss */
            public void lambda$new$0() {
                super.lambda$new$0();
                ChatActivity.this.dimBehindView(false);
            }
        };
        emojiPacksAlert.setCalcMandatoryInsets(isKeyboardVisible());
        emojiPacksAlert.setDimBehind(false);
        closeMenu(false);
        showDialog(emojiPacksAlert);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$463(MessageObject messageObject, ReactedUsersListView reactedUsersListView, long j, TLRPC.MessagePeerReaction messagePeerReaction) {
        Bundle bundle = new Bundle();
        if (j > 0) {
            bundle.putLong("user_id", j);
        } else {
            bundle.putLong("chat_id", -j);
        }
        bundle.putInt("report_reaction_message_id", messageObject.getId());
        bundle.putLong("report_reaction_from_dialog_id", this.dialog_id);
        presentFragment(new ProfileActivity(bundle));
        closeMenu();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$didPressReaction$464(ArrayList arrayList, View view) {
        if (getParentActivity() == null || getContext() == null) {
            return;
        }
        new EmojiPacksAlert(this, getContext(), this.themeDelegate, arrayList).show();
        closeMenu();
    }

    private void pressedReaction(View view, TLRPC.ReactionCount reactionCount, float f, float f2) {
        MessageObject messageObject;
        TLRPC.Message message;
        ReactionsLayoutInBubble.VisibleReaction visibleReactionFromTL = ReactionsLayoutInBubble.VisibleReaction.fromTL(reactionCount.reaction);
        if (view instanceof ChatMessageCell) {
            messageObject = ((ChatMessageCell) view).getPrimaryMessageObject();
        } else if (!(view instanceof ChatActionCell)) {
            return;
        } else {
            messageObject = ((ChatActionCell) view).getMessageObject();
        }
        MessageObject messageObject2 = messageObject;
        selectReaction(view, messageObject2, null, null, f, f2, visibleReactionFromTL, false, false, false, false);
        if ((messageObject2 != null) & (messageObject2.messageOwner != null)) {
            boolean z = this.chatAdapter.isFiltered;
            if (z) {
                MessageObject messageObject3 = (MessageObject) this.messagesDict[0].get(messageObject2.getId());
                if (messageObject3 != null && (message = messageObject3.messageOwner) != null) {
                    message.reactions = messageObject2.messageOwner.reactions;
                }
            } else if (!z && this.searchingReaction != null) {
                updateFilteredMessages(false);
            }
        }
        if (!this.chatAdapter.isFiltered || messageObject2.hasReaction(this.searchingReaction)) {
            return;
        }
        MessageObject.GroupedMessages validGroupedMessage = getValidGroupedMessage(messageObject2);
        if (validGroupedMessage != null) {
            for (int i = 0; i < validGroupedMessage.messages.size(); i++) {
                getMediaDataController().removeMessageFromResults(validGroupedMessage.messages.get(i).getId());
            }
        } else {
            getMediaDataController().removeMessageFromResults(messageObject2.getId());
        }
        MessagesSearchAdapter messagesSearchAdapter = this.messagesSearchAdapter;
        if (messagesSearchAdapter != null) {
            messagesSearchAdapter.notifyDataSetChanged();
        }
        updateFilteredMessages(true);
    }

    private int findAdPlace() {
        ArrayList arrayList;
        ArrayList arrayList2 = new ArrayList(this.messages.size());
        int iIndexOf = this.messages.indexOf(this.unreadMessageObject);
        ArrayList arrayList3 = new ArrayList();
        ArrayList arrayList4 = new ArrayList();
        ArrayList arrayList5 = new ArrayList();
        HashSet hashSet = new HashSet();
        int i = 0;
        int i2 = 0;
        int i3 = -1;
        for (int i4 = 0; i4 < this.messages.size(); i4++) {
            MessageObject messageObject = (MessageObject) this.messages.get(i4);
            int approximateHeightCached = messageObject.getApproximateHeightCached();
            arrayList2.add(Integer.valueOf(approximateHeightCached));
            if (messageObject.isSponsored() || i4 == iIndexOf) {
                if (i4 == iIndexOf) {
                    i3 = i;
                }
                arrayList4.add(Integer.valueOf(i4));
                arrayList3.add(Integer.valueOf(i));
                arrayList5.add(Integer.valueOf(i2));
            }
            if (!messageObject.hasValidGroupIdFast()) {
                i2++;
                i += approximateHeightCached;
            } else if (!hashSet.contains(Long.valueOf(messageObject.getGroupId()))) {
                hashSet.add(Long.valueOf(messageObject.getGroupId()));
                i2++;
                i += approximateHeightCached;
            }
        }
        if (arrayList4.size() - (iIndexOf >= 0 ? 1 : 0) <= 0) {
            return 0;
        }
        hashSet.clear();
        int i5 = 0;
        while (iIndexOf >= 0) {
            MessageObject messageObject2 = (MessageObject) this.messages.get(iIndexOf);
            int iIntValue = ((Integer) arrayList2.get(iIndexOf)).intValue();
            if (!messageObject2.hasValidGroupIdFast()) {
                i5--;
                i3 -= iIntValue;
            } else if (!hashSet.contains(Long.valueOf(messageObject2.getGroupId()))) {
                hashSet.add(Long.valueOf(messageObject2.getGroupId()));
                i5--;
                i3 -= iIntValue;
            }
            if (!messageObject2.isSponsored() && !messageObject2.hasValidGroupIdFast() && messageObject2 != this.unreadMessageObject) {
                int i6 = -1;
                int i7 = -1;
                int iIntValue2 = -1;
                int iIntValue3 = -1;
                int iIntValue4 = -1;
                int iIntValue5 = -1;
                for (int i8 = 0; i8 < arrayList4.size(); i8++) {
                    int iIntValue6 = ((Integer) arrayList4.get(i8)).intValue();
                    if (iIntValue6 >= iIndexOf && (i7 == -1 || i7 > iIntValue6)) {
                        iIntValue3 = ((Integer) arrayList3.get(i8)).intValue();
                        iIntValue2 = ((Integer) arrayList5.get(i8)).intValue();
                        i7 = iIntValue6;
                    }
                    if (iIntValue6 <= iIndexOf && (i6 == -1 || i6 < iIntValue6)) {
                        iIntValue4 = ((Integer) arrayList3.get(i8)).intValue();
                        iIntValue5 = ((Integer) arrayList5.get(i8)).intValue();
                        i6 = iIntValue6;
                    }
                }
                if ((i7 == -1 || (Math.abs(i7 - iIndexOf) > this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue2 - i5) > this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue3 - (iIntValue + i3)) > AndroidUtilities.displaySize.y)) && (i6 == -1 || (Math.abs(i6 - iIndexOf) > this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue5 - i5) > this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue4 - i3) > AndroidUtilities.displaySize.y))) {
                    return iIndexOf;
                }
            }
            iIndexOf--;
        }
        hashSet.clear();
        int i9 = 0;
        int i10 = 0;
        int i11 = 0;
        while (i9 < this.messages.size()) {
            MessageObject messageObject3 = (MessageObject) this.messages.get(i9);
            int iIntValue7 = ((Integer) arrayList2.get(i9)).intValue();
            if (!messageObject3.hasValidGroupIdFast()) {
                i10++;
                i11 += iIntValue7;
            } else if (!hashSet.contains(Long.valueOf(messageObject3.getGroupId()))) {
                hashSet.add(Long.valueOf(messageObject3.getGroupId()));
                i10++;
            }
            if (messageObject3.isSponsored() || messageObject3.hasValidGroupIdFast() || messageObject3 == this.unreadMessageObject) {
                arrayList = arrayList2;
            } else {
                int i12 = 0;
                int i13 = -1;
                int iIntValue8 = -1;
                int iIntValue9 = -1;
                int i14 = -1;
                int iIntValue10 = -1;
                int iIntValue11 = -1;
                while (i12 < arrayList4.size()) {
                    int iIntValue12 = ((Integer) arrayList4.get(i12)).intValue();
                    ArrayList arrayList6 = arrayList2;
                    if (iIntValue12 >= i9 && (i13 == -1 || i13 > iIntValue12)) {
                        iIntValue9 = ((Integer) arrayList3.get(i12)).intValue();
                        iIntValue8 = ((Integer) arrayList5.get(i12)).intValue();
                        i13 = iIntValue12;
                    }
                    if (iIntValue12 <= i9 && (i14 == -1 || i14 < iIntValue12)) {
                        iIntValue10 = ((Integer) arrayList3.get(i12)).intValue();
                        iIntValue11 = ((Integer) arrayList5.get(i12)).intValue();
                        i14 = iIntValue12;
                    }
                    i12++;
                    arrayList2 = arrayList6;
                }
                arrayList = arrayList2;
                int i15 = -1;
                if (i13 != -1) {
                    if (Math.abs(i13 - i9) >= this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue8 - i10) >= this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue9 - (iIntValue7 + i11)) > AndroidUtilities.displaySize.y) {
                        i15 = -1;
                        if (i14 != i15) {
                        }
                        return i9;
                    }
                } else if (i14 != i15 || (Math.abs(i14 - i9) >= this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue11 - i10) >= this.sponsoredMessagesPostsBetween + 1 && Math.abs(iIntValue10 - i11) > AndroidUtilities.displaySize.y)) {
                    return i9;
                }
            }
            i9++;
            arrayList2 = arrayList;
        }
        return -1;
    }

    /* JADX WARN: Removed duplicated region for block: B:100:0x01ac A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:1014:0x16dc  */
    /* JADX WARN: Removed duplicated region for block: B:1018:0x1707  */
    /* JADX WARN: Removed duplicated region for block: B:1028:0x1735  */
    /* JADX WARN: Removed duplicated region for block: B:1032:0x1762  */
    /* JADX WARN: Removed duplicated region for block: B:1042:0x1788  */
    /* JADX WARN: Removed duplicated region for block: B:1044:0x178e  */
    /* JADX WARN: Removed duplicated region for block: B:1050:0x17b8  */
    /* JADX WARN: Removed duplicated region for block: B:1058:0x17db  */
    /* JADX WARN: Removed duplicated region for block: B:1061:0x17e3  */
    /* JADX WARN: Removed duplicated region for block: B:1070:0x1818  */
    /* JADX WARN: Removed duplicated region for block: B:1077:0x1834  */
    /* JADX WARN: Removed duplicated region for block: B:1081:0x1853  */
    /* JADX WARN: Removed duplicated region for block: B:1095:? A[ADDED_TO_REGION, RETURN, SYNTHETIC] */
    /* JADX WARN: Removed duplicated region for block: B:115:0x01e8  */
    /* JADX WARN: Removed duplicated region for block: B:118:0x01f3  */
    /* JADX WARN: Removed duplicated region for block: B:125:0x0203  */
    /* JADX WARN: Removed duplicated region for block: B:155:0x0262  */
    /* JADX WARN: Removed duplicated region for block: B:164:0x027b  */
    /* JADX WARN: Removed duplicated region for block: B:173:0x0294  */
    /* JADX WARN: Removed duplicated region for block: B:178:0x02a1  */
    /* JADX WARN: Removed duplicated region for block: B:181:0x02ad  */
    /* JADX WARN: Removed duplicated region for block: B:190:0x02ea  */
    /* JADX WARN: Removed duplicated region for block: B:194:0x032a  */
    /* JADX WARN: Removed duplicated region for block: B:197:0x034d  */
    /* JADX WARN: Removed duplicated region for block: B:198:0x0350  */
    /* JADX WARN: Removed duplicated region for block: B:204:0x0362  */
    /* JADX WARN: Removed duplicated region for block: B:218:0x03bf  */
    /* JADX WARN: Removed duplicated region for block: B:37:0x00d9  */
    /* JADX WARN: Removed duplicated region for block: B:503:0x093f  */
    /* JADX WARN: Removed duplicated region for block: B:52:0x00fd  */
    /* JADX WARN: Removed duplicated region for block: B:61:0x011e  */
    /* JADX WARN: Removed duplicated region for block: B:63:0x0121  */
    /* JADX WARN: Removed duplicated region for block: B:673:0x0f54  */
    /* JADX WARN: Removed duplicated region for block: B:67:0x012c  */
    /* JADX WARN: Removed duplicated region for block: B:710:0x0fec  */
    /* JADX WARN: Removed duplicated region for block: B:71:0x013b A[ADDED_TO_REGION] */
    /* JADX WARN: Removed duplicated region for block: B:723:0x1022  */
    /* JADX WARN: Removed duplicated region for block: B:724:0x103c  */
    /* JADX WARN: Removed duplicated region for block: B:728:0x105d  */
    /* JADX WARN: Removed duplicated region for block: B:738:0x1091  */
    /* JADX WARN: Removed duplicated region for block: B:740:0x1094  */
    /* JADX WARN: Removed duplicated region for block: B:743:0x10b3  */
    /* JADX WARN: Removed duplicated region for block: B:753:0x10ed  */
    /* JADX WARN: Removed duplicated region for block: B:756:0x110e  */
    /* JADX WARN: Removed duplicated region for block: B:769:0x1149  */
    /* JADX WARN: Removed duplicated region for block: B:776:0x1177  */
    /* JADX WARN: Removed duplicated region for block: B:777:0x117c  */
    /* JADX WARN: Removed duplicated region for block: B:779:0x1180  */
    /* JADX WARN: Removed duplicated region for block: B:789:0x11a0  */
    /* JADX WARN: Removed duplicated region for block: B:790:0x11a3  */
    /* JADX WARN: Removed duplicated region for block: B:794:0x11c3  */
    /* JADX WARN: Removed duplicated region for block: B:80:0x0173  */
    /* JADX WARN: Removed duplicated region for block: B:816:0x1225  */
    /* JADX WARN: Removed duplicated region for block: B:817:0x1227  */
    /* JADX WARN: Removed duplicated region for block: B:820:0x1230  */
    /* JADX WARN: Removed duplicated region for block: B:829:0x1250  */
    /* JADX WARN: Removed duplicated region for block: B:88:0x0189  */
    /* JADX WARN: Removed duplicated region for block: B:950:0x1582  */
    /* JADX WARN: Removed duplicated region for block: B:954:0x1591  */
    /* JADX WARN: Removed duplicated region for block: B:97:0x01a8  */
    /* JADX WARN: Removed duplicated region for block: B:987:0x1643  */
    /* JADX WARN: Removed duplicated region for block: B:996:0x1672  */
    /*
        Code decompiled incorrectly, please refer to instructions dump.
        To view partially-correct add '--show-bad-code' argument
    */
    public void fillMessageMenu(org.telegram.messenger.MessageObject r57, java.util.ArrayList r58, java.util.ArrayList r59, java.util.ArrayList r60) {
        /*
            Method dump skipped, instructions count: 6280
            To view this dump add '--comments-level debug' option
        */
        throw new UnsupportedOperationException("Method not decompiled: org.telegram.p023ui.ChatActivity.fillMessageMenu(org.telegram.messenger.MessageObject, java.util.ArrayList, java.util.ArrayList, java.util.ArrayList):void");
    }

    private void updateBotforumTabsBottomMargin() {
        if (this.topicsTabs == null) {
            return;
        }
        this.topicsTabs.setSideMenuBackgroundMarginBottom(this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + this.chatInputViewsContainer.getInputBubbleHeight() + AndroidUtilities.m1146dp(9.0f));
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkUi_botMenuPosition() {
        BotCommandsMenuContainer botCommandsMenuContainer;
        float animatedMaxBottomInset = this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + this.chatInputViewsContainer.getInputBubbleHeight() + AndroidUtilities.m1146dp(15.0f);
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null && (botCommandsMenuContainer = chatActivityEnterView.botCommandsMenuContainer) != null) {
            botCommandsMenuContainer.setTranslationY(-animatedMaxBottomInset);
        }
        MentionsContainerView mentionsContainerView = this.mentionContainer;
        if (mentionsContainerView != null) {
            mentionsContainerView.setTranslationY(mentionsContainerView.isReversed() ? AndroidUtilities.m1146dp(5.0f) : -animatedMaxBottomInset);
        }
    }

    private float calculateInputIslandHeight(boolean z) {
        float visibility;
        float visibility2 = 0.0f;
        float fM1146dp = shouldCollapseInputIsland(z) ? 0.0f : AndroidUtilities.m1146dp(48.0f);
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        float fMax = Math.max(chatActivityEnterView != null ? chatActivityEnterView.getIslandTotalHeight(z) : 0.0f, fM1146dp);
        if (z) {
            visibility = this.bottomViewsVisibilityController.getCurrentPriorityContainerId() == 1 ? 1.0f : 0.0f;
            if (this.bottomViewsVisibilityController.getCurrentPriorityContainerId() != 0) {
                visibility2 = 1.0f;
            }
        } else {
            visibility = this.bottomViewsVisibilityController.getVisibility(1);
            visibility2 = 1.0f - this.bottomViewsVisibilityController.getVisibility(0);
        }
        if (!isBottomButtonHidden() && !this.isInsideContainer && !isInPreviewMode()) {
            return Math.max(AndroidUtilities.lerp(fM1146dp, fMax, visibility) * visibility2, AndroidUtilities.m1146dp(48.0f));
        }
        return AndroidUtilities.lerp(fM1146dp, fMax, visibility) * visibility2;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void checkUi_inputIslandHeight() {
        if (this.contentView == null) {
            return;
        }
        this.inputIslandHeightCurrent = calculateInputIslandHeight(false);
        this.inputIslandHeightTarget = calculateInputIslandHeight(true);
        this.chatInputViewsContainer.setInputBubbleHeight(this.inputIslandHeightCurrent);
        updatePagedownButtonsPosition();
        updateBotforumTabsBottomMargin();
        checkUi_botMenuPosition();
        checkUi_BlurHeight();
        checkUi_emptyContainerPosition();
        checkUi_chatListViewPaddings();
    }

    private void checkUi_BlurHeight() {
        float fLerp = AndroidUtilities.lerp(this.windowInsetsStateHolder.getAnimatedMaxBottomInset() + AndroidUtilities.m1146dp(9.0f) + this.chatInputViewsContainer.getInputBubbleHeight() + AndroidUtilities.m1146dp(7.0f), this.chatInputViewsContainer.getMeasuredHeight() + AndroidUtilities.m1146dp(36.0f), this.animatorRoundMessageCameraVisibility.getFloatValue());
        this.chatInputViewsContainer.setBlurredBottomHeight(fLerp);
        int i = (int) fLerp;
        int iClamp = MathUtils.clamp((this.contentView.getMeasuredHeight() - i) + AndroidUtilities.m1146dp(36.0f), 0, this.contentView.getMeasuredHeight());
        Rect rect = clipBoundsRect;
        rect.set(0, 0, this.contentView.getMeasuredWidth(), iClamp);
        rect.set(0, this.blurredViewTopOffset, this.chatListView.getMeasuredWidth(), ((this.chatListView.getMeasuredHeight() - this.blurredViewBottomOffset) - i) + AndroidUtilities.m1146dp(36.0f));
    }

    private void checkUi_emptyContainerPosition() {
        FrameLayout frameLayout = this.emptyViewContainer;
        if (frameLayout != null) {
            frameLayout.setTranslationY((AndroidUtilities.m1146dp(9.0f) + this.windowInsetsStateHolder.getAnimatedImeBottomInset() + this.chatInputViewsContainer.getInputBubbleHeight()) * (-0.5f));
        }
    }

    @Override // me.vkryl.android.animator.FactorAnimator.Target
    public void onFactorChanged(int i, float f, float f2, FactorAnimator factorAnimator) {
        if (i == 0) {
            onBottomItemsVisibilityChanged();
        } else if (i == 1) {
            checkUi_BlurHeight();
        }
    }

    private void checkBottomViewVisibility(View view, int i, boolean z) {
        if (view != null) {
            float visibility = this.bottomViewsVisibilityController.getVisibility(i) * (1.0f - this.animatorPullingDownContainerVisibility.getFloatValue());
            view.setAlpha(visibility);
            if (z) {
                int i2 = visibility > 0.0f ? 0 : 8;
                if (view.getVisibility() != i2) {
                    view.setVisibility(i2);
                }
            }
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void onBottomItemsVisibilityChanged() {
        checkBottomViewVisibility(this.actionsButtonsLayout, 5, true);
        checkBottomViewVisibility(this.chatActivityEnterView, 1, false);
        checkBottomViewVisibility(this.searchContainer, 4, true);
        checkBottomViewVisibility(this.bottomChannelButtonsLayout, 3, false);
        checkBottomViewVisibility(this.bottomOverlay, 2, false);
        float visibility = this.bottomViewsVisibilityController.getVisibility(5);
        ChatActivityActionsButtonsLayout chatActivityActionsButtonsLayout = this.actionsButtonsLayout;
        if (chatActivityActionsButtonsLayout != null) {
            chatActivityActionsButtonsLayout.setTotalVisibilityFactor(visibility);
        }
        ChatActivityEnterView chatActivityEnterView = this.chatActivityEnterView;
        if (chatActivityEnterView != null) {
            chatActivityEnterView.setTranslationY((-AndroidUtilities.m1146dp(54.0f)) * visibility);
        }
        FrameLayout frameLayout = this.searchContainer;
        if (frameLayout != null) {
            frameLayout.setTranslationY((-AndroidUtilities.m1146dp(54.0f)) * visibility);
        }
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout = this.bottomChannelButtonsLayout;
        if (chatActivityChannelButtonsLayout != null) {
            chatActivityChannelButtonsLayout.setTranslationY((-AndroidUtilities.m1146dp(54.0f)) * visibility);
        }
        FrameLayout frameLayout2 = this.bottomOverlay;
        if (frameLayout2 != null) {
            frameLayout2.setTranslationY((-AndroidUtilities.m1146dp(54.0f)) * visibility);
        }
        if (this.chatInputViewsContainer != null) {
            this.chatInputViewsContainer.setInputBubbleAlpha((int) ((shouldHideInputIslandBackground() ? 0.0f : 1.0f) * 255.0f * (1.0f - visibility)));
            this.chatInputViewsContainer.setInputBubbleTranslationY((-AndroidUtilities.m1146dp(54.0f)) * visibility);
        }
        ChatActivityChannelButtonsLayout chatActivityChannelButtonsLayout2 = this.bottomChannelButtonsLayout;
        if (chatActivityChannelButtonsLayout2 != null) {
            chatActivityChannelButtonsLayout2.setTotalVisibilityFactor(this.bottomViewsVisibilityController.getVisibility(3) * (1.0f - this.animatorPullingDownContainerVisibility.getFloatValue()));
        }
        if (this.pullingDownDrawable != null) {
            float floatValue = this.animatorPullingDownContainerVisibility.getFloatValue();
            ChatPullingDownDrawable chatPullingDownDrawable = this.pullingDownDrawable;
            if (chatPullingDownDrawable.progressToBottomPanel != floatValue) {
                chatPullingDownDrawable.progressToBottomPanel = floatValue;
                this.fragmentView.invalidate();
            }
        }
        checkUi_inputIslandHeight();
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateAllGlassAttachedViews() throws InterruptedException {
        this.glassSourcesInvalidated = true;
        this.contentView.invalidate();
        Iterator it = this.glassAttachedViews.iterator();
        while (it.hasNext()) {
            ((View) it.next()).invalidate();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void onSideControlButtonOnClick(int i, View view) {
        if (i == 0) {
            onPageDownClicked(false);
            return;
        }
        if (i == 1) {
            loadLastUnreadMention();
            return;
        }
        if (i == 2) {
            this.wasManualScroll = true;
            getMessagesController().getNextReactionMention(this.dialog_id, getTopicId(), this.reactionsMentionCount, new androidx.core.util.Consumer() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda255
                @Override // androidx.core.util.Consumer
                public final void accept(Object obj) {
                    this.f$0.lambda$onSideControlButtonOnClick$465((Integer) obj);
                }
            });
        } else if (i == 4) {
            goToNextOrPrevSearchMessage(true);
        } else if (i == 3) {
            goToNextOrPrevSearchMessage(false);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onSideControlButtonOnClick$465(Integer num) {
        if (num.intValue() == 0) {
            this.reactionsMentionCount = 0;
            updateReactionsMentionButton(true);
            getMessagesController().markReactionsAsRead(this.dialog_id, getTopicId());
        } else {
            updateReactionsMentionButton(true);
            scrollToMessageId(num.intValue(), 0, false, 0, true, 0);
        }
    }

    private void goToNextOrPrevSearchMessage(boolean z) {
        if (this.chatMode == 7) {
            HashtagSearchController.getInstance(this.currentAccount).jumpToMessage(this.classGuid, this.hashtagSearchSelectedIndex + (z ? 1 : -1), this.searchType);
            return;
        }
        MediaDataController mediaDataController = getMediaDataController();
        long j = this.dialog_id;
        long j2 = this.mergeDialogId;
        int i = this.classGuid;
        boolean z2 = this.reversed;
        mediaDataController.searchMessagesInChat(null, j, j2, i, (!z ? z2 : !z2) ? 2 : 1, this.threadMessageId, this.searchingUserMessages, this.searchingChatMessages, this.searchingReaction);
        showMessagesSearchListView(false);
    }

    private void loadLastUnreadMention() {
        this.wasManualScroll = true;
        if (this.hasAllMentionsLocal) {
            getMessagesStorage().getUnreadMention(this.dialog_id, getTopicId(), new MessagesStorage.IntCallback() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda354
                @Override // org.telegram.messenger.MessagesStorage.IntCallback
                public final void run(int i) {
                    this.f$0.lambda$loadLastUnreadMention$466(i);
                }
            });
            return;
        }
        final MessagesStorage messagesStorage = getMessagesStorage();
        TLRPC.TL_messages_getUnreadMentions tL_messages_getUnreadMentions = new TLRPC.TL_messages_getUnreadMentions();
        tL_messages_getUnreadMentions.peer = getMessagesController().getInputPeer(this.dialog_id);
        tL_messages_getUnreadMentions.limit = 1;
        if (this.isTopic) {
            tL_messages_getUnreadMentions.top_msg_id = (int) this.threadMessageId;
            tL_messages_getUnreadMentions.flags |= 1;
        }
        tL_messages_getUnreadMentions.add_offset = this.newMentionsCount - 1;
        getConnectionsManager().sendRequest(tL_messages_getUnreadMentions, new RequestDelegate() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda355
            @Override // org.telegram.tgnet.RequestDelegate
            public final void run(TLObject tLObject, TLRPC.TL_error tL_error) {
                this.f$0.lambda$loadLastUnreadMention$468(messagesStorage, tLObject, tL_error);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadLastUnreadMention$466(int i) {
        if (i == 0) {
            this.hasAllMentionsLocal = false;
            loadLastUnreadMention();
        } else {
            scrollToMessageId(i, 0, false, 0, true, 0);
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadLastUnreadMention$468(final MessagesStorage messagesStorage, final TLObject tLObject, final TLRPC.TL_error tL_error) {
        AndroidUtilities.runOnUIThread(new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda449
            @Override // java.lang.Runnable
            public final void run() {
                this.f$0.lambda$loadLastUnreadMention$467(tLObject, tL_error, messagesStorage);
            }
        });
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$loadLastUnreadMention$467(TLObject tLObject, TLRPC.TL_error tL_error, MessagesStorage messagesStorage) {
        TLRPC.messages_Messages messages_messages = (TLRPC.messages_Messages) tLObject;
        if (tL_error != null || messages_messages.messages.isEmpty()) {
            if (messages_messages != null) {
                this.newMentionsCount = messages_messages.count;
            } else {
                this.newMentionsCount = 0;
            }
            messagesStorage.resetMentionsCount(this.dialog_id, getTopicId(), this.newMentionsCount);
            int i = this.newMentionsCount;
            if (i == 0) {
                this.hasAllMentionsLocal = true;
                showMentionDownButton(false, true);
                return;
            } else {
                this.sideControlsButtonsLayout.setButtonCount(1, i, true);
                loadLastUnreadMention();
                return;
            }
        }
        int i2 = ((TLRPC.Message) messages_messages.messages.get(0)).f1597id;
        MessageObject messageObject = (MessageObject) this.messagesDict[0].get(i2);
        messagesStorage.markMessageAsMention(this.dialog_id, i2);
        if (messageObject != null) {
            TLRPC.Message message = messageObject.messageOwner;
            message.media_unread = true;
            message.mentioned = true;
        }
        scrollToMessageId(i2, 0, false, 0, true, 0);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onSideControlButtonOnLongClick$469() {
        for (int i = 0; i < this.messages.size(); i++) {
            MessageObject messageObject = (MessageObject) this.messages.get(i);
            if (messageObject.messageOwner.mentioned && !messageObject.isContentUnread()) {
                messageObject.setContentIsRead();
            }
        }
        this.newMentionsCount = 0;
        getMessagesController().markMentionsAsRead(this.dialog_id, getTopicId());
        this.hasAllMentionsLocal = true;
        showMentionDownButton(false, true);
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public /* synthetic */ void lambda$onSideControlButtonOnLongClick$470() {
        for (int i = 0; i < this.messages.size(); i++) {
            ((MessageObject) this.messages.get(i)).markReactionsAsRead();
        }
        this.reactionsMentionCount = 0;
        updateReactionsMentionButton(true);
        getMessagesController().markReactionsAsRead(this.dialog_id, getTopicId());
        ActionBarPopupWindow actionBarPopupWindow = this.scrimPopupWindow;
        if (actionBarPopupWindow != null) {
            actionBarPopupWindow.dismiss();
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean onSideControlButtonOnLongClick(int i, View view) {
        Runnable runnable;
        boolean z = i == 1;
        boolean z2 = i == 2;
        boolean z3 = i == 0;
        if (!z && !z2) {
            if (!z3) {
                return false;
            }
            onPageDownClicked(true);
            return true;
        }
        if (z) {
            runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda223
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onSideControlButtonOnLongClick$469();
                }
            };
        } else {
            runnable = new Runnable() { // from class: org.telegram.ui.ChatActivity$$ExternalSyntheticLambda224
                @Override // java.lang.Runnable
                public final void run() {
                    this.f$0.lambda$onSideControlButtonOnLongClick$470();
                }
            };
        }
        runnable.run();
        try {
            view.performHapticFeedback(0, 2);
        } catch (Exception unused) {
        }
        return true;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public boolean isBottomButtonHidden() {
        if (ExteraConfig.bottomButton == 0 && this.chatMode == 0 && !isReport() && ChatObject.isChannel(this.currentChat)) {
            TLRPC.Chat chat = this.currentChat;
            if (!chat.megagroup && !ChatObject.isNotInChat(chat) && !ChatObject.canWriteToChat(this.currentChat)) {
                return !isThreadChat();
            }
        }
        return false;
    }

    private boolean shouldCollapseInputIsland(boolean z) {
        if (isBottomButtonHidden()) {
            return (((this.bottomViewsVisibilityController.getVisibility(5) > 0.0f ? 1 : (this.bottomViewsVisibilityController.getVisibility(5) == 0.0f ? 0 : -1)) > 0 || (z && this.bottomViewsVisibilityController.getCurrentPriorityContainerId() == 5)) || ((this.bottomViewsVisibilityController.getVisibility(4) > 0.0f ? 1 : (this.bottomViewsVisibilityController.getVisibility(4) == 0.0f ? 0 : -1)) > 0 || (z && this.bottomViewsVisibilityController.getCurrentPriorityContainerId() == 4))) ? false : true;
        }
        return false;
    }

    private boolean shouldHideInputIslandBackground() {
        return isBottomButtonHidden() && this.bottomViewsVisibilityController.getVisibility(4) <= 0.0f;
    }

    public void startFireworks() {
        FireworksOverlay fireworksOverlay = this.fireworksOverlay;
        if (fireworksOverlay == null || fireworksOverlay.isStarted()) {
            return;
        }
        this.fireworksOverlay.start();
        try {
            this.fireworksOverlay.performHapticFeedback(3, 2);
        } catch (Exception unused) {
        }
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateMergedVisibleBlurredPositionsAndSourcesPositions() {
        invalidateMergedVisibleBlurredPositionsAndSources(2);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateMergedVisibleBlurredPositionsAndSources(int i) {
        if (Build.VERSION.SDK_INT < 31 || this.scrollableViewNoiseSuppressor == null) {
            return;
        }
        this.invalidateBlurredSourcesView.invalidate(i);
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateMergedVisibleBlurredPositionsAndSourcesImpl(int i) {
        if (Build.VERSION.SDK_INT < 31 || this.scrollableViewNoiseSuppressor == null) {
            return;
        }
        if (BitwiseUtils.hasFlag(i, 2)) {
            int mergedVisibleBlurredPositions = getMergedVisibleBlurredPositions(this.glassDrawablesPositionsMerged);
            this.glassDrawablesPositionsCount = mergedVisibleBlurredPositions;
            this.scrollableViewNoiseSuppressor.setupRenderNodes(this.glassDrawablesPositionsMerged, mergedVisibleBlurredPositions);
        }
        for (int i2 = 0; i2 < this.glassDrawablesPositionsCount; i2++) {
            RectF position = this.scrollableViewNoiseSuppressor.getPosition(i2);
            RecordingCanvas recordingCanvasBeginRecordingRect = this.scrollableViewNoiseSuppressor.beginRecordingRect(i2);
            recordingCanvasBeginRecordingRect.save();
            recordingCanvasBeginRecordingRect.translate(-position.left, -position.top);
            this.contentView.drawList(recordingCanvasBeginRecordingRect, position);
            recordingCanvasBeginRecordingRect.restore();
            this.scrollableViewNoiseSuppressor.endRecordingRect();
        }
        this.scrollableViewNoiseSuppressor.invalidateResultRenderNodes(this.contentView.getWidth(), this.contentView.getHeight());
    }

    private int getMergedVisibleBlurredPositions(List list) {
        int iMergeOverlapping = RectFMergeBounding.mergeOverlapping(this.glassDrawablesPositions, getVisibleBlurredPositions(this.glassDrawablesPositions), list);
        for (int i = 0; i < iMergeOverlapping; i++) {
            RectF rectF = (RectF) list.get(i);
            rectF.left = Math.max(0.0f, rectF.left);
            rectF.top = Math.max(this.chatListView.getY(), rectF.top);
            rectF.right = Math.min(this.contentView.getMeasuredWidth(), rectF.right);
            rectF.bottom = Math.min(this.chatListView.getY() + this.chatListView.getMeasuredHeight(), rectF.bottom);
        }
        return iMergeOverlapping;
    }

    private int getVisibleBlurredPositions(List list) {
        RectF rectF;
        int visiblePositions = 0;
        if (Build.VERSION.SDK_INT < 29) {
            return 0;
        }
        if (this.glassBackgroundSourceFrostedRenderNode != null) {
            int iAlpha = Color.alpha(Theme.getColor(SharedConfig.getDevicePerformanceClass() == 2 ? Theme.key_chat_BlurAlpha : Theme.key_chat_BlurAlphaSlow, getResourceProvider()));
            if (iAlpha == 255 && ExteraConfig.forceBlur) {
                iAlpha = DataTypes.EMPTY;
            }
            if (iAlpha < 255) {
                if (list.isEmpty()) {
                    rectF = new RectF();
                    list.add(rectF);
                } else {
                    rectF = (RectF) list.get(0);
                }
                rectF.set(0.0f, 0.0f, this.contentView.getMeasuredWidth(), this.chatListView.getPaddingTop() + this.chatListView.getY());
                rectF.inset(0.0f, -AndroidUtilities.m1146dp(45.0f));
                visiblePositions = 1;
            }
            visiblePositions += this.glassBackgroundSourceFrostedRenderNode.getVisiblePositions(list, visiblePositions, AndroidUtilities.m1146dp(48.0f));
        }
        BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode = this.glassBackgroundSourceRenderNode;
        if (blurredBackgroundSourceRenderNode != null) {
            visiblePositions += blurredBackgroundSourceRenderNode.getVisiblePositions(list, visiblePositions, AndroidUtilities.m1146dp(8.0f));
        }
        BlurredBackgroundSourceRenderNode blurredBackgroundSourceRenderNode2 = this.navbarContentSourceWallpaperAndMessagesRenderNode;
        return blurredBackgroundSourceRenderNode2 != null ? visiblePositions + blurredBackgroundSourceRenderNode2.getVisiblePositions(list, visiblePositions, AndroidUtilities.m1146dp(48.0f)) : visiblePositions;
    }

    /* JADX INFO: Access modifiers changed from: private */
    public void invalidateClipRectForBackgroundAndChatList() {
        if (this.contentView == null) {
            return;
        }
        int currentActionBarHeight = ActionBar.getCurrentActionBarHeight() + this.windowInsetsStateHolder.getInsets(WindowInsetsCompat.Type.statusBars()).top;
        int iMax = (int) Math.max(0.0f, (this.windowInsetsStateHolder.getAnimatedImeBottomInset() * this.windowInsetsStateHolder.getAnimatedKeyboardVisibility()) - AndroidUtilities.m1146dp(29.0f));
        ChatActivityFragmentView chatActivityFragmentView = this.contentView;
        if (chatActivityFragmentView.backgroundView != null) {
            this.clipBoundsTmp.set(0, currentActionBarHeight, chatActivityFragmentView.getMeasuredWidth(), this.contentView.getMeasuredHeight() - iMax);
            this.contentView.backgroundView.setClipBounds(this.clipBoundsTmp);
        }
        if (this.chatListView != null) {
            this.clipBoundsTmp.set(0, currentActionBarHeight, this.contentView.getMeasuredWidth(), this.contentView.getMeasuredHeight() - iMax);
            this.clipBoundsTmp.offset(0, -this.chatListView.getTop());
            this.chatListView.setClipBounds(this.clipBoundsTmp);
        }
        ChatInputViewsContainer chatInputViewsContainer = this.chatInputViewsContainer;
        if (chatInputViewsContainer == null || chatInputViewsContainer.getFadeView() == null) {
            return;
        }
        this.clipBoundsTmp.set(0, 0, this.contentView.getMeasuredWidth(), this.contentView.getMeasuredHeight() - iMax);
    }

    private abstract class ChatListRecyclerView extends RecyclerListViewInternal {
        abstract void drawChatBackgroundElements(Canvas canvas);

        abstract void drawChatForegroundElements(Canvas canvas);

        public ChatListRecyclerView(Context context, ThemeDelegate themeDelegate) {
            super(context, themeDelegate);
        }
    }
}
